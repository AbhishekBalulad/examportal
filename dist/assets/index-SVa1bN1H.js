var cre=Object.defineProperty;var CR=t=>{throw TypeError(t)};var ure=(t,e,n)=>e in t?cre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ce=(t,e,n)=>ure(t,typeof e!="symbol"?e+"":e,n),D_=(t,e,n)=>e.has(t)||CR("Cannot "+n);var re=(t,e,n)=>(D_(t,e,"read from private field"),n?n.call(t):e.get(t)),$t=(t,e,n)=>e.has(t)?CR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),st=(t,e,n,r)=>(D_(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ar=(t,e,n)=>(D_(t,e,"access private method"),n);var ix=(t,e,n,r)=>({set _(s){st(t,e,s,n)},get _(){return re(t,e,r)}});function kU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dre(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var OU={exports:{}},h1={},$U={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv=Symbol.for("react.element"),fre=Symbol.for("react.portal"),hre=Symbol.for("react.fragment"),pre=Symbol.for("react.strict_mode"),mre=Symbol.for("react.profiler"),gre=Symbol.for("react.provider"),yre=Symbol.for("react.context"),vre=Symbol.for("react.forward_ref"),xre=Symbol.for("react.suspense"),bre=Symbol.for("react.memo"),wre=Symbol.for("react.lazy"),NR=Symbol.iterator;function Sre(t){return t===null||typeof t!="object"?null:(t=NR&&t[NR]||t["@@iterator"],typeof t=="function"?t:null)}var AU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PU=Object.assign,RU={};function ip(t,e,n){this.props=t,this.context=e,this.refs=RU,this.updater=n||AU}ip.prototype.isReactComponent={};ip.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ip.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DU(){}DU.prototype=ip.prototype;function Kk(t,e,n){this.props=t,this.context=e,this.refs=RU,this.updater=n||AU}var Xk=Kk.prototype=new DU;Xk.constructor=Kk;PU(Xk,ip.prototype);Xk.isPureReactComponent=!0;var ER=Array.isArray,jU=Object.prototype.hasOwnProperty,Yk={current:null},MU={key:!0,ref:!0,__self:!0,__source:!0};function LU(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jU.call(e,r)&&!MU.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:rv,type:t,key:i,ref:o,props:s,_owner:Yk.current}}function _re(t,e){return{$$typeof:rv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qk(t){return typeof t=="object"&&t!==null&&t.$$typeof===rv}function Cre(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var TR=/\/+/g;function j_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cre(""+t.key):e.toString(36)}function ob(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rv:case fre:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+j_(o,0):r,ER(s)?(n="",t!=null&&(n=t.replace(TR,"$&/")+"/"),ob(s,e,n,"",function(c){return c})):s!=null&&(Qk(s)&&(s=_re(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(TR,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ER(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+j_(i,a);o+=ob(i,e,n,l,s)}else if(l=Sre(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+j_(i,a++),o+=ob(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ox(t,e,n){if(t==null)return t;var r=[],s=0;return ob(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Nre(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fs={current:null},ab={transition:null},Ere={ReactCurrentDispatcher:fs,ReactCurrentBatchConfig:ab,ReactCurrentOwner:Yk};function FU(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:ox,forEach:function(t,e,n){ox(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ox(t,function(){e++}),e},toArray:function(t){return ox(t,function(e){return e})||[]},only:function(t){if(!Qk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vt.Component=ip;vt.Fragment=hre;vt.Profiler=mre;vt.PureComponent=Kk;vt.StrictMode=pre;vt.Suspense=xre;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ere;vt.act=FU;vt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=PU({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Yk.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)jU.call(e,l)&&!MU.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:rv,type:t.type,key:s,ref:i,props:r,_owner:o}};vt.createContext=function(t){return t={$$typeof:yre,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gre,_context:t},t.Consumer=t};vt.createElement=LU;vt.createFactory=function(t){var e=LU.bind(null,t);return e.type=t,e};vt.createRef=function(){return{current:null}};vt.forwardRef=function(t){return{$$typeof:vre,render:t}};vt.isValidElement=Qk;vt.lazy=function(t){return{$$typeof:wre,_payload:{_status:-1,_result:t},_init:Nre}};vt.memo=function(t,e){return{$$typeof:bre,type:t,compare:e===void 0?null:e}};vt.startTransition=function(t){var e=ab.transition;ab.transition={};try{t()}finally{ab.transition=e}};vt.unstable_act=FU;vt.useCallback=function(t,e){return fs.current.useCallback(t,e)};vt.useContext=function(t){return fs.current.useContext(t)};vt.useDebugValue=function(){};vt.useDeferredValue=function(t){return fs.current.useDeferredValue(t)};vt.useEffect=function(t,e){return fs.current.useEffect(t,e)};vt.useId=function(){return fs.current.useId()};vt.useImperativeHandle=function(t,e,n){return fs.current.useImperativeHandle(t,e,n)};vt.useInsertionEffect=function(t,e){return fs.current.useInsertionEffect(t,e)};vt.useLayoutEffect=function(t,e){return fs.current.useLayoutEffect(t,e)};vt.useMemo=function(t,e){return fs.current.useMemo(t,e)};vt.useReducer=function(t,e,n){return fs.current.useReducer(t,e,n)};vt.useRef=function(t){return fs.current.useRef(t)};vt.useState=function(t){return fs.current.useState(t)};vt.useSyncExternalStore=function(t,e,n){return fs.current.useSyncExternalStore(t,e,n)};vt.useTransition=function(){return fs.current.useTransition()};vt.version="18.3.1";$U.exports=vt;var S=$U.exports;const j=Tt(S),BU=kU({__proto__:null,default:j},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tre=S,Ire=Symbol.for("react.element"),kre=Symbol.for("react.fragment"),Ore=Object.prototype.hasOwnProperty,$re=Tre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Are={key:!0,ref:!0,__self:!0,__source:!0};function UU(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ore.call(e,r)&&!Are.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Ire,type:t,key:i,ref:o,props:s,_owner:$re.current}}h1.Fragment=kre;h1.jsx=UU;h1.jsxs=UU;OU.exports=h1;var h=OU.exports,WU={exports:{}},ri={},zU={exports:{}},VU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,W){var q=P.length;P.push(W);e:for(;0<q;){var H=q-1>>>1,Y=P[H];if(0<s(Y,W))P[H]=W,P[q]=Y,q=H;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var W=P[0],q=P.pop();if(q!==W){P[0]=q;e:for(var H=0,Y=P.length,se=Y>>>1;H<se;){var Se=2*(H+1)-1,De=P[Se],Pe=Se+1,de=P[Pe];if(0>s(De,q))Pe<Y&&0>s(de,De)?(P[H]=de,P[Pe]=q,H=Pe):(P[H]=De,P[Se]=q,H=Se);else if(Pe<Y&&0>s(de,q))P[H]=de,P[Pe]=q,H=Pe;else break e}}return W}function s(P,W){var q=P.sortIndex-W.sortIndex;return q!==0?q:P.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=P)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function w(P){if(g=!1,b(P),!m)if(n(l)!==null)m=!0,F(_);else{var W=n(c);W!==null&&L(w,W.startTime-P)}}function _(P,W){m=!1,g&&(g=!1,v(N),N=-1),p=!0;var q=f;try{for(b(W),d=n(l);d!==null&&(!(d.expirationTime>W)||P&&!O());){var H=d.callback;if(typeof H=="function"){d.callback=null,f=d.priorityLevel;var Y=H(d.expirationTime<=W);W=t.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(l)&&r(l),b(W)}else r(l);d=n(l)}if(d!==null)var se=!0;else{var Se=n(c);Se!==null&&L(w,Se.startTime-W),se=!1}return se}finally{d=null,f=q,p=!1}}var C=!1,E=null,N=-1,I=5,$=-1;function O(){return!(t.unstable_now()-$<I)}function k(){if(E!==null){var P=t.unstable_now();$=P;var W=!0;try{W=E(!0,P)}finally{W?R():(C=!1,E=null)}}else C=!1}var R;if(typeof x=="function")R=function(){x(k)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,B=M.port2;M.port1.onmessage=k,R=function(){B.postMessage(null)}}else R=function(){y(k,0)};function F(P){E=P,C||(C=!0,R())}function L(P,W){N=y(function(){P(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,F(_))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var q=f;f=W;try{return P()}finally{f=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,W){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var q=f;f=P;try{return W()}finally{f=q}},t.unstable_scheduleCallback=function(P,W,q){var H=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?H+q:H):q=H,P){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=q+Y,P={id:u++,callback:W,priorityLevel:P,startTime:q,expirationTime:Y,sortIndex:-1},q>H?(P.sortIndex=q,e(c,P),n(l)===null&&P===n(c)&&(g?(v(N),N=-1):g=!0,L(w,q-H))):(P.sortIndex=Y,e(l,P),m||p||(m=!0,F(_))),P},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(P){var W=f;return function(){var q=f;f=W;try{return P.apply(this,arguments)}finally{f=q}}}})(VU);zU.exports=VU;var Pre=zU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rre=S,ei=Pre;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HU=new Set,bg={};function Td(t,e){dh(t,e),dh(t+"Capture",e)}function dh(t,e){for(bg[t]=e,t=0;t<e.length;t++)HU.add(e[t])}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),DN=Object.prototype.hasOwnProperty,Dre=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,IR={},kR={};function jre(t){return DN.call(kR,t)?!0:DN.call(IR,t)?!1:Dre.test(t)?kR[t]=!0:(IR[t]=!0,!1)}function Mre(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Lre(t,e,n,r){if(e===null||typeof e>"u"||Mre(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hs(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Or[t]=new hs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Or[e]=new hs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Or[t]=new hs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Or[t]=new hs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Or[t]=new hs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Or[t]=new hs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Or[t]=new hs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Or[t]=new hs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Or[t]=new hs(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jk=/[\-:]([a-z])/g;function Zk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jk,Zk);Or[e]=new hs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jk,Zk);Or[e]=new hs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jk,Zk);Or[e]=new hs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Or[t]=new hs(t,1,!1,t.toLowerCase(),null,!1,!1)});Or.xlinkHref=new hs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Or[t]=new hs(t,1,!1,t.toLowerCase(),null,!0,!0)});function eO(t,e,n,r){var s=Or.hasOwnProperty(e)?Or[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Lre(e,n,s,r)&&(n=null),r||s===null?jre(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fl=Rre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ax=Symbol.for("react.element"),pf=Symbol.for("react.portal"),mf=Symbol.for("react.fragment"),tO=Symbol.for("react.strict_mode"),jN=Symbol.for("react.profiler"),GU=Symbol.for("react.provider"),qU=Symbol.for("react.context"),nO=Symbol.for("react.forward_ref"),MN=Symbol.for("react.suspense"),LN=Symbol.for("react.suspense_list"),rO=Symbol.for("react.memo"),Al=Symbol.for("react.lazy"),KU=Symbol.for("react.offscreen"),OR=Symbol.iterator;function rm(t){return t===null||typeof t!="object"?null:(t=OR&&t[OR]||t["@@iterator"],typeof t=="function"?t:null)}var Cn=Object.assign,M_;function Rm(t){if(M_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);M_=e&&e[1]||""}return`
`+M_+t}var L_=!1;function F_(t,e){if(!t||L_)return"";L_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{L_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rm(t):""}function Fre(t){switch(t.tag){case 5:return Rm(t.type);case 16:return Rm("Lazy");case 13:return Rm("Suspense");case 19:return Rm("SuspenseList");case 0:case 2:case 15:return t=F_(t.type,!1),t;case 11:return t=F_(t.type.render,!1),t;case 1:return t=F_(t.type,!0),t;default:return""}}function FN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mf:return"Fragment";case pf:return"Portal";case jN:return"Profiler";case tO:return"StrictMode";case MN:return"Suspense";case LN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qU:return(t.displayName||"Context")+".Consumer";case GU:return(t._context.displayName||"Context")+".Provider";case nO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rO:return e=t.displayName||null,e!==null?e:FN(t.type)||"Memo";case Al:e=t._payload,t=t._init;try{return FN(t(e))}catch{}}return null}function Bre(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return FN(e);case 8:return e===tO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function XU(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ure(t){var e=XU(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lx(t){t._valueTracker||(t._valueTracker=Ure(t))}function YU(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=XU(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Db(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function BN(t,e){var n=e.checked;return Cn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $R(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QU(t,e){e=e.checked,e!=null&&eO(t,"checked",e,!1)}function UN(t,e){QU(t,e);var n=Sc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?WN(t,e.type,n):e.hasOwnProperty("defaultValue")&&WN(t,e.type,Sc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function AR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function WN(t,e,n){(e!=="number"||Db(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dm=Array.isArray;function Pf(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sc(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function zN(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Cn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function PR(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Dm(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sc(n)}}function JU(t,e){var n=Sc(e.value),r=Sc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function RR(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZU(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function VN(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZU(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cx,eW=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cx=cx||document.createElement("div"),cx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wg(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wre=["Webkit","ms","Moz","O"];Object.keys(qm).forEach(function(t){Wre.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qm[e]=qm[t]})});function tW(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qm.hasOwnProperty(t)&&qm[t]?(""+e).trim():e+"px"}function nW(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=tW(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var zre=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function HN(t,e){if(e){if(zre[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function GN(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qN=null;function sO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var KN=null,Rf=null,Df=null;function DR(t){if(t=ov(t)){if(typeof KN!="function")throw Error(le(280));var e=t.stateNode;e&&(e=v1(e),KN(t.stateNode,t.type,e))}}function rW(t){Rf?Df?Df.push(t):Df=[t]:Rf=t}function sW(){if(Rf){var t=Rf,e=Df;if(Df=Rf=null,DR(t),e)for(t=0;t<e.length;t++)DR(e[t])}}function iW(t,e){return t(e)}function oW(){}var B_=!1;function aW(t,e,n){if(B_)return t(e,n);B_=!0;try{return iW(t,e,n)}finally{B_=!1,(Rf!==null||Df!==null)&&(oW(),sW())}}function Sg(t,e){var n=t.stateNode;if(n===null)return null;var r=v1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var XN=!1;if(Ka)try{var sm={};Object.defineProperty(sm,"passive",{get:function(){XN=!0}}),window.addEventListener("test",sm,sm),window.removeEventListener("test",sm,sm)}catch{XN=!1}function Vre(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Km=!1,jb=null,Mb=!1,YN=null,Hre={onError:function(t){Km=!0,jb=t}};function Gre(t,e,n,r,s,i,o,a,l){Km=!1,jb=null,Vre.apply(Hre,arguments)}function qre(t,e,n,r,s,i,o,a,l){if(Gre.apply(this,arguments),Km){if(Km){var c=jb;Km=!1,jb=null}else throw Error(le(198));Mb||(Mb=!0,YN=c)}}function Id(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jR(t){if(Id(t)!==t)throw Error(le(188))}function Kre(t){var e=t.alternate;if(!e){if(e=Id(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return jR(s),t;if(i===r)return jR(s),e;i=i.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function cW(t){return t=Kre(t),t!==null?uW(t):null}function uW(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uW(t);if(e!==null)return e;t=t.sibling}return null}var dW=ei.unstable_scheduleCallback,MR=ei.unstable_cancelCallback,Xre=ei.unstable_shouldYield,Yre=ei.unstable_requestPaint,Pn=ei.unstable_now,Qre=ei.unstable_getCurrentPriorityLevel,iO=ei.unstable_ImmediatePriority,fW=ei.unstable_UserBlockingPriority,Lb=ei.unstable_NormalPriority,Jre=ei.unstable_LowPriority,hW=ei.unstable_IdlePriority,p1=null,Ho=null;function Zre(t){if(Ho&&typeof Ho.onCommitFiberRoot=="function")try{Ho.onCommitFiberRoot(p1,t,void 0,(t.current.flags&128)===128)}catch{}}var uo=Math.clz32?Math.clz32:nse,ese=Math.log,tse=Math.LN2;function nse(t){return t>>>=0,t===0?32:31-(ese(t)/tse|0)|0}var ux=64,dx=4194304;function jm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fb(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=jm(a):(i&=o,i!==0&&(r=jm(i)))}else o=n&~s,o!==0?r=jm(o):i!==0&&(r=jm(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-uo(e),s=1<<n,r|=t[n],e&=~s;return r}function rse(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sse(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-uo(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=rse(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function QN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pW(){var t=ux;return ux<<=1,!(ux&4194240)&&(ux=64),t}function U_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-uo(e),t[e]=n}function ise(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-uo(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function oO(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-uo(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var jt=0;function mW(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gW,aO,yW,vW,xW,JN=!1,fx=[],tc=null,nc=null,rc=null,_g=new Map,Cg=new Map,Ml=[],ose="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function LR(t,e){switch(t){case"focusin":case"focusout":tc=null;break;case"dragenter":case"dragleave":nc=null;break;case"mouseover":case"mouseout":rc=null;break;case"pointerover":case"pointerout":_g.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cg.delete(e.pointerId)}}function im(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ov(e),e!==null&&aO(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ase(t,e,n,r,s){switch(e){case"focusin":return tc=im(tc,t,e,n,r,s),!0;case"dragenter":return nc=im(nc,t,e,n,r,s),!0;case"mouseover":return rc=im(rc,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _g.set(i,im(_g.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Cg.set(i,im(Cg.get(i)||null,t,e,n,r,s)),!0}return!1}function bW(t){var e=bu(t.target);if(e!==null){var n=Id(e);if(n!==null){if(e=n.tag,e===13){if(e=lW(n),e!==null){t.blockedOn=e,xW(t.priority,function(){yW(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ZN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qN=r,n.target.dispatchEvent(r),qN=null}else return e=ov(n),e!==null&&aO(e),t.blockedOn=n,!1;e.shift()}return!0}function FR(t,e,n){lb(t)&&n.delete(e)}function lse(){JN=!1,tc!==null&&lb(tc)&&(tc=null),nc!==null&&lb(nc)&&(nc=null),rc!==null&&lb(rc)&&(rc=null),_g.forEach(FR),Cg.forEach(FR)}function om(t,e){t.blockedOn===e&&(t.blockedOn=null,JN||(JN=!0,ei.unstable_scheduleCallback(ei.unstable_NormalPriority,lse)))}function Ng(t){function e(s){return om(s,t)}if(0<fx.length){om(fx[0],t);for(var n=1;n<fx.length;n++){var r=fx[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tc!==null&&om(tc,t),nc!==null&&om(nc,t),rc!==null&&om(rc,t),_g.forEach(e),Cg.forEach(e),n=0;n<Ml.length;n++)r=Ml[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ml.length&&(n=Ml[0],n.blockedOn===null);)bW(n),n.blockedOn===null&&Ml.shift()}var jf=fl.ReactCurrentBatchConfig,Bb=!0;function cse(t,e,n,r){var s=jt,i=jf.transition;jf.transition=null;try{jt=1,lO(t,e,n,r)}finally{jt=s,jf.transition=i}}function use(t,e,n,r){var s=jt,i=jf.transition;jf.transition=null;try{jt=4,lO(t,e,n,r)}finally{jt=s,jf.transition=i}}function lO(t,e,n,r){if(Bb){var s=ZN(t,e,n,r);if(s===null)Q_(t,e,r,Ub,n),LR(t,r);else if(ase(s,t,e,n,r))r.stopPropagation();else if(LR(t,r),e&4&&-1<ose.indexOf(t)){for(;s!==null;){var i=ov(s);if(i!==null&&gW(i),i=ZN(t,e,n,r),i===null&&Q_(t,e,r,Ub,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Q_(t,e,r,null,n)}}var Ub=null;function ZN(t,e,n,r){if(Ub=null,t=sO(r),t=bu(t),t!==null)if(e=Id(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lW(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ub=t,null}function wW(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qre()){case iO:return 1;case fW:return 4;case Lb:case Jre:return 16;case hW:return 536870912;default:return 16}default:return 16}}var Xl=null,cO=null,cb=null;function SW(){if(cb)return cb;var t,e=cO,n=e.length,r,s="value"in Xl?Xl.value:Xl.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cb=s.slice(t,1<r?1-r:void 0)}function ub(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hx(){return!0}function BR(){return!1}function si(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hx:BR,this.isPropagationStopped=BR,this}return Cn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hx)},persist:function(){},isPersistent:hx}),e}var op={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uO=si(op),iv=Cn({},op,{view:0,detail:0}),dse=si(iv),W_,z_,am,m1=Cn({},iv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==am&&(am&&t.type==="mousemove"?(W_=t.screenX-am.screenX,z_=t.screenY-am.screenY):z_=W_=0,am=t),W_)},movementY:function(t){return"movementY"in t?t.movementY:z_}}),UR=si(m1),fse=Cn({},m1,{dataTransfer:0}),hse=si(fse),pse=Cn({},iv,{relatedTarget:0}),V_=si(pse),mse=Cn({},op,{animationName:0,elapsedTime:0,pseudoElement:0}),gse=si(mse),yse=Cn({},op,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vse=si(yse),xse=Cn({},op,{data:0}),WR=si(xse),bse={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wse={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sse={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _se(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sse[t])?!!e[t]:!1}function dO(){return _se}var Cse=Cn({},iv,{key:function(t){if(t.key){var e=bse[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ub(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wse[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dO,charCode:function(t){return t.type==="keypress"?ub(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ub(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nse=si(Cse),Ese=Cn({},m1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zR=si(Ese),Tse=Cn({},iv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dO}),Ise=si(Tse),kse=Cn({},op,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ose=si(kse),$se=Cn({},m1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ase=si($se),Pse=[9,13,27,32],fO=Ka&&"CompositionEvent"in window,Xm=null;Ka&&"documentMode"in document&&(Xm=document.documentMode);var Rse=Ka&&"TextEvent"in window&&!Xm,_W=Ka&&(!fO||Xm&&8<Xm&&11>=Xm),VR=" ",HR=!1;function CW(t,e){switch(t){case"keyup":return Pse.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NW(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gf=!1;function Dse(t,e){switch(t){case"compositionend":return NW(e);case"keypress":return e.which!==32?null:(HR=!0,VR);case"textInput":return t=e.data,t===VR&&HR?null:t;default:return null}}function jse(t,e){if(gf)return t==="compositionend"||!fO&&CW(t,e)?(t=SW(),cb=cO=Xl=null,gf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _W&&e.locale!=="ko"?null:e.data;default:return null}}var Mse={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Mse[t.type]:e==="textarea"}function EW(t,e,n,r){rW(r),e=Wb(e,"onChange"),0<e.length&&(n=new uO("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ym=null,Eg=null;function Lse(t){MW(t,0)}function g1(t){var e=xf(t);if(YU(e))return t}function Fse(t,e){if(t==="change")return e}var TW=!1;if(Ka){var H_;if(Ka){var G_="oninput"in document;if(!G_){var qR=document.createElement("div");qR.setAttribute("oninput","return;"),G_=typeof qR.oninput=="function"}H_=G_}else H_=!1;TW=H_&&(!document.documentMode||9<document.documentMode)}function KR(){Ym&&(Ym.detachEvent("onpropertychange",IW),Eg=Ym=null)}function IW(t){if(t.propertyName==="value"&&g1(Eg)){var e=[];EW(e,Eg,t,sO(t)),aW(Lse,e)}}function Bse(t,e,n){t==="focusin"?(KR(),Ym=e,Eg=n,Ym.attachEvent("onpropertychange",IW)):t==="focusout"&&KR()}function Use(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return g1(Eg)}function Wse(t,e){if(t==="click")return g1(e)}function zse(t,e){if(t==="input"||t==="change")return g1(e)}function Vse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vo=typeof Object.is=="function"?Object.is:Vse;function Tg(t,e){if(vo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!DN.call(e,s)||!vo(t[s],e[s]))return!1}return!0}function XR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function YR(t,e){var n=XR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=XR(n)}}function kW(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kW(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OW(){for(var t=window,e=Db();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Db(t.document)}return e}function hO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Hse(t){var e=OW(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kW(n.ownerDocument.documentElement,n)){if(r!==null&&hO(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=YR(n,i);var o=YR(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gse=Ka&&"documentMode"in document&&11>=document.documentMode,yf=null,eE=null,Qm=null,tE=!1;function QR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tE||yf==null||yf!==Db(r)||(r=yf,"selectionStart"in r&&hO(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qm&&Tg(Qm,r)||(Qm=r,r=Wb(eE,"onSelect"),0<r.length&&(e=new uO("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yf)))}function px(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vf={animationend:px("Animation","AnimationEnd"),animationiteration:px("Animation","AnimationIteration"),animationstart:px("Animation","AnimationStart"),transitionend:px("Transition","TransitionEnd")},q_={},$W={};Ka&&($W=document.createElement("div").style,"AnimationEvent"in window||(delete vf.animationend.animation,delete vf.animationiteration.animation,delete vf.animationstart.animation),"TransitionEvent"in window||delete vf.transitionend.transition);function y1(t){if(q_[t])return q_[t];if(!vf[t])return t;var e=vf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $W)return q_[t]=e[n];return t}var AW=y1("animationend"),PW=y1("animationiteration"),RW=y1("animationstart"),DW=y1("transitionend"),jW=new Map,JR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mc(t,e){jW.set(t,e),Td(e,[t])}for(var K_=0;K_<JR.length;K_++){var X_=JR[K_],qse=X_.toLowerCase(),Kse=X_[0].toUpperCase()+X_.slice(1);Mc(qse,"on"+Kse)}Mc(AW,"onAnimationEnd");Mc(PW,"onAnimationIteration");Mc(RW,"onAnimationStart");Mc("dblclick","onDoubleClick");Mc("focusin","onFocus");Mc("focusout","onBlur");Mc(DW,"onTransitionEnd");dh("onMouseEnter",["mouseout","mouseover"]);dh("onMouseLeave",["mouseout","mouseover"]);dh("onPointerEnter",["pointerout","pointerover"]);dh("onPointerLeave",["pointerout","pointerover"]);Td("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Td("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Td("onBeforeInput",["compositionend","keypress","textInput","paste"]);Td("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Td("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Td("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xse=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mm));function ZR(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qre(r,e,void 0,t),t.currentTarget=null}function MW(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;ZR(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;ZR(s,a,c),i=l}}}if(Mb)throw t=YN,Mb=!1,YN=null,t}function sn(t,e){var n=e[oE];n===void 0&&(n=e[oE]=new Set);var r=t+"__bubble";n.has(r)||(LW(e,t,2,!1),n.add(r))}function Y_(t,e,n){var r=0;e&&(r|=4),LW(n,t,r,e)}var mx="_reactListening"+Math.random().toString(36).slice(2);function Ig(t){if(!t[mx]){t[mx]=!0,HU.forEach(function(n){n!=="selectionchange"&&(Xse.has(n)||Y_(n,!1,t),Y_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mx]||(e[mx]=!0,Y_("selectionchange",!1,e))}}function LW(t,e,n,r){switch(wW(e)){case 1:var s=cse;break;case 4:s=use;break;default:s=lO}n=s.bind(null,e,n,t),s=void 0,!XN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Q_(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=bu(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}aW(function(){var c=i,u=sO(n),d=[];e:{var f=jW.get(t);if(f!==void 0){var p=uO,m=t;switch(t){case"keypress":if(ub(n)===0)break e;case"keydown":case"keyup":p=Nse;break;case"focusin":m="focus",p=V_;break;case"focusout":m="blur",p=V_;break;case"beforeblur":case"afterblur":p=V_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=UR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hse;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ise;break;case AW:case PW:case RW:p=gse;break;case DW:p=Ose;break;case"scroll":p=dse;break;case"wheel":p=Ase;break;case"copy":case"cut":case"paste":p=vse;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=zR}var g=(e&4)!==0,y=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var x=c,b;x!==null;){b=x;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,v!==null&&(w=Sg(x,v),w!=null&&g.push(kg(x,w,b)))),y)break;x=x.return}0<g.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==qN&&(m=n.relatedTarget||n.fromElement)&&(bu(m)||m[Xa]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?bu(m):null,m!==null&&(y=Id(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=UR,w="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=zR,w="onPointerLeave",v="onPointerEnter",x="pointer"),y=p==null?f:xf(p),b=m==null?f:xf(m),f=new g(w,x+"leave",p,n,u),f.target=y,f.relatedTarget=b,w=null,bu(u)===c&&(g=new g(v,x+"enter",m,n,u),g.target=b,g.relatedTarget=y,w=g),y=w,p&&m)t:{for(g=p,v=m,x=0,b=g;b;b=Kd(b))x++;for(b=0,w=v;w;w=Kd(w))b++;for(;0<x-b;)g=Kd(g),x--;for(;0<b-x;)v=Kd(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=Kd(g),v=Kd(v)}g=null}else g=null;p!==null&&eD(d,f,p,g,!1),m!==null&&y!==null&&eD(d,y,m,g,!0)}}e:{if(f=c?xf(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=Fse;else if(GR(f))if(TW)_=zse;else{_=Use;var C=Bse}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Wse);if(_&&(_=_(t,c))){EW(d,_,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&WN(f,"number",f.value)}switch(C=c?xf(c):window,t){case"focusin":(GR(C)||C.contentEditable==="true")&&(yf=C,eE=c,Qm=null);break;case"focusout":Qm=eE=yf=null;break;case"mousedown":tE=!0;break;case"contextmenu":case"mouseup":case"dragend":tE=!1,QR(d,n,u);break;case"selectionchange":if(Gse)break;case"keydown":case"keyup":QR(d,n,u)}var E;if(fO)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else gf?CW(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(_W&&n.locale!=="ko"&&(gf||N!=="onCompositionStart"?N==="onCompositionEnd"&&gf&&(E=SW()):(Xl=u,cO="value"in Xl?Xl.value:Xl.textContent,gf=!0)),C=Wb(c,N),0<C.length&&(N=new WR(N,t,null,n,u),d.push({event:N,listeners:C}),E?N.data=E:(E=NW(n),E!==null&&(N.data=E)))),(E=Rse?Dse(t,n):jse(t,n))&&(c=Wb(c,"onBeforeInput"),0<c.length&&(u=new WR("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}MW(d,e)})}function kg(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wb(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sg(t,n),i!=null&&r.unshift(kg(t,i,s)),i=Sg(t,e),i!=null&&r.push(kg(t,i,s))),t=t.return}return r}function Kd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eD(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Sg(n,i),l!=null&&o.unshift(kg(n,l,a))):s||(l=Sg(n,i),l!=null&&o.push(kg(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Yse=/\r\n?/g,Qse=/\u0000|\uFFFD/g;function tD(t){return(typeof t=="string"?t:""+t).replace(Yse,`
`).replace(Qse,"")}function gx(t,e,n){if(e=tD(e),tD(t)!==e&&n)throw Error(le(425))}function zb(){}var nE=null,rE=null;function sE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var iE=typeof setTimeout=="function"?setTimeout:void 0,Jse=typeof clearTimeout=="function"?clearTimeout:void 0,nD=typeof Promise=="function"?Promise:void 0,Zse=typeof queueMicrotask=="function"?queueMicrotask:typeof nD<"u"?function(t){return nD.resolve(null).then(t).catch(eie)}:iE;function eie(t){setTimeout(function(){throw t})}function J_(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ng(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ng(e)}function sc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ap=Math.random().toString(36).slice(2),Mo="__reactFiber$"+ap,Og="__reactProps$"+ap,Xa="__reactContainer$"+ap,oE="__reactEvents$"+ap,tie="__reactListeners$"+ap,nie="__reactHandles$"+ap;function bu(t){var e=t[Mo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xa]||n[Mo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rD(t);t!==null;){if(n=t[Mo])return n;t=rD(t)}return e}t=n,n=t.parentNode}return null}function ov(t){return t=t[Mo]||t[Xa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function v1(t){return t[Og]||null}var aE=[],bf=-1;function Lc(t){return{current:t}}function un(t){0>bf||(t.current=aE[bf],aE[bf]=null,bf--)}function Qt(t,e){bf++,aE[bf]=t.current,t.current=e}var _c={},Hr=Lc(_c),Cs=Lc(!1),qu=_c;function fh(t,e){var n=t.type.contextTypes;if(!n)return _c;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ns(t){return t=t.childContextTypes,t!=null}function Vb(){un(Cs),un(Hr)}function sD(t,e,n){if(Hr.current!==_c)throw Error(le(168));Qt(Hr,e),Qt(Cs,n)}function FW(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,Bre(t)||"Unknown",s));return Cn({},n,r)}function Hb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_c,qu=Hr.current,Qt(Hr,t),Qt(Cs,Cs.current),!0}function iD(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=FW(t,e,qu),r.__reactInternalMemoizedMergedChildContext=t,un(Cs),un(Hr),Qt(Hr,t)):un(Cs),Qt(Cs,n)}var Ca=null,x1=!1,Z_=!1;function BW(t){Ca===null?Ca=[t]:Ca.push(t)}function rie(t){x1=!0,BW(t)}function Fc(){if(!Z_&&Ca!==null){Z_=!0;var t=0,e=jt;try{var n=Ca;for(jt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ca=null,x1=!1}catch(s){throw Ca!==null&&(Ca=Ca.slice(t+1)),dW(iO,Fc),s}finally{jt=e,Z_=!1}}return null}var wf=[],Sf=0,Gb=null,qb=0,yi=[],vi=0,Ku=null,ka=1,Oa="";function ou(t,e){wf[Sf++]=qb,wf[Sf++]=Gb,Gb=t,qb=e}function UW(t,e,n){yi[vi++]=ka,yi[vi++]=Oa,yi[vi++]=Ku,Ku=t;var r=ka;t=Oa;var s=32-uo(r)-1;r&=~(1<<s),n+=1;var i=32-uo(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ka=1<<32-uo(e)+s|n<<s|r,Oa=i+t}else ka=1<<i|n<<s|r,Oa=t}function pO(t){t.return!==null&&(ou(t,1),UW(t,1,0))}function mO(t){for(;t===Gb;)Gb=wf[--Sf],wf[Sf]=null,qb=wf[--Sf],wf[Sf]=null;for(;t===Ku;)Ku=yi[--vi],yi[vi]=null,Oa=yi[--vi],yi[vi]=null,ka=yi[--vi],yi[vi]=null}var Ks=null,Gs=null,pn=!1,Zi=null;function WW(t,e){var n=bi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function oD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ks=t,Gs=sc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ks=t,Gs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ku!==null?{id:ka,overflow:Oa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ks=t,Gs=null,!0):!1;default:return!1}}function lE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cE(t){if(pn){var e=Gs;if(e){var n=e;if(!oD(t,e)){if(lE(t))throw Error(le(418));e=sc(n.nextSibling);var r=Ks;e&&oD(t,e)?WW(r,n):(t.flags=t.flags&-4097|2,pn=!1,Ks=t)}}else{if(lE(t))throw Error(le(418));t.flags=t.flags&-4097|2,pn=!1,Ks=t}}}function aD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ks=t}function yx(t){if(t!==Ks)return!1;if(!pn)return aD(t),pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sE(t.type,t.memoizedProps)),e&&(e=Gs)){if(lE(t))throw zW(),Error(le(418));for(;e;)WW(t,e),e=sc(e.nextSibling)}if(aD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gs=sc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gs=null}}else Gs=Ks?sc(t.stateNode.nextSibling):null;return!0}function zW(){for(var t=Gs;t;)t=sc(t.nextSibling)}function hh(){Gs=Ks=null,pn=!1}function gO(t){Zi===null?Zi=[t]:Zi.push(t)}var sie=fl.ReactCurrentBatchConfig;function lm(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function vx(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lD(t){var e=t._init;return e(t._payload)}function VW(t){function e(v,x){if(t){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=lc(v,x),v.index=0,v.sibling=null,v}function i(v,x,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,x,b,w){return x===null||x.tag!==6?(x=oC(b,v.mode,w),x.return=v,x):(x=s(x,b),x.return=v,x)}function l(v,x,b,w){var _=b.type;return _===mf?u(v,x,b.props.children,w,b.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Al&&lD(_)===x.type)?(w=s(x,b.props),w.ref=lm(v,x,b),w.return=v,w):(w=yb(b.type,b.key,b.props,null,v.mode,w),w.ref=lm(v,x,b),w.return=v,w)}function c(v,x,b,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=aC(b,v.mode,w),x.return=v,x):(x=s(x,b.children||[]),x.return=v,x)}function u(v,x,b,w,_){return x===null||x.tag!==7?(x=Mu(b,v.mode,w,_),x.return=v,x):(x=s(x,b),x.return=v,x)}function d(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=oC(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ax:return b=yb(x.type,x.key,x.props,null,v.mode,b),b.ref=lm(v,null,x),b.return=v,b;case pf:return x=aC(x,v.mode,b),x.return=v,x;case Al:var w=x._init;return d(v,w(x._payload),b)}if(Dm(x)||rm(x))return x=Mu(x,v.mode,b,null),x.return=v,x;vx(v,x)}return null}function f(v,x,b,w){var _=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(v,x,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ax:return b.key===_?l(v,x,b,w):null;case pf:return b.key===_?c(v,x,b,w):null;case Al:return _=b._init,f(v,x,_(b._payload),w)}if(Dm(b)||rm(b))return _!==null?null:u(v,x,b,w,null);vx(v,b)}return null}function p(v,x,b,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(b)||null,a(x,v,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ax:return v=v.get(w.key===null?b:w.key)||null,l(x,v,w,_);case pf:return v=v.get(w.key===null?b:w.key)||null,c(x,v,w,_);case Al:var C=w._init;return p(v,x,b,C(w._payload),_)}if(Dm(w)||rm(w))return v=v.get(b)||null,u(x,v,w,_,null);vx(x,w)}return null}function m(v,x,b,w){for(var _=null,C=null,E=x,N=x=0,I=null;E!==null&&N<b.length;N++){E.index>N?(I=E,E=null):I=E.sibling;var $=f(v,E,b[N],w);if($===null){E===null&&(E=I);break}t&&E&&$.alternate===null&&e(v,E),x=i($,x,N),C===null?_=$:C.sibling=$,C=$,E=I}if(N===b.length)return n(v,E),pn&&ou(v,N),_;if(E===null){for(;N<b.length;N++)E=d(v,b[N],w),E!==null&&(x=i(E,x,N),C===null?_=E:C.sibling=E,C=E);return pn&&ou(v,N),_}for(E=r(v,E);N<b.length;N++)I=p(E,v,N,b[N],w),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?N:I.key),x=i(I,x,N),C===null?_=I:C.sibling=I,C=I);return t&&E.forEach(function(O){return e(v,O)}),pn&&ou(v,N),_}function g(v,x,b,w){var _=rm(b);if(typeof _!="function")throw Error(le(150));if(b=_.call(b),b==null)throw Error(le(151));for(var C=_=null,E=x,N=x=0,I=null,$=b.next();E!==null&&!$.done;N++,$=b.next()){E.index>N?(I=E,E=null):I=E.sibling;var O=f(v,E,$.value,w);if(O===null){E===null&&(E=I);break}t&&E&&O.alternate===null&&e(v,E),x=i(O,x,N),C===null?_=O:C.sibling=O,C=O,E=I}if($.done)return n(v,E),pn&&ou(v,N),_;if(E===null){for(;!$.done;N++,$=b.next())$=d(v,$.value,w),$!==null&&(x=i($,x,N),C===null?_=$:C.sibling=$,C=$);return pn&&ou(v,N),_}for(E=r(v,E);!$.done;N++,$=b.next())$=p(E,v,N,$.value,w),$!==null&&(t&&$.alternate!==null&&E.delete($.key===null?N:$.key),x=i($,x,N),C===null?_=$:C.sibling=$,C=$);return t&&E.forEach(function(k){return e(v,k)}),pn&&ou(v,N),_}function y(v,x,b,w){if(typeof b=="object"&&b!==null&&b.type===mf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ax:e:{for(var _=b.key,C=x;C!==null;){if(C.key===_){if(_=b.type,_===mf){if(C.tag===7){n(v,C.sibling),x=s(C,b.props.children),x.return=v,v=x;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Al&&lD(_)===C.type){n(v,C.sibling),x=s(C,b.props),x.ref=lm(v,C,b),x.return=v,v=x;break e}n(v,C);break}else e(v,C);C=C.sibling}b.type===mf?(x=Mu(b.props.children,v.mode,w,b.key),x.return=v,v=x):(w=yb(b.type,b.key,b.props,null,v.mode,w),w.ref=lm(v,x,b),w.return=v,v=w)}return o(v);case pf:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),x=s(x,b.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=aC(b,v.mode,w),x.return=v,v=x}return o(v);case Al:return C=b._init,y(v,x,C(b._payload),w)}if(Dm(b))return m(v,x,b,w);if(rm(b))return g(v,x,b,w);vx(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,b),x.return=v,v=x):(n(v,x),x=oC(b,v.mode,w),x.return=v,v=x),o(v)):n(v,x)}return y}var ph=VW(!0),HW=VW(!1),Kb=Lc(null),Xb=null,_f=null,yO=null;function vO(){yO=_f=Xb=null}function xO(t){var e=Kb.current;un(Kb),t._currentValue=e}function uE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Mf(t,e){Xb=t,yO=_f=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bs=!0),t.firstContext=null)}function Ii(t){var e=t._currentValue;if(yO!==t)if(t={context:t,memoizedValue:e,next:null},_f===null){if(Xb===null)throw Error(le(308));_f=t,Xb.dependencies={lanes:0,firstContext:t}}else _f=_f.next=t;return e}var wu=null;function bO(t){wu===null?wu=[t]:wu.push(t)}function GW(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bO(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ya(t,r)}function Ya(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pl=!1;function wO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qW(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function La(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ic(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,St&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ya(t,n)}return s=r.interleaved,s===null?(e.next=e,bO(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ya(t,n)}function db(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oO(t,n)}}function cD(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yb(t,e,n,r){var s=t.updateQueue;Pl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Cn({},d,f);break e;case 2:Pl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yu|=o,t.lanes=o,t.memoizedState=d}}function uD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var av={},Go=Lc(av),$g=Lc(av),Ag=Lc(av);function Su(t){if(t===av)throw Error(le(174));return t}function SO(t,e){switch(Qt(Ag,e),Qt($g,t),Qt(Go,av),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:VN(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=VN(e,t)}un(Go),Qt(Go,e)}function mh(){un(Go),un($g),un(Ag)}function KW(t){Su(Ag.current);var e=Su(Go.current),n=VN(e,t.type);e!==n&&(Qt($g,t),Qt(Go,n))}function _O(t){$g.current===t&&(un(Go),un($g))}var xn=Lc(0);function Qb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eC=[];function CO(){for(var t=0;t<eC.length;t++)eC[t]._workInProgressVersionPrimary=null;eC.length=0}var fb=fl.ReactCurrentDispatcher,tC=fl.ReactCurrentBatchConfig,Xu=0,_n=null,Vn=null,or=null,Jb=!1,Jm=!1,Pg=0,iie=0;function Pr(){throw Error(le(321))}function NO(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vo(t[n],e[n]))return!1;return!0}function EO(t,e,n,r,s,i){if(Xu=i,_n=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fb.current=t===null||t.memoizedState===null?cie:uie,t=n(r,s),Jm){i=0;do{if(Jm=!1,Pg=0,25<=i)throw Error(le(301));i+=1,or=Vn=null,e.updateQueue=null,fb.current=die,t=n(r,s)}while(Jm)}if(fb.current=Zb,e=Vn!==null&&Vn.next!==null,Xu=0,or=Vn=_n=null,Jb=!1,e)throw Error(le(300));return t}function TO(){var t=Pg!==0;return Pg=0,t}function Po(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?_n.memoizedState=or=t:or=or.next=t,or}function ki(){if(Vn===null){var t=_n.alternate;t=t!==null?t.memoizedState:null}else t=Vn.next;var e=or===null?_n.memoizedState:or.next;if(e!==null)or=e,Vn=t;else{if(t===null)throw Error(le(310));Vn=t,t={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},or===null?_n.memoizedState=or=t:or=or.next=t}return or}function Rg(t,e){return typeof e=="function"?e(t):e}function nC(t){var e=ki(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=Vn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Xu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,_n.lanes|=u,Yu|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,vo(r,e.memoizedState)||(bs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_n.lanes|=i,Yu|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rC(t){var e=ki(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vo(i,e.memoizedState)||(bs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function XW(){}function YW(t,e){var n=_n,r=ki(),s=e(),i=!vo(r.memoizedState,s);if(i&&(r.memoizedState=s,bs=!0),r=r.queue,IO(ZW.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||or!==null&&or.memoizedState.tag&1){if(n.flags|=2048,Dg(9,JW.bind(null,n,r,s,e),void 0,null),fr===null)throw Error(le(349));Xu&30||QW(n,e,s)}return s}function QW(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_n.updateQueue,e===null?(e={lastEffect:null,stores:null},_n.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function JW(t,e,n,r){e.value=n,e.getSnapshot=r,ez(e)&&tz(t)}function ZW(t,e,n){return n(function(){ez(e)&&tz(t)})}function ez(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vo(t,n)}catch{return!0}}function tz(t){var e=Ya(t,1);e!==null&&fo(e,t,1,-1)}function dD(t){var e=Po();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rg,lastRenderedState:t},e.queue=t,t=t.dispatch=lie.bind(null,_n,t),[e.memoizedState,t]}function Dg(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_n.updateQueue,e===null?(e={lastEffect:null,stores:null},_n.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nz(){return ki().memoizedState}function hb(t,e,n,r){var s=Po();_n.flags|=t,s.memoizedState=Dg(1|e,n,void 0,r===void 0?null:r)}function b1(t,e,n,r){var s=ki();r=r===void 0?null:r;var i=void 0;if(Vn!==null){var o=Vn.memoizedState;if(i=o.destroy,r!==null&&NO(r,o.deps)){s.memoizedState=Dg(e,n,i,r);return}}_n.flags|=t,s.memoizedState=Dg(1|e,n,i,r)}function fD(t,e){return hb(8390656,8,t,e)}function IO(t,e){return b1(2048,8,t,e)}function rz(t,e){return b1(4,2,t,e)}function sz(t,e){return b1(4,4,t,e)}function iz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oz(t,e,n){return n=n!=null?n.concat([t]):null,b1(4,4,iz.bind(null,e,t),n)}function kO(){}function az(t,e){var n=ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&NO(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lz(t,e){var n=ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&NO(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cz(t,e,n){return Xu&21?(vo(n,e)||(n=pW(),_n.lanes|=n,Yu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bs=!0),t.memoizedState=n)}function oie(t,e){var n=jt;jt=n!==0&&4>n?n:4,t(!0);var r=tC.transition;tC.transition={};try{t(!1),e()}finally{jt=n,tC.transition=r}}function uz(){return ki().memoizedState}function aie(t,e,n){var r=ac(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dz(t))fz(e,n);else if(n=GW(t,e,n,r),n!==null){var s=ls();fo(n,t,r,s),hz(n,e,r)}}function lie(t,e,n){var r=ac(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dz(t))fz(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,vo(a,o)){var l=e.interleaved;l===null?(s.next=s,bO(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=GW(t,e,s,r),n!==null&&(s=ls(),fo(n,t,r,s),hz(n,e,r))}}function dz(t){var e=t.alternate;return t===_n||e!==null&&e===_n}function fz(t,e){Jm=Jb=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hz(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oO(t,n)}}var Zb={readContext:Ii,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},cie={readContext:Ii,useCallback:function(t,e){return Po().memoizedState=[t,e===void 0?null:e],t},useContext:Ii,useEffect:fD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hb(4194308,4,iz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hb(4194308,4,t,e)},useInsertionEffect:function(t,e){return hb(4,2,t,e)},useMemo:function(t,e){var n=Po();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Po();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aie.bind(null,_n,t),[r.memoizedState,t]},useRef:function(t){var e=Po();return t={current:t},e.memoizedState=t},useState:dD,useDebugValue:kO,useDeferredValue:function(t){return Po().memoizedState=t},useTransition:function(){var t=dD(!1),e=t[0];return t=oie.bind(null,t[1]),Po().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_n,s=Po();if(pn){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),fr===null)throw Error(le(349));Xu&30||QW(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,fD(ZW.bind(null,r,i,t),[t]),r.flags|=2048,Dg(9,JW.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Po(),e=fr.identifierPrefix;if(pn){var n=Oa,r=ka;n=(r&~(1<<32-uo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pg++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iie++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uie={readContext:Ii,useCallback:az,useContext:Ii,useEffect:IO,useImperativeHandle:oz,useInsertionEffect:rz,useLayoutEffect:sz,useMemo:lz,useReducer:nC,useRef:nz,useState:function(){return nC(Rg)},useDebugValue:kO,useDeferredValue:function(t){var e=ki();return cz(e,Vn.memoizedState,t)},useTransition:function(){var t=nC(Rg)[0],e=ki().memoizedState;return[t,e]},useMutableSource:XW,useSyncExternalStore:YW,useId:uz,unstable_isNewReconciler:!1},die={readContext:Ii,useCallback:az,useContext:Ii,useEffect:IO,useImperativeHandle:oz,useInsertionEffect:rz,useLayoutEffect:sz,useMemo:lz,useReducer:rC,useRef:nz,useState:function(){return rC(Rg)},useDebugValue:kO,useDeferredValue:function(t){var e=ki();return Vn===null?e.memoizedState=t:cz(e,Vn.memoizedState,t)},useTransition:function(){var t=rC(Rg)[0],e=ki().memoizedState;return[t,e]},useMutableSource:XW,useSyncExternalStore:YW,useId:uz,unstable_isNewReconciler:!1};function qi(t,e){if(t&&t.defaultProps){e=Cn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Cn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var w1={isMounted:function(t){return(t=t._reactInternals)?Id(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ls(),s=ac(t),i=La(r,s);i.payload=e,n!=null&&(i.callback=n),e=ic(t,i,s),e!==null&&(fo(e,t,s,r),db(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ls(),s=ac(t),i=La(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ic(t,i,s),e!==null&&(fo(e,t,s,r),db(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ls(),r=ac(t),s=La(n,r);s.tag=2,e!=null&&(s.callback=e),e=ic(t,s,r),e!==null&&(fo(e,t,r,n),db(e,t,r))}};function hD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Tg(n,r)||!Tg(s,i):!0}function pz(t,e,n){var r=!1,s=_c,i=e.contextType;return typeof i=="object"&&i!==null?i=Ii(i):(s=Ns(e)?qu:Hr.current,r=e.contextTypes,i=(r=r!=null)?fh(t,s):_c),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=w1,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function pD(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&w1.enqueueReplaceState(e,e.state,null)}function fE(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},wO(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ii(i):(i=Ns(e)?qu:Hr.current,s.context=fh(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(dE(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&w1.enqueueReplaceState(s,s.state,null),Yb(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function gh(t,e){try{var n="",r=e;do n+=Fre(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sC(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fie=typeof WeakMap=="function"?WeakMap:Map;function mz(t,e,n){n=La(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){t0||(t0=!0,_E=r),hE(t,e)},n}function gz(t,e,n){n=La(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hE(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hE(t,e),typeof r!="function"&&(oc===null?oc=new Set([this]):oc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fie;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Eie.bind(null,t,e,n),e.then(t,t))}function gD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=La(-1,1),e.tag=2,ic(n,e,1))),n.lanes|=1),t)}var hie=fl.ReactCurrentOwner,bs=!1;function Zr(t,e,n,r){e.child=t===null?HW(e,null,n,r):ph(e,t.child,n,r)}function vD(t,e,n,r,s){n=n.render;var i=e.ref;return Mf(e,s),r=EO(t,e,n,r,i,s),n=TO(),t!==null&&!bs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qa(t,e,s)):(pn&&n&&pO(e),e.flags|=1,Zr(t,e,r,s),e.child)}function xD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!MO(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yz(t,e,i,r,s)):(t=yb(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Tg,n(o,r)&&t.ref===e.ref)return Qa(t,e,s)}return e.flags|=1,t=lc(i,r),t.ref=e.ref,t.return=e,e.child=t}function yz(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Tg(i,r)&&t.ref===e.ref)if(bs=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bs=!0);else return e.lanes=t.lanes,Qa(t,e,s)}return pE(t,e,n,r,s)}function vz(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Nf,Ls),Ls|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qt(Nf,Ls),Ls|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Qt(Nf,Ls),Ls|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Qt(Nf,Ls),Ls|=r;return Zr(t,e,s,n),e.child}function xz(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pE(t,e,n,r,s){var i=Ns(n)?qu:Hr.current;return i=fh(e,i),Mf(e,s),n=EO(t,e,n,r,i,s),r=TO(),t!==null&&!bs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qa(t,e,s)):(pn&&r&&pO(e),e.flags|=1,Zr(t,e,n,s),e.child)}function bD(t,e,n,r,s){if(Ns(n)){var i=!0;Hb(e)}else i=!1;if(Mf(e,s),e.stateNode===null)pb(t,e),pz(e,n,r),fE(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ii(c):(c=Ns(n)?qu:Hr.current,c=fh(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&pD(e,o,r,c),Pl=!1;var f=e.memoizedState;o.state=f,Yb(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Cs.current||Pl?(typeof u=="function"&&(dE(e,n,u,r),l=e.memoizedState),(a=Pl||hD(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qW(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:qi(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ii(l):(l=Ns(n)?qu:Hr.current,l=fh(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&pD(e,o,r,l),Pl=!1,f=e.memoizedState,o.state=f,Yb(e,r,o,s);var m=e.memoizedState;a!==d||f!==m||Cs.current||Pl?(typeof p=="function"&&(dE(e,n,p,r),m=e.memoizedState),(c=Pl||hD(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return mE(t,e,n,r,i,s)}function mE(t,e,n,r,s,i){xz(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&iD(e,n,!1),Qa(t,e,i);r=e.stateNode,hie.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ph(e,t.child,null,i),e.child=ph(e,null,a,i)):Zr(t,e,a,i),e.memoizedState=r.state,s&&iD(e,n,!0),e.child}function bz(t){var e=t.stateNode;e.pendingContext?sD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sD(t,e.context,!1),SO(t,e.containerInfo)}function wD(t,e,n,r,s){return hh(),gO(s),e.flags|=256,Zr(t,e,n,r),e.child}var gE={dehydrated:null,treeContext:null,retryLane:0};function yE(t){return{baseLanes:t,cachePool:null,transitions:null}}function wz(t,e,n){var r=e.pendingProps,s=xn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Qt(xn,s&1),t===null)return cE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=C1(o,r,0,null),t=Mu(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=yE(n),e.memoizedState=gE,t):OO(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return pie(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=lc(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=lc(a,i):(i=Mu(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?yE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=gE,r}return i=t.child,t=i.sibling,r=lc(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function OO(t,e){return e=C1({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xx(t,e,n,r){return r!==null&&gO(r),ph(e,t.child,null,n),t=OO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pie(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=sC(Error(le(422))),xx(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=C1({mode:"visible",children:r.children},s,0,null),i=Mu(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ph(e,t.child,null,o),e.child.memoizedState=yE(o),e.memoizedState=gE,i);if(!(e.mode&1))return xx(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(le(419)),r=sC(i,r,void 0),xx(t,e,o,r)}if(a=(o&t.childLanes)!==0,bs||a){if(r=fr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ya(t,s),fo(r,t,s,-1))}return jO(),r=sC(Error(le(421))),xx(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Tie.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Gs=sc(s.nextSibling),Ks=e,pn=!0,Zi=null,t!==null&&(yi[vi++]=ka,yi[vi++]=Oa,yi[vi++]=Ku,ka=t.id,Oa=t.overflow,Ku=e),e=OO(e,r.children),e.flags|=4096,e)}function SD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),uE(t.return,e,n)}function iC(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Sz(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Zr(t,e,r.children,n),r=xn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&SD(t,n,e);else if(t.tag===19)SD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qt(xn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Qb(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),iC(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qb(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}iC(e,!0,n,null,i);break;case"together":iC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=lc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mie(t,e,n){switch(e.tag){case 3:bz(e),hh();break;case 5:KW(e);break;case 1:Ns(e.type)&&Hb(e);break;case 4:SO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qt(Kb,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qt(xn,xn.current&1),e.flags|=128,null):n&e.child.childLanes?wz(t,e,n):(Qt(xn,xn.current&1),t=Qa(t,e,n),t!==null?t.sibling:null);Qt(xn,xn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sz(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qt(xn,xn.current),r)break;return null;case 22:case 23:return e.lanes=0,vz(t,e,n)}return Qa(t,e,n)}var _z,vE,Cz,Nz;_z=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vE=function(){};Cz=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Su(Go.current);var i=null;switch(n){case"input":s=BN(t,s),r=BN(t,r),i=[];break;case"select":s=Cn({},s,{value:void 0}),r=Cn({},r,{value:void 0}),i=[];break;case"textarea":s=zN(t,s),r=zN(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zb)}HN(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(bg.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(bg.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&sn("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Nz=function(t,e,n,r){n!==r&&(e.flags|=4)};function cm(t,e){if(!pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Rr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gie(t,e,n){var r=e.pendingProps;switch(mO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rr(e),null;case 1:return Ns(e.type)&&Vb(),Rr(e),null;case 3:return r=e.stateNode,mh(),un(Cs),un(Hr),CO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zi!==null&&(EE(Zi),Zi=null))),vE(t,e),Rr(e),null;case 5:_O(e);var s=Su(Ag.current);if(n=e.type,t!==null&&e.stateNode!=null)Cz(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return Rr(e),null}if(t=Su(Go.current),yx(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Mo]=e,r[Og]=i,t=(e.mode&1)!==0,n){case"dialog":sn("cancel",r),sn("close",r);break;case"iframe":case"object":case"embed":sn("load",r);break;case"video":case"audio":for(s=0;s<Mm.length;s++)sn(Mm[s],r);break;case"source":sn("error",r);break;case"img":case"image":case"link":sn("error",r),sn("load",r);break;case"details":sn("toggle",r);break;case"input":$R(r,i),sn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},sn("invalid",r);break;case"textarea":PR(r,i),sn("invalid",r)}HN(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&gx(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&gx(r.textContent,a,t),s=["children",""+a]):bg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&sn("scroll",r)}switch(n){case"input":lx(r),AR(r,i,!0);break;case"textarea":lx(r),RR(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zb)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZU(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mo]=e,t[Og]=r,_z(t,e,!1,!1),e.stateNode=t;e:{switch(o=GN(n,r),n){case"dialog":sn("cancel",t),sn("close",t),s=r;break;case"iframe":case"object":case"embed":sn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Mm.length;s++)sn(Mm[s],t);s=r;break;case"source":sn("error",t),s=r;break;case"img":case"image":case"link":sn("error",t),sn("load",t),s=r;break;case"details":sn("toggle",t),s=r;break;case"input":$R(t,r),s=BN(t,r),sn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Cn({},r,{value:void 0}),sn("invalid",t);break;case"textarea":PR(t,r),s=zN(t,r),sn("invalid",t);break;default:s=r}HN(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?nW(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&eW(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wg(t,l):typeof l=="number"&&wg(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bg.hasOwnProperty(i)?l!=null&&i==="onScroll"&&sn("scroll",t):l!=null&&eO(t,i,l,o))}switch(n){case"input":lx(t),AR(t,r,!1);break;case"textarea":lx(t),RR(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sc(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Pf(t,!!r.multiple,i,!1):r.defaultValue!=null&&Pf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rr(e),null;case 6:if(t&&e.stateNode!=null)Nz(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=Su(Ag.current),Su(Go.current),yx(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mo]=e,(i=r.nodeValue!==n)&&(t=Ks,t!==null))switch(t.tag){case 3:gx(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gx(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mo]=e,e.stateNode=r}return Rr(e),null;case 13:if(un(xn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pn&&Gs!==null&&e.mode&1&&!(e.flags&128))zW(),hh(),e.flags|=98560,i=!1;else if(i=yx(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[Mo]=e}else hh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rr(e),i=!1}else Zi!==null&&(EE(Zi),Zi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xn.current&1?Qn===0&&(Qn=3):jO())),e.updateQueue!==null&&(e.flags|=4),Rr(e),null);case 4:return mh(),vE(t,e),t===null&&Ig(e.stateNode.containerInfo),Rr(e),null;case 10:return xO(e.type._context),Rr(e),null;case 17:return Ns(e.type)&&Vb(),Rr(e),null;case 19:if(un(xn),i=e.memoizedState,i===null)return Rr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)cm(i,!1);else{if(Qn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Qb(t),o!==null){for(e.flags|=128,cm(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qt(xn,xn.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pn()>yh&&(e.flags|=128,r=!0,cm(i,!1),e.lanes=4194304)}else{if(!r)if(t=Qb(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pn)return Rr(e),null}else 2*Pn()-i.renderingStartTime>yh&&n!==1073741824&&(e.flags|=128,r=!0,cm(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pn(),e.sibling=null,n=xn.current,Qt(xn,r?n&1|2:n&1),e):(Rr(e),null);case 22:case 23:return DO(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ls&1073741824&&(Rr(e),e.subtreeFlags&6&&(e.flags|=8192)):Rr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function yie(t,e){switch(mO(e),e.tag){case 1:return Ns(e.type)&&Vb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mh(),un(Cs),un(Hr),CO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _O(e),null;case 13:if(un(xn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));hh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return un(xn),null;case 4:return mh(),null;case 10:return xO(e.type._context),null;case 22:case 23:return DO(),null;case 24:return null;default:return null}}var bx=!1,Lr=!1,vie=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Cf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tn(t,e,r)}else n.current=null}function xE(t,e,n){try{n()}catch(r){Tn(t,e,r)}}var _D=!1;function xie(t,e){if(nE=Bb,t=OW(),hO(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(rE={focusedElem:t,selectionRange:n},Bb=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:qi(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(w){Tn(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return m=_D,_D=!1,m}function Zm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&xE(e,n,i)}s=s.next}while(s!==r)}}function S1(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ez(t){var e=t.alternate;e!==null&&(t.alternate=null,Ez(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mo],delete e[Og],delete e[oE],delete e[tie],delete e[nie])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tz(t){return t.tag===5||t.tag===3||t.tag===4}function CD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tz(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zb));else if(r!==4&&(t=t.child,t!==null))for(wE(t,e,n),t=t.sibling;t!==null;)wE(t,e,n),t=t.sibling}function SE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(SE(t,e,n),t=t.sibling;t!==null;)SE(t,e,n),t=t.sibling}var Nr=null,Yi=!1;function Cl(t,e,n){for(n=n.child;n!==null;)Iz(t,e,n),n=n.sibling}function Iz(t,e,n){if(Ho&&typeof Ho.onCommitFiberUnmount=="function")try{Ho.onCommitFiberUnmount(p1,n)}catch{}switch(n.tag){case 5:Lr||Cf(n,e);case 6:var r=Nr,s=Yi;Nr=null,Cl(t,e,n),Nr=r,Yi=s,Nr!==null&&(Yi?(t=Nr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Nr.removeChild(n.stateNode));break;case 18:Nr!==null&&(Yi?(t=Nr,n=n.stateNode,t.nodeType===8?J_(t.parentNode,n):t.nodeType===1&&J_(t,n),Ng(t)):J_(Nr,n.stateNode));break;case 4:r=Nr,s=Yi,Nr=n.stateNode.containerInfo,Yi=!0,Cl(t,e,n),Nr=r,Yi=s;break;case 0:case 11:case 14:case 15:if(!Lr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xE(n,e,o),s=s.next}while(s!==r)}Cl(t,e,n);break;case 1:if(!Lr&&(Cf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tn(n,e,a)}Cl(t,e,n);break;case 21:Cl(t,e,n);break;case 22:n.mode&1?(Lr=(r=Lr)||n.memoizedState!==null,Cl(t,e,n),Lr=r):Cl(t,e,n);break;default:Cl(t,e,n)}}function ND(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vie),e.forEach(function(r){var s=Iie.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Nr=a.stateNode,Yi=!1;break e;case 3:Nr=a.stateNode.containerInfo,Yi=!0;break e;case 4:Nr=a.stateNode.containerInfo,Yi=!0;break e}a=a.return}if(Nr===null)throw Error(le(160));Iz(i,o,s),Nr=null,Yi=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Tn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kz(e,t),e=e.sibling}function kz(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vi(e,t),$o(t),r&4){try{Zm(3,t,t.return),S1(3,t)}catch(g){Tn(t,t.return,g)}try{Zm(5,t,t.return)}catch(g){Tn(t,t.return,g)}}break;case 1:Vi(e,t),$o(t),r&512&&n!==null&&Cf(n,n.return);break;case 5:if(Vi(e,t),$o(t),r&512&&n!==null&&Cf(n,n.return),t.flags&32){var s=t.stateNode;try{wg(s,"")}catch(g){Tn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&QU(s,i),GN(a,o);var c=GN(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?nW(s,d):u==="dangerouslySetInnerHTML"?eW(s,d):u==="children"?wg(s,d):eO(s,u,d,c)}switch(a){case"input":UN(s,i);break;case"textarea":JU(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Pf(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Pf(s,!!i.multiple,i.defaultValue,!0):Pf(s,!!i.multiple,i.multiple?[]:"",!1))}s[Og]=i}catch(g){Tn(t,t.return,g)}}break;case 6:if(Vi(e,t),$o(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Tn(t,t.return,g)}}break;case 3:if(Vi(e,t),$o(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ng(e.containerInfo)}catch(g){Tn(t,t.return,g)}break;case 4:Vi(e,t),$o(t);break;case 13:Vi(e,t),$o(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(PO=Pn())),r&4&&ND(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Lr=(c=Lr)||u,Vi(e,t),Lr=c):Vi(e,t),$o(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ie=t,u=t.child;u!==null;){for(d=Ie=u;Ie!==null;){switch(f=Ie,p=f.child,f.tag){case 0:case 11:case 14:case 15:Zm(4,f,f.return);break;case 1:Cf(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Tn(r,n,g)}}break;case 5:Cf(f,f.return);break;case 22:if(f.memoizedState!==null){TD(d);continue}}p!==null?(p.return=f,Ie=p):TD(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=tW("display",o))}catch(g){Tn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Tn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vi(e,t),$o(t),r&4&&ND(t);break;case 21:break;default:Vi(e,t),$o(t)}}function $o(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tz(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wg(s,""),r.flags&=-33);var i=CD(t);SE(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=CD(t);wE(t,a,o);break;default:throw Error(le(161))}}catch(l){Tn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bie(t,e,n){Ie=t,Oz(t)}function Oz(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var s=Ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||bx;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Lr;a=bx;var c=Lr;if(bx=o,(Lr=l)&&!c)for(Ie=s;Ie!==null;)o=Ie,l=o.child,o.tag===22&&o.memoizedState!==null?ID(s):l!==null?(l.return=o,Ie=l):ID(s);for(;i!==null;)Ie=i,Oz(i),i=i.sibling;Ie=s,bx=a,Lr=c}ED(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ie=i):ED(t)}}function ED(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lr||S1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:qi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&uD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ng(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Lr||e.flags&512&&bE(e)}catch(f){Tn(e,e.return,f)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function TD(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function ID(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{S1(4,e)}catch(l){Tn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Tn(e,s,l)}}var i=e.return;try{bE(e)}catch(l){Tn(e,i,l)}break;case 5:var o=e.return;try{bE(e)}catch(l){Tn(e,o,l)}}}catch(l){Tn(e,e.return,l)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var wie=Math.ceil,e0=fl.ReactCurrentDispatcher,$O=fl.ReactCurrentOwner,Ei=fl.ReactCurrentBatchConfig,St=0,fr=null,Bn=null,Ir=0,Ls=0,Nf=Lc(0),Qn=0,jg=null,Yu=0,_1=0,AO=0,eg=null,xs=null,PO=0,yh=1/0,Sa=null,t0=!1,_E=null,oc=null,wx=!1,Yl=null,n0=0,tg=0,CE=null,mb=-1,gb=0;function ls(){return St&6?Pn():mb!==-1?mb:mb=Pn()}function ac(t){return t.mode&1?St&2&&Ir!==0?Ir&-Ir:sie.transition!==null?(gb===0&&(gb=pW()),gb):(t=jt,t!==0||(t=window.event,t=t===void 0?16:wW(t.type)),t):1}function fo(t,e,n,r){if(50<tg)throw tg=0,CE=null,Error(le(185));sv(t,n,r),(!(St&2)||t!==fr)&&(t===fr&&(!(St&2)&&(_1|=n),Qn===4&&Ll(t,Ir)),Es(t,r),n===1&&St===0&&!(e.mode&1)&&(yh=Pn()+500,x1&&Fc()))}function Es(t,e){var n=t.callbackNode;sse(t,e);var r=Fb(t,t===fr?Ir:0);if(r===0)n!==null&&MR(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&MR(n),e===1)t.tag===0?rie(kD.bind(null,t)):BW(kD.bind(null,t)),Zse(function(){!(St&6)&&Fc()}),n=null;else{switch(mW(r)){case 1:n=iO;break;case 4:n=fW;break;case 16:n=Lb;break;case 536870912:n=hW;break;default:n=Lb}n=Lz(n,$z.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $z(t,e){if(mb=-1,gb=0,St&6)throw Error(le(327));var n=t.callbackNode;if(Lf()&&t.callbackNode!==n)return null;var r=Fb(t,t===fr?Ir:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=r0(t,r);else{e=r;var s=St;St|=2;var i=Pz();(fr!==t||Ir!==e)&&(Sa=null,yh=Pn()+500,ju(t,e));do try{Cie();break}catch(a){Az(t,a)}while(!0);vO(),e0.current=i,St=s,Bn!==null?e=0:(fr=null,Ir=0,e=Qn)}if(e!==0){if(e===2&&(s=QN(t),s!==0&&(r=s,e=NE(t,s))),e===1)throw n=jg,ju(t,0),Ll(t,r),Es(t,Pn()),n;if(e===6)Ll(t,r);else{if(s=t.current.alternate,!(r&30)&&!Sie(s)&&(e=r0(t,r),e===2&&(i=QN(t),i!==0&&(r=i,e=NE(t,i))),e===1))throw n=jg,ju(t,0),Ll(t,r),Es(t,Pn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:au(t,xs,Sa);break;case 3:if(Ll(t,r),(r&130023424)===r&&(e=PO+500-Pn(),10<e)){if(Fb(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ls(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=iE(au.bind(null,t,xs,Sa),e);break}au(t,xs,Sa);break;case 4:if(Ll(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-uo(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wie(r/1960))-r,10<r){t.timeoutHandle=iE(au.bind(null,t,xs,Sa),r);break}au(t,xs,Sa);break;case 5:au(t,xs,Sa);break;default:throw Error(le(329))}}}return Es(t,Pn()),t.callbackNode===n?$z.bind(null,t):null}function NE(t,e){var n=eg;return t.current.memoizedState.isDehydrated&&(ju(t,e).flags|=256),t=r0(t,e),t!==2&&(e=xs,xs=n,e!==null&&EE(e)),t}function EE(t){xs===null?xs=t:xs.push.apply(xs,t)}function Sie(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vo(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ll(t,e){for(e&=~AO,e&=~_1,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-uo(e),r=1<<n;t[n]=-1,e&=~r}}function kD(t){if(St&6)throw Error(le(327));Lf();var e=Fb(t,0);if(!(e&1))return Es(t,Pn()),null;var n=r0(t,e);if(t.tag!==0&&n===2){var r=QN(t);r!==0&&(e=r,n=NE(t,r))}if(n===1)throw n=jg,ju(t,0),Ll(t,e),Es(t,Pn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,au(t,xs,Sa),Es(t,Pn()),null}function RO(t,e){var n=St;St|=1;try{return t(e)}finally{St=n,St===0&&(yh=Pn()+500,x1&&Fc())}}function Qu(t){Yl!==null&&Yl.tag===0&&!(St&6)&&Lf();var e=St;St|=1;var n=Ei.transition,r=jt;try{if(Ei.transition=null,jt=1,t)return t()}finally{jt=r,Ei.transition=n,St=e,!(St&6)&&Fc()}}function DO(){Ls=Nf.current,un(Nf)}function ju(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Jse(n)),Bn!==null)for(n=Bn.return;n!==null;){var r=n;switch(mO(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vb();break;case 3:mh(),un(Cs),un(Hr),CO();break;case 5:_O(r);break;case 4:mh();break;case 13:un(xn);break;case 19:un(xn);break;case 10:xO(r.type._context);break;case 22:case 23:DO()}n=n.return}if(fr=t,Bn=t=lc(t.current,null),Ir=Ls=e,Qn=0,jg=null,AO=_1=Yu=0,xs=eg=null,wu!==null){for(e=0;e<wu.length;e++)if(n=wu[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}wu=null}return t}function Az(t,e){do{var n=Bn;try{if(vO(),fb.current=Zb,Jb){for(var r=_n.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jb=!1}if(Xu=0,or=Vn=_n=null,Jm=!1,Pg=0,$O.current=null,n===null||n.return===null){Qn=1,jg=e,Bn=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ir,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=gD(o);if(p!==null){p.flags&=-257,yD(p,o,a,i,e),p.mode&1&&mD(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){mD(i,c,e),jO();break e}l=Error(le(426))}}else if(pn&&a.mode&1){var y=gD(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),yD(y,o,a,i,e),gO(gh(l,a));break e}}i=l=gh(l,a),Qn!==4&&(Qn=2),eg===null?eg=[i]:eg.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=mz(i,l,e);cD(i,v);break e;case 1:a=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(oc===null||!oc.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=gz(i,a,e);cD(i,w);break e}}i=i.return}while(i!==null)}Dz(n)}catch(_){e=_,Bn===n&&n!==null&&(Bn=n=n.return);continue}break}while(!0)}function Pz(){var t=e0.current;return e0.current=Zb,t===null?Zb:t}function jO(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),fr===null||!(Yu&268435455)&&!(_1&268435455)||Ll(fr,Ir)}function r0(t,e){var n=St;St|=2;var r=Pz();(fr!==t||Ir!==e)&&(Sa=null,ju(t,e));do try{_ie();break}catch(s){Az(t,s)}while(!0);if(vO(),St=n,e0.current=r,Bn!==null)throw Error(le(261));return fr=null,Ir=0,Qn}function _ie(){for(;Bn!==null;)Rz(Bn)}function Cie(){for(;Bn!==null&&!Xre();)Rz(Bn)}function Rz(t){var e=Mz(t.alternate,t,Ls);t.memoizedProps=t.pendingProps,e===null?Dz(t):Bn=e,$O.current=null}function Dz(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yie(n,e),n!==null){n.flags&=32767,Bn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qn=6,Bn=null;return}}else if(n=gie(n,e,Ls),n!==null){Bn=n;return}if(e=e.sibling,e!==null){Bn=e;return}Bn=e=t}while(e!==null);Qn===0&&(Qn=5)}function au(t,e,n){var r=jt,s=Ei.transition;try{Ei.transition=null,jt=1,Nie(t,e,n,r)}finally{Ei.transition=s,jt=r}return null}function Nie(t,e,n,r){do Lf();while(Yl!==null);if(St&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ise(t,i),t===fr&&(Bn=fr=null,Ir=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wx||(wx=!0,Lz(Lb,function(){return Lf(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ei.transition,Ei.transition=null;var o=jt;jt=1;var a=St;St|=4,$O.current=null,xie(t,n),kz(n,t),Hse(rE),Bb=!!nE,rE=nE=null,t.current=n,bie(n),Yre(),St=a,jt=o,Ei.transition=i}else t.current=n;if(wx&&(wx=!1,Yl=t,n0=s),i=t.pendingLanes,i===0&&(oc=null),Zre(n.stateNode),Es(t,Pn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(t0)throw t0=!1,t=_E,_E=null,t;return n0&1&&t.tag!==0&&Lf(),i=t.pendingLanes,i&1?t===CE?tg++:(tg=0,CE=t):tg=0,Fc(),null}function Lf(){if(Yl!==null){var t=mW(n0),e=Ei.transition,n=jt;try{if(Ei.transition=null,jt=16>t?16:t,Yl===null)var r=!1;else{if(t=Yl,Yl=null,n0=0,St&6)throw Error(le(331));var s=St;for(St|=4,Ie=t.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ie=c;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:Zm(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;var f=u.sibling,p=u.return;if(Ez(u),u===c){Ie=null;break}if(f!==null){f.return=p,Ie=f;break}Ie=p}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zm(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ie=v;break e}Ie=i.return}}var x=t.current;for(Ie=x;Ie!==null;){o=Ie;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ie=b;else e:for(o=x;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:S1(9,a)}}catch(_){Tn(a,a.return,_)}if(a===o){Ie=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Ie=w;break e}Ie=a.return}}if(St=s,Fc(),Ho&&typeof Ho.onPostCommitFiberRoot=="function")try{Ho.onPostCommitFiberRoot(p1,t)}catch{}r=!0}return r}finally{jt=n,Ei.transition=e}}return!1}function OD(t,e,n){e=gh(n,e),e=mz(t,e,1),t=ic(t,e,1),e=ls(),t!==null&&(sv(t,1,e),Es(t,e))}function Tn(t,e,n){if(t.tag===3)OD(t,t,n);else for(;e!==null;){if(e.tag===3){OD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oc===null||!oc.has(r))){t=gh(n,t),t=gz(e,t,1),e=ic(e,t,1),t=ls(),e!==null&&(sv(e,1,t),Es(e,t));break}}e=e.return}}function Eie(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ls(),t.pingedLanes|=t.suspendedLanes&n,fr===t&&(Ir&n)===n&&(Qn===4||Qn===3&&(Ir&130023424)===Ir&&500>Pn()-PO?ju(t,0):AO|=n),Es(t,e)}function jz(t,e){e===0&&(t.mode&1?(e=dx,dx<<=1,!(dx&130023424)&&(dx=4194304)):e=1);var n=ls();t=Ya(t,e),t!==null&&(sv(t,e,n),Es(t,n))}function Tie(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jz(t,n)}function Iie(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),jz(t,n)}var Mz;Mz=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cs.current)bs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bs=!1,mie(t,e,n);bs=!!(t.flags&131072)}else bs=!1,pn&&e.flags&1048576&&UW(e,qb,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pb(t,e),t=e.pendingProps;var s=fh(e,Hr.current);Mf(e,n),s=EO(null,e,r,t,s,n);var i=TO();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ns(r)?(i=!0,Hb(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wO(e),s.updater=w1,e.stateNode=s,s._reactInternals=e,fE(e,r,t,n),e=mE(null,e,r,!0,i,n)):(e.tag=0,pn&&i&&pO(e),Zr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pb(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Oie(r),t=qi(r,t),s){case 0:e=pE(null,e,r,t,n);break e;case 1:e=bD(null,e,r,t,n);break e;case 11:e=vD(null,e,r,t,n);break e;case 14:e=xD(null,e,r,qi(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qi(r,s),pE(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qi(r,s),bD(t,e,r,s,n);case 3:e:{if(bz(e),t===null)throw Error(le(387));r=e.pendingProps,i=e.memoizedState,s=i.element,qW(t,e),Yb(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=gh(Error(le(423)),e),e=wD(t,e,r,n,s);break e}else if(r!==s){s=gh(Error(le(424)),e),e=wD(t,e,r,n,s);break e}else for(Gs=sc(e.stateNode.containerInfo.firstChild),Ks=e,pn=!0,Zi=null,n=HW(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hh(),r===s){e=Qa(t,e,n);break e}Zr(t,e,r,n)}e=e.child}return e;case 5:return KW(e),t===null&&cE(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,sE(r,s)?o=null:i!==null&&sE(r,i)&&(e.flags|=32),xz(t,e),Zr(t,e,o,n),e.child;case 6:return t===null&&cE(e),null;case 13:return wz(t,e,n);case 4:return SO(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ph(e,null,r,n):Zr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qi(r,s),vD(t,e,r,s,n);case 7:return Zr(t,e,e.pendingProps,n),e.child;case 8:return Zr(t,e,e.pendingProps.children,n),e.child;case 12:return Zr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Qt(Kb,r._currentValue),r._currentValue=o,i!==null)if(vo(i.value,o)){if(i.children===s.children&&!Cs.current){e=Qa(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=La(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),uE(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),uE(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Zr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Mf(e,n),s=Ii(s),r=r(s),e.flags|=1,Zr(t,e,r,n),e.child;case 14:return r=e.type,s=qi(r,e.pendingProps),s=qi(r.type,s),xD(t,e,r,s,n);case 15:return yz(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qi(r,s),pb(t,e),e.tag=1,Ns(r)?(t=!0,Hb(e)):t=!1,Mf(e,n),pz(e,r,s),fE(e,r,s,n),mE(null,e,r,!0,t,n);case 19:return Sz(t,e,n);case 22:return vz(t,e,n)}throw Error(le(156,e.tag))};function Lz(t,e){return dW(t,e)}function kie(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(t,e,n,r){return new kie(t,e,n,r)}function MO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oie(t){if(typeof t=="function")return MO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nO)return 11;if(t===rO)return 14}return 2}function lc(t,e){var n=t.alternate;return n===null?(n=bi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yb(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")MO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mf:return Mu(n.children,s,i,e);case tO:o=8,s|=8;break;case jN:return t=bi(12,n,e,s|2),t.elementType=jN,t.lanes=i,t;case MN:return t=bi(13,n,e,s),t.elementType=MN,t.lanes=i,t;case LN:return t=bi(19,n,e,s),t.elementType=LN,t.lanes=i,t;case KU:return C1(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case GU:o=10;break e;case qU:o=9;break e;case nO:o=11;break e;case rO:o=14;break e;case Al:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=bi(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Mu(t,e,n,r){return t=bi(7,t,r,e),t.lanes=n,t}function C1(t,e,n,r){return t=bi(22,t,r,e),t.elementType=KU,t.lanes=n,t.stateNode={isHidden:!1},t}function oC(t,e,n){return t=bi(6,t,null,e),t.lanes=n,t}function aC(t,e,n){return e=bi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $ie(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=U_(0),this.expirationTimes=U_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U_(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function LO(t,e,n,r,s,i,o,a,l){return t=new $ie(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bi(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wO(i),t}function Aie(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Fz(t){if(!t)return _c;t=t._reactInternals;e:{if(Id(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ns(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Ns(n))return FW(t,n,e)}return e}function Bz(t,e,n,r,s,i,o,a,l){return t=LO(n,r,!0,t,s,i,o,a,l),t.context=Fz(null),n=t.current,r=ls(),s=ac(n),i=La(r,s),i.callback=e??null,ic(n,i,s),t.current.lanes=s,sv(t,s,r),Es(t,r),t}function N1(t,e,n,r){var s=e.current,i=ls(),o=ac(s);return n=Fz(n),e.context===null?e.context=n:e.pendingContext=n,e=La(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ic(s,e,o),t!==null&&(fo(t,s,o,i),db(t,s,o)),o}function s0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $D(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function FO(t,e){$D(t,e),(t=t.alternate)&&$D(t,e)}function Pie(){return null}var Uz=typeof reportError=="function"?reportError:function(t){console.error(t)};function BO(t){this._internalRoot=t}E1.prototype.render=BO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));N1(t,e,null,null)};E1.prototype.unmount=BO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qu(function(){N1(null,t,null,null)}),e[Xa]=null}};function E1(t){this._internalRoot=t}E1.prototype.unstable_scheduleHydration=function(t){if(t){var e=vW();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ml.length&&e!==0&&e<Ml[n].priority;n++);Ml.splice(n,0,t),n===0&&bW(t)}};function UO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function T1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function AD(){}function Rie(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=s0(o);i.call(c)}}var o=Bz(e,r,t,0,null,!1,!1,"",AD);return t._reactRootContainer=o,t[Xa]=o.current,Ig(t.nodeType===8?t.parentNode:t),Qu(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=s0(l);a.call(c)}}var l=LO(t,0,!1,null,null,!1,!1,"",AD);return t._reactRootContainer=l,t[Xa]=l.current,Ig(t.nodeType===8?t.parentNode:t),Qu(function(){N1(e,l,n,r)}),l}function I1(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=s0(o);a.call(l)}}N1(e,o,t,s)}else o=Rie(n,e,t,s,r);return s0(o)}gW=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jm(e.pendingLanes);n!==0&&(oO(e,n|1),Es(e,Pn()),!(St&6)&&(yh=Pn()+500,Fc()))}break;case 13:Qu(function(){var r=Ya(t,1);if(r!==null){var s=ls();fo(r,t,1,s)}}),FO(t,1)}};aO=function(t){if(t.tag===13){var e=Ya(t,134217728);if(e!==null){var n=ls();fo(e,t,134217728,n)}FO(t,134217728)}};yW=function(t){if(t.tag===13){var e=ac(t),n=Ya(t,e);if(n!==null){var r=ls();fo(n,t,e,r)}FO(t,e)}};vW=function(){return jt};xW=function(t,e){var n=jt;try{return jt=t,e()}finally{jt=n}};KN=function(t,e,n){switch(e){case"input":if(UN(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=v1(r);if(!s)throw Error(le(90));YU(r),UN(r,s)}}}break;case"textarea":JU(t,n);break;case"select":e=n.value,e!=null&&Pf(t,!!n.multiple,e,!1)}};iW=RO;oW=Qu;var Die={usingClientEntryPoint:!1,Events:[ov,xf,v1,rW,sW,RO]},um={findFiberByHostInstance:bu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jie={bundleType:um.bundleType,version:um.version,rendererPackageName:um.rendererPackageName,rendererConfig:um.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cW(t),t===null?null:t.stateNode},findFiberByHostInstance:um.findFiberByHostInstance||Pie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sx.isDisabled&&Sx.supportsFiber)try{p1=Sx.inject(jie),Ho=Sx}catch{}}ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Die;ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!UO(e))throw Error(le(200));return Aie(t,e,null,n)};ri.createRoot=function(t,e){if(!UO(t))throw Error(le(299));var n=!1,r="",s=Uz;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=LO(t,1,!1,null,null,n,!1,r,s),t[Xa]=e.current,Ig(t.nodeType===8?t.parentNode:t),new BO(e)};ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=cW(e),t=t===null?null:t.stateNode,t};ri.flushSync=function(t){return Qu(t)};ri.hydrate=function(t,e,n){if(!T1(e))throw Error(le(200));return I1(null,t,e,!0,n)};ri.hydrateRoot=function(t,e,n){if(!UO(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Uz;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Bz(e,null,t,1,n??null,s,!1,i,o),t[Xa]=e.current,Ig(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new E1(e)};ri.render=function(t,e,n){if(!T1(e))throw Error(le(200));return I1(null,t,e,!1,n)};ri.unmountComponentAtNode=function(t){if(!T1(t))throw Error(le(40));return t._reactRootContainer?(Qu(function(){I1(null,null,t,!1,function(){t._reactRootContainer=null,t[Xa]=null})}),!0):!1};ri.unstable_batchedUpdates=RO;ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!T1(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return I1(t,e,n,!1,r)};ri.version="18.3.1-next-f1338f8080-20240426";function Wz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wz)}catch(t){console.error(t)}}Wz(),WU.exports=ri;var lp=WU.exports;const WO=Tt(lp);var zz,PD=lp;zz=PD.createRoot,PD.hydrateRoot;var RD=["light","dark"],Mie="(prefers-color-scheme: dark)",Lie=S.createContext(void 0),Fie={setTheme:t=>{},themes:[]},Bie=()=>{var t;return(t=S.useContext(Lie))!=null?t:Fie};S.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=s?RD.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,g=!1,y=!0)=>{let v=o?o[m]:m,x=g?m+"|| ''":`'${v}'`,b="";return s&&y&&!g&&RD.includes(m)&&(b+=`d.style.colorScheme = '${m}';`),n==="class"?g||v?b+=`c.add(${x})`:b+="null":v&&(b+=`d[s](n,${x})`),b},p=t?`!function(){${u}${f(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${Mie}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${d}}catch(t){}}();`;return S.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var Uie=t=>{switch(t){case"success":return Vie;case"info":return Gie;case"warning":return Hie;case"error":return qie;default:return null}},Wie=Array(12).fill(0),zie=({visible:t})=>j.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},j.createElement("div",{className:"sonner-spinner"},Wie.map((e,n)=>j.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Vie=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Hie=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Gie=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),qie=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Kie=()=>{let[t,e]=j.useState(document.hidden);return j.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},TE=1,Xie=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:TE++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0;return r.then(async i=>{if(Qie(i)&&!i.ok){s=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${i.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${i.status}`):e.description;this.create({id:n,type:"error",message:o,description:a})}else if(e.success!==void 0){s=!1;let o=typeof e.success=="function"?await e.success(i):e.success,a=typeof e.description=="function"?await e.description(i):e.description;this.create({id:n,type:"success",message:o,description:a})}}).catch(async i=>{if(e.error!==void 0){s=!1;let o=typeof e.error=="function"?await e.error(i):e.error,a=typeof e.description=="function"?await e.description(i):e.description;this.create({id:n,type:"error",message:o,description:a})}}).finally(()=>{var i;s&&(this.dismiss(n),n=void 0),(i=e.finally)==null||i.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||TE++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},Ms=new Xie,Yie=(t,e)=>{let n=(e==null?void 0:e.id)||TE++;return Ms.addToast({title:t,...e,id:n}),n},Qie=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Jie=Yie,Zie=()=>Ms.toasts,Er=Object.assign(Jie,{success:Ms.success,info:Ms.info,warning:Ms.warning,error:Ms.error,custom:Ms.custom,message:Ms.message,promise:Ms.promise,dismiss:Ms.dismiss,loading:Ms.loading},{getHistory:Zie});function eoe(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}eoe(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function _x(t){return t.label!==void 0}var toe=3,noe="32px",roe=4e3,soe=356,ioe=14,ooe=20,aoe=200;function loe(...t){return t.filter(Boolean).join(" ")}var coe=t=>{var e,n,r,s,i,o,a,l,c,u;let{invert:d,toast:f,unstyled:p,interacting:m,setHeights:g,visibleToasts:y,heights:v,index:x,toasts:b,expanded:w,removeToast:_,defaultRichColors:C,closeButton:E,style:N,cancelButtonStyle:I,actionButtonStyle:$,className:O="",descriptionClassName:k="",duration:R,position:M,gap:B,loadingIcon:F,expandByDefault:L,classNames:P,icons:W,closeButtonAriaLabel:q="Close toast",pauseWhenPageIsHidden:H,cn:Y}=t,[se,Se]=j.useState(!1),[De,Pe]=j.useState(!1),[de,Ee]=j.useState(!1),[J,ie]=j.useState(!1),[Z,V]=j.useState(0),[ge,ve]=j.useState(0),Fe=j.useRef(null),je=j.useRef(null),mt=x===0,Ot=x+1<=y,K=f.type,fe=f.dismissible!==!1,Te=f.className||"",Qe=f.descriptionClassName||"",_e=j.useMemo(()=>v.findIndex(Ge=>Ge.toastId===f.id)||0,[v,f.id]),gt=j.useMemo(()=>{var Ge;return(Ge=f.closeButton)!=null?Ge:E},[f.closeButton,E]),Ye=j.useMemo(()=>f.duration||R||roe,[f.duration,R]),zt=j.useRef(0),Ue=j.useRef(0),_t=j.useRef(0),An=j.useRef(null),[nr,Ui]=M.split("-"),Xr=j.useMemo(()=>v.reduce((Ge,Q,oe)=>oe>=_e?Ge:Ge+Q.height,0),[v,_e]),Yr=Kie(),ma=f.invert||d,Wi=K==="loading";Ue.current=j.useMemo(()=>_e*B+Xr,[_e,Xr]),j.useEffect(()=>{Se(!0)},[]),j.useLayoutEffect(()=>{if(!se)return;let Ge=je.current,Q=Ge.style.height;Ge.style.height="auto";let oe=Ge.getBoundingClientRect().height;Ge.style.height=Q,ve(oe),g(Je=>Je.find(vn=>vn.toastId===f.id)?Je.map(vn=>vn.toastId===f.id?{...vn,height:oe}:vn):[{toastId:f.id,height:oe,position:f.position},...Je])},[se,f.title,f.description,g,f.id]);let dn=j.useCallback(()=>{Pe(!0),V(Ue.current),g(Ge=>Ge.filter(Q=>Q.toastId!==f.id)),setTimeout(()=>{_(f)},aoe)},[f,_,g,Ue]);j.useEffect(()=>{if(f.promise&&K==="loading"||f.duration===1/0||f.type==="loading")return;let Ge,Q=Ye;return w||m||H&&Yr?(()=>{if(_t.current<zt.current){let oe=new Date().getTime()-zt.current;Q=Q-oe}_t.current=new Date().getTime()})():Q!==1/0&&(zt.current=new Date().getTime(),Ge=setTimeout(()=>{var oe;(oe=f.onAutoClose)==null||oe.call(f,f),dn()},Q)),()=>clearTimeout(Ge)},[w,m,L,f,Ye,dn,f.promise,K,H,Yr]),j.useEffect(()=>{let Ge=je.current;if(Ge){let Q=Ge.getBoundingClientRect().height;return ve(Q),g(oe=>[{toastId:f.id,height:Q,position:f.position},...oe]),()=>g(oe=>oe.filter(Je=>Je.toastId!==f.id))}},[g,f.id]),j.useEffect(()=>{f.delete&&dn()},[dn,f.delete]);function nn(){return W!=null&&W.loading?j.createElement("div",{className:"sonner-loader","data-visible":K==="loading"},W.loading):F?j.createElement("div",{className:"sonner-loader","data-visible":K==="loading"},F):j.createElement(zie,{visible:K==="loading"})}return j.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:je,className:Y(O,Te,P==null?void 0:P.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,P==null?void 0:P.default,P==null?void 0:P[K],(n=f==null?void 0:f.classNames)==null?void 0:n[K]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:C,"data-styled":!(f.jsx||f.unstyled||p),"data-mounted":se,"data-promise":!!f.promise,"data-removed":De,"data-visible":Ot,"data-y-position":nr,"data-x-position":Ui,"data-index":x,"data-front":mt,"data-swiping":de,"data-dismissible":fe,"data-type":K,"data-invert":ma,"data-swipe-out":J,"data-expanded":!!(w||L&&se),style:{"--index":x,"--toasts-before":x,"--z-index":b.length-x,"--offset":`${De?Z:Ue.current}px`,"--initial-height":L?"auto":`${ge}px`,...N,...f.style},onPointerDown:Ge=>{Wi||!fe||(Fe.current=new Date,V(Ue.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(Ee(!0),An.current={x:Ge.clientX,y:Ge.clientY}))},onPointerUp:()=>{var Ge,Q,oe,Je;if(J||!fe)return;An.current=null;let vn=Number(((Ge=je.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount").replace("px",""))||0),rr=new Date().getTime()-((Q=Fe.current)==null?void 0:Q.getTime()),ga=Math.abs(vn)/rr;if(Math.abs(vn)>=ooe||ga>.11){V(Ue.current),(oe=f.onDismiss)==null||oe.call(f,f),dn(),ie(!0);return}(Je=je.current)==null||Je.style.setProperty("--swipe-amount","0px"),Ee(!1)},onPointerMove:Ge=>{var Q;if(!An.current||!fe)return;let oe=Ge.clientY-An.current.y,Je=Ge.clientX-An.current.x,vn=(nr==="top"?Math.min:Math.max)(0,oe),rr=Ge.pointerType==="touch"?10:2;Math.abs(vn)>rr?(Q=je.current)==null||Q.style.setProperty("--swipe-amount",`${oe}px`):Math.abs(Je)>rr&&(An.current=null)}},gt&&!f.jsx?j.createElement("button",{"aria-label":q,"data-disabled":Wi,"data-close-button":!0,onClick:Wi||!fe?()=>{}:()=>{var Ge;dn(),(Ge=f.onDismiss)==null||Ge.call(f,f)},className:Y(P==null?void 0:P.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},j.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),j.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||j.isValidElement(f.title)?f.jsx||f.title:j.createElement(j.Fragment,null,K||f.icon||f.promise?j.createElement("div",{"data-icon":"",className:Y(P==null?void 0:P.icon,(i=f==null?void 0:f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||nn():null,f.type!=="loading"?f.icon||(W==null?void 0:W[K])||Uie(K):null):null,j.createElement("div",{"data-content":"",className:Y(P==null?void 0:P.content,(o=f==null?void 0:f.classNames)==null?void 0:o.content)},j.createElement("div",{"data-title":"",className:Y(P==null?void 0:P.title,(a=f==null?void 0:f.classNames)==null?void 0:a.title)},f.title),f.description?j.createElement("div",{"data-description":"",className:Y(k,Qe,P==null?void 0:P.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},f.description):null),j.isValidElement(f.cancel)?f.cancel:f.cancel&&_x(f.cancel)?j.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||I,onClick:Ge=>{var Q,oe;_x(f.cancel)&&fe&&((oe=(Q=f.cancel).onClick)==null||oe.call(Q,Ge),dn())},className:Y(P==null?void 0:P.cancelButton,(c=f==null?void 0:f.classNames)==null?void 0:c.cancelButton)},f.cancel.label):null,j.isValidElement(f.action)?f.action:f.action&&_x(f.action)?j.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||$,onClick:Ge=>{var Q,oe;_x(f.action)&&(Ge.defaultPrevented||((oe=(Q=f.action).onClick)==null||oe.call(Q,Ge),dn()))},className:Y(P==null?void 0:P.actionButton,(u=f==null?void 0:f.classNames)==null?void 0:u.actionButton)},f.action.label):null))};function DD(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var uoe=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:a,theme:l="light",richColors:c,duration:u,style:d,visibleToasts:f=toe,toastOptions:p,dir:m=DD(),gap:g=ioe,loadingIcon:y,icons:v,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:b,cn:w=loe}=t,[_,C]=j.useState([]),E=j.useMemo(()=>Array.from(new Set([n].concat(_.filter(H=>H.position).map(H=>H.position)))),[_,n]),[N,I]=j.useState([]),[$,O]=j.useState(!1),[k,R]=j.useState(!1),[M,B]=j.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=j.useRef(null),L=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=j.useRef(null),W=j.useRef(!1),q=j.useCallback(H=>{var Y;(Y=_.find(se=>se.id===H.id))!=null&&Y.delete||Ms.dismiss(H.id),C(se=>se.filter(({id:Se})=>Se!==H.id))},[_]);return j.useEffect(()=>Ms.subscribe(H=>{if(H.dismiss){C(Y=>Y.map(se=>se.id===H.id?{...se,delete:!0}:se));return}setTimeout(()=>{WO.flushSync(()=>{C(Y=>{let se=Y.findIndex(Se=>Se.id===H.id);return se!==-1?[...Y.slice(0,se),{...Y[se],...H},...Y.slice(se+1)]:[H,...Y]})})})}),[]),j.useEffect(()=>{if(l!=="system"){B(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:H})=>{B(H?"dark":"light")})},[l]),j.useEffect(()=>{_.length<=1&&O(!1)},[_]),j.useEffect(()=>{let H=Y=>{var se,Se;r.every(De=>Y[De]||Y.code===De)&&(O(!0),(se=F.current)==null||se.focus()),Y.code==="Escape"&&(document.activeElement===F.current||(Se=F.current)!=null&&Se.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[r]),j.useEffect(()=>{if(F.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,W.current=!1)}},[F.current]),_.length?j.createElement("section",{"aria-label":`${x} ${L}`,tabIndex:-1},E.map((H,Y)=>{var se;let[Se,De]=H.split("-");return j.createElement("ol",{key:H,dir:m==="auto"?DD():m,tabIndex:-1,ref:F,className:o,"data-sonner-toaster":!0,"data-theme":M,"data-y-position":Se,"data-x-position":De,style:{"--front-toast-height":`${((se=N[0])==null?void 0:se.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||noe,"--width":`${soe}px`,"--gap":`${g}px`,...d},onBlur:Pe=>{W.current&&!Pe.currentTarget.contains(Pe.relatedTarget)&&(W.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||W.current||(W.current=!0,P.current=Pe.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{k||O(!1)},onPointerDown:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},_.filter(Pe=>!Pe.position&&Y===0||Pe.position===H).map((Pe,de)=>{var Ee,J;return j.createElement(coe,{key:Pe.id,icons:v,index:de,toast:Pe,defaultRichColors:c,duration:(Ee=p==null?void 0:p.duration)!=null?Ee:u,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:e,visibleToasts:f,closeButton:(J=p==null?void 0:p.closeButton)!=null?J:i,interacting:k,position:H,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:q,toasts:_.filter(ie=>ie.position==Pe.position),heights:N.filter(ie=>ie.position==Pe.position),setHeights:I,expandByDefault:s,gap:g,loadingIcon:y,expanded:$,pauseWhenPageIsHidden:b,cn:w})}))})):null};const Vz=({...t})=>{const{theme:e="system"}=Bie();return h.jsx(uoe,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function doe(){return h.jsx(Vz,{})}function Ne(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function foe(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function zO(...t){return e=>t.forEach(n=>foe(n,e))}function lt(...t){return S.useCallback(zO(...t),t)}function hoe(t,e){const n=S.createContext(e),r=i=>{const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function No(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=d=>{var v;const{scope:f,children:p,...m}=d,g=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,y=S.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:y,children:p})};c.displayName=i+"Provider";function u(d,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,m=S.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,poe(s,...e)]}function poe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Oi=S.forwardRef((t,e)=>{const{children:n,...r}=t,s=S.Children.toArray(n),i=s.find(moe);if(i){const o=i.props.children,a=s.map(l=>l===i?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return h.jsx(IE,{...r,ref:e,children:S.isValidElement(o)?S.cloneElement(o,void 0,a):null})}return h.jsx(IE,{...r,ref:e,children:n})});Oi.displayName="Slot";var IE=S.forwardRef((t,e)=>{const{children:n,...r}=t;if(S.isValidElement(n)){const s=yoe(n);return S.cloneElement(n,{...goe(r,n.props),ref:e?zO(e,s):s})}return S.Children.count(n)>1?S.Children.only(null):null});IE.displayName="SlotClone";var VO=({children:t})=>h.jsx(h.Fragment,{children:t});function moe(t){return S.isValidElement(t)&&t.type===VO}function goe(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function yoe(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var voe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Re=voe.reduce((t,e)=>{const n=S.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Oi:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function kE(t,e){t&&lp.flushSync(()=>t.dispatchEvent(e))}function cn(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function xoe(t,e=globalThis==null?void 0:globalThis.document){const n=cn(t);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var boe="DismissableLayer",OE="dismissableLayer.update",woe="dismissableLayer.pointerDownOutside",Soe="dismissableLayer.focusOutside",jD,Hz=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lv=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(Hz),[u,d]=S.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=S.useState({}),m=lt(e,E=>d(E)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),x=u?g.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,w=x>=v,_=Noe(E=>{const N=E.target,I=[...c.branches].some($=>$.contains(N));!w||I||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},f),C=Eoe(E=>{const N=E.target;[...c.branches].some($=>$.contains(N))||(i==null||i(E),o==null||o(E),E.defaultPrevented||a==null||a())},f);return xoe(E=>{x===c.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),S.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(jD=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),MD(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=jD)}},[u,f,n,c]),S.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),MD())},[u,c]),S.useEffect(()=>{const E=()=>p({});return document.addEventListener(OE,E),()=>document.removeEventListener(OE,E)},[]),h.jsx(Re.div,{...l,ref:m,style:{pointerEvents:b?w?"auto":"none":void 0,...t.style},onFocusCapture:Ne(t.onFocusCapture,C.onFocusCapture),onBlurCapture:Ne(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Ne(t.onPointerDownCapture,_.onPointerDownCapture)})});lv.displayName=boe;var _oe="DismissableLayerBranch",Coe=S.forwardRef((t,e)=>{const n=S.useContext(Hz),r=S.useRef(null),s=lt(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),h.jsx(Re.div,{...t,ref:s})});Coe.displayName=_oe;function Noe(t,e=globalThis==null?void 0:globalThis.document){const n=cn(t),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){Gz(woe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Eoe(t,e=globalThis==null?void 0:globalThis.document){const n=cn(t),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&Gz(Soe,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function MD(){const t=new CustomEvent(OE);document.dispatchEvent(t)}function Gz(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?kE(s,i):s.dispatchEvent(i)}var jn=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},Toe=BU.useId||(()=>{}),Ioe=0;function ho(t){const[e,n]=S.useState(Toe());return jn(()=>{t||n(r=>r??String(Ioe++))},[t]),t||(e?`radix-${e}`:"")}const koe=["top","right","bottom","left"],Cc=Math.min,Ws=Math.max,i0=Math.round,Cx=Math.floor,Nc=t=>({x:t,y:t}),Ooe={left:"right",right:"left",bottom:"top",top:"bottom"},$oe={start:"end",end:"start"};function $E(t,e,n){return Ws(t,Cc(e,n))}function Ja(t,e){return typeof t=="function"?t(e):t}function Za(t){return t.split("-")[0]}function cp(t){return t.split("-")[1]}function HO(t){return t==="x"?"y":"x"}function GO(t){return t==="y"?"height":"width"}function Ec(t){return["top","bottom"].includes(Za(t))?"y":"x"}function qO(t){return HO(Ec(t))}function Aoe(t,e,n){n===void 0&&(n=!1);const r=cp(t),s=qO(t),i=GO(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=o0(o)),[o,o0(o)]}function Poe(t){const e=o0(t);return[AE(t),e,AE(e)]}function AE(t){return t.replace(/start|end/g,e=>$oe[e])}function Roe(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function Doe(t,e,n,r){const s=cp(t);let i=Roe(Za(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(AE)))),i}function o0(t){return t.replace(/left|right|bottom|top/g,e=>Ooe[e])}function joe(t){return{top:0,right:0,bottom:0,left:0,...t}}function qz(t){return typeof t!="number"?joe(t):{top:t,right:t,bottom:t,left:t}}function a0(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function LD(t,e,n){let{reference:r,floating:s}=t;const i=Ec(e),o=qO(e),a=GO(o),l=Za(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(cp(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const Moe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=LD(c,r,l),f=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:y,fn:v}=a[g],{x,y:b,data:w,reset:_}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,d=b??d,p={...p,[y]:{...p[y],...w}},_&&m<=50&&(m++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):_.rects),{x:u,y:d}=LD(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:p}};async function Mg(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Ja(e,t),m=qz(p),y=a[f?d==="floating"?"reference":"floating":d],v=a0(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),w=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},_=a0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(v.top-_.top+m.top)/w.y,bottom:(_.bottom-v.bottom+m.bottom)/w.y,left:(v.left-_.left+m.left)/w.x,right:(_.right-v.right+m.right)/w.x}}const Loe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Ja(t,e)||{};if(c==null)return{};const d=qz(u),f={x:n,y:r},p=qO(s),m=GO(p),g=await o.getDimensions(c),y=p==="y",v=y?"top":"left",x=y?"bottom":"right",b=y?"clientHeight":"clientWidth",w=i.reference[m]+i.reference[p]-f[p]-i.floating[m],_=f[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=C?C[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[b]||i.floating[m]);const N=w/2-_/2,I=E/2-g[m]/2-1,$=Cc(d[v],I),O=Cc(d[x],I),k=$,R=E-g[m]-O,M=E/2-g[m]/2+N,B=$E(k,M,R),F=!l.arrow&&cp(s)!=null&&M!==B&&i.reference[m]/2-(M<k?$:O)-g[m]/2<0,L=F?M<k?M-k:M-R:0;return{[p]:f[p]+L,data:{[p]:B,centerOffset:M-B-L,...F&&{alignmentOffset:L}},reset:F}}}),Foe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=Ja(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=Za(s),x=Ec(a),b=Za(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(b||!g?[o0(a)]:Poe(a)),C=m!=="none";!f&&C&&_.push(...Doe(a,g,m,w));const E=[a,..._],N=await Mg(e,y),I=[];let $=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&I.push(N[v]),d){const M=Aoe(s,o,w);I.push(N[M[0]],N[M[1]])}if($=[...$,{placement:s,overflows:I}],!I.every(M=>M<=0)){var O,k;const M=(((O=i.flip)==null?void 0:O.index)||0)+1,B=E[M];if(B)return{data:{index:M,overflows:$},reset:{placement:B}};let F=(k=$.filter(L=>L.overflows[0]<=0).sort((L,P)=>L.overflows[1]-P.overflows[1])[0])==null?void 0:k.placement;if(!F)switch(p){case"bestFit":{var R;const L=(R=$.filter(P=>{if(C){const W=Ec(P.placement);return W===x||W==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(W=>W>0).reduce((W,q)=>W+q,0)]).sort((P,W)=>P[1]-W[1])[0])==null?void 0:R[0];L&&(F=L);break}case"initialPlacement":F=a;break}if(s!==F)return{reset:{placement:F}}}return{}}}};function FD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function BD(t){return koe.some(e=>t[e]>=0)}const Boe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ja(t,e);switch(r){case"referenceHidden":{const i=await Mg(e,{...s,elementContext:"reference"}),o=FD(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:BD(o)}}}case"escaped":{const i=await Mg(e,{...s,altBoundary:!0}),o=FD(i,n.floating);return{data:{escapedOffsets:o,escaped:BD(o)}}}default:return{}}}}};async function Uoe(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Za(n),a=cp(n),l=Ec(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,d=Ja(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const Woe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await Uoe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},zoe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:x}=y;return{x:v,y:x}}},...l}=Ja(t,e),c={x:n,y:r},u=await Mg(e,l),d=Ec(Za(s)),f=HO(d);let p=c[f],m=c[d];if(i){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=p+u[y],b=p-u[v];p=$E(x,p,b)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",x=m+u[y],b=m-u[v];m=$E(x,m,b)}const g=a.fn({...e,[f]:p,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[d]:o}}}}}},Voe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ja(t,e),u={x:n,y:r},d=Ec(s),f=HO(d);let p=u[f],m=u[d];const g=Ja(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=f==="y"?"height":"width",w=i.reference[f]-i.floating[b]+y.mainAxis,_=i.reference[f]+i.reference[b]-y.mainAxis;p<w?p=w:p>_&&(p=_)}if(c){var v,x;const b=f==="y"?"width":"height",w=["top","left"].includes(Za(s)),_=i.reference[d]-i.floating[b]+(w&&((v=o.offset)==null?void 0:v[d])||0)+(w?0:y.crossAxis),C=i.reference[d]+i.reference[b]+(w?0:((x=o.offset)==null?void 0:x[d])||0)-(w?y.crossAxis:0);m<_?m=_:m>C&&(m=C)}return{[f]:p,[d]:m}}}},Hoe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ja(t,e),u=await Mg(e,c),d=Za(s),f=cp(s),p=Ec(s)==="y",{width:m,height:g}=i.floating;let y,v;d==="top"||d==="bottom"?(y=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,y=f==="end"?"top":"bottom");const x=g-u.top-u.bottom,b=m-u.left-u.right,w=Cc(g-u[y],x),_=Cc(m-u[v],b),C=!e.middlewareData.shift;let E=w,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=x),C&&!f){const $=Ws(u.left,0),O=Ws(u.right,0),k=Ws(u.top,0),R=Ws(u.bottom,0);p?N=m-2*($!==0||O!==0?$+O:Ws(u.left,u.right)):E=g-2*(k!==0||R!==0?k+R:Ws(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:E});const I=await o.getDimensions(a.floating);return m!==I.width||g!==I.height?{reset:{rects:!0}}:{}}}};function k1(){return typeof window<"u"}function up(t){return Kz(t)?(t.nodeName||"").toLowerCase():"#document"}function Xs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function oa(t){var e;return(e=(Kz(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Kz(t){return k1()?t instanceof Node||t instanceof Xs(t).Node:!1}function xo(t){return k1()?t instanceof Element||t instanceof Xs(t).Element:!1}function ea(t){return k1()?t instanceof HTMLElement||t instanceof Xs(t).HTMLElement:!1}function UD(t){return!k1()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xs(t).ShadowRoot}function cv(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=bo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function Goe(t){return["table","td","th"].includes(up(t))}function O1(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function KO(t){const e=XO(),n=xo(t)?bo(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function qoe(t){let e=Tc(t);for(;ea(e)&&!vh(e);){if(KO(e))return e;if(O1(e))return null;e=Tc(e)}return null}function XO(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vh(t){return["html","body","#document"].includes(up(t))}function bo(t){return Xs(t).getComputedStyle(t)}function $1(t){return xo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Tc(t){if(up(t)==="html")return t;const e=t.assignedSlot||t.parentNode||UD(t)&&t.host||oa(t);return UD(e)?e.host:e}function Xz(t){const e=Tc(t);return vh(e)?t.ownerDocument?t.ownerDocument.body:t.body:ea(e)&&cv(e)?e:Xz(e)}function Lg(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Xz(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Xs(s);if(i){const a=PE(o);return e.concat(o,o.visualViewport||[],cv(s)?s:[],a&&n?Lg(a):[])}return e.concat(s,Lg(s,[],n))}function PE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Yz(t){const e=bo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ea(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=i0(n)!==i||i0(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function YO(t){return xo(t)?t:t.contextElement}function Ff(t){const e=YO(t);if(!ea(e))return Nc(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Yz(e);let o=(i?i0(n.width):n.width)/r,a=(i?i0(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Koe=Nc(0);function Qz(t){const e=Xs(t);return!XO()||!e.visualViewport?Koe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Xoe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Xs(t)?!1:e}function Ju(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=YO(t);let o=Nc(1);e&&(r?xo(r)&&(o=Ff(r)):o=Ff(t));const a=Xoe(i,n,r)?Qz(i):Nc(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=Xs(i),p=r&&xo(r)?Xs(r):r;let m=f,g=PE(m);for(;g&&r&&p!==m;){const y=Ff(g),v=g.getBoundingClientRect(),x=bo(g),b=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*y.x,w=v.top+(g.clientTop+parseFloat(x.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=b,c+=w,m=Xs(g),g=PE(m)}}return a0({width:u,height:d,x:l,y:c})}function Yoe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=oa(r),a=e?O1(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Nc(1);const u=Nc(0),d=ea(r);if((d||!d&&!i)&&((up(r)!=="body"||cv(o))&&(l=$1(r)),ea(r))){const f=Ju(r);c=Ff(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function Qoe(t){return Array.from(t.getClientRects())}function RE(t,e){const n=$1(t).scrollLeft;return e?e.left+n:Ju(oa(t)).left+n}function Joe(t){const e=oa(t),n=$1(t),r=t.ownerDocument.body,s=Ws(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ws(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+RE(t);const a=-n.scrollTop;return bo(r).direction==="rtl"&&(o+=Ws(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function Zoe(t,e){const n=Xs(t),r=oa(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=XO();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function eae(t,e){const n=Ju(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ea(t)?Ff(t):Nc(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function WD(t,e,n){let r;if(e==="viewport")r=Zoe(t,n);else if(e==="document")r=Joe(oa(t));else if(xo(e))r=eae(e,n);else{const s=Qz(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return a0(r)}function Jz(t,e){const n=Tc(t);return n===e||!xo(n)||vh(n)?!1:bo(n).position==="fixed"||Jz(n,e)}function tae(t,e){const n=e.get(t);if(n)return n;let r=Lg(t,[],!1).filter(a=>xo(a)&&up(a)!=="body"),s=null;const i=bo(t).position==="fixed";let o=i?Tc(t):t;for(;xo(o)&&!vh(o);){const a=bo(o),l=KO(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||cv(o)&&!l&&Jz(t,o))?r=r.filter(u=>u!==o):s=a,o=Tc(o)}return e.set(t,r),r}function nae(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?O1(e)?[]:tae(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=WD(e,u,s);return c.top=Ws(d.top,c.top),c.right=Cc(d.right,c.right),c.bottom=Cc(d.bottom,c.bottom),c.left=Ws(d.left,c.left),c},WD(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function rae(t){const{width:e,height:n}=Yz(t);return{width:e,height:n}}function sae(t,e,n){const r=ea(e),s=oa(e),i=n==="fixed",o=Ju(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Nc(0);if(r||!r&&!i)if((up(e)!=="body"||cv(s))&&(a=$1(e)),r){const p=Ju(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&(l.x=RE(s));let c=0,u=0;if(s&&!r&&!i){const p=s.getBoundingClientRect();u=p.top+a.scrollTop,c=p.left+a.scrollLeft-RE(s,p)}const d=o.left+a.scrollLeft-l.x-c,f=o.top+a.scrollTop-l.y-u;return{x:d,y:f,width:o.width,height:o.height}}function lC(t){return bo(t).position==="static"}function zD(t,e){if(!ea(t)||bo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return oa(t)===n&&(n=n.ownerDocument.body),n}function Zz(t,e){const n=Xs(t);if(O1(t))return n;if(!ea(t)){let s=Tc(t);for(;s&&!vh(s);){if(xo(s)&&!lC(s))return s;s=Tc(s)}return n}let r=zD(t,e);for(;r&&Goe(r)&&lC(r);)r=zD(r,e);return r&&vh(r)&&lC(r)&&!KO(r)?n:r||qoe(t)||n}const iae=async function(t){const e=this.getOffsetParent||Zz,n=this.getDimensions,r=await n(t.floating);return{reference:sae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function oae(t){return bo(t).direction==="rtl"}const aae={convertOffsetParentRelativeRectToViewportRelativeRect:Yoe,getDocumentElement:oa,getClippingRect:nae,getOffsetParent:Zz,getElementRects:iae,getClientRects:Qoe,getDimensions:rae,getScale:Ff,isElement:xo,isRTL:oae};function lae(t,e){let n=null,r;const s=oa(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const p=Cx(u),m=Cx(s.clientWidth-(c+d)),g=Cx(s.clientHeight-(u+f)),y=Cx(c),x={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:Ws(0,Cc(1,l))||1};let b=!0;function w(_){const C=_[0].intersectionRatio;if(C!==l){if(!b)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...x,root:s.ownerDocument})}catch{n=new IntersectionObserver(w,x)}n.observe(t)}return o(!0),i}function cae(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=YO(t),u=s||i?[...c?Lg(c):[],...Lg(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const d=c&&a?lae(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?Ju(t):null;l&&y();function y(){const v=Ju(t);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,m=requestAnimationFrame(y)}return n(),()=>{var v;u.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const uae=Woe,dae=zoe,fae=Foe,hae=Hoe,pae=Boe,VD=Loe,mae=Voe,gae=(t,e,n)=>{const r=new Map,s={platform:aae,...n},i={...s.platform,_c:r};return Moe(t,e,{...s,platform:i})};var vb=typeof document<"u"?S.useLayoutEffect:S.useEffect;function l0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!l0(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!l0(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function eV(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function HD(t,e){const n=eV(t);return Math.round(e*n)/n}function cC(t){const e=S.useRef(t);return vb(()=>{e.current=t}),e}function yae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=S.useState(r);l0(f,r)||p(r);const[m,g]=S.useState(null),[y,v]=S.useState(null),x=S.useCallback(P=>{P!==C.current&&(C.current=P,g(P))},[]),b=S.useCallback(P=>{P!==E.current&&(E.current=P,v(P))},[]),w=i||m,_=o||y,C=S.useRef(null),E=S.useRef(null),N=S.useRef(u),I=l!=null,$=cC(l),O=cC(s),k=cC(c),R=S.useCallback(()=>{if(!C.current||!E.current)return;const P={placement:e,strategy:n,middleware:f};O.current&&(P.platform=O.current),gae(C.current,E.current,P).then(W=>{const q={...W,isPositioned:k.current!==!1};M.current&&!l0(N.current,q)&&(N.current=q,lp.flushSync(()=>{d(q)}))})},[f,e,n,O,k]);vb(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(P=>({...P,isPositioned:!1})))},[c]);const M=S.useRef(!1);vb(()=>(M.current=!0,()=>{M.current=!1}),[]),vb(()=>{if(w&&(C.current=w),_&&(E.current=_),w&&_){if($.current)return $.current(w,_,R);R()}},[w,_,R,$,I]);const B=S.useMemo(()=>({reference:C,floating:E,setReference:x,setFloating:b}),[x,b]),F=S.useMemo(()=>({reference:w,floating:_}),[w,_]),L=S.useMemo(()=>{const P={position:n,left:0,top:0};if(!F.floating)return P;const W=HD(F.floating,u.x),q=HD(F.floating,u.y);return a?{...P,transform:"translate("+W+"px, "+q+"px)",...eV(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:q}},[n,a,F.floating,u.x,u.y]);return S.useMemo(()=>({...u,update:R,refs:B,elements:F,floatingStyles:L}),[u,R,B,F,L])}const vae=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?VD({element:r.current,padding:s}).fn(n):{}:r?VD({element:r,padding:s}).fn(n):{}}}},xae=(t,e)=>({...uae(t),options:[t,e]}),bae=(t,e)=>({...dae(t),options:[t,e]}),wae=(t,e)=>({...mae(t),options:[t,e]}),Sae=(t,e)=>({...fae(t),options:[t,e]}),_ae=(t,e)=>({...hae(t),options:[t,e]}),Cae=(t,e)=>({...pae(t),options:[t,e]}),Nae=(t,e)=>({...vae(t),options:[t,e]});var Eae="Arrow",tV=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return h.jsx(Re.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});tV.displayName=Eae;var Tae=tV;function Iae(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:p,...m}=d,g=(f==null?void 0:f[t][l])||a,y=S.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:y,children:p})}function u(d,f){const p=(f==null?void 0:f[t][l])||a,m=S.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,kae(s,...e)]}function kae(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function QO(t){const[e,n]=S.useState(void 0);return jn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var JO="Popper",[nV,A1]=Iae(JO),[Oae,rV]=nV(JO),sV=t=>{const{__scopePopper:e,children:n}=t,[r,s]=S.useState(null);return h.jsx(Oae,{scope:e,anchor:r,onAnchorChange:s,children:n})};sV.displayName=JO;var iV="PopperAnchor",oV=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=rV(iV,n),o=S.useRef(null),a=lt(e,o);return S.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:h.jsx(Re.div,{...s,ref:a})});oV.displayName=iV;var ZO="PopperContent",[$ae,Aae]=nV(ZO),aV=S.forwardRef((t,e)=>{var de,Ee,J,ie,Z,V;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=t,y=rV(ZO,n),[v,x]=S.useState(null),b=lt(e,ge=>x(ge)),[w,_]=S.useState(null),C=QO(w),E=(C==null?void 0:C.width)??0,N=(C==null?void 0:C.height)??0,I=r+(i!=="center"?"-"+i:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],k=O.length>0,R={padding:$,boundary:O.filter(Rae),altBoundary:k},{refs:M,floatingStyles:B,placement:F,isPositioned:L,middlewareData:P}=yae({strategy:"fixed",placement:I,whileElementsMounted:(...ge)=>cae(...ge,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[xae({mainAxis:s+N,alignmentAxis:o}),l&&bae({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?wae():void 0,...R}),l&&Sae({...R}),_ae({...R,apply:({elements:ge,rects:ve,availableWidth:Fe,availableHeight:je})=>{const{width:mt,height:Ot}=ve.reference,K=ge.floating.style;K.setProperty("--radix-popper-available-width",`${Fe}px`),K.setProperty("--radix-popper-available-height",`${je}px`),K.setProperty("--radix-popper-anchor-width",`${mt}px`),K.setProperty("--radix-popper-anchor-height",`${Ot}px`)}}),w&&Nae({element:w,padding:a}),Dae({arrowWidth:E,arrowHeight:N}),f&&Cae({strategy:"referenceHidden",...R})]}),[W,q]=uV(F),H=cn(m);jn(()=>{L&&(H==null||H())},[L,H]);const Y=(de=P.arrow)==null?void 0:de.x,se=(Ee=P.arrow)==null?void 0:Ee.y,Se=((J=P.arrow)==null?void 0:J.centerOffset)!==0,[De,Pe]=S.useState();return jn(()=>{v&&Pe(window.getComputedStyle(v).zIndex)},[v]),h.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:L?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[(ie=P.transformOrigin)==null?void 0:ie.x,(Z=P.transformOrigin)==null?void 0:Z.y].join(" "),...((V=P.hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx($ae,{scope:n,placedSide:W,onArrowChange:_,arrowX:Y,arrowY:se,shouldHideArrow:Se,children:h.jsx(Re.div,{"data-side":W,"data-align":q,...g,ref:b,style:{...g.style,animation:L?void 0:"none"}})})})});aV.displayName=ZO;var lV="PopperArrow",Pae={top:"bottom",right:"left",bottom:"top",left:"right"},cV=S.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Aae(lV,r),o=Pae[i.placedSide];return h.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:h.jsx(Tae,{...s,ref:n,style:{...s.style,display:"block"}})})});cV.displayName=lV;function Rae(t){return t!==null}var Dae=t=>({name:"transformOrigin",options:t,fn(e){var y,v,x;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=uV(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=o?d:`${f}px`,g=`${-l}px`):c==="top"?(m=o?d:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=o?d:`${p}px`):c==="left"&&(m=`${r.floating.width+l}px`,g=o?d:`${p}px`),{data:{x:m,y:g}}}});function uV(t){const[e,n="center"]=t.split("-");return[e,n]}var dV=sV,fV=oV,hV=aV,pV=cV,jae="Portal",e$=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=S.useState(!1);jn(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?WO.createPortal(h.jsx(Re.div,{...r,ref:e}),o):null});e$.displayName=jae;function Mae(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var qr=t=>{const{present:e,children:n}=t,r=Lae(e),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=lt(r.ref,Fae(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};qr.displayName="Presence";function Lae(t){const[e,n]=S.useState(),r=S.useRef({}),s=S.useRef(t),i=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Mae(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=Nx(r.current);i.current=a==="mounted"?c:"none"},[a]),jn(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,p=Nx(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),jn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const g=Nx(r.current).includes(p.animationName);if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=p=>{p.target===e&&(i.current=Nx(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Nx(t){return(t==null?void 0:t.animationName)||"none"}function Fae(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ta({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=Bae({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=cn(n),l=S.useCallback(c=>{if(i){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[i,t,s,a]);return[o,l]}function Bae({defaultProp:t,onChange:e}){const n=S.useState(t),[r]=n,s=S.useRef(r),i=cn(e);return S.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var Uae="VisuallyHidden",t$=S.forwardRef((t,e)=>h.jsx(Re.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));t$.displayName=Uae;var mV=t$,[P1,Wgt]=No("Tooltip",[A1]),R1=A1(),gV="TooltipProvider",Wae=700,DE="tooltip.open",[zae,n$]=P1(gV),yV=t=>{const{__scopeTooltip:e,delayDuration:n=Wae,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,[o,a]=S.useState(!0),l=S.useRef(!1),c=S.useRef(0);return S.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),h.jsx(zae,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:S.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:S.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};yV.displayName=gV;var D1="Tooltip",[Vae,j1]=P1(D1),vV=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=n$(D1,t.__scopeTooltip),c=R1(e),[u,d]=S.useState(null),f=ho(),p=S.useRef(0),m=o??l.disableHoverableContent,g=a??l.delayDuration,y=S.useRef(!1),[v=!1,x]=ta({prop:r,defaultProp:s,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent(DE))):l.onClose(),i==null||i(E)}}),b=S.useMemo(()=>v?y.current?"delayed-open":"instant-open":"closed",[v]),w=S.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,x(!0)},[x]),_=S.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x(!1)},[x]),C=S.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,x(!0),p.current=0},g)},[g,x]);return S.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),h.jsx(dV,{...c,children:h.jsx(Vae,{scope:e,contentId:f,open:v,stateAttribute:b,trigger:u,onTriggerChange:d,onTriggerEnter:S.useCallback(()=>{l.isOpenDelayed?C():w()},[l.isOpenDelayed,C,w]),onTriggerLeave:S.useCallback(()=>{m?_():(window.clearTimeout(p.current),p.current=0)},[_,m]),onOpen:w,onClose:_,disableHoverableContent:m,children:n})})};vV.displayName=D1;var jE="TooltipTrigger",xV=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=j1(jE,n),i=n$(jE,n),o=R1(n),a=S.useRef(null),l=lt(e,a,s.onTriggerChange),c=S.useRef(!1),u=S.useRef(!1),d=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),h.jsx(fV,{asChild:!0,...o,children:h.jsx(Re.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ne(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ne(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Ne(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ne(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ne(t.onBlur,s.onClose),onClick:Ne(t.onClick,s.onClose)})})});xV.displayName=jE;var Hae="TooltipPortal",[zgt,Gae]=P1(Hae,{forceMount:void 0}),xh="TooltipContent",bV=S.forwardRef((t,e)=>{const n=Gae(xh,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=j1(xh,t.__scopeTooltip);return h.jsx(qr,{present:r||o.open,children:o.disableHoverableContent?h.jsx(wV,{side:s,...i,ref:e}):h.jsx(qae,{side:s,...i,ref:e})})}),qae=S.forwardRef((t,e)=>{const n=j1(xh,t.__scopeTooltip),r=n$(xh,t.__scopeTooltip),s=S.useRef(null),i=lt(e,s),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:d}=r,f=S.useCallback(()=>{a(null),d(!1)},[d]),p=S.useCallback((m,g)=>{const y=m.currentTarget,v={x:m.clientX,y:m.clientY},x=Qae(v,y.getBoundingClientRect()),b=Jae(v,x),w=Zae(g.getBoundingClientRect()),_=tle([...b,...w]);a(_),d(!0)},[d]);return S.useEffect(()=>()=>f(),[f]),S.useEffect(()=>{if(l&&u){const m=y=>p(y,u),g=y=>p(y,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",g)}}},[l,u,p,f]),S.useEffect(()=>{if(o){const m=g=>{const y=g.target,v={x:g.clientX,y:g.clientY},x=(l==null?void 0:l.contains(y))||(u==null?void 0:u.contains(y)),b=!ele(v,o);x?f():b&&(f(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,o,c,f]),h.jsx(wV,{...t,ref:i})}),[Kae,Xae]=P1(D1,{isInside:!1}),wV=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=j1(xh,n),c=R1(n),{onClose:u}=l;return S.useEffect(()=>(document.addEventListener(DE,u),()=>document.removeEventListener(DE,u)),[u]),S.useEffect(()=>{if(l.trigger){const d=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),h.jsx(lv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:h.jsxs(hV,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(VO,{children:r}),h.jsx(Kae,{scope:n,isInside:!0,children:h.jsx(mV,{id:l.contentId,role:"tooltip",children:s||r})})]})})});bV.displayName=xh;var SV="TooltipArrow",Yae=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=R1(n);return Xae(SV,n).isInside?null:h.jsx(pV,{...s,...r,ref:e})});Yae.displayName=SV;function Qae(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Jae(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Zae(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function ele(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function tle(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),nle(e)}function nle(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var rle=yV,sle=vV,ile=xV,_V=bV;function CV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=CV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function at(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=CV(t))&&(r&&(r+=" "),r+=e);return r}const r$="-",ole=t=>{const e=lle(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(r$);return a[0]===""&&a.length!==1&&a.shift(),NV(a,e)||ale(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},NV=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?NV(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(r$);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},GD=/^\[(.+)\]$/,ale=t=>{if(GD.test(t)){const e=GD.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},lle=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return ule(Object.entries(t.classGroups),n).forEach(([i,o])=>{ME(o,r,i,e)}),r},ME=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:qD(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(cle(s)){ME(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ME(o,qD(e,i),n,r)})})},qD=(t,e)=>{let n=t;return e.split(r$).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},cle=t=>t.isThemeGetter,ule=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,dle=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},EV="!",fle=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let y=0;y<a.length;y++){let v=a[y];if(c===0){if(v===s&&(r||a.slice(y,y+i)===e)){l.push(a.slice(u,y)),u=y+i;continue}if(v==="/"){d=y;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(EV),m=p?f.substring(1):f,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},hle=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},ple=t=>({cache:dle(t.cacheSize),parseClassName:fle(t),...ole(t)}),mle=/\s+/,gle=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(mle);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let m=!!p,g=r(m?f.substring(0,p):f);if(!g){if(!m){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}m=!1}const y=hle(u).join(":"),v=d?y+EV:y,x=v+g;if(i.includes(x))continue;i.push(x);const b=s(g,m);for(let w=0;w<b.length;++w){const _=b[w];i.push(v+_)}a=c+(a.length>0?" "+a:a)}return a};function yle(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=TV(e))&&(r&&(r+=" "),r+=n);return r}const TV=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=TV(t[r]))&&(n&&(n+=" "),n+=e);return n};function vle(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=ple(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=gle(l,n);return s(l,u),u}return function(){return i(yle.apply(null,arguments))}}const rn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},IV=/^\[(?:([a-z-]+):)?(.+)\]$/i,xle=/^\d+\/\d+$/,ble=new Set(["px","full","screen"]),wle=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Sle=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_le=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Cle=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Nle=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,va=t=>Bf(t)||ble.has(t)||xle.test(t),Nl=t=>dp(t,"length",Ple),Bf=t=>!!t&&!Number.isNaN(Number(t)),uC=t=>dp(t,"number",Bf),dm=t=>!!t&&Number.isInteger(Number(t)),Ele=t=>t.endsWith("%")&&Bf(t.slice(0,-1)),nt=t=>IV.test(t),El=t=>wle.test(t),Tle=new Set(["length","size","percentage"]),Ile=t=>dp(t,Tle,kV),kle=t=>dp(t,"position",kV),Ole=new Set(["image","url"]),$le=t=>dp(t,Ole,Dle),Ale=t=>dp(t,"",Rle),fm=()=>!0,dp=(t,e,n)=>{const r=IV.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Ple=t=>Sle.test(t)&&!_le.test(t),kV=()=>!1,Rle=t=>Cle.test(t),Dle=t=>Nle.test(t),jle=()=>{const t=rn("colors"),e=rn("spacing"),n=rn("blur"),r=rn("brightness"),s=rn("borderColor"),i=rn("borderRadius"),o=rn("borderSpacing"),a=rn("borderWidth"),l=rn("contrast"),c=rn("grayscale"),u=rn("hueRotate"),d=rn("invert"),f=rn("gap"),p=rn("gradientColorStops"),m=rn("gradientColorStopPositions"),g=rn("inset"),y=rn("margin"),v=rn("opacity"),x=rn("padding"),b=rn("saturate"),w=rn("scale"),_=rn("sepia"),C=rn("skew"),E=rn("space"),N=rn("translate"),I=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",nt,e],k=()=>[nt,e],R=()=>["",va,Nl],M=()=>["auto",Bf,nt],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",nt],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[Bf,nt];return{cacheSize:500,separator:":",theme:{colors:[fm],spacing:[va,Nl],blur:["none","",El,nt],brightness:H(),borderColor:[t],borderRadius:["none","","full",El,nt],borderSpacing:k(),borderWidth:R(),contrast:H(),grayscale:W(),hueRotate:H(),invert:W(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[Ele,Nl],inset:O(),margin:O(),opacity:H(),padding:k(),saturate:H(),scale:H(),sepia:W(),skew:H(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",nt]}],container:["container"],columns:[{columns:[El]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),nt]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dm,nt]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",dm,nt]}],"grid-cols":[{"grid-cols":[fm]}],"col-start-end":[{col:["auto",{span:["full",dm,nt]},nt]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[fm]}],"row-start-end":[{row:["auto",{span:[dm,nt]},nt]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nt,e]}],"min-w":[{"min-w":[nt,e,"min","max","fit"]}],"max-w":[{"max-w":[nt,e,"none","full","min","max","fit","prose",{screen:[El]},El]}],h:[{h:[nt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",El,Nl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",uC]}],"font-family":[{font:[fm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nt]}],"line-clamp":[{"line-clamp":["none",Bf,uC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",va,nt]}],"list-image":[{"list-image":["none",nt]}],"list-style-type":[{list:["none","disc","decimal",nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",va,Nl]}],"underline-offset":[{"underline-offset":["auto",va,nt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),kle]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ile]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$le]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:F()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[va,nt]}],"outline-w":[{outline:[va,Nl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[va,Nl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",El,Ale]}],"shadow-color":[{shadow:[fm]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",El,nt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nt]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",nt]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[dm,nt]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[va,Nl,uC]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Mle=vle(jle);function ne(...t){return Mle(at(t))}const OV=rle,Lle=sle,Fle=ile,$V=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>h.jsx(_V,{ref:r,sideOffset:e,className:ne("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));$V.displayName=_V.displayName;var M1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},L1=typeof window>"u"||"Deno"in globalThis;function Ki(){}function Ble(t,e){return typeof t=="function"?t(e):t}function Ule(t){return typeof t=="number"&&t>=0&&t!==1/0}function Wle(t,e){return Math.max(t+(e||0)-Date.now(),0)}function KD(t,e){return typeof t=="function"?t(e):t}function zle(t,e){return typeof t=="function"?t(e):t}function XD(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==s$(o,e.options))return!1}else if(!Bg(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function YD(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Fg(e.options.mutationKey)!==Fg(i))return!1}else if(!Bg(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function s$(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fg)(t)}function Fg(t){return JSON.stringify(t,(e,n)=>LE(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Bg(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Bg(t[n],e[n])):!1}function AV(t,e){if(t===e)return t;const n=QD(t)&&QD(e);if(n||LE(t)&&LE(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=AV(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function QD(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function LE(t){if(!JD(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!JD(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function JD(t){return Object.prototype.toString.call(t)==="[object Object]"}function Vle(t){return new Promise(e=>{setTimeout(e,t)})}function Hle(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?AV(t,e):e}function Gle(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function qle(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var i$=Symbol();function PV(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===i$?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Au,Vl,nh,wU,Kle=(wU=class extends M1{constructor(){super();$t(this,Au);$t(this,Vl);$t(this,nh);st(this,nh,e=>{if(!L1&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){re(this,Vl)||this.setEventListener(re(this,nh))}onUnsubscribe(){var e;this.hasListeners()||((e=re(this,Vl))==null||e.call(this),st(this,Vl,void 0))}setEventListener(e){var n;st(this,nh,e),(n=re(this,Vl))==null||n.call(this),st(this,Vl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){re(this,Au)!==e&&(st(this,Au,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof re(this,Au)=="boolean"?re(this,Au):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Au=new WeakMap,Vl=new WeakMap,nh=new WeakMap,wU),RV=new Kle,rh,Hl,sh,SU,Xle=(SU=class extends M1{constructor(){super();$t(this,rh,!0);$t(this,Hl);$t(this,sh);st(this,sh,e=>{if(!L1&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){re(this,Hl)||this.setEventListener(re(this,sh))}onUnsubscribe(){var e;this.hasListeners()||((e=re(this,Hl))==null||e.call(this),st(this,Hl,void 0))}setEventListener(e){var n;st(this,sh,e),(n=re(this,Hl))==null||n.call(this),st(this,Hl,e(this.setOnline.bind(this)))}setOnline(e){re(this,rh)!==e&&(st(this,rh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return re(this,rh)}},rh=new WeakMap,Hl=new WeakMap,sh=new WeakMap,SU),c0=new Xle;function Yle(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Qle(t){return Math.min(1e3*2**t,3e4)}function DV(t){return(t??"online")==="online"?c0.isOnline():!0}var jV=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function dC(t){return t instanceof jV}function MV(t){let e=!1,n=0,r=!1,s;const i=Yle(),o=g=>{var y;r||(f(new jV(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>RV.isFocused()&&(t.networkMode==="always"||c0.isOnline())&&t.canRun(),u=()=>DV(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},f=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},p=()=>new Promise(g=>{var y;s=v=>{(r||c())&&g(v)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(d).catch(v=>{var C;if(r)return;const x=t.retry??(L1?0:3),b=t.retryDelay??Qle,w=typeof b=="function"?b(n,v):b,_=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,v);if(e||!_){f(v);return}n++,(C=t.onFail)==null||C.call(t,n,v),Vle(w).then(()=>c()?void 0:p()).then(()=>{e?f(v):m()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?m():p().then(m),i)}}function Jle(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var ts=Jle(),Pu,_U,LV=(_U=class{constructor(){$t(this,Pu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ule(this.gcTime)&&st(this,Pu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(L1?1/0:5*60*1e3))}clearGcTimeout(){re(this,Pu)&&(clearTimeout(re(this,Pu)),st(this,Pu,void 0))}},Pu=new WeakMap,_U),ih,oh,mi,Dr,tv,Ru,Xi,wa,CU,Zle=(CU=class extends LV{constructor(e){super();$t(this,Xi);$t(this,ih);$t(this,oh);$t(this,mi);$t(this,Dr);$t(this,tv);$t(this,Ru);st(this,Ru,!1),st(this,tv,e.defaultOptions),this.setOptions(e.options),this.observers=[],st(this,mi,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,st(this,ih,tce(this.options)),this.state=e.state??re(this,ih),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=re(this,Dr))==null?void 0:e.promise}setOptions(e){this.options={...re(this,tv),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&re(this,mi).remove(this)}setData(e,n){const r=Hle(this.state.data,e,this.options);return Ar(this,Xi,wa).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ar(this,Xi,wa).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=re(this,Dr))==null?void 0:r.promise;return(s=re(this,Dr))==null||s.cancel(e),n?n.then(Ki).catch(Ki):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(re(this,ih))}isActive(){return this.observers.some(e=>zle(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===i$||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Wle(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=re(this,Dr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=re(this,Dr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),re(this,mi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(re(this,Dr)&&(re(this,Ru)?re(this,Dr).cancel({revert:!0}):re(this,Dr).cancelRetry()),this.scheduleGc()),re(this,mi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ar(this,Xi,wa).call(this,{type:"invalidate"})}fetch(e,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(re(this,Dr))return re(this,Dr).continueRetry(),re(this,Dr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(st(this,Ru,!0),r.signal)})},i=()=>{const d=PV(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return s(f),st(this,Ru,!1),this.options.persister?this.options.persister(d,f,this):d(f)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(o),(l=this.options.behavior)==null||l.onFetch(o,this),st(this,oh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&Ar(this,Xi,wa).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const a=d=>{var f,p,m,g;dC(d)&&d.silent||Ar(this,Xi,wa).call(this,{type:"error",error:d}),dC(d)||((p=(f=re(this,mi).config).onError)==null||p.call(f,d,this),(g=(m=re(this,mi).config).onSettled)==null||g.call(m,this.state.data,d,this)),this.scheduleGc()};return st(this,Dr,MV({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,p,m,g;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){a(y);return}(p=(f=re(this,mi).config).onSuccess)==null||p.call(f,d,this),(g=(m=re(this,mi).config).onSettled)==null||g.call(m,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{Ar(this,Xi,wa).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{Ar(this,Xi,wa).call(this,{type:"pause"})},onContinue:()=>{Ar(this,Xi,wa).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),re(this,Dr).start()}},ih=new WeakMap,oh=new WeakMap,mi=new WeakMap,Dr=new WeakMap,tv=new WeakMap,Ru=new WeakMap,Xi=new WeakSet,wa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ece(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return dC(s)&&s.revert&&re(this,oh)?{...re(this,oh),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),ts.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),re(this,mi).notify({query:this,type:"updated",action:e})})},CU);function ece(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DV(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function tce(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ro,NU,nce=(NU=class extends M1{constructor(e={}){super();$t(this,Ro);this.config=e,st(this,Ro,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??s$(s,n);let o=this.get(i);return o||(o=new Zle({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){re(this,Ro).has(e.queryHash)||(re(this,Ro).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=re(this,Ro).get(e.queryHash);n&&(e.destroy(),n===e&&re(this,Ro).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ts.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return re(this,Ro).get(e)}getAll(){return[...re(this,Ro).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>XD(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>XD(e,r)):n}notify(e){ts.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ts.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ts.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ro=new WeakMap,NU),Do,Jr,Du,jo,Ol,EU,rce=(EU=class extends LV{constructor(e){super();$t(this,jo);$t(this,Do);$t(this,Jr);$t(this,Du);this.mutationId=e.mutationId,st(this,Jr,e.mutationCache),st(this,Do,[]),this.state=e.state||sce(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){re(this,Do).includes(e)||(re(this,Do).push(e),this.clearGcTimeout(),re(this,Jr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){st(this,Do,re(this,Do).filter(n=>n!==e)),this.scheduleGc(),re(this,Jr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){re(this,Do).length||(this.state.status==="pending"?this.scheduleGc():re(this,Jr).remove(this))}continue(){var e;return((e=re(this,Du))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,l,c,u,d,f,p,m,g,y,v,x,b,w,_,C,E;st(this,Du,MV({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,I)=>{Ar(this,jo,Ol).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{Ar(this,jo,Ol).call(this,{type:"pause"})},onContinue:()=>{Ar(this,jo,Ol).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>re(this,Jr).canRun(this)}));const n=this.state.status==="pending",r=!re(this,Du).canStart();try{if(!n){Ar(this,jo,Ol).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(s=re(this,Jr).config).onMutate)==null?void 0:i.call(s,e,this));const I=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));I!==this.state.context&&Ar(this,jo,Ol).call(this,{type:"pending",context:I,variables:e,isPaused:r})}const N=await re(this,Du).start();return await((c=(l=re(this,Jr).config).onSuccess)==null?void 0:c.call(l,N,e,this.state.context,this)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,N,e,this.state.context)),await((p=(f=re(this,Jr).config).onSettled)==null?void 0:p.call(f,N,null,this.state.variables,this.state.context,this)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,N,null,e,this.state.context)),Ar(this,jo,Ol).call(this,{type:"success",data:N}),N}catch(N){try{throw await((v=(y=re(this,Jr).config).onError)==null?void 0:v.call(y,N,e,this.state.context,this)),await((b=(x=this.options).onError)==null?void 0:b.call(x,N,e,this.state.context)),await((_=(w=re(this,Jr).config).onSettled)==null?void 0:_.call(w,void 0,N,this.state.variables,this.state.context,this)),await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,N,e,this.state.context)),N}finally{Ar(this,jo,Ol).call(this,{type:"error",error:N})}}finally{re(this,Jr).runNext(this)}}},Do=new WeakMap,Jr=new WeakMap,Du=new WeakMap,jo=new WeakSet,Ol=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ts.batch(()=>{re(this,Do).forEach(r=>{r.onMutationUpdate(e)}),re(this,Jr).notify({mutation:this,type:"updated",action:e})})},EU);function sce(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var js,nv,TU,ice=(TU=class extends M1{constructor(e={}){super();$t(this,js);$t(this,nv);this.config=e,st(this,js,new Map),st(this,nv,Date.now())}build(e,n,r){const s=new rce({mutationCache:this,mutationId:++ix(this,nv)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Ex(e),r=re(this,js).get(n)??[];r.push(e),re(this,js).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Ex(e);if(re(this,js).has(n)){const s=(r=re(this,js).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?re(this,js).delete(n):re(this,js).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=re(this,js).get(Ex(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=re(this,js).get(Ex(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){ts.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...re(this,js).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>YD(n,r))}findAll(e={}){return this.getAll().filter(n=>YD(e,n))}notify(e){ts.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ts.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ki))))}},js=new WeakMap,nv=new WeakMap,TU);function Ex(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function ZD(t){return{onFetch:(e,n)=>{var u,d,f,p,m;const r=e.options,s=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},v=PV(e.options,e.fetchOptions),x=async(b,w,_)=>{if(g)return Promise.reject();if(w==null&&b.pages.length)return Promise.resolve(b);const C={queryKey:e.queryKey,pageParam:w,direction:_?"backward":"forward",meta:e.options.meta};y(C);const E=await v(C),{maxPages:N}=e.options,I=_?qle:Gle;return{pages:I(b.pages,E,N),pageParams:I(b.pageParams,w,N)}};if(s&&i.length){const b=s==="backward",w=b?oce:ej,_={pages:i,pageParams:o},C=w(r,_);a=await x(_,C,b)}else{const b=t??i.length;do{const w=l===0?o[0]??r.initialPageParam:ej(r,a);if(l>0&&w==null)break;a=await x(a,w),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function ej(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function oce(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var En,Gl,ql,ah,lh,Kl,ch,uh,IU,ace=(IU=class{constructor(t={}){$t(this,En);$t(this,Gl);$t(this,ql);$t(this,ah);$t(this,lh);$t(this,Kl);$t(this,ch);$t(this,uh);st(this,En,t.queryCache||new nce),st(this,Gl,t.mutationCache||new ice),st(this,ql,t.defaultOptions||{}),st(this,ah,new Map),st(this,lh,new Map),st(this,Kl,0)}mount(){ix(this,Kl)._++,re(this,Kl)===1&&(st(this,ch,RV.subscribe(async t=>{t&&(await this.resumePausedMutations(),re(this,En).onFocus())})),st(this,uh,c0.subscribe(async t=>{t&&(await this.resumePausedMutations(),re(this,En).onOnline())})))}unmount(){var t,e;ix(this,Kl)._--,re(this,Kl)===0&&((t=re(this,ch))==null||t.call(this),st(this,ch,void 0),(e=re(this,uh))==null||e.call(this),st(this,uh,void 0))}isFetching(t){return re(this,En).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return re(this,Gl).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=re(this,En).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=re(this,En).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(KD(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return re(this,En).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=re(this,En).get(r.queryHash),i=s==null?void 0:s.state.data,o=Ble(e,i);if(o!==void 0)return re(this,En).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ts.batch(()=>re(this,En).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=re(this,En).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=re(this,En);ts.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=re(this,En),r={type:"active",...t};return ts.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=ts.batch(()=>re(this,En).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ki).catch(Ki)}invalidateQueries(t={},e={}){return ts.batch(()=>{if(re(this,En).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=ts.batch(()=>re(this,En).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ki)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ki)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=re(this,En).build(this,e);return n.isStaleByTime(KD(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ki).catch(Ki)}fetchInfiniteQuery(t){return t.behavior=ZD(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ki).catch(Ki)}ensureInfiniteQueryData(t){return t.behavior=ZD(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return c0.isOnline()?re(this,Gl).resumePausedMutations():Promise.resolve()}getQueryCache(){return re(this,En)}getMutationCache(){return re(this,Gl)}getDefaultOptions(){return re(this,ql)}setDefaultOptions(t){st(this,ql,t)}setQueryDefaults(t,e){re(this,ah).set(Fg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...re(this,ah).values()];let n={};return e.forEach(r=>{Bg(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){re(this,lh).set(Fg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...re(this,lh).values()];let n={};return e.forEach(r=>{Bg(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...re(this,ql).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=s$(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===i$&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...re(this,ql).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){re(this,En).clear(),re(this,Gl).clear()}},En=new WeakMap,Gl=new WeakMap,ql=new WeakMap,ah=new WeakMap,lh=new WeakMap,Kl=new WeakMap,ch=new WeakMap,uh=new WeakMap,IU),lce=S.createContext(void 0),cce=({client:t,children:e})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(lce.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ug(){return Ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ug.apply(this,arguments)}var Ql;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ql||(Ql={}));const tj="popstate";function uce(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return FE("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:u0(s)}return fce(e,n,null,t)}function Un(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function FV(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dce(){return Math.random().toString(36).substr(2,8)}function nj(t,e){return{usr:t.state,key:t.key,idx:e}}function FE(t,e,n,r){return n===void 0&&(n=null),Ug({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fp(e):e,{state:n,key:e&&e.key||r||dce()})}function u0(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function fce(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ql.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ug({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Ql.Pop;let y=u(),v=y==null?null:y-c;c=y,l&&l({action:a,location:g.location,delta:v})}function f(y,v){a=Ql.Push;let x=FE(g.location,y,v);c=u()+1;let b=nj(x,c),w=g.createHref(x);try{o.pushState(b,"",w)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(w)}i&&l&&l({action:a,location:g.location,delta:1})}function p(y,v){a=Ql.Replace;let x=FE(g.location,y,v);c=u();let b=nj(x,c),w=g.createHref(x);o.replaceState(b,"",w),i&&l&&l({action:a,location:g.location,delta:0})}function m(y){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof y=="string"?y:u0(y);return x=x.replace(/ $/,"%20"),Un(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(tj,d),l=y,()=>{s.removeEventListener(tj,d),l=null}},createHref(y){return e(s,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(y){return o.go(y)}};return g}var rj;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rj||(rj={}));function hce(t,e,n){return n===void 0&&(n="/"),pce(t,e,n,!1)}function pce(t,e,n,r){let s=typeof e=="string"?fp(e):e,i=o$(s.pathname||"/",n);if(i==null)return null;let o=BV(t);mce(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Ece(i);a=Cce(o[l],c,r)}return a}function BV(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Un(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=cc([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Un(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),BV(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Sce(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of UV(i.path))s(i,o,l)}),e}function UV(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=UV(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function mce(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_ce(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gce=/^:[\w-]+$/,yce=3,vce=2,xce=1,bce=10,wce=-2,sj=t=>t==="*";function Sce(t,e){let n=t.split("/"),r=n.length;return n.some(sj)&&(r+=wce),e&&(r+=vce),n.filter(s=>!sj(s)).reduce((s,i)=>s+(gce.test(i)?yce:i===""?xce:bce),r)}function _ce(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Cce(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=ij({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=ij({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:cc([i,d.pathname]),pathnameBase:Oce(cc([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=cc([i,d.pathnameBase]))}return o}function ij(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Nce(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[d];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Nce(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),FV(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Ece(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return FV(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function o$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Tce(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?fp(t):t;return{pathname:n?n.startsWith("/")?n:Ice(n,e):e,search:$ce(r),hash:Ace(s)}}function Ice(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function fC(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kce(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function WV(t,e){let n=kce(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zV(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=fp(t):(s=Ug({},t),Un(!s.pathname||!s.pathname.includes("?"),fC("?","pathname","search",s)),Un(!s.pathname||!s.pathname.includes("#"),fC("#","pathname","hash",s)),Un(!s.search||!s.search.includes("#"),fC("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=Tce(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const cc=t=>t.join("/").replace(/\/\/+/g,"/"),Oce=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$ce=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ace=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pce(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VV=["post","put","patch","delete"];new Set(VV);const Rce=["get",...VV];new Set(Rce);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wg(){return Wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wg.apply(this,arguments)}const a$=S.createContext(null),Dce=S.createContext(null),kd=S.createContext(null),F1=S.createContext(null),Bc=S.createContext({outlet:null,matches:[],isDataRoute:!1}),HV=S.createContext(null);function jce(t,e){let{relative:n}=e===void 0?{}:e;uv()||Un(!1);let{basename:r,navigator:s}=S.useContext(kd),{hash:i,pathname:o,search:a}=KV(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:cc([r,o])),s.createHref({pathname:l,search:a,hash:i})}function uv(){return S.useContext(F1)!=null}function hp(){return uv()||Un(!1),S.useContext(F1).location}function GV(t){S.useContext(kd).static||S.useLayoutEffect(t)}function aa(){let{isDataRoute:t}=S.useContext(Bc);return t?Xce():Mce()}function Mce(){uv()||Un(!1);let t=S.useContext(a$),{basename:e,future:n,navigator:r}=S.useContext(kd),{matches:s}=S.useContext(Bc),{pathname:i}=hp(),o=JSON.stringify(WV(s,n.v7_relativeSplatPath)),a=S.useRef(!1);return GV(()=>{a.current=!0}),S.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=zV(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:cc([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function qV(){let{matches:t}=S.useContext(Bc),e=t[t.length-1];return e?e.params:{}}function KV(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(kd),{matches:s}=S.useContext(Bc),{pathname:i}=hp(),o=JSON.stringify(WV(s,r.v7_relativeSplatPath));return S.useMemo(()=>zV(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Lce(t,e){return Fce(t,e)}function Fce(t,e,n,r){uv()||Un(!1);let{navigator:s}=S.useContext(kd),{matches:i}=S.useContext(Bc),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=hp(),u;if(e){var d;let y=typeof e=="string"?fp(e):e;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||Un(!1),u=y}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=hce(t,{pathname:p}),g=Vce(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:cc([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:cc([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?S.createElement(F1.Provider,{value:{location:Wg({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ql.Pop}},g):g}function Bce(){let t=Kce(),e=Pce(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const Uce=S.createElement(Bce,null);class Wce extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Bc.Provider,{value:this.props.routeContext},S.createElement(HV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zce(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(a$);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Bc.Provider,{value:e},r)}function Vce(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Un(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=n,m=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let p,m=!1,g=null,y=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||Uce,l&&(c<0&&f===0?(m=!0,y=null):c===f&&(m=!0,y=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),x=()=>{let b;return p?b=g:m?b=y:d.route.Component?b=S.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,S.createElement(zce,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?S.createElement(Wce,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var XV=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(XV||{}),d0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(d0||{});function Hce(t){let e=S.useContext(a$);return e||Un(!1),e}function Gce(t){let e=S.useContext(Dce);return e||Un(!1),e}function qce(t){let e=S.useContext(Bc);return e||Un(!1),e}function YV(t){let e=qce(),n=e.matches[e.matches.length-1];return n.route.id||Un(!1),n.route.id}function Kce(){var t;let e=S.useContext(HV),n=Gce(d0.UseRouteError),r=YV(d0.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Xce(){let{router:t}=Hce(XV.UseNavigateStable),e=YV(d0.UseNavigateStable),n=S.useRef(!1);return GV(()=>{n.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Wg({fromRouteId:e},i)))},[t,e])}function Ao(t){Un(!1)}function Yce(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ql.Pop,navigator:i,static:o=!1,future:a}=t;uv()&&Un(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:i,static:o,future:Wg({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=fp(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=r,g=S.useMemo(()=>{let y=o$(u,l);return y==null?null:{location:{pathname:y,search:d,hash:f,state:p,key:m},navigationType:s}},[l,u,d,f,p,m,s]);return g==null?null:S.createElement(kd.Provider,{value:c},S.createElement(F1.Provider,{children:n,value:g}))}function Qce(t){let{children:e,location:n}=t;return Lce(BE(e),n)}new Promise(()=>{});function BE(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,BE(r.props.children,i));return}r.type!==Ao&&Un(!1),!r.props.index||!r.props.children||Un(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=BE(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function UE(){return UE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UE.apply(this,arguments)}function Jce(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Zce(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eue(t,e){return t.button===0&&(!e||e==="_self")&&!Zce(t)}const tue=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nue="6";try{window.__reactRouterVersion=nue}catch{}const rue="startTransition",oj=BU[rue];function sue(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=uce({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=S.useCallback(d=>{c&&oj?oj(()=>l(d)):l(d)},[l,c]);return S.useLayoutEffect(()=>o.listen(u),[o,u]),S.createElement(Yce,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const iue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QV=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=Jce(e,tue),{basename:p}=S.useContext(kd),m,g=!1;if(typeof c=="string"&&oue.test(c)&&(m=c,iue))try{let b=new URL(window.location.href),w=c.startsWith("//")?new URL(b.protocol+c):new URL(c),_=o$(w.pathname,p);w.origin===b.origin&&_!=null?c=_+w.search+w.hash:g=!0}catch{}let y=jce(c,{relative:s}),v=aue(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function x(b){r&&r(b),b.defaultPrevented||v(b)}return S.createElement("a",UE({},f,{href:m||y,onClick:g||i?r:x,ref:n,target:l}))});var aj;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(aj||(aj={}));var lj;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lj||(lj={}));function aue(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=aa(),c=hp(),u=KV(t,{relative:o});return S.useCallback(d=>{if(eue(d,n)){d.preventDefault();let f=r!==void 0?r:u0(c)===u0(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lue=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JV=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cue={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uue=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...cue,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:JV("lucide",s),...a},[...o.map(([c,u])=>S.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const n=S.forwardRef(({className:r,...s},i)=>S.createElement(uue,{ref:i,iconNode:e,className:JV(`lucide-${lue(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const due=ze("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=ze("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fue=ze("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hue=ze("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=ze("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pue=ze("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mue=ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gue=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yue=ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=ze("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=ze("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vue=ze("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xue=ze("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bue=ze("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wue=ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sue=ze("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ue=ze("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cue=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nue=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eue=ze("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tue=ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iue=ze("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kue=ze("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oue=ze("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ue=ze("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aue=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ze("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pue=ze("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rue=ze("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Due=ze("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=ze("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fj=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,hj=at,Od=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return hj(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=fj(u)||fj(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...p}=u;return Object.entries(p).every(m=>{let[g,y]=m;return Array.isArray(y)?y.includes({...i,...a}[g]):{...i,...a}[g]===y})?[...c,d,f]:c},[]);return hj(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},Vg=Od("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ae=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Oi:"button";return h.jsx(o,{className:ne(Vg({variant:e,size:n,className:t})),ref:i,...s})});ae.displayName="Button";const Me=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ne("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Me.displayName="Card";const it=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ne("flex flex-col space-y-1.5 p-6",t),...e}));it.displayName="CardHeader";const ct=S.forwardRef(({className:t,...e},n)=>h.jsx("h3",{ref:n,className:ne("text-2xl font-semibold leading-none tracking-tight",t),...e}));ct.displayName="CardTitle";const qn=S.forwardRef(({className:t,...e},n)=>h.jsx("p",{ref:n,className:ne("text-sm text-muted-foreground",t),...e}));qn.displayName="CardDescription";const ot=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ne("p-6 pt-0",t),...e}));ot.displayName="CardContent";const Ys=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ne("flex items-center p-6 pt-0",t),...e}));Ys.displayName="CardFooter";function WE(){const[t,e]=S.useState("light");S.useEffect(()=>{const r=localStorage.getItem("theme");r?(e(r),document.documentElement.classList.toggle("dark",r==="dark")):window.matchMedia("(prefers-color-scheme: dark)").matches&&(e("dark"),document.documentElement.classList.add("dark"))},[]);const n=()=>{const r=t==="light"?"dark":"light";e(r),document.documentElement.classList.toggle("dark",r==="dark"),localStorage.setItem("theme",r)};return h.jsx(ae,{variant:"outline",size:"icon",onClick:n,"aria-label":"Toggle theme",children:t==="light"?h.jsx(Iue,{className:"h-5 w-5"}):h.jsx(Rue,{className:"h-5 w-5"})})}const Le=S.forwardRef(({className:t,type:e,...n},r)=>h.jsx("input",{type:e,className:ne("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Le.displayName="Input";var jue="Label",s6=S.forwardRef((t,e)=>h.jsx(Re.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));s6.displayName=jue;var i6=s6;const Mue=Od("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xe=S.forwardRef(({className:t,...e},n)=>h.jsx(i6,{ref:n,className:ne(Mue(),t),...e}));xe.displayName=i6.displayName;function Lue(t){if(typeof t=="string")return Er(t);const{title:e,description:n,variant:r,action:s}=t;return r==="destructive"?Er.error(e,{description:n,action:s}):Er(e,{description:n,action:s})}function ii(){return{toast:Lue,dismiss:Er.dismiss}}const Fue=()=>{};var pj={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he=function(t,e){if(!t)throw mp(e)},mp=function(t){return new Error("Firebase Database ("+o6.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Bue=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},p$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Bue(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new Uue;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const m=c<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Uue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l6=function(t){const e=a6(t);return p$.encodeByteArray(e,!0)},f0=function(t){return l6(t).replace(/\./g,"")},h0=function(t){try{return p$.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wue(t){return c6(void 0,t)}function c6(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!zue(n)||(t[n]=c6(t[n],e[n]));return t}function zue(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hue=()=>Vue().__FIREBASE_DEFAULTS__,Gue=()=>{if(typeof process>"u"||typeof pj>"u")return;const t=pj.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},que=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&h0(t[1]);return e&&JSON.parse(e)},m$=()=>{try{return Fue()||Hue()||Gue()||que()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},u6=t=>{var e,n;return(n=(e=m$())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},d6=t=>{const e=u6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},f6=()=>{var t;return(t=m$())===null||t===void 0?void 0:t.config},h6=t=>{var e;return(e=m$())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[f0(JSON.stringify(n)),f0(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(us())}function Kue(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xue(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function m6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yue(){const t=us();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g6(){return o6.NODE_ADMIN===!0}function Que(){try{return typeof indexedDB=="object"}catch{return!1}}function Jue(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zue="FirebaseError";class hl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Zue,Object.setPrototypeOf(this,hl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dv.prototype.create)}}class dv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ede(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new hl(s,a,r)}}function ede(t,e){return t.replace(tde,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const tde=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){return JSON.parse(t)}function Xn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Hg(h0(i[0])||""),n=Hg(h0(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},nde=function(t){const e=y6(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},rde=function(t){const e=y6(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bh(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function zE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function p0(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Zu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(mj(i)&&mj(o)){if(!Zu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function mj(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Fm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^i&(o^a),u=1518500249):(c=i^o^a,u=1859775393):d<60?(c=i&o|a&(i|o),u=2400959708):(c=i^o^a,u=3395469782);const f=(s<<5|s>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function ide(t,e){const n=new ode(t,e);return n.subscribe.bind(n)}class ode{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ade(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=mC),s.error===void 0&&(s.error=mC),s.complete===void 0&&(s.complete=mC);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ade(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mC(){}function y$(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lde=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,he(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},U1=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t){return t&&t._delegate?t._delegate:t}class Ic{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cde{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new B1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dde(e))try{this.getOrInitializeService({instanceIdentifier:lu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=lu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lu){return this.instances.has(e)}getOptions(e=lu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ude(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=lu){return this.component?this.component.multipleInstances?e:lu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ude(t){return t===lu?void 0:t}function dde(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fde{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cde(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ft||(Ft={}));const hde={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},pde=Ft.INFO,mde={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},gde=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=mde[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let v$=class{constructor(e){this.name=e,this._logLevel=pde,this._logHandler=gde,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hde[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}};const yde=(t,e)=>e.some(n=>t instanceof n);let gj,yj;function vde(){return gj||(gj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xde(){return yj||(yj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v6=new WeakMap,VE=new WeakMap,x6=new WeakMap,gC=new WeakMap,x$=new WeakMap;function bde(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(fc(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&v6.set(n,t)}).catch(()=>{}),x$.set(e,t),e}function wde(t){if(VE.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});VE.set(t,e)}let HE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return VE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sde(t){HE=t(HE)}function _de(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yC(this),e,...n);return x6.set(r,e.sort?e.sort():[e]),fc(r)}:xde().includes(t)?function(...e){return t.apply(yC(this),e),fc(v6.get(this))}:function(...e){return fc(t.apply(yC(this),e))}}function Cde(t){return typeof t=="function"?_de(t):(t instanceof IDBTransaction&&wde(t),yde(t,vde())?new Proxy(t,HE):t)}function fc(t){if(t instanceof IDBRequest)return bde(t);if(gC.has(t))return gC.get(t);const e=Cde(t);return e!==t&&(gC.set(t,e),x$.set(e,t)),e}const yC=t=>x$.get(t);function Nde(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=fc(o);return r&&o.addEventListener("upgradeneeded",l=>{r(fc(o.result),l.oldVersion,l.newVersion,fc(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Ede=["get","getKey","getAll","getAllKeys","count"],Tde=["put","add","delete","clear"],vC=new Map;function vj(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vC.get(e))return vC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Tde.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ede.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return vC.set(e,i),i}Sde(t=>({...t,get:(e,n,r)=>vj(e,n)||t.get(e,n,r),has:(e,n)=>!!vj(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ide{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kde(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kde(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const GE="@firebase/app",xj="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new v$("@firebase/app"),Ode="@firebase/app-compat",$de="@firebase/analytics-compat",Ade="@firebase/analytics",Pde="@firebase/app-check-compat",Rde="@firebase/app-check",Dde="@firebase/auth",jde="@firebase/auth-compat",Mde="@firebase/database",Lde="@firebase/data-connect",Fde="@firebase/database-compat",Bde="@firebase/functions",Ude="@firebase/functions-compat",Wde="@firebase/installations",zde="@firebase/installations-compat",Vde="@firebase/messaging",Hde="@firebase/messaging-compat",Gde="@firebase/performance",qde="@firebase/performance-compat",Kde="@firebase/remote-config",Xde="@firebase/remote-config-compat",Yde="@firebase/storage",Qde="@firebase/storage-compat",Jde="@firebase/firestore",Zde="@firebase/vertexai",efe="@firebase/firestore-compat",tfe="firebase",nfe="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="[DEFAULT]",rfe={[GE]:"fire-core",[Ode]:"fire-core-compat",[Ade]:"fire-analytics",[$de]:"fire-analytics-compat",[Rde]:"fire-app-check",[Pde]:"fire-app-check-compat",[Dde]:"fire-auth",[jde]:"fire-auth-compat",[Mde]:"fire-rtdb",[Lde]:"fire-data-connect",[Fde]:"fire-rtdb-compat",[Bde]:"fire-fn",[Ude]:"fire-fn-compat",[Wde]:"fire-iid",[zde]:"fire-iid-compat",[Vde]:"fire-fcm",[Hde]:"fire-fcm-compat",[Gde]:"fire-perf",[qde]:"fire-perf-compat",[Kde]:"fire-rc",[Xde]:"fire-rc-compat",[Yde]:"fire-gcs",[Qde]:"fire-gcs-compat",[Jde]:"fire-fst",[efe]:"fire-fst-compat",[Zde]:"fire-vertex","fire-js":"fire-js",[tfe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=new Map,sfe=new Map,KE=new Map;function bj(t,e){try{t.container.addComponent(e)}catch(n){el.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ed(t){const e=t.name;if(KE.has(e))return el.debug(`There were multiple attempts to register component ${e}.`),!1;KE.set(e,t);for(const n of m0.values())bj(n,t);for(const n of sfe.values())bj(n,t);return!0}function W1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zs(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ife={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hc=new dv("app","Firebase",ife);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ofe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ic("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=nfe;function b6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qE,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw hc.create("bad-app-name",{appName:String(s)});if(n||(n=f6()),!n)throw hc.create("no-options");const i=m0.get(s);if(i){if(Zu(n,i.options)&&Zu(r,i.config))return i;throw hc.create("duplicate-app",{appName:s})}const o=new fde(s);for(const l of KE.values())o.addComponent(l);const a=new ofe(n,r,o);return m0.set(s,a),a}function b$(t=qE){const e=m0.get(t);if(!e&&t===qE&&f6())return b6();if(!e)throw hc.create("no-app",{appName:t});return e}function qo(t,e,n){var r;let s=(r=rfe[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),el.warn(a.join(" "));return}ed(new Ic(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const afe="firebase-heartbeat-database",lfe=1,Gg="firebase-heartbeat-store";let xC=null;function w6(){return xC||(xC=Nde(afe,lfe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gg)}catch(n){console.warn(n)}}}}).catch(t=>{throw hc.create("idb-open",{originalErrorMessage:t.message})})),xC}async function cfe(t){try{const n=(await w6()).transaction(Gg),r=await n.objectStore(Gg).get(S6(t));return await n.done,r}catch(e){if(e instanceof hl)el.warn(e.message);else{const n=hc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});el.warn(n.message)}}}async function wj(t,e){try{const r=(await w6()).transaction(Gg,"readwrite");await r.objectStore(Gg).put(e,S6(t)),await r.done}catch(n){if(n instanceof hl)el.warn(n.message);else{const r=hc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});el.warn(r.message)}}}function S6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ufe=1024,dfe=30;class ffe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pfe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Sj();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>dfe){const o=mfe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){el.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sj(),{heartbeatsToSend:r,unsentEntries:s}=hfe(this._heartbeatsCache.heartbeats),i=f0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return el.warn(n),""}}}function Sj(){return new Date().toISOString().substring(0,10)}function hfe(t,e=ufe){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),_j(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_j(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pfe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Que()?Jue().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cfe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wj(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wj(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _j(t){return f0(JSON.stringify({version:2,heartbeats:t})).length}function mfe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gfe(t){ed(new Ic("platform-logger",e=>new Ide(e),"PRIVATE")),ed(new Ic("heartbeat",e=>new ffe(e),"PRIVATE")),qo(GE,xj,t),qo(GE,xj,"esm2017"),qo("fire-js","")}gfe("");var Lo=function(){return Lo=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lo.apply(this,arguments)};function fv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function yfe(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function _6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vfe=_6,C6=new dv("auth","Firebase",_6());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new v$("@firebase/auth");function xfe(t,...e){g0.logLevel<=Ft.WARN&&g0.warn(`Auth (${$d}): ${t}`,...e)}function bb(t,...e){g0.logLevel<=Ft.ERROR&&g0.error(`Auth (${$d}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t,...e){throw w$(t,...e)}function Ko(t,...e){return w$(t,...e)}function N6(t,e,n){const r=Object.assign(Object.assign({},vfe()),{[e]:n});return new dv("auth","Firebase",r).create(e,{appName:t.name})}function Fa(t){return N6(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function w$(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return C6.create(t,...e)}function Ve(t,e,...n){if(!t)throw w$(e,...n)}function Aa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bb(e),new Error(e)}function tl(t,e){t||Aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bfe(){return Cj()==="http:"||Cj()==="https:"}function Cj(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wfe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bfe()||Xue()||"connection"in navigator)?navigator.onLine:!0}function Sfe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.shortDelay=e,this.longDelay=n,tl(n>e,"Short delay should be less than long delay!"),this.isMobile=g$()||m6()}get(){return wfe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(t,e){tl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _fe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Nfe=new hv(3e4,6e4);function pl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ml(t,e,n,r,s={}){return T6(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=gp(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return Kue()||(c.referrerPolicy="no-referrer"),E6.fetch()(await I6(t,t.config.apiHost,n,a),c)})}async function T6(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},_fe),e);try{const s=new Tfe(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Tx(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tx(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Tx(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Tx(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw N6(t,u,c);wo(t,u)}}catch(s){if(s instanceof hl)throw s;wo(t,"network-request-failed",{message:String(s)})}}async function pv(t,e,n,r,s={}){const i=await ml(t,e,n,r,s);return"mfaPendingCredential"in i&&wo(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function I6(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?S$(t.config,s):`${t.config.apiScheme}://${s}`;return Cfe.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Efe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Tfe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ko(this.auth,"network-request-failed")),Nfe.get())})}}function Tx(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ko(t,e,r);return s.customData._tokenResponse=n,s}function Nj(t){return t!==void 0&&t.enterprise!==void 0}class Ife{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Efe(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kfe(t,e){return ml(t,"GET","/v2/recaptchaConfig",pl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ofe(t,e){return ml(t,"POST","/v1/accounts:delete",e)}async function y0(t,e){return ml(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $fe(t,e=!1){const n=xr(t),r=await n.getIdToken(e),s=_$(r);Ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:rg(bC(s.auth_time)),issuedAtTime:rg(bC(s.iat)),expirationTime:rg(bC(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function bC(t){return Number(t)*1e3}function _$(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bb("JWT malformed, contained fewer than 3 sections"),null;try{const s=h0(n);return s?JSON.parse(s):(bb("Failed to decode base64 JWT payload"),null)}catch(s){return bb("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ej(t){const e=_$(t);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qg(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hl&&Afe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Afe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pfe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rg(this.lastLoginAt),this.creationTime=rg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v0(t){var e;const n=t.auth,r=await t.getIdToken(),s=await qg(t,y0(n,{idToken:r}));Ve(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?k6(i.providerUserInfo):[],a=Dfe(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new YE(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Rfe(t){const e=xr(t);await v0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dfe(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function k6(t){return t.map(e=>{var{providerId:n}=e,r=fv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jfe(t,e){const n=await T6(t,{},async()=>{const r=gp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await I6(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",E6.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Mfe(t,e){return ml(t,"POST","/v2/accounts:revokeToken",pl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ej(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const n=Ej(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await jfe(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Wf;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ve(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ve(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wf,this.toJSON())}_performRefresh(){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e){Ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class oo{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=fv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pfe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new YE(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await qg(this,this.stsTokenManager.getToken(this.auth,e));return Ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $fe(this,e)}reload(){return Rfe(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await v0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zs(this.auth.app))return Promise.reject(Fa(this.auth));const e=await this.getIdToken();return await qg(this,Ofe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:w,isAnonymous:_,providerData:C,stsTokenManager:E}=n;Ve(b&&E,e,"internal-error");const N=Wf.fromJSON(this.name,E);Ve(typeof b=="string",e,"internal-error"),Tl(d,e.name),Tl(f,e.name),Ve(typeof w=="boolean",e,"internal-error"),Ve(typeof _=="boolean",e,"internal-error"),Tl(p,e.name),Tl(m,e.name),Tl(g,e.name),Tl(y,e.name),Tl(v,e.name),Tl(x,e.name);const I=new oo({uid:b,auth:e,email:f,emailVerified:w,displayName:d,isAnonymous:_,photoURL:m,phoneNumber:p,tenantId:g,stsTokenManager:N,createdAt:v,lastLoginAt:x});return C&&Array.isArray(C)&&(I.providerData=C.map($=>Object.assign({},$))),y&&(I._redirectEventId=y),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Wf;s.updateFromServerResponse(n);const i=new oo({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await v0(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ve(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?k6(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Wf;a.updateFromIdToken(r);const l=new oo({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new YE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=new Map;function Pa(t){tl(t instanceof Function,"Expected a class definition");let e=Tj.get(t);return e?(tl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tj.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}O6.type="NONE";const Ij=O6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e,n){return`firebase:${t}:${e}:${n}`}class zf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=wb(this.userKey,s.apiKey,i),this.fullPersistenceKey=wb("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await y0(this.auth,{idToken:e}).catch(()=>{});return n?oo._fromGetAccountInfoResponse(this.auth,n,e):null}return oo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zf(Pa(Ij),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Pa(Ij);const o=wb(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let d;if(typeof u=="string"){const f=await y0(e,{idToken:u}).catch(()=>{});if(!f)break;d=await oo._fromGetAccountInfoResponse(e,f,u)}else d=oo._fromJSON(e,u);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new zf(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new zf(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(R6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j6(e))return"Blackberry";if(M6(e))return"Webos";if(A6(e))return"Safari";if((e.includes("chrome/")||P6(e))&&!e.includes("edge/"))return"Chrome";if(D6(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $6(t=us()){return/firefox\//i.test(t)}function A6(t=us()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P6(t=us()){return/crios\//i.test(t)}function R6(t=us()){return/iemobile/i.test(t)}function D6(t=us()){return/android/i.test(t)}function j6(t=us()){return/blackberry/i.test(t)}function M6(t=us()){return/webos/i.test(t)}function C$(t=us()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Lfe(t=us()){var e;return C$(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ffe(){return Yue()&&document.documentMode===10}function L6(t=us()){return C$(t)||D6(t)||M6(t)||j6(t)||/windows phone/i.test(t)||R6(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(t,e=[]){let n;switch(t){case"Browser":n=kj(us());break;case"Worker":n=`${kj(us())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$d}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bfe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ufe(t,e={}){return ml(t,"GET","/v2/passwordPolicy",pl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wfe=6;class zfe{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Wfe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vfe{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oj(this),this.idTokenSubscription=new Oj(this),this.beforeStateQueue=new Bfe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pa(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await zf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await y0(this,{idToken:e}),r=await oo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await v0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Sfe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zs(this.app))return Promise.reject(Fa(this));const n=e?xr(e):null;return n&&Ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zs(this.app)?Promise.reject(Fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zs(this.app)?Promise.reject(Fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ufe(this),n=new zfe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dv("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Mfe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pa(e)||this._popupRedirectResolver;Ve(n,this,"argument-error"),this.redirectPersistenceManager=await zf.create(this,[Pa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(zs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xfe(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Uc(t){return xr(t)}class Oj{constructor(e){this.auth=e,this.observer=null,this.addObserver=ide(n=>this.observer=n)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hfe(t){z1=t}function B6(t){return z1.loadJS(t)}function Gfe(){return z1.recaptchaEnterpriseScript}function qfe(){return z1.gapiScript}function Kfe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Xfe{constructor(){this.enterprise=new Yfe}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Yfe{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Qfe="recaptcha-enterprise",U6="NO_RECAPTCHA";class Jfe{constructor(e){this.type=Qfe,this.auth=Uc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{kfe(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Ife(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Nj(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(U6)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Xfe().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Nj(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Gfe();l.length!==0&&(l+=a),B6(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function $j(t,e,n,r=!1,s=!1){const i=new Jfe(t);let o;if(s)o=U6;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function x0(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $j(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await $j(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zfe(t,e){const n=W1(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Zu(i,e??{}))return s;wo(s,"already-initialized")}return n.initialize({options:e})}function ehe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function the(t,e,n){const r=Uc(t);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=W6(e),{host:o,port:a}=nhe(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(Zu(c,r.config.emulator)&&Zu(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,rhe()}function W6(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nhe(t){const e=W6(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Aj(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Aj(o)}}}function Aj(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rhe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Aa("not implemented")}_getIdTokenResponse(e){return Aa("not implemented")}_linkToIdToken(e,n){return Aa("not implemented")}_getReauthenticationResolver(e){return Aa("not implemented")}}async function she(t,e){return ml(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ihe(t,e){return pv(t,"POST","/v1/accounts:signInWithPassword",pl(t,e))}async function ohe(t,e){return ml(t,"POST","/v1/accounts:sendOobCode",pl(t,e))}async function ahe(t,e){return ohe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lhe(t,e){return pv(t,"POST","/v1/accounts:signInWithEmailLink",pl(t,e))}async function che(t,e){return pv(t,"POST","/v1/accounts:signInWithEmailLink",pl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends N${constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Kg(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kg(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return x0(e,n,"signInWithPassword",ihe);case"emailLink":return lhe(e,{email:this._email,oobCode:this._password});default:wo(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return x0(e,r,"signUpPassword",she);case"emailLink":return che(e,{idToken:n,email:this._email,oobCode:this._password});default:wo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vf(t,e){return pv(t,"POST","/v1/accounts:signInWithIdp",pl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uhe="http://localhost";class td extends N${constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new td(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=fv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new td(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Vf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vf(e,n)}buildRequest(){const e={requestUri:uhe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gp(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dhe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fhe(t){const e=Lm(Fm(t)).link,n=e?Lm(Fm(e)).deep_link_id:null,r=Lm(Fm(t)).deep_link_id;return(r?Lm(Fm(r)).link:null)||r||n||e||t}class E${constructor(e){var n,r,s,i,o,a;const l=Lm(Fm(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=dhe((s=l.mode)!==null&&s!==void 0?s:null);Ve(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=fhe(e);try{return new E$(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.providerId=yp.PROVIDER_ID}static credential(e,n){return Kg._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=E$.parseLink(n);return Ve(r,"argument-error"),Kg._fromEmailAndCode(e,r.code,r.tenantId)}}yp.PROVIDER_ID="password";yp.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends z6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends mv{constructor(){super("facebook.com")}static credential(e){return td._fromParams({providerId:Fl.PROVIDER_ID,signInMethod:Fl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fl.credentialFromTaggedObject(e)}static credentialFromError(e){return Fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fl.credential(e.oauthAccessToken)}catch{return null}}}Fl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends mv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return td._fromParams({providerId:Bl.PROVIDER_ID,signInMethod:Bl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bl.credentialFromTaggedObject(e)}static credentialFromError(e){return Bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bl.credential(n,r)}catch{return null}}}Bl.GOOGLE_SIGN_IN_METHOD="google.com";Bl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends mv{constructor(){super("github.com")}static credential(e){return td._fromParams({providerId:Ul.PROVIDER_ID,signInMethod:Ul.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ul.credentialFromTaggedObject(e)}static credentialFromError(e){return Ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ul.credential(e.oauthAccessToken)}catch{return null}}}Ul.GITHUB_SIGN_IN_METHOD="github.com";Ul.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends mv{constructor(){super("twitter.com")}static credential(e,n){return td._fromParams({providerId:Wl.PROVIDER_ID,signInMethod:Wl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wl.credentialFromTaggedObject(e)}static credentialFromError(e){return Wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wl.credential(n,r)}catch{return null}}}Wl.TWITTER_SIGN_IN_METHOD="twitter.com";Wl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hhe(t,e){return pv(t,"POST","/v1/accounts:signUp",pl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await oo._fromIdTokenResponse(e,r,s),o=Pj(r);return new nd({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Pj(r);return new nd({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Pj(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends hl{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,b0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new b0(e,n,r,s)}}function V6(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?b0._fromErrorAndOperation(t,i,e,r):i})}async function phe(t,e,n=!1){const r=await qg(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return nd._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mhe(t,e,n=!1){const{auth:r}=t;if(zs(r.app))return Promise.reject(Fa(r));const s="reauthenticate";try{const i=await qg(t,V6(r,s,e,t),n);Ve(i.idToken,r,"internal-error");const o=_$(i.idToken);Ve(o,r,"internal-error");const{sub:a}=o;return Ve(t.uid===a,r,"user-mismatch"),nd._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&wo(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H6(t,e,n=!1){if(zs(t.app))return Promise.reject(Fa(t));const r="signIn",s=await V6(t,r,e),i=await nd._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function ghe(t,e){return H6(Uc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t){const e=Uc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yhe(t,e,n){const r=Uc(t);await x0(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ahe)}async function vhe(t,e,n){if(zs(t.app))return Promise.reject(Fa(t));const r=Uc(t),o=await x0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hhe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&G6(t),l}),a=await nd._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function xhe(t,e,n){return zs(t.app)?Promise.reject(Fa(t)):ghe(xr(t),yp.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&G6(t),r})}function bhe(t,e,n,r){return xr(t).onIdTokenChanged(e,n,r)}function whe(t,e,n){return xr(t).beforeAuthStateChanged(e,n)}function q6(t,e,n,r){return xr(t).onAuthStateChanged(e,n,r)}function She(t){return xr(t).signOut()}const w0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(w0,"1"),this.storage.removeItem(w0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _he=1e3,Che=10;class X6 extends K6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=L6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Ffe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Che):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_he)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}X6.type="LOCAL";const Nhe=X6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6 extends K6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Y6.type="SESSION";const Q6=Y6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ehe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new V1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await Ehe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}V1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class The{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=T$("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(){return window}function Ihe(t){Xo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(){return typeof Xo().WorkerGlobalScope<"u"&&typeof Xo().importScripts=="function"}async function khe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ohe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $he(){return J6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="firebaseLocalStorageDb",Ahe=1,S0="firebaseLocalStorage",e5="fbase_key";class gv{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function H1(t,e){return t.transaction([S0],e?"readwrite":"readonly").objectStore(S0)}function Phe(){const t=indexedDB.deleteDatabase(Z6);return new gv(t).toPromise()}function QE(){const t=indexedDB.open(Z6,Ahe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(S0,{keyPath:e5})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(S0)?e(r):(r.close(),await Phe(),e(await QE()))})})}async function Rj(t,e,n){const r=H1(t,!0).put({[e5]:e,value:n});return new gv(r).toPromise()}async function Rhe(t,e){const n=H1(t,!1).get(e),r=await new gv(n).toPromise();return r===void 0?null:r.value}function Dj(t,e){const n=H1(t,!0).delete(e);return new gv(n).toPromise()}const Dhe=800,jhe=3;class t5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await QE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jhe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=V1._getInstance($he()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await khe(),!this.activeServiceWorker)return;this.sender=new The(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ohe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await QE();return await Rj(e,w0,"1"),await Dj(e,w0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rj(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Rhe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dj(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=H1(s,!1).getAll();return new gv(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dhe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t5.type="LOCAL";const Mhe=t5;new hv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lhe(t,e){return e?Pa(e):(Ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I$ extends N${constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Fhe(t){return H6(t.auth,new I$(t),t.bypassAuthState)}function Bhe(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),mhe(n,new I$(t),t.bypassAuthState)}async function Uhe(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),phe(n,new I$(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fhe;case"linkViaPopup":case"linkViaRedirect":return Uhe;case"reauthViaPopup":case"reauthViaRedirect":return Bhe;default:wo(this.auth,"internal-error")}}resolve(e){tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Whe=new hv(2e3,1e4);class Ef extends n5{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ef.currentPopupAction&&Ef.currentPopupAction.cancel(),Ef.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){tl(this.filter.length===1,"Popup operations only handle one event");const e=T$();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ko(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ko(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ef.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ko(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Whe.get())};e()}}Ef.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zhe="pendingRedirect",Sb=new Map;class Vhe extends n5{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sb.get(this.auth._key());if(!e){try{const r=await Hhe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sb.set(this.auth._key(),e)}return this.bypassAuthState||Sb.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hhe(t,e){const n=Khe(e),r=qhe(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Ghe(t,e){Sb.set(t._key(),e)}function qhe(t){return Pa(t._redirectPersistence)}function Khe(t){return wb(zhe,t.config.apiKey,t.name)}async function Xhe(t,e,n=!1){if(zs(t.app))return Promise.reject(Fa(t));const r=Uc(t),s=Lhe(r,e),o=await new Vhe(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yhe=10*60*1e3;class Qhe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Jhe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!r5(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ko(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Yhe&&this.cachedEventUids.clear(),this.cachedEventUids.has(jj(e))}saveEventToCache(e){this.cachedEventUids.add(jj(e)),this.lastProcessedEventTime=Date.now()}}function jj(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function r5({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Jhe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r5(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zhe(t,e={}){return ml(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const epe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tpe=/^https?/;async function npe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Zhe(t);for(const n of e)try{if(rpe(n))return}catch{}wo(t,"unauthorized-domain")}function rpe(t){const e=XE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!tpe.test(n))return!1;if(epe.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const spe=new hv(3e4,6e4);function Mj(){const t=Xo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ipe(t){return new Promise((e,n)=>{var r,s,i;function o(){Mj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mj(),n(Ko(t,"network-request-failed"))},timeout:spe.get()})}if(!((s=(r=Xo().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Xo().gapi)===null||i===void 0)&&i.load)o();else{const a=Kfe("iframefcb");return Xo()[a]=()=>{gapi.load?o():n(Ko(t,"network-request-failed"))},B6(`${qfe()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw _b=null,e})}let _b=null;function ope(t){return _b=_b||ipe(t),_b}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ape=new hv(5e3,15e3),lpe="__/auth/iframe",cpe="emulator/auth/iframe",upe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fpe(t){const e=t.config;Ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?S$(e,cpe):`https://${t.config.authDomain}/${lpe}`,r={apiKey:e.apiKey,appName:t.name,v:$d},s=dpe.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${gp(r).slice(1)}`}async function hpe(t){const e=await ope(t),n=Xo().gapi;return Ve(n,t,"internal-error"),e.open({where:document.body,url:fpe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:upe,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ko(t,"network-request-failed"),a=Xo().setTimeout(()=>{i(o)},ape.get());function l(){Xo().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ppe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mpe=500,gpe=600,ype="_blank",vpe="http://localhost";class Lj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xpe(t,e,n,r=mpe,s=gpe){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ppe),{width:r.toString(),height:s.toString(),top:i,left:o}),c=us().toLowerCase();n&&(a=P6(c)?ype:n),$6(c)&&(e=e||vpe,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,m])=>`${f}${p}=${m},`,"");if(Lfe(c)&&a!=="_self")return bpe(e||"",a),new Lj(null);const d=window.open(e||"",a,u);Ve(d,t,"popup-blocked");try{d.focus()}catch{}return new Lj(d)}function bpe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wpe="__/auth/handler",Spe="emulator/auth/handler",_pe=encodeURIComponent("fac");async function Fj(t,e,n,r,s,i){Ve(t.config.authDomain,t,"auth-domain-config-required"),Ve(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$d,eventId:s};if(e instanceof z6){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof mv){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${_pe}=${encodeURIComponent(l)}`:"";return`${Cpe(t)}?${gp(a).slice(1)}${c}`}function Cpe({config:t}){return t.emulator?S$(t,Spe):`https://${t.authDomain}/${wpe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="webStorageSupport";class Npe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q6,this._completeRedirectFn=Xhe,this._overrideRedirectResult=Ghe}async _openPopup(e,n,r,s){var i;tl((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Fj(e,n,r,XE(),s);return xpe(e,o,T$())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Fj(e,n,r,XE(),s);return Ihe(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(tl(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await hpe(e),r=new Qhe(e);return n.register("authEvent",s=>(Ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wC,{type:wC},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[wC];o!==void 0&&n(!!o),wo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=npe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return L6()||A6()||C$()}}const Epe=Npe;var Bj="@firebase/auth",Uj="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tpe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ipe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kpe(t){ed(new Ic("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F6(t)},c=new Vfe(r,s,i,l);return ehe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ed(new Ic("auth-internal",e=>{const n=Uc(e.getProvider("auth").getImmediate());return(r=>new Tpe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qo(Bj,Uj,Ipe(t)),qo(Bj,Uj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ope=5*60,$pe=h6("authIdTokenMaxAge")||Ope;let Wj=null;const Ape=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$pe)return;const s=n==null?void 0:n.token;Wj!==s&&(Wj=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ppe(t=b$()){const e=W1(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Zfe(t,{popupRedirectResolver:Epe,persistence:[Mhe,Nhe,Q6]}),r=h6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Ape(i.toString());whe(n,o,()=>o(n.currentUser)),bhe(n,a=>o(a))}}const s=u6("auth");return s&&the(n,`http://${s}`),n}function Rpe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Hfe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ko("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Rpe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kpe("Browser");var zj={};const Vj="@firebase/database",Hj="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s5="";function Dpe(t){s5=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jpe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Xn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Hg(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mpe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return la(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jpe(e)}}catch{}return new Mpe},_u=i5("localStorage"),Lpe=i5("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf=new v$("@firebase/database"),Fpe=function(){let t=1;return function(){return t++}}(),o5=function(t){const e=lde(t),n=new sde;n.update(e);const r=n.digest();return p$.encodeByteArray(r)},yv=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=yv.apply(null,r):typeof r=="object"?e+=Xn(r):e+=r,e+=" "}return e};let sg=null,Gj=!0;const Bpe=function(t,e){he(!e,"Can't turn on custom loggers persistently."),Hf.logLevel=Ft.VERBOSE,sg=Hf.log.bind(Hf)},Fr=function(...t){if(Gj===!0&&(Gj=!1,sg===null&&Lpe.get("logging_enabled")===!0&&Bpe()),sg){const e=yv.apply(null,t);sg(e)}},vv=function(t){return function(...e){Fr(t,...e)}},JE=function(...t){const e="FIREBASE INTERNAL ERROR: "+yv(...t);Hf.error(e)},nl=function(...t){const e=`FIREBASE FATAL ERROR: ${yv(...t)}`;throw Hf.error(e),new Error(e)},Ts=function(...t){const e="FIREBASE WARNING: "+yv(...t);Hf.warn(e)},Upe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ts("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},k$=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Wpe=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},rd="[MIN_NAME]",kc="[MAX_NAME]",vp=function(t,e){if(t===e)return 0;if(t===rd||e===kc)return-1;if(e===rd||t===kc)return 1;{const n=qj(t),r=qj(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},zpe=function(t,e){return t===e?0:t<e?-1:1},hm=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Xn(e))},O$=function(t){if(typeof t!="object"||t===null)return Xn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Xn(e[r]),n+=":",n+=O$(t[e[r]]);return n+="}",n},a5=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function ks(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const l5=function(t){he(!k$(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},Vpe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Hpe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Gpe(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const qpe=new RegExp("^-?(0*)\\d{1,10}$"),Kpe=-2147483648,Xpe=2147483647,qj=function(t){if(qpe.test(t)){const e=Number(t);if(e>=Kpe&&e<=Xpe)return e}return null},xp=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ts("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ype=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ig=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qpe{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,zs(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ts(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jpe{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Fr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ts(e)}}class Cb{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Cb.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$="5",c5="v",u5="s",d5="r",f5="f",h5=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,p5="ls",m5="p",ZE="ac",g5="websocket",y5="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1,c=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_u.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_u.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Zpe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function x5(t,e,n){he(typeof e=="string","typeof type must == string"),he(typeof n=="object","typeof params must == object");let r;if(e===g5)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===y5)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Zpe(t)&&(n.ns=t.namespace);const s=[];return ks(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eme{constructor(){this.counters_={}}incrementCounter(e,n=1){la(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Wue(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC={},_C={};function A$(t){const e=t.toString();return SC[e]||(SC[e]=new eme),SC[e]}function tme(t,e){const n=t.toString();return _C[n]||(_C[n]=e()),_C[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nme{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&xp(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="start",rme="close",sme="pLPCommand",ime="pRTLPCB",b5="id",w5="pw",S5="ser",ome="cb",ame="seg",lme="ts",cme="d",ume="dframe",_5=1870,C5=30,dme=_5-C5,fme=25e3,hme=3e4;class Tf{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vv(e),this.stats_=A$(n),this.urlFn=l=>(this.appCheckToken&&(l[ZE]=this.appCheckToken),x5(n,y5,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new nme(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(hme)),Wpe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new P$((...i)=>{const[o,a,l,c,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Kj)this.id=a,this.password=l;else if(o===rme)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Kj]="t",r[S5]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[ome]=this.scriptTagHolder.uniqueCallbackIdentifier),r[c5]=$$,this.transportSessionId&&(r[u5]=this.transportSessionId),this.lastSessionId&&(r[p5]=this.lastSessionId),this.applicationId&&(r[m5]=this.applicationId),this.appCheckToken&&(r[ZE]=this.appCheckToken),typeof location<"u"&&location.hostname&&h5.test(location.hostname)&&(r[d5]=f5);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tf.forceAllow_=!0}static forceDisallow(){Tf.forceDisallow_=!0}static isAvailable(){return Tf.forceAllow_?!0:!Tf.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Vpe()&&!Hpe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Xn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=l6(n),s=a5(r,dme);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[ume]="t",r[b5]=e,r[w5]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Xn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class P${constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Fpe(),window[sme+this.uniqueCallbackIdentifier]=e,window[ime+this.uniqueCallbackIdentifier]=n,this.myIFrame=P$.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Fr("frame writing exception"),a.stack&&Fr(a.stack),Fr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Fr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[b5]=this.myID,e[w5]=this.myPW,e[S5]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+C5+r.length<=_5;){const o=this.pendingSegs.shift();r=r+"&"+ame+s+"="+o.seg+"&"+lme+s+"="+o.ts+"&"+cme+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(fme)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Fr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pme=16384,mme=45e3;let _0=null;typeof MozWebSocket<"u"?_0=MozWebSocket:typeof WebSocket<"u"&&(_0=WebSocket);class no{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vv(this.connId),this.stats_=A$(n),this.connURL=no.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[c5]=$$,typeof location<"u"&&location.hostname&&h5.test(location.hostname)&&(o[d5]=f5),n&&(o[u5]=n),r&&(o[p5]=r),s&&(o[ZE]=s),i&&(o[m5]=i),x5(e,g5,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_u.set("previous_websocket_failure",!0);try{let r;g6(),this.mySock=new _0(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){no.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&_0!==null&&!no.forceDisallow_}static previouslyFailed(){return _u.isInMemoryStorage||_u.get("previous_websocket_failure")===!0}markConnectionHealthy(){_u.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Hg(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(he(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Xn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=a5(n,pme);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(mme))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}no.responsesRequiredToBeHealthy=2;no.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{static get ALL_TRANSPORTS(){return[Tf,no]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=no&&no.isAvailable();let r=n&&!no.previouslyFailed();if(e.webSocketOnly&&(n||Ts("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[no];else{const s=this.transports_=[];for(const i of Xg.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Xg.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xg.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gme=6e4,yme=5e3,vme=10*1024,xme=100*1024,CC="t",Xj="d",bme="s",Yj="r",wme="e",Qj="o",Jj="a",Zj="n",eM="p",Sme="h";class _me{constructor(e,n,r,s,i,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vv("c:"+this.id+":"),this.transportManager_=new Xg(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=ig(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>xme?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>vme?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(CC in e){const n=e[CC];n===Jj?this.upgradeIfSecondaryHealthy_():n===Yj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Qj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=hm("t",e),r=hm("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:eM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Zj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=hm("t",e),r=hm("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=hm(CC,e);if(Xj in e){const r=e[Xj];if(n===Sme){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Zj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===bme?this.onConnectionShutdown_(r):n===Yj?this.onReset_(r):n===wme?JE("Server Error: "+r):n===Qj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):JE("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),$$!==r&&Ts("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ig(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(gme))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ig(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(yme))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:eM,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_u.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E5=class{constructor(e){this.allowedEvents_=e,this.listeners_={},he(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){he(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0 extends E5{static getInstance(){return new C0}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!g$()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return he(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=32,nM=768;let Wt=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Nt(){return new Wt("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Oc(t){return t.pieces_.length-t.pieceNum_}function Kt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Wt(t.pieces_,e)}function T5(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Cme(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function I5(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function k5(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Wt(e,0)}function Yn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Wt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Wt(n,0)}function ft(t){return t.pieceNum_>=t.pieces_.length}function rs(t,e){const n=dt(t),r=dt(e);if(n===null)return e;if(n===r)return rs(Kt(t),Kt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function R$(t,e){if(Oc(t)!==Oc(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ao(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Oc(t)>Oc(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Nme{constructor(e,n){this.errorPrefix_=n,this.parts_=I5(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=U1(this.parts_[r]);O5(this)}}function Eme(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=U1(e),O5(t)}function Tme(t){const e=t.parts_.pop();t.byteLength_-=U1(e),t.parts_.length>0&&(t.byteLength_-=1)}function O5(t){if(t.byteLength_>nM)throw new Error(t.errorPrefix_+"has a key path longer than "+nM+" bytes ("+t.byteLength_+").");if(t.parts_.length>tM)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tM+") or object contains a cycle "+cu(t))}function cu(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D$ extends E5{static getInstance(){return new D$}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return he(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=1e3,Ime=60*5*1e3,rM=30*1e3,kme=1.3,Ome=3e4,$me="server_kill",sM=3;class Ba extends N5{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ba.nextPersistentConnectionId_++,this.log_=vv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pm,this.maxReconnectDelay_=Ime,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!g6())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");D$.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&C0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Xn(i)),he(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new B1,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),he(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;Ba.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&la(e,"w")){const r=bh(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Ts(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||rde(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rM)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=nde(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Xn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):JE("Unrecognized action received from server: "+Xn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){he(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pm,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=pm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ome&&(this.reconnectDelay_=pm),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*kme)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ba.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){he(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Fr("getToken() completed but was canceled"):(Fr("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new _me(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{Ts(p+" ("+this.repoInfo_.toString()+")"),this.interrupt($me)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ts(d),l())}}}interrupt(e){Fr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Fr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],zE(this.interruptReasons_)&&(this.reconnectDelay_=pm,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>O$(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Wt(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Fr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sM&&(this.reconnectDelay_=rM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Fr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+s5.replace(/\./g,"-")]=1,g$()?e["framework.cordova"]=1:m6()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=C0.getInstance().currentlyOnline();return zE(this.interruptReasons_)&&e}}Ba.nextPersistentConnectionId_=0;Ba.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ht(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G1=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ht(rd,e),s=new ht(rd,n);return this.compare(r,s)!==0}minPost(){return ht.MIN}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ix;class $5 extends G1{static get __EMPTY_NODE(){return Ix}static set __EMPTY_NODE(e){Ix=e}compare(e,n){return vp(e.name,n.name)}isDefinedOn(e){throw mp("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ht.MIN}maxPost(){return new ht(kc,Ix)}makePost(e,n){return he(typeof e=="string","KeyIndex indexValue must always be a string."),new ht(e,Ix)}toString(){return".key"}}const Fu=new $5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ar{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ar.RED,this.left=s??ws.EMPTY_NODE,this.right=i??ws.EMPTY_NODE}copy(e,n,r,s,i){return new ar(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ws.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ws.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ar.RED=!0;ar.BLACK=!1;class Ame{copy(e,n,r,s,i){return this}insert(e,n,r){return new ar(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ws{constructor(e,n=ws.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ws(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ar.BLACK,null,null))}remove(e){return new ws(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ar.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kx(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new kx(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new kx(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new kx(this.root_,null,this.comparator_,!0,e)}}ws.EMPTY_NODE=new Ame;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pme(t,e){return vp(t.name,e.name)}function j$(t,e){return vp(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eT;function Rme(t){eT=t}const A5=function(t){return typeof t=="number"?"number:"+l5(t):"string:"+t},P5=function(t){if(t.isLeafNode()){const e=t.val();he(typeof e=="string"||typeof e=="number"||typeof e=="object"&&la(e,".sv"),"Priority must be a string or number.")}else he(t===eT||t.isEmpty(),"priority of unexpected type.");he(t===eT||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iM;class sr{static set __childrenNodeConstructor(e){iM=e}static get __childrenNodeConstructor(){return iM}constructor(e,n=sr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,he(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),P5(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new sr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:sr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ft(e)?this:dt(e)===".priority"?this.priorityNode_:sr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:sr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=dt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(he(r!==".priority"||Oc(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,sr.__childrenNodeConstructor.EMPTY_NODE.updateChild(Kt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+A5(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=l5(this.value_):e+=this.value_,this.lazyHash_=o5(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===sr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof sr.__childrenNodeConstructor?-1:(he(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=sr.VALUE_TYPE_ORDER.indexOf(n),i=sr.VALUE_TYPE_ORDER.indexOf(r);return he(s>=0,"Unknown leaf type: "+n),he(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}sr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R5,D5;function Dme(t){R5=t}function jme(t){D5=t}class Mme extends G1{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?vp(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ht.MIN}maxPost(){return new ht(kc,new sr("[PRIORITY-POST]",D5))}makePost(e,n){const r=R5(e);return new ht(n,new sr("[PRIORITY-POST]",r))}toString(){return".priority"}}const Sn=new Mme;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lme=Math.log(2);class Fme{constructor(e){const n=i=>parseInt(Math.log(i)/Lme,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const N0=function(t,e,n,r){t.sort(e);const s=function(l,c){const u=c-l;let d,f;if(u===0)return null;if(u===1)return d=t[l],f=n?n(d):d,new ar(f,d.node,ar.BLACK,null,null);{const p=parseInt(u/2,10)+l,m=s(l,p),g=s(p+1,c);return d=t[p],f=n?n(d):d,new ar(f,d.node,ar.BLACK,m,g)}},i=function(l){let c=null,u=null,d=t.length;const f=function(m,g){const y=d-m,v=d;d-=m;const x=s(y+1,v),b=t[y],w=n?n(b):b;p(new ar(w,b.node,g,null,x))},p=function(m){c?(c.left=m,c=m):(u=m,c=m)};for(let m=0;m<l.count;++m){const g=l.nextBitIsOne(),y=Math.pow(2,l.count-(m+1));g?f(y,ar.BLACK):(f(y,ar.BLACK),f(y,ar.RED))}return u},o=new Fme(t.length),a=i(o);return new ws(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NC;const Xd={};class Ra{static get Default(){return he(Xd&&Sn,"ChildrenNode.ts has not been loaded"),NC=NC||new Ra({".priority":Xd},{".priority":Sn}),NC}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=bh(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ws?n:null}hasIndex(e){return la(this.indexSet_,e.toString())}addIndex(e,n){he(e!==Fu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(ht.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=N0(r,e.getCompare()):a=Xd;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Ra(u,c)}addToIndexes(e,n){const r=p0(this.indexes_,(s,i)=>{const o=bh(this.indexSet_,i);if(he(o,"Missing index implementation for "+i),s===Xd)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ht.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),N0(a,o.getCompare())}else return Xd;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new ht(e.name,a))),l.insert(e,e.node)}});return new Ra(r,this.indexSet_)}removeFromIndexes(e,n){const r=p0(this.indexes_,s=>{if(s===Xd)return s;{const i=n.get(e.name);return i?s.remove(new ht(e.name,i)):s}});return new Ra(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mm;class He{static get EMPTY_NODE(){return mm||(mm=new He(new ws(j$),null,Ra.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&P5(this.priorityNode_),this.children_.isEmpty()&&he(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mm}updatePriority(e){return this.children_.isEmpty()?this:new He(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?mm:n}}getChild(e){const n=dt(e);return n===null?this:this.getImmediateChild(n).getChild(Kt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(he(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ht(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?mm:this.priorityNode_;return new He(s,o,i)}}updateChild(e,n){const r=dt(e);if(r===null)return n;{he(dt(e)!==".priority"||Oc(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Kt(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Sn,(o,a)=>{n[o]=a.val(e),r++,i&&He.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+A5(this.getPriority().val())+":"),this.forEachChild(Sn,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":o5(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new ht(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ht(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ht(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ht.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ht.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===xv?-1:0}withIndex(e){if(e===Fu||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new He(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Fu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Sn),s=n.getIterator(Sn);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Fu?null:this.indexMap_.get(e.toString())}}He.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Bme extends He{constructor(){super(new ws(j$),He.EMPTY_NODE,Ra.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return He.EMPTY_NODE}isEmpty(){return!1}}const xv=new Bme;Object.defineProperties(ht,{MIN:{value:new ht(rd,He.EMPTY_NODE)},MAX:{value:new ht(kc,xv)}});$5.__EMPTY_NODE=He.EMPTY_NODE;sr.__childrenNodeConstructor=He;Rme(xv);jme(xv);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ume=!0;function lr(t,e=null){if(t===null)return He.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),he(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new sr(n,lr(e))}if(!(t instanceof Array)&&Ume){const n=[];let r=!1;if(ks(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=lr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ht(o,l)))}}),n.length===0)return He.EMPTY_NODE;const i=N0(n,Pme,o=>o.name,j$);if(r){const o=N0(n,Sn.getCompare());return new He(i,lr(e),new Ra({".priority":o},{".priority":Sn}))}else return new He(i,lr(e),Ra.Default)}else{let n=He.EMPTY_NODE;return ks(t,(r,s)=>{if(la(t,r)&&r.substring(0,1)!=="."){const i=lr(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(lr(e))}}Dme(lr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M$ extends G1{constructor(e){super(),this.indexPath_=e,he(!ft(e)&&dt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?vp(e.name,n.name):i}makePost(e,n){const r=lr(e),s=He.EMPTY_NODE.updateChild(this.indexPath_,r);return new ht(n,s)}maxPost(){const e=He.EMPTY_NODE.updateChild(this.indexPath_,xv);return new ht(kc,e)}toString(){return I5(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wme extends G1{compare(e,n){const r=e.node.compareTo(n.node);return r===0?vp(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ht.MIN}maxPost(){return ht.MAX}makePost(e,n){const r=lr(e);return new ht(n,r)}toString(){return".value"}}const j5=new Wme;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t){return{type:"value",snapshotNode:t}}function wh(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Yg(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Qg(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function zme(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){he(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Yg(n,a)):he(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(wh(n,r)):o.trackChildChange(Qg(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Sn,(s,i)=>{n.hasChild(s)||r.trackChildChange(Yg(s,i))}),n.isLeafNode()||n.forEachChild(Sn,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Qg(s,i,o))}else r.trackChildChange(wh(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?He.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this.indexedFilter_=new L$(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Jg.getStartPost_(e),this.endPost_=Jg.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new ht(n,r))||(r=He.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=He.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(He.EMPTY_NODE);const i=this;return n.forEachChild(Sn,(o,a)=>{i.matches(new ht(o,a))||(s=s.updateImmediateChild(o,He.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vme{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Jg(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new ht(n,r))||(r=He.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=He.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=He.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(He.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,He.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,p)=>d(p,f)}else o=this.index_.getCompare();const a=e;he(a.numChildren()===this.limit_,"");const l=new ht(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,l);if(u&&!r.isEmpty()&&p>=0)return i!=null&&i.trackChildChange(Qg(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Yg(n,d));const g=a.updateImmediateChild(n,He.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(wh(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return r.isEmpty()?e:u&&o(c,l)>=0?(i!=null&&(i.trackChildChange(Yg(c.name,c.node)),i.trackChildChange(wh(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,He.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return he(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return he(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rd}hasEnd(){return this.endSet_}getIndexEndValue(){return he(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return he(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return he(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sn}copy(){const e=new F$;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Hme(t){return t.loadsAllData()?new L$(t.getIndex()):t.hasLimit()?new Vme(t):new Jg(t)}function Gme(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function qme(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Kme(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Xme(t,e){const n=t.copy();return n.index_=e,n}function oM(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Sn?n="$priority":t.index_===j5?n="$value":t.index_===Fu?n="$key":(he(t.index_ instanceof M$,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Xn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Xn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Xn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Xn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Xn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function aM(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Sn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends N5{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(he(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=vv("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=E0.getListenId_(e,r),a={};this.listens_[o]=a;const l=oM(e._queryParams);this.restRequest_(i+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(i,d,!1,r),bh(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=E0.getListenId_(e,n);delete this.listens_[r]}get(e){const n=oM(e._queryParams),r=e._path.toString(),s=new B1;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gp(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Hg(a.responseText)}catch{Ts("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Ts("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yme{constructor(){this.rootNode_=He.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(){return{value:null,children:new Map}}function L5(t,e,n){if(ft(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=dt(e);t.children.has(r)||t.children.set(r,T0());const s=t.children.get(r);e=Kt(e),L5(s,e,n)}}function tT(t,e,n){t.value!==null?n(e,t.value):Qme(t,(r,s)=>{const i=new Wt(e.toString()+"/"+r);tT(s,i,n)})}function Qme(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jme{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ks(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=10*1e3,Zme=30*1e3,ege=5*60*1e3;class tge{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Jme(e);const r=lM+(Zme-lM)*Math.random();ig(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ks(e,(s,i)=>{i>0&&la(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),ig(this.reportStats_.bind(this),Math.floor(Math.random()*2*ege))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(lo||(lo={}));function F5(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function B$(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function U$(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=lo.ACK_USER_WRITE,this.source=F5()}operationForChild(e){if(ft(this.path)){if(this.affectedTree.value!=null)return he(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Wt(e));return new I0(Nt(),n,this.revert)}}else return he(dt(this.path)===e,"operationForChild called for unrelated child."),new I0(Kt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.source=e,this.path=n,this.type=lo.LISTEN_COMPLETE}operationForChild(e){return ft(this.path)?new Zg(this.source,Nt()):new Zg(this.source,Kt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=lo.OVERWRITE}operationForChild(e){return ft(this.path)?new sd(this.source,Nt(),this.snap.getImmediateChild(e)):new sd(this.source,Kt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=lo.MERGE}operationForChild(e){if(ft(this.path)){const n=this.children.subtree(new Wt(e));return n.isEmpty()?null:n.value?new sd(this.source,Nt(),n.value):new ey(this.source,Nt(),n)}else return he(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ey(this.source,Kt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ft(e))return this.isFullyInitialized()&&!this.filtered_;const n=dt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nge{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function rge(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(zme(o.childName,o.snapshotNode))}),gm(t,s,"child_removed",e,r,n),gm(t,s,"child_added",e,r,n),gm(t,s,"child_moved",i,r,n),gm(t,s,"child_changed",e,r,n),gm(t,s,"value",e,r,n),s}function gm(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>ige(t,a,l)),o.forEach(a=>{const l=sge(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function sge(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ige(t,e,n){if(e.childName==null||n.childName==null)throw mp("Should only compare child_ events.");const r=new ht(e.childName,e.snapshotNode),s=new ht(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t,e){return{eventCache:t,serverCache:e}}function og(t,e,n,r){return q1(new $c(e,n,r),t.serverCache)}function B5(t,e,n,r){return q1(t.eventCache,new $c(e,n,r))}function k0(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function id(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EC;const oge=()=>(EC||(EC=new ws(zpe)),EC);class an{static fromObject(e){let n=new an(null);return ks(e,(r,s)=>{n=n.set(new Wt(r),s)}),n}constructor(e,n=oge()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Nt(),value:this.value};if(ft(e))return null;{const r=dt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Kt(e),n);return i!=null?{path:Yn(new Wt(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ft(e))return this;{const n=dt(e),r=this.children.get(n);return r!==null?r.subtree(Kt(e)):new an(null)}}set(e,n){if(ft(e))return new an(n,this.children);{const r=dt(e),i=(this.children.get(r)||new an(null)).set(Kt(e),n),o=this.children.insert(r,i);return new an(this.value,o)}}remove(e){if(ft(e))return this.children.isEmpty()?new an(null):new an(null,this.children);{const n=dt(e),r=this.children.get(n);if(r){const s=r.remove(Kt(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new an(null):new an(this.value,i)}else return this}}get(e){if(ft(e))return this.value;{const n=dt(e),r=this.children.get(n);return r?r.get(Kt(e)):null}}setTree(e,n){if(ft(e))return n;{const r=dt(e),i=(this.children.get(r)||new an(null)).setTree(Kt(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new an(this.value,o)}}fold(e){return this.fold_(Nt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Yn(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Nt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ft(e))return null;{const i=dt(e),o=this.children.get(i);return o?o.findOnPath_(Kt(e),Yn(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Nt(),n)}foreachOnPath_(e,n,r){if(ft(e))return this;{this.value&&r(n,this.value);const s=dt(e),i=this.children.get(s);return i?i.foreachOnPath_(Kt(e),Yn(n,s),r):new an(null)}}foreach(e){this.foreach_(Nt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Yn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.writeTree_=e}static empty(){return new po(new an(null))}}function ag(t,e,n){if(ft(e))return new po(new an(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=rs(s,e);return i=i.updateChild(o,n),new po(t.writeTree_.set(s,i))}else{const s=new an(n),i=t.writeTree_.setTree(e,s);return new po(i)}}}function cM(t,e,n){let r=t;return ks(n,(s,i)=>{r=ag(r,Yn(e,s),i)}),r}function uM(t,e){if(ft(e))return po.empty();{const n=t.writeTree_.setTree(e,new an(null));return new po(n)}}function nT(t,e){return Ad(t,e)!=null}function Ad(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(rs(n.path,e)):null}function dM(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Sn,(r,s)=>{e.push(new ht(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ht(r,s.value))}),e}function pc(t,e){if(ft(e))return t;{const n=Ad(t,e);return n!=null?new po(new an(n)):new po(t.writeTree_.subtree(e))}}function rT(t){return t.writeTree_.isEmpty()}function Sh(t,e){return U5(Nt(),t.writeTree_,e)}function U5(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(he(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=U5(Yn(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Yn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t,e){return H5(e,t)}function age(t,e,n,r,s){he(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=ag(t.visibleWrites,e,n)),t.lastWriteId=r}function lge(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function cge(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);he(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&uge(a,r.path)?s=!1:ao(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return dge(t),!0;if(r.snap)t.visibleWrites=uM(t.visibleWrites,r.path);else{const a=r.children;ks(a,l=>{t.visibleWrites=uM(t.visibleWrites,Yn(r.path,l))})}return!0}else return!1}function uge(t,e){if(t.snap)return ao(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ao(Yn(t.path,n),e))return!0;return!1}function dge(t){t.visibleWrites=W5(t.allWrites,fge,Nt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function fge(t){return t.visible}function W5(t,e,n){let r=po.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)ao(n,o)?(a=rs(n,o),r=ag(r,a,i.snap)):ao(o,n)&&(a=rs(o,n),r=ag(r,Nt(),i.snap.getChild(a)));else if(i.children){if(ao(n,o))a=rs(n,o),r=cM(r,a,i.children);else if(ao(o,n))if(a=rs(o,n),ft(a))r=cM(r,Nt(),i.children);else{const l=bh(i.children,dt(a));if(l){const c=l.getChild(Kt(a));r=ag(r,Nt(),c)}}}else throw mp("WriteRecord should have .snap or .children")}}return r}function z5(t,e,n,r,s){if(!r&&!s){const i=Ad(t.visibleWrites,e);if(i!=null)return i;{const o=pc(t.visibleWrites,e);if(rT(o))return n;if(n==null&&!nT(o,Nt()))return null;{const a=n||He.EMPTY_NODE;return Sh(o,a)}}}else{const i=pc(t.visibleWrites,e);if(!s&&rT(i))return n;if(!s&&n==null&&!nT(i,Nt()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(ao(c.path,e)||ao(e,c.path))},a=W5(t.allWrites,o,e),l=n||He.EMPTY_NODE;return Sh(a,l)}}}function hge(t,e,n){let r=He.EMPTY_NODE;const s=Ad(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Sn,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=pc(t.visibleWrites,e);return n.forEachChild(Sn,(o,a)=>{const l=Sh(pc(i,new Wt(o)),a);r=r.updateImmediateChild(o,l)}),dM(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=pc(t.visibleWrites,e);return dM(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function pge(t,e,n,r,s){he(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Yn(e,n);if(nT(t.visibleWrites,i))return null;{const o=pc(t.visibleWrites,i);return rT(o)?s.getChild(n):Sh(o,s.getChild(n))}}function mge(t,e,n,r){const s=Yn(e,n),i=Ad(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=pc(t.visibleWrites,s);return Sh(o,r.getNode().getImmediateChild(n))}else return null}function gge(t,e){return Ad(t.visibleWrites,e)}function yge(t,e,n,r,s,i,o){let a;const l=pc(t.visibleWrites,e),c=Ad(l,Nt());if(c!=null)a=c;else if(n!=null)a=Sh(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=f.getNext();for(;p&&u.length<s;)d(p,r)!==0&&u.push(p),p=f.getNext();return u}else return[]}function vge(){return{visibleWrites:po.empty(),allWrites:[],lastWriteId:-1}}function O0(t,e,n,r){return z5(t.writeTree,t.treePath,e,n,r)}function W$(t,e){return hge(t.writeTree,t.treePath,e)}function fM(t,e,n,r){return pge(t.writeTree,t.treePath,e,n,r)}function $0(t,e){return gge(t.writeTree,Yn(t.treePath,e))}function xge(t,e,n,r,s,i){return yge(t.writeTree,t.treePath,e,n,r,s,i)}function z$(t,e,n){return mge(t.writeTree,t.treePath,e,n)}function V5(t,e){return H5(Yn(t.treePath,e),t.writeTree)}function H5(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bge{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;he(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),he(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Qg(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Yg(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,wh(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Qg(r,e.snapshotNode,s.oldSnap));else throw mp("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wge{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const G5=new wge;class V${constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new $c(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return z$(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:id(this.viewCache_),i=xge(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sge(t){return{filter:t}}function _ge(t,e){he(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),he(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Cge(t,e,n,r,s){const i=new bge;let o,a;if(n.type===lo.OVERWRITE){const c=n;c.source.fromUser?o=sT(t,e,c.path,c.snap,r,s,i):(he(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ft(c.path),o=A0(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===lo.MERGE){const c=n;c.source.fromUser?o=Ege(t,e,c.path,c.children,r,s,i):(he(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=iT(t,e,c.path,c.children,r,s,a,i))}else if(n.type===lo.ACK_USER_WRITE){const c=n;c.revert?o=kge(t,e,c.path,r,s,i):o=Tge(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===lo.LISTEN_COMPLETE)o=Ige(t,e,n.path,r,i);else throw mp("Unknown operation type: "+n.type);const l=i.getChanges();return Nge(e,o,l),{viewCache:o,changes:l}}function Nge(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=k0(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(M5(k0(e)))}}function q5(t,e,n,r,s,i){const o=e.eventCache;if($0(r,n)!=null)return e;{let a,l;if(ft(n))if(he(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=id(e),u=c instanceof He?c:He.EMPTY_NODE,d=W$(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const c=O0(r,id(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=dt(n);if(c===".priority"){he(Oc(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=fM(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Kt(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=fM(r,n,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(u,f):d=o.getNode().getImmediateChild(c)}else d=z$(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,s,i):a=o.getNode()}}return og(e,a,o.isFullyInitialized()||ft(n),t.filter.filtersNodes())}}function A0(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(ft(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),p,null)}else{const p=dt(n);if(!l.isCompleteForPath(n)&&Oc(n)>1)return e;const m=Kt(n),y=l.getNode().getImmediateChild(p).updateChild(m,r);p===".priority"?c=u.updatePriority(l.getNode(),y):c=u.updateChild(l.getNode(),p,y,m,G5,null)}const d=B5(e,c,l.isFullyInitialized()||ft(n),u.filtersNodes()),f=new V$(s,d,i);return q5(t,d,n,s,f,a)}function sT(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const u=new V$(s,e,i);if(ft(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=og(e,c,!0,t.filter.filtersNodes());else{const d=dt(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=og(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Kt(n),p=a.getNode().getImmediateChild(d);let m;if(ft(f))m=r;else{const g=u.getCompleteChild(d);g!=null?T5(f)===".priority"&&g.getChild(k5(f)).isEmpty()?m=g:m=g.updateChild(f,r):m=He.EMPTY_NODE}if(p.equals(m))l=e;else{const g=t.filter.updateChild(a.getNode(),d,m,f,u,o);l=og(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function hM(t,e){return t.eventCache.isCompleteForChild(e)}function Ege(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const u=Yn(n,l);hM(e,dt(u))&&(a=sT(t,a,u,c,s,i,o))}),r.foreach((l,c)=>{const u=Yn(n,l);hM(e,dt(u))||(a=sT(t,a,u,c,s,i,o))}),a}function pM(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function iT(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ft(n)?c=r:c=new an(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){const p=e.serverCache.getNode().getImmediateChild(d),m=pM(t,p,f);l=A0(t,l,new Wt(d),m,s,i,o,a)}}),c.children.inorderTraversal((d,f)=>{const p=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!p){const m=e.serverCache.getNode().getImmediateChild(d),g=pM(t,m,f);l=A0(t,l,new Wt(d),g,s,i,o,a)}}),l}function Tge(t,e,n,r,s,i,o){if($0(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ft(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return A0(t,e,n,l.getNode().getChild(n),s,i,a,o);if(ft(n)){let c=new an(null);return l.getNode().forEachChild(Fu,(u,d)=>{c=c.set(new Wt(u),d)}),iT(t,e,n,c,s,i,a,o)}else return e}else{let c=new an(null);return r.foreach((u,d)=>{const f=Yn(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),iT(t,e,n,c,s,i,a,o)}}function Ige(t,e,n,r,s){const i=e.serverCache,o=B5(e,i.getNode(),i.isFullyInitialized()||ft(n),i.isFiltered());return q5(t,o,n,r,G5,s)}function kge(t,e,n,r,s,i){let o;if($0(r,n)!=null)return e;{const a=new V$(r,e,s),l=e.eventCache.getNode();let c;if(ft(n)||dt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=O0(r,id(e));else{const d=e.serverCache.getNode();he(d instanceof He,"serverChildren would be complete if leaf node"),u=W$(r,d)}u=u,c=t.filter.updateFullNode(l,u,i)}else{const u=dt(n);let d=z$(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,Kt(n),a,i):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,He.EMPTY_NODE,Kt(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=O0(r,id(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||$0(r,Nt())!=null,og(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oge{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new L$(r.getIndex()),i=Hme(r);this.processor_=Sge(i);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(He.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(He.EMPTY_NODE,a.getNode(),null),u=new $c(l,o.isFullyInitialized(),s.filtersNodes()),d=new $c(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=q1(d,u),this.eventGenerator_=new nge(this.query_)}get query(){return this.query_}}function $ge(t){return t.viewCache_.serverCache.getNode()}function Age(t){return k0(t.viewCache_)}function Pge(t,e){const n=id(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ft(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function mM(t){return t.eventRegistrations_.length===0}function Rge(t,e){t.eventRegistrations_.push(e)}function gM(t,e,n){const r=[];if(n){he(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function yM(t,e,n,r){e.type===lo.MERGE&&e.source.queryId!==null&&(he(id(t.viewCache_),"We should always have a full cache before handling merges"),he(k0(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Cge(t.processor_,s,e,n,r);return _ge(t.processor_,i.viewCache),he(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,K5(t,i.changes,i.viewCache.eventCache.getNode(),null)}function Dge(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Sn,(i,o)=>{r.push(wh(i,o))}),n.isFullyInitialized()&&r.push(M5(n.getNode())),K5(t,r,n.getNode(),e)}function K5(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return rge(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P0;class X5{constructor(){this.views=new Map}}function jge(t){he(!P0,"__referenceConstructor has already been defined"),P0=t}function Mge(){return he(P0,"Reference.ts has not been loaded"),P0}function Lge(t){return t.views.size===0}function H$(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return he(i!=null,"SyncTree gave us an op for an invalid query."),yM(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(yM(o,e,n,r));return i}}function Y5(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=O0(n,s?r:null),l=!1;a?l=!0:r instanceof He?(a=W$(n,r),l=!1):(a=He.EMPTY_NODE,l=!1);const c=q1(new $c(a,l,!1),new $c(r,s,!1));return new Oge(e,c)}return o}function Fge(t,e,n,r,s,i){const o=Y5(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Rge(o,n),Dge(o,n)}function Bge(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Ac(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(gM(c,n,r)),mM(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||i.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(gM(l,n,r)),mM(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Ac(t)&&i.push(new(Mge())(e._repo,e._path)),{removed:i,events:o}}function Q5(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function mc(t,e){let n=null;for(const r of t.views.values())n=n||Pge(r,e);return n}function J5(t,e){if(e._queryParams.loadsAllData())return X1(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Z5(t,e){return J5(t,e)!=null}function Ac(t){return X1(t)!=null}function X1(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R0;function Uge(t){he(!R0,"__referenceConstructor has already been defined"),R0=t}function Wge(){return he(R0,"Reference.ts has not been loaded"),R0}let zge=1;class vM{constructor(e){this.listenProvider_=e,this.syncPointTree_=new an(null),this.pendingWriteTree_=vge(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function eH(t,e,n,r,s){return age(t.pendingWriteTree_,e,n,r,s),s?wv(t,new sd(F5(),e,n)):[]}function Cu(t,e,n=!1){const r=lge(t.pendingWriteTree_,e);if(cge(t.pendingWriteTree_,e)){let i=new an(null);return r.snap!=null?i=i.set(Nt(),!0):ks(r.children,o=>{i=i.set(new Wt(o),!0)}),wv(t,new I0(r.path,i,n))}else return[]}function bv(t,e,n){return wv(t,new sd(B$(),e,n))}function Vge(t,e,n){const r=an.fromObject(n);return wv(t,new ey(B$(),e,r))}function Hge(t,e){return wv(t,new Zg(B$(),e))}function Gge(t,e,n){const r=q$(t,n);if(r){const s=K$(r),i=s.path,o=s.queryId,a=rs(i,e),l=new Zg(U$(o),a);return X$(t,i,l)}else return[]}function D0(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Z5(o,e))){const l=Bge(o,e,n,r);Lge(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=l.removed;if(a=l.events,!s){const u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(f,p)=>Ac(p));if(u&&!d){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const p=Xge(f);for(let m=0;m<p.length;++m){const g=p[m],y=g.query,v=sH(t,g);t.listenProvider_.startListening(lg(y),ty(t,y),v.hashFn,v.onComplete)}}}!d&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(lg(e),null):c.forEach(f=>{const p=t.queryToTagMap.get(Y1(f));t.listenProvider_.stopListening(lg(f),p)}))}Yge(t,c)}return a}function tH(t,e,n,r){const s=q$(t,r);if(s!=null){const i=K$(s),o=i.path,a=i.queryId,l=rs(o,e),c=new sd(U$(a),l,n);return X$(t,o,c)}else return[]}function qge(t,e,n,r){const s=q$(t,r);if(s){const i=K$(s),o=i.path,a=i.queryId,l=rs(o,e),c=an.fromObject(n),u=new ey(U$(a),l,c);return X$(t,o,u)}else return[]}function oT(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,p)=>{const m=rs(f,s);i=i||mc(p,m),o=o||Ac(p)});let a=t.syncPointTree_.get(s);a?(o=o||Ac(a),i=i||mc(a,Nt())):(a=new X5,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;i!=null?l=!0:(l=!1,i=He.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((p,m)=>{const g=mc(m,Nt());g&&(i=i.updateImmediateChild(p,g))}));const c=Z5(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=Y1(e);he(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=Qge();t.queryToTagMap.set(f,p),t.tagToQueryMap.set(p,f)}const u=K1(t.pendingWriteTree_,s);let d=Fge(a,e,n,u,i,l);if(!c&&!o&&!r){const f=J5(a,e);d=d.concat(Jge(t,e,f))}return d}function G$(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=rs(o,e),c=mc(a,l);if(c)return c});return z5(s,e,i,n,!0)}function Kge(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const d=rs(c,n);r=r||mc(u,d)});let s=t.syncPointTree_.get(n);s?r=r||mc(s,Nt()):(s=new X5,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new $c(r,!0,!1):null,a=K1(t.pendingWriteTree_,e._path),l=Y5(s,e,a,i?o.getNode():He.EMPTY_NODE,i);return Age(l)}function wv(t,e){return nH(e,t.syncPointTree_,null,K1(t.pendingWriteTree_,Nt()))}function nH(t,e,n,r){if(ft(t.path))return rH(t,e,n,r);{const s=e.get(Nt());n==null&&s!=null&&(n=mc(s,Nt()));let i=[];const o=dt(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=V5(r,o);i=i.concat(nH(a,l,c,u))}return s&&(i=i.concat(H$(s,t,r,n))),i}}function rH(t,e,n,r){const s=e.get(Nt());n==null&&s!=null&&(n=mc(s,Nt()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=V5(r,o),u=t.operationForChild(o);u&&(i=i.concat(rH(u,a,l,c)))}),s&&(i=i.concat(H$(s,t,r,n))),i}function sH(t,e){const n=e.query,r=ty(t,n);return{hashFn:()=>($ge(e)||He.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Gge(t,n._path,r):Hge(t,n._path);{const i=Gpe(s,n);return D0(t,n,null,i)}}}}function ty(t,e){const n=Y1(e);return t.queryToTagMap.get(n)}function Y1(t){return t._path.toString()+"$"+t._queryIdentifier}function q$(t,e){return t.tagToQueryMap.get(e)}function K$(t){const e=t.indexOf("$");return he(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Wt(t.substr(0,e))}}function X$(t,e,n){const r=t.syncPointTree_.get(e);he(r,"Missing sync point for query tag that we're tracking");const s=K1(t.pendingWriteTree_,e);return H$(r,n,s,null)}function Xge(t){return t.fold((e,n,r)=>{if(n&&Ac(n))return[X1(n)];{let s=[];return n&&(s=Q5(n)),ks(r,(i,o)=>{s=s.concat(o)}),s}})}function lg(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Wge())(t._repo,t._path):t}function Yge(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Y1(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Qge(){return zge++}function Jge(t,e,n){const r=e._path,s=ty(t,e),i=sH(t,n),o=t.listenProvider_.startListening(lg(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)he(!Ac(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!ft(c)&&u&&Ac(u))return[X1(u).query];{let f=[];return u&&(f=f.concat(Q5(u).map(p=>p.query))),ks(d,(p,m)=>{f=f.concat(m)}),f}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(lg(u),ty(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Y$(n)}node(){return this.node_}}class Q${constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Yn(this.path_,e);return new Q$(this.syncTree_,n)}node(){return G$(this.syncTree_,this.path_)}}const Zge=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},xM=function(t,e,n){if(!t||typeof t!="object")return t;if(he(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return eye(t[".sv"],e,n);if(typeof t[".sv"]=="object")return tye(t[".sv"],e);he(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},eye=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:he(!1,"Unexpected server value: "+t)}},tye=function(t,e,n){t.hasOwnProperty("increment")||he(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&he(!1,"Unexpected increment value: "+r);const s=e.node();if(he(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},nye=function(t,e,n,r){return J$(e,new Q$(n,t),r)},iH=function(t,e,n){return J$(t,new Y$(e),n)};function J$(t,e,n){const r=t.getPriority().val(),s=xM(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=xM(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new sr(a,lr(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new sr(s))),o.forEachChild(Sn,(a,l)=>{const c=J$(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function eA(t,e){let n=e instanceof Wt?e:new Wt(e),r=t,s=dt(n);for(;s!==null;){const i=bh(r.node.children,s)||{children:{},childCount:0};r=new Z$(s,r,i),n=Kt(n),s=dt(n)}return r}function bp(t){return t.node.value}function oH(t,e){t.node.value=e,aT(t)}function aH(t){return t.node.childCount>0}function rye(t){return bp(t)===void 0&&!aH(t)}function Q1(t,e){ks(t.node.children,(n,r)=>{e(new Z$(n,t,r))})}function lH(t,e,n,r){n&&!r&&e(t),Q1(t,s=>{lH(s,e,!0,r)}),n&&r&&e(t)}function sye(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Sv(t){return new Wt(t.parent===null?t.name:Sv(t.parent)+"/"+t.name)}function aT(t){t.parent!==null&&iye(t.parent,t.name,t)}function iye(t,e,n){const r=rye(n),s=la(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,aT(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,aT(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oye=/[\[\].#$\/\u0000-\u001F\u007F]/,aye=/[\[\].#$\u0000-\u001F\u007F]/,TC=10*1024*1024,cH=function(t){return typeof t=="string"&&t.length!==0&&!oye.test(t)},uH=function(t){return typeof t=="string"&&t.length!==0&&!aye.test(t)},lye=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),uH(t)},bM=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!k$(t)||t&&typeof t=="object"&&la(t,".sv")},_v=function(t,e,n,r){r&&e===void 0||tA(y$(t,"value"),e,n)},tA=function(t,e,n){const r=n instanceof Wt?new Nme(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+cu(r));if(typeof e=="function")throw new Error(t+"contains a function "+cu(r)+" with contents = "+e.toString());if(k$(e))throw new Error(t+"contains "+e.toString()+" "+cu(r));if(typeof e=="string"&&e.length>TC/3&&U1(e)>TC)throw new Error(t+"contains a string greater than "+TC+" utf8 bytes "+cu(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(ks(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!cH(o)))throw new Error(t+" contains an invalid key ("+o+") "+cu(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Eme(r,o),tA(t,a,r),Tme(r)}),s&&i)throw new Error(t+' contains ".value" child '+cu(r)+" in addition to actual children.")}},nA=function(t,e,n,r){if(!uH(n))throw new Error(y$(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},cye=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nA(t,e,n)},rA=function(t,e){if(dt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},uye=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!cH(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!lye(n))throw new Error(y$(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dye{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sA(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!R$(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function dH(t,e,n){sA(t,n),fH(t,r=>R$(r,e))}function na(t,e,n){sA(t,n),fH(t,r=>ao(r,e)||ao(e,r))}function fH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(fye(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function fye(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();sg&&Fr("event: "+n.toString()),xp(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hye="repo_interrupt",pye=25;class mye{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dye,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=T0(),this.transactionQueueTree_=new Z$,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gye(t,e,n){if(t.stats_=A$(t.repoInfo_),t.forceRestClient_||Ype())t.server_=new E0(t.repoInfo_,(r,s,i,o)=>{wM(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>SM(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Xn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ba(t.repoInfo_,e,(r,s,i,o)=>{wM(t,r,s,i,o)},r=>{SM(t,r)},r=>{yye(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=tme(t.repoInfo_,()=>new tge(t.stats_,t.server_)),t.infoData_=new Yme,t.infoSyncTree_=new vM({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=bv(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),oA(t,"connected",!1),t.serverSyncTree_=new vM({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);na(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function hH(t){const n=t.infoData_.getNode(new Wt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function iA(t){return Zge({timestamp:hH(t)})}function wM(t,e,n,r,s){t.dataUpdateCount++;const i=new Wt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=p0(n,c=>lr(c));o=qge(t.serverSyncTree_,i,l,s)}else{const l=lr(n);o=tH(t.serverSyncTree_,i,l,s)}else if(r){const l=p0(n,c=>lr(c));o=Vge(t.serverSyncTree_,i,l)}else{const l=lr(n);o=bv(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=Z1(t,i)),na(t.eventQueue_,a,o)}function SM(t,e){oA(t,"connected",e),e===!1&&bye(t)}function yye(t,e){ks(e,(n,r)=>{oA(t,n,r)})}function oA(t,e,n){const r=new Wt("/.info/"+e),s=lr(n);t.infoData_.updateSnapshot(r,s);const i=bv(t.infoSyncTree_,r,s);na(t.eventQueue_,r,i)}function pH(t){return t.nextWriteId_++}function vye(t,e,n){const r=Kge(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=lr(s).withIndex(e._queryParams.getIndex());oT(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=bv(t.serverSyncTree_,e._path,i);else{const a=ty(t.serverSyncTree_,e);o=tH(t.serverSyncTree_,e._path,i,a)}return na(t.eventQueue_,e._path,o),D0(t.serverSyncTree_,e,n,null,!0),i},s=>(J1(t,"get for query "+Xn(e)+" failed: "+s),Promise.reject(new Error(s))))}function xye(t,e,n,r,s){J1(t,"set",{path:e.toString(),value:n,priority:r});const i=iA(t),o=lr(n,r),a=G$(t.serverSyncTree_,e),l=iH(o,a,i),c=pH(t),u=eH(t.serverSyncTree_,e,l,c,!0);sA(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,p)=>{const m=f==="ok";m||Ts("set at "+e+" failed: "+f);const g=Cu(t.serverSyncTree_,c,!m);na(t.eventQueue_,e,g),Cye(t,s,f,p)});const d=xH(t,e);Z1(t,d),na(t.eventQueue_,d,[])}function bye(t){J1(t,"onDisconnectEvents");const e=iA(t),n=T0();tT(t.onDisconnect_,Nt(),(s,i)=>{const o=nye(s,i,t.serverSyncTree_,e);L5(n,s,o)});let r=[];tT(n,Nt(),(s,i)=>{r=r.concat(bv(t.serverSyncTree_,s,i));const o=xH(t,s);Z1(t,o)}),t.onDisconnect_=T0(),na(t.eventQueue_,Nt(),r)}function wye(t,e,n){let r;dt(e._path)===".info"?r=oT(t.infoSyncTree_,e,n):r=oT(t.serverSyncTree_,e,n),dH(t.eventQueue_,e._path,r)}function Sye(t,e,n){let r;dt(e._path)===".info"?r=D0(t.infoSyncTree_,e,n):r=D0(t.serverSyncTree_,e,n),dH(t.eventQueue_,e._path,r)}function _ye(t){t.persistentConnection_&&t.persistentConnection_.interrupt(hye)}function J1(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Fr(n,...e)}function Cye(t,e,n,r){e&&xp(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function mH(t,e,n){return G$(t.serverSyncTree_,e,n)||He.EMPTY_NODE}function aA(t,e=t.transactionQueueTree_){if(e||eS(t,e),bp(e)){const n=yH(t,e);he(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Nye(t,Sv(e),n)}else aH(e)&&Q1(e,n=>{aA(t,n)})}function Nye(t,e,n){const r=n.map(c=>c.currentWriteId),s=mH(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const u=n[c];he(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=rs(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{J1(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Cu(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();eS(t,eA(t.transactionQueueTree_,e)),aA(t,t.transactionQueueTree_),na(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)xp(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ts("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Z1(t,e)}},o)}function Z1(t,e){const n=gH(t,e),r=Sv(n),s=yH(t,n);return Eye(t,s,r),r}function Eye(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=rs(n,l.path);let u=!1,d;if(he(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,s=s.concat(Cu(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=pye)u=!0,d="maxretry",s=s.concat(Cu(t.serverSyncTree_,l.currentWriteId,!0));else{const f=mH(t,l.path,o);l.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){tA("transaction failed: Data returned ",p,l.path);let m=lr(p);typeof p=="object"&&p!=null&&la(p,".priority")||(m=m.updatePriority(f.getPriority()));const y=l.currentWriteId,v=iA(t),x=iH(m,f,v);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=x,l.currentWriteId=pH(t),o.splice(o.indexOf(y),1),s=s.concat(eH(t.serverSyncTree_,l.path,x,l.currentWriteId,l.applyLocally)),s=s.concat(Cu(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",s=s.concat(Cu(t.serverSyncTree_,l.currentWriteId,!0))}na(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}eS(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)xp(r[a]);aA(t,t.transactionQueueTree_)}function gH(t,e){let n,r=t.transactionQueueTree_;for(n=dt(e);n!==null&&bp(r)===void 0;)r=eA(r,n),e=Kt(e),n=dt(e);return r}function yH(t,e){const n=[];return vH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function vH(t,e,n){const r=bp(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Q1(e,s=>{vH(t,s,n)})}function eS(t,e){const n=bp(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,oH(e,n.length>0?n:void 0)}Q1(e,r=>{eS(t,r)})}function xH(t,e){const n=Sv(gH(t,e)),r=eA(t.transactionQueueTree_,e);return sye(r,s=>{IC(t,s)}),IC(t,r),lH(r,s=>{IC(t,s)}),n}function IC(t,e){const n=bp(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(he(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(he(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Cu(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?oH(e,void 0):n.length=i+1,na(t.eventQueue_,Sv(e),s);for(let o=0;o<r.length;o++)xp(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tye(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Iye(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ts(`Invalid query segment '${n}' in query '${t}'`)}return e}const _M=function(t,e){const n=kye(t),r=n.namespace;n.domain==="firebase.com"&&nl(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&nl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Upe();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new v5(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Wt(n.pathString)}},kye=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=Tye(t.substring(u,d)));const f=Iye(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Oye=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=CM.charAt(n%64),n=Math.floor(n/64);he(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=CM.charAt(e[s]);return he(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ye{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Xn(this.snapshot.exportVal())}}class Aye{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return he(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ft(this._path)?null:T5(this._path)}get ref(){return new gl(this._repo,this._path)}get _queryIdentifier(){const e=aM(this._queryParams),n=O$(e);return n==="{}"?"default":n}get _queryObject(){return aM(this._queryParams)}isEqual(e){if(e=xr(e),!(e instanceof Pd))return!1;const n=this._repo===e._repo,r=R$(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Cme(this._path)}}function Pye(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function lA(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Fu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==rd)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==kc)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===Sn){if(e!=null&&!bM(e)||n!=null&&!bM(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(he(t.getIndex()instanceof M$||t.getIndex()===j5,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wH(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class gl extends Pd{constructor(e,n){super(e,n,new F$,!1)}get parent(){const e=k5(this._path);return e===null?null:new gl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ny{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Wt(e),r=ry(this.ref,e);return new ny(this._node.getChild(n),r,Sn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new ny(s,ry(this.ref,r),Sn)))}hasChild(e){const n=new Wt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function $e(t,e){return t=xr(t),t._checkNotDeleted("ref"),e!==void 0?ry(t._root,e):t._root}function ry(t,e){return t=xr(t),dt(t._path)===null?cye("child","path",e):nA("child","path",e),new gl(t._repo,Yn(t._path,e))}function cA(t,e){t=xr(t),rA("push",t._path),_v("push",e,t._path,!0);const n=hH(t._repo),r=Oye(n),s=ry(t,r),i=ry(t,r);let o;return o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function uA(t){return rA("remove",t._path),At(t,null)}function At(t,e){t=xr(t),rA("set",t._path),_v("set",e,t._path,!1);const n=new B1;return xye(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Ct(t){t=xr(t);const e=new bH(()=>{}),n=new tS(e);return vye(t._repo,t,n).then(r=>new ny(r,new gl(t._repo,t._path),t._queryParams.getIndex()))}class tS{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new $ye("value",this,new ny(e.snapshotNode,new gl(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Aye(this,e,n):null}matches(e){return e instanceof tS?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Rye(t,e,n,r,s){const i=new bH(n,void 0),o=new tS(i);return wye(t._repo,t,o),()=>Sye(t._repo,t,o)}function Ua(t,e,n,r){return Rye(t,"value",e)}class Cv{}class Dye extends Cv{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){_v("endAt",this._value,e._path,!0);const n=Kme(e._queryParams,this._value,this._key);if(wH(n),lA(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Pd(e._repo,e._path,n,e._orderByCalled)}}class jye extends Cv{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){_v("startAt",this._value,e._path,!0);const n=qme(e._queryParams,this._value,this._key);if(wH(n),lA(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Pd(e._repo,e._path,n,e._orderByCalled)}}class Mye extends Cv{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Pd(e._repo,e._path,Gme(e._queryParams,this._limit),e._orderByCalled)}}function Lye(t){if(Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Mye(t)}class Fye extends Cv{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Pye(e,"orderByChild");const n=new Wt(this._path);if(ft(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new M$(n),s=Xme(e._queryParams,r);return lA(s),new Pd(e._repo,e._path,s,!0)}}function SH(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return nA("orderByChild","path",t),new Fye(t)}class Bye extends Cv{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(_v("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Dye(this._value,this._key)._apply(new jye(this._value,this._key)._apply(e))}}function Uye(t,e){return new Bye(t,e)}function _H(t,...e){let n=xr(t);for(const r of e)n=r._apply(n);return n}jge(gl);Uge(gl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wye="FIREBASE_DATABASE_EMULATOR_HOST",lT={};let zye=!1;function Vye(t,e,n,r){t.repoInfo_=new v5(e,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function Hye(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||nl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fr("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=_M(i,s),a=o.repoInfo,l;typeof process<"u"&&zj&&(l=zj[Wye]),l?(i=`http://${l}?ns=${a.namespace}`,o=_M(i,s),a=o.repoInfo):o.repoInfo.secure;const c=new Jpe(t.name,t.options,e);uye("Invalid Firebase Database URL",o),ft(o.path)||nl("Database URL must point to the root of a Firebase Database (not including a child path).");const u=qye(a,t,c,new Qpe(t,n));return new Kye(u,t)}function Gye(t,e){const n=lT[e];(!n||n[t.key]!==t)&&nl(`Database ${e}(${t.repoInfo_}) has already been deleted.`),_ye(t),delete n[t.key]}function qye(t,e,n,r){let s=lT[e.name];s||(s={},lT[e.name]=s);let i=s[t.toURLString()];return i&&nl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new mye(t,zye,n,r),s[t.toURLString()]=i,i}class Kye{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gye(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gl(this._repo,Nt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Gye(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&nl("Cannot call "+e+" on a deleted database.")}}function Xye(t=b$(),e){const n=W1(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=d6("database");r&&Yye(n,...r)}return n}function Yye(t,e,n,r={}){t=xr(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Zu(r,i.repoInfo_.emulatorOptions))return;nl("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&nl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Cb(Cb.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:p6(r.mockUserToken,t.app.options.projectId);o=new Cb(a)}Vye(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qye(t){Dpe($d),ed(new Ic("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Hye(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),qo(Vj,Hj,t),qo(Vj,Hj,"esm2017")}Ba.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ba.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Qye();var Jye="firebase",Zye="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qo(Jye,Zye,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH="firebasestorage.googleapis.com",eve="storageBucket",tve=2*60*1e3,nve=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends hl{constructor(e,n,r=0){super(kC(e),`Firebase Storage: ${n} (${kC(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ca.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return kC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ra;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ra||(ra={}));function kC(t){return"storage/"+t}function rve(){const t="An unknown error occurred, please check the error payload for server response.";return new ca(ra.UNKNOWN,t)}function sve(){return new ca(ra.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ive(){return new ca(ra.CANCELED,"User canceled the upload/download.")}function ove(t){return new ca(ra.INVALID_URL,"Invalid URL '"+t+"'.")}function ave(t){return new ca(ra.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function NM(t){return new ca(ra.INVALID_ARGUMENT,t)}function NH(){return new ca(ra.APP_DELETED,"The Firebase app was deleted.")}function lve(t){return new ca(ra.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=co.makeFromUrl(e,n)}catch{return new co(e,"")}if(r.path==="")return r;throw ave(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${s}/o${f}`,"i"),m={bucket:1,path:3},g=n===CH?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",v=new RegExp(`^https?://${g}/${s}/${y}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:p,indices:m,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<b.length;w++){const _=b[w],C=_.regex.exec(e);if(C){const E=C[_.indices.bucket];let N=C[_.indices.path];N||(N=""),r=new co(E,N),_.postModify(r);break}}if(r==null)throw ove(e);return r}}class cve{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uve(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function d(y){s=setTimeout(()=>{s=null,t(p,l())},y)}function f(){i&&clearTimeout(i)}function p(y,...v){if(c){f();return}if(y){f(),u.call(null,y,...v);return}if(l()||o){f(),u.call(null,y,...v);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let m=!1;function g(y){m||(m=!0,f(),!c&&(s!==null?(y||(a=2),clearTimeout(s),d(0)):y||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function dve(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fve(t){return t!==void 0}function EM(t,e,n,r){if(r<e)throw NM(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw NM(`Invalid value for '${t}'. Expected ${n} or less.`)}function hve(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var j0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(j0||(j0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pve(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mve{constructor(e,n,r,s,i,o,a,l,c,u,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ox(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===j0.NO_ERROR,l=i.getStatus();if(!a||pve(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===j0.ABORT;r(!1,new Ox(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ox(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());fve(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=rve();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?NH():ive();o(l)}else{const l=sve();o(l)}};this.canceled_?n(!1,new Ox(!1,null,!0)):this.backoffId_=uve(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dve(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ox{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function gve(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function yve(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vve(t,e){e&&(t["X-Firebase-GMPID"]=e)}function xve(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function bve(t,e,n,r,s,i,o=!0){const a=hve(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return vve(c,e),gve(c,n),yve(c,i),xve(c,r),new mve(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wve(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Sve(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n){this._service=e,n instanceof co?this._location=n:this._location=co.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new M0(e,n)}get root(){const e=new co(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Sve(this._location.path)}get storage(){return this._service}get parent(){const e=wve(this._location.path);if(e===null)return null;const n=new co(this._location.bucket,e);return new M0(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw lve(e)}}function TM(t,e){const n=e==null?void 0:e[eve];return n==null?null:co.makeFromBucketSpec(n,t)}function _ve(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:p6(s,t.app.options.projectId))}class Cve{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=CH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tve,this._maxUploadRetryTime=nve,this._requests=new Set,s!=null?this._bucket=co.makeFromBucketSpec(s,this._host):this._bucket=TM(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=co.makeFromBucketSpec(this._url,e):this._bucket=TM(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){EM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){EM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(zs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new M0(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new cve(NH());{const o=bve(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const IM="@firebase/storage",kM="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH="storage";function Nve(t=b$(),e){t=xr(t);const r=W1(t,EH).getImmediate({identifier:e}),s=d6("storage");return s&&Eve(r,...s),r}function Eve(t,e,n,r={}){_ve(t,e,n,r)}function Tve(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Cve(n,r,s,e,$d)}function Ive(){ed(new Ic(EH,Tve,"PUBLIC").setMultipleInstances(!0)),qo(IM,kM,""),qo(IM,kM,"esm2017")}Ive();const kve={apiKey:"AIzaSyDCLwjLBJPl6R1Z_drxuueNrYFmpH_RUUg",authDomain:"examportal-d4923.firebaseapp.com",databaseURL:"https://examportal-d4923-default-rtdb.firebaseio.com",projectId:"examportal-d4923",storageBucket:"examportal-d4923.firebasestorage.app",messagingSenderId:"322929484275",appId:"1:322929484275:web:5e6a4a3cdf332bacfcb286",measurementId:"G-8KB5642XET"},dA=b6(kve),wp=Ppe(dA),Ae=Xye(dA);Nve(dA);let Vs=null;const Ove=async(t,e)=>{if(t==="admin@gmail.com"&&e==="admin"){const n={id:"admin-id",name:"Admin User",email:"admin@gmail.com",role:"admin"};return localStorage.setItem("examUser",JSON.stringify(n)),Vs=n,{success:!0,role:"admin"}}try{const n=await xhe(wp,t,e),r=$e(Ae,`users/${n.user.uid}`),s=await Ct(r);if(s.exists()){const i=s.val(),o={id:n.user.uid,name:i.name,email:i.email,role:i.role};return localStorage.setItem("examUser",JSON.stringify(o)),Vs=o,{success:!0,role:o.role}}return{success:!1,error:"User data not found"}}catch{return{success:!1,error:"Invalid email or password"}}},$ve=async()=>{try{return await She(wp),localStorage.removeItem("examUser"),Vs=null,{success:!0}}catch{return{success:!1,error:"Failed to logout"}}},TH=async()=>{const t=localStorage.getItem("examUser");if(t)try{const e=JSON.parse(t);if(e&&e.id&&e.role)return Vs=e,Vs}catch(e){console.error("Error parsing stored user:",e)}return new Promise(e=>{q6(wp,async n=>{if(n){const r=$e(Ae,`users/${n.uid}`),s=await Ct(r);if(s.exists()){const i=s.val();Vs={id:n.uid,name:i.name,email:i.email,role:i.role,profileImage:i.profileImage||""},localStorage.setItem("examUser",JSON.stringify(Vs)),e(Vs)}else e(null)}else e(null)})})},IH=async(t,e,n,r)=>{try{const i=(await vhe(wp,e,n)).user;return await At($e(Ae,`users/${i.uid}`),{name:t,email:e,role:r,createdAt:new Date().toISOString()}),{success:!0,user:{id:i.uid,name:t,email:e,role:r}}}catch{return{success:!1,error:"Failed to register user"}}},Rd=async()=>{const t=localStorage.getItem("examUser");if(t)try{const n=JSON.parse(t);if(n&&n.role)return n.role}catch(n){console.error("Error parsing stored user:",n)}const e=await TH();return e?e.role:null},kH=async t=>{try{return await yhe(wp,t),{success:!0}}catch{return{success:!1,error:"Failed to send reset email"}}},Ave=async t=>{try{const e=$e(Ae,`users/${t.id}`),n=await Ct(e);if(n.exists()){const r=n.val();await At(e,{...r,name:t.name,email:t.email,profileImage:t.profileImage||r.profileImage||"",registerNumber:t.registerNumber||r.registerNumber||"",department:t.department||r.department||"",adharNumber:t.adharNumber||r.adharNumber||"",address:t.address||r.address||"",updatedAt:new Date().toISOString()})}else await At(e,{name:t.name,email:t.email,role:"student",profileImage:t.profileImage||"",registerNumber:t.registerNumber||"",department:t.department||"",adharNumber:t.adharNumber||"",address:t.address||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return Vs&&Vs.id===t.id&&(Vs={...Vs,...t},localStorage.setItem("examUser",JSON.stringify(Vs))),{success:!0}}catch(e){return console.error("Error updating profile:",e),{success:!1,error:"Failed to update profile"}}};function Pve({onBack:t}){const[e,n]=S.useState(""),[r,s]=S.useState(!1),{toast:i}=ii(),o=async a=>{a.preventDefault(),s(!0);try{const{success:l,error:c}=await kH(e);l?(i({title:"Reset link sent",description:"Please check your email for the password reset link."}),t()):i({title:"Failed to send reset link",description:c||"Please try again later.",variant:"destructive"})}catch{i({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{s(!1)}};return h.jsxs(Me,{className:"w-full max-w-md mx-auto",children:[h.jsxs(it,{className:"space-y-1",children:[h.jsx(ct,{className:"text-2xl font-bold text-center",children:"Reset Password"}),h.jsx(qn,{className:"text-center",children:"Enter your email address and we'll send you a password reset link"})]}),h.jsx(ot,{children:h.jsx("form",{onSubmit:o,className:"space-y-4",children:h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"email",children:"Email"}),h.jsx(Le,{id:"email",type:"email",placeholder:"name@example.com",value:e,onChange:a=>n(a.target.value),required:!0})]})})}),h.jsxs(Ys,{className:"flex flex-col space-y-2",children:[h.jsx(ae,{type:"submit",className:"w-full",onClick:o,disabled:r,children:r?"Sending...":"Send Reset Link"}),h.jsx(ae,{type:"button",variant:"ghost",className:"w-full",onClick:t,children:"Back to Login"})]})]})}function Rve(){const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(!1),{toast:u}=ii(),d=aa(),f=async p=>{p.preventDefault(),a(!0);try{const{success:m,role:g,error:y}=await Ove(t,n);m?(u({title:"Login successful",description:`Welcome back, ${g}!`}),setTimeout(()=>{d("/dashboard")},100)):u({title:"Login failed",description:y||"Invalid credentials. Please try again.",variant:"destructive"})}catch(m){u({title:"Login failed",description:"An error occurred during login. Please try again.",variant:"destructive"}),console.error("Login error:",m)}finally{a(!1)}};return l?h.jsx(Pve,{onBack:()=>c(!1)}):h.jsxs(Me,{className:"w-full max-w-md mx-auto",children:[h.jsxs(it,{className:"space-y-1",children:[h.jsx(ct,{className:"text-2xl font-bold text-center",children:"Login"}),h.jsx(qn,{className:"text-center",children:"Enter your credentials to access the exam portal"})]}),h.jsx(ot,{children:h.jsxs("form",{onSubmit:f,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"email",children:"Email"}),h.jsx(Le,{id:"email",type:"email",placeholder:"name@example.com",value:t,onChange:p=>e(p.target.value),required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"password",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(Le,{id:"password",type:s?"text":"password",placeholder:"••••••••",value:n,onChange:p=>r(p.target.value),required:!0}),h.jsx(ae,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>i(!s),children:s?h.jsx(xue,{className:"h-4 w-4"}):h.jsx(f$,{className:"h-4 w-4"})})]})]}),h.jsx(ae,{type:"button",variant:"link",className:"w-full",onClick:()=>c(!0),children:"Forgot password?"})]})}),h.jsx(Ys,{children:h.jsx(ae,{type:"submit",className:"w-full",onClick:f,disabled:o,children:o?h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Logging in..."]}):h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(_ue,{className:"h-4 w-4"}),"Login"]})})})]})}function Dve(t){return Object.prototype.toString.call(t)==="[object Object]"}function OM(t){return Dve(t)||Array.isArray(t)}function jve(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function fA(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;const s=JSON.stringify(Object.keys(t.breakpoints||{})),i=JSON.stringify(Object.keys(e.breakpoints||{}));return s!==i?!1:n.every(o=>{const a=t[o],l=e[o];return typeof a=="function"?`${a}`==`${l}`:!OM(a)||!OM(l)?a===l:fA(a,l)})}function $M(t){return t.concat().sort((e,n)=>e.name>n.name?1:-1).map(e=>e.options)}function Mve(t,e){if(t.length!==e.length)return!1;const n=$M(t),r=$M(e);return n.every((s,i)=>{const o=r[i];return fA(s,o)})}function hA(t){return typeof t=="number"}function cT(t){return typeof t=="string"}function nS(t){return typeof t=="boolean"}function AM(t){return Object.prototype.toString.call(t)==="[object Object]"}function bn(t){return Math.abs(t)}function pA(t){return Math.sign(t)}function cg(t,e){return bn(t-e)}function Lve(t,e){if(t===0||e===0||bn(t)<=bn(e))return 0;const n=cg(bn(t),bn(e));return bn(n/t)}function sy(t){return iy(t).map(Number)}function mo(t){return t[Nv(t)]}function Nv(t){return Math.max(0,t.length-1)}function mA(t,e){return e===Nv(t)}function PM(t,e=0){return Array.from(Array(t),(n,r)=>e+r)}function iy(t){return Object.keys(t)}function OH(t,e){return[t,e].reduce((n,r)=>(iy(r).forEach(s=>{const i=n[s],o=r[s],a=AM(i)&&AM(o);n[s]=a?OH(i,o):o}),n),{})}function uT(t,e){return typeof e.MouseEvent<"u"&&t instanceof e.MouseEvent}function Fve(t,e){const n={start:r,center:s,end:i};function r(){return 0}function s(l){return i(l)/2}function i(l){return e-l}function o(l,c){return cT(t)?n[t](l):t(e,l,c)}return{measure:o}}function oy(){let t=[];function e(s,i,o,a={passive:!0}){let l;if("addEventListener"in s)s.addEventListener(i,o,a),l=()=>s.removeEventListener(i,o,a);else{const c=s;c.addListener(o),l=()=>c.removeListener(o)}return t.push(l),r}function n(){t=t.filter(s=>s())}const r={add:e,clear:n};return r}function Bve(t,e,n,r){const s=oy(),i=1e3/60;let o=null,a=0,l=0;function c(){s.add(t,"visibilitychange",()=>{t.hidden&&m()})}function u(){p(),s.clear()}function d(y){if(!l)return;o||(o=y);const v=y-o;for(o=y,a+=v;a>=i;)n(i),a-=i;const x=a/i;r(x),l&&e.requestAnimationFrame(d)}function f(){l||(l=e.requestAnimationFrame(d))}function p(){e.cancelAnimationFrame(l),o=null,a=0,l=0}function m(){o=null,a=0}return{init:c,destroy:u,start:f,stop:p,update:()=>n(i),render:r}}function Uve(t,e){const n=e==="rtl",r=t==="y",s=r?"y":"x",i=r?"x":"y",o=!r&&n?-1:1,a=u(),l=d();function c(m){const{height:g,width:y}=m;return r?g:y}function u(){return r?"top":n?"right":"left"}function d(){return r?"bottom":n?"left":"right"}function f(m){return m*o}return{scroll:s,cross:i,startEdge:a,endEdge:l,measureSize:c,direction:f}}function od(t=0,e=0){const n=bn(t-e);function r(c){return c<t}function s(c){return c>e}function i(c){return r(c)||s(c)}function o(c){return i(c)?r(c)?t:e:c}function a(c){return n?c-n*Math.ceil((c-e)/n):c}return{length:n,max:e,min:t,constrain:o,reachedAny:i,reachedMax:s,reachedMin:r,removeOffset:a}}function $H(t,e,n){const{constrain:r}=od(0,t),s=t+1;let i=o(e);function o(f){return n?bn((s+f)%s):r(f)}function a(){return i}function l(f){return i=o(f),d}function c(f){return u().set(a()+f)}function u(){return $H(t,a(),n)}const d={get:a,set:l,add:c,clone:u};return d}function Wve(t,e,n,r,s,i,o,a,l,c,u,d,f,p,m,g,y,v,x){const{cross:b,direction:w}=t,_=["INPUT","SELECT","TEXTAREA"],C={passive:!1},E=oy(),N=oy(),I=od(50,225).constrain(p.measure(20)),$={mouse:300,touch:400},O={mouse:500,touch:600},k=m?43:25;let R=!1,M=0,B=0,F=!1,L=!1,P=!1,W=!1;function q(V){if(!x)return;function ge(Fe){(nS(x)||x(V,Fe))&&Pe(Fe)}const ve=e;E.add(ve,"dragstart",Fe=>Fe.preventDefault(),C).add(ve,"touchmove",()=>{},C).add(ve,"touchend",()=>{}).add(ve,"touchstart",ge).add(ve,"mousedown",ge).add(ve,"touchcancel",Ee).add(ve,"contextmenu",Ee).add(ve,"click",J,!0)}function H(){E.clear(),N.clear()}function Y(){const V=W?n:e;N.add(V,"touchmove",de,C).add(V,"touchend",Ee).add(V,"mousemove",de,C).add(V,"mouseup",Ee)}function se(V){const ge=V.nodeName||"";return _.includes(ge)}function Se(){return(m?O:$)[W?"mouse":"touch"]}function De(V,ge){const ve=d.add(pA(V)*-1),Fe=u.byDistance(V,!m).distance;return m||bn(V)<I?Fe:y&&ge?Fe*.5:u.byIndex(ve.get(),0).distance}function Pe(V){const ge=uT(V,r);W=ge,P=m&&ge&&!V.buttons&&R,R=cg(s.get(),o.get())>=2,!(ge&&V.button!==0)&&(se(V.target)||(F=!0,i.pointerDown(V),c.useFriction(0).useDuration(0),s.set(o),Y(),M=i.readPoint(V),B=i.readPoint(V,b),f.emit("pointerDown")))}function de(V){if(!uT(V,r)&&V.touches.length>=2)return Ee(V);const ve=i.readPoint(V),Fe=i.readPoint(V,b),je=cg(ve,M),mt=cg(Fe,B);if(!L&&!W&&(!V.cancelable||(L=je>mt,!L)))return Ee(V);const Ot=i.pointerMove(V);je>g&&(P=!0),c.useFriction(.3).useDuration(.75),a.start(),s.add(w(Ot)),V.preventDefault()}function Ee(V){const ve=u.byDistance(0,!1).index!==d.get(),Fe=i.pointerUp(V)*Se(),je=De(w(Fe),ve),mt=Lve(Fe,je),Ot=k-10*mt,K=v+mt/50;L=!1,F=!1,N.clear(),c.useDuration(Ot).useFriction(K),l.distance(je,!m),W=!1,f.emit("pointerUp")}function J(V){P&&(V.stopPropagation(),V.preventDefault(),P=!1)}function ie(){return F}return{init:q,destroy:H,pointerDown:ie}}function zve(t,e){let r,s;function i(d){return d.timeStamp}function o(d,f){const m=`client${(f||t.scroll)==="x"?"X":"Y"}`;return(uT(d,e)?d:d.touches[0])[m]}function a(d){return r=d,s=d,o(d)}function l(d){const f=o(d)-o(s),p=i(d)-i(r)>170;return s=d,p&&(r=d),f}function c(d){if(!r||!s)return 0;const f=o(s)-o(r),p=i(d)-i(r),m=i(d)-i(s)>170,g=f/p;return p&&!m&&bn(g)>.1?g:0}return{pointerDown:a,pointerMove:l,pointerUp:c,readPoint:o}}function Vve(){function t(n){const{offsetTop:r,offsetLeft:s,offsetWidth:i,offsetHeight:o}=n;return{top:r,right:s+i,bottom:r+o,left:s,width:i,height:o}}return{measure:t}}function Hve(t){function e(r){return t*(r/100)}return{measure:e}}function Gve(t,e,n,r,s,i,o){const a=[t].concat(r);let l,c,u=[],d=!1;function f(y){return s.measureSize(o.measure(y))}function p(y){if(!i)return;c=f(t),u=r.map(f);function v(x){for(const b of x){if(d)return;const w=b.target===t,_=r.indexOf(b.target),C=w?c:u[_],E=f(w?t:r[_]);if(bn(E-C)>=.5){y.reInit(),e.emit("resize");break}}}l=new ResizeObserver(x=>{(nS(i)||i(y,x))&&v(x)}),n.requestAnimationFrame(()=>{a.forEach(x=>l.observe(x))})}function m(){d=!0,l&&l.disconnect()}return{init:p,destroy:m}}function qve(t,e,n,r,s,i){let o=0,a=0,l=s,c=i,u=t.get(),d=0;function f(C){const E=C/1e3,N=l*E,I=r.get()-t.get(),$=!l;let O=0;return $?(o=0,n.set(r),t.set(r),O=I):(n.set(t),o+=I/N,o*=c,u+=o,t.add(o*E),O=u-d),a=pA(O),d=u,_}function p(){const C=r.get()-e.get();return bn(C)<.001}function m(){return l}function g(){return a}function y(){return o}function v(){return b(s)}function x(){return w(i)}function b(C){return l=C,_}function w(C){return c=C,_}const _={direction:g,duration:m,velocity:y,seek:f,settled:p,useBaseFriction:x,useBaseDuration:v,useFriction:w,useDuration:b};return _}function Kve(t,e,n,r,s){const i=s.measure(10),o=s.measure(50),a=od(.1,.99);let l=!1;function c(){return!(l||!t.reachedAny(n.get())||!t.reachedAny(e.get()))}function u(p){if(!c())return;const m=t.reachedMin(e.get())?"min":"max",g=bn(t[m]-e.get()),y=n.get()-e.get(),v=a.constrain(g/o);n.subtract(y*v),!p&&bn(y)<i&&(n.set(t.constrain(n.get())),r.useDuration(25).useBaseFriction())}function d(p){l=!p}return{shouldConstrain:c,constrain:u,toggleActive:d}}function Xve(t,e,n,r,s){const i=od(-e+t,0),o=d(),a=u(),l=f();function c(m,g){return cg(m,g)<1}function u(){const m=o[0],g=mo(o),y=o.lastIndexOf(m),v=o.indexOf(g)+1;return od(y,v)}function d(){return n.map((m,g)=>{const{min:y,max:v}=i,x=i.constrain(m),b=!g,w=mA(n,g);return b?v:w||c(y,x)?y:c(v,x)?v:x}).map(m=>parseFloat(m.toFixed(3)))}function f(){if(e<=t+s)return[i.max];if(r==="keepSnaps")return o;const{min:m,max:g}=a;return o.slice(m,g)}return{snapsContained:l,scrollContainLimit:a}}function Yve(t,e,n){const r=e[0],s=n?r-t:mo(e);return{limit:od(s,r)}}function Qve(t,e,n,r){const i=e.min+.1,o=e.max+.1,{reachedMin:a,reachedMax:l}=od(i,o);function c(f){return f===1?l(n.get()):f===-1?a(n.get()):!1}function u(f){if(!c(f))return;const p=t*(f*-1);r.forEach(m=>m.add(p))}return{loop:u}}function Jve(t){const{max:e,length:n}=t;function r(i){const o=i-e;return n?o/-n:0}return{get:r}}function Zve(t,e,n,r,s){const{startEdge:i,endEdge:o}=t,{groupSlides:a}=s,l=d().map(e.measure),c=f(),u=p();function d(){return a(r).map(g=>mo(g)[o]-g[0][i]).map(bn)}function f(){return r.map(g=>n[i]-g[i]).map(g=>-bn(g))}function p(){return a(c).map(g=>g[0]).map((g,y)=>g+l[y])}return{snaps:c,snapsAligned:u}}function exe(t,e,n,r,s,i){const{groupSlides:o}=s,{min:a,max:l}=r,c=u();function u(){const f=o(i),p=!t||e==="keepSnaps";return n.length===1?[i]:p?f:f.slice(a,l).map((m,g,y)=>{const v=!g,x=mA(y,g);if(v){const b=mo(y[0])+1;return PM(b)}if(x){const b=Nv(i)-mo(y)[0]+1;return PM(b,mo(y)[0])}return m})}return{slideRegistry:c}}function txe(t,e,n,r,s){const{reachedAny:i,removeOffset:o,constrain:a}=r;function l(m){return m.concat().sort((g,y)=>bn(g)-bn(y))[0]}function c(m){const g=t?o(m):a(m),y=e.map((x,b)=>({diff:u(x-g,0),index:b})).sort((x,b)=>bn(x.diff)-bn(b.diff)),{index:v}=y[0];return{index:v,distance:g}}function u(m,g){const y=[m,m+n,m-n];if(!t)return m;if(!g)return l(y);const v=y.filter(x=>pA(x)===g);return v.length?l(v):mo(y)-n}function d(m,g){const y=e[m]-s.get(),v=u(y,g);return{index:m,distance:v}}function f(m,g){const y=s.get()+m,{index:v,distance:x}=c(y),b=!t&&i(y);if(!g||b)return{index:v,distance:m};const w=e[v]-x,_=m+u(w,0);return{index:v,distance:_}}return{byDistance:f,byIndex:d,shortcut:u}}function nxe(t,e,n,r,s,i,o){function a(d){const f=d.distance,p=d.index!==e.get();i.add(f),f&&(r.duration()?t.start():(t.update(),t.render(1),t.update())),p&&(n.set(e.get()),e.set(d.index),o.emit("select"))}function l(d,f){const p=s.byDistance(d,f);a(p)}function c(d,f){const p=e.clone().set(d),m=s.byIndex(p.get(),f);a(m)}return{distance:l,index:c}}function rxe(t,e,n,r,s,i,o,a){const l={passive:!0,capture:!0};let c=0;function u(p){if(!a)return;function m(g){if(new Date().getTime()-c>10)return;o.emit("slideFocusStart"),t.scrollLeft=0;const x=n.findIndex(b=>b.includes(g));hA(x)&&(s.useDuration(0),r.index(x,0),o.emit("slideFocus"))}i.add(document,"keydown",d,!1),e.forEach((g,y)=>{i.add(g,"focus",v=>{(nS(a)||a(p,v))&&m(y)},l)})}function d(p){p.code==="Tab"&&(c=new Date().getTime())}return{init:u}}function Bm(t){let e=t;function n(){return e}function r(l){e=o(l)}function s(l){e+=o(l)}function i(l){e-=o(l)}function o(l){return hA(l)?l:l.get()}return{get:n,set:r,add:s,subtract:i}}function AH(t,e){const n=t.scroll==="x"?i:o,r=e.style;let s=!1;function i(d){return`translate3d(${d}px,0px,0px)`}function o(d){return`translate3d(0px,${d}px,0px)`}function a(d){s||(r.transform=n(t.direction(d)))}function l(d){s=!d}function c(){s||(r.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:c,to:a,toggleActive:l}}function sxe(t,e,n,r,s,i,o,a,l){const u=sy(s),d=sy(s).reverse(),f=v().concat(x());function p(E,N){return E.reduce((I,$)=>I-s[$],N)}function m(E,N){return E.reduce((I,$)=>p(I,N)>0?I.concat([$]):I,[])}function g(E){return i.map((N,I)=>({start:N-r[I]+.5+E,end:N+e-.5+E}))}function y(E,N,I){const $=g(N);return E.map(O=>{const k=I?0:-n,R=I?n:0,M=I?"end":"start",B=$[O][M];return{index:O,loopPoint:B,slideLocation:Bm(-1),translate:AH(t,l[O]),target:()=>a.get()>B?k:R}})}function v(){const E=o[0],N=m(d,E);return y(N,n,!1)}function x(){const E=e-o[0]-1,N=m(u,E);return y(N,-n,!0)}function b(){return f.every(({index:E})=>{const N=u.filter(I=>I!==E);return p(N,e)<=.1})}function w(){f.forEach(E=>{const{target:N,translate:I,slideLocation:$}=E,O=N();O!==$.get()&&(I.to(O),$.set(O))})}function _(){f.forEach(E=>E.translate.clear())}return{canLoop:b,clear:_,loop:w,loopPoints:f}}function ixe(t,e,n){let r,s=!1;function i(l){if(!n)return;function c(u){for(const d of u)if(d.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}r=new MutationObserver(u=>{s||(nS(n)||n(l,u))&&c(u)}),r.observe(t,{childList:!0})}function o(){r&&r.disconnect(),s=!0}return{init:i,destroy:o}}function oxe(t,e,n,r){const s={};let i=null,o=null,a,l=!1;function c(){a=new IntersectionObserver(m=>{l||(m.forEach(g=>{const y=e.indexOf(g.target);s[y]=g}),i=null,o=null,n.emit("slidesInView"))},{root:t.parentElement,threshold:r}),e.forEach(m=>a.observe(m))}function u(){a&&a.disconnect(),l=!0}function d(m){return iy(s).reduce((g,y)=>{const v=parseInt(y),{isIntersecting:x}=s[v];return(m&&x||!m&&!x)&&g.push(v),g},[])}function f(m=!0){if(m&&i)return i;if(!m&&o)return o;const g=d(m);return m&&(i=g),m||(o=g),g}return{init:c,destroy:u,get:f}}function axe(t,e,n,r,s,i){const{measureSize:o,startEdge:a,endEdge:l}=t,c=n[0]&&s,u=m(),d=g(),f=n.map(o),p=y();function m(){if(!c)return 0;const x=n[0];return bn(e[a]-x[a])}function g(){if(!c)return 0;const x=i.getComputedStyle(mo(r));return parseFloat(x.getPropertyValue(`margin-${l}`))}function y(){return n.map((x,b,w)=>{const _=!b,C=mA(w,b);return _?f[b]+u:C?f[b]+d:w[b+1][a]-x[a]}).map(bn)}return{slideSizes:f,slideSizesWithGaps:p,startGap:u,endGap:d}}function lxe(t,e,n,r,s,i,o,a,l){const{startEdge:c,endEdge:u,direction:d}=t,f=hA(n);function p(v,x){return sy(v).filter(b=>b%x===0).map(b=>v.slice(b,b+x))}function m(v){return v.length?sy(v).reduce((x,b,w)=>{const _=mo(x)||0,C=_===0,E=b===Nv(v),N=s[c]-i[_][c],I=s[c]-i[b][u],$=!r&&C?d(o):0,O=!r&&E?d(a):0,k=bn(I-O-(N+$));return w&&k>e+l&&x.push(b),E&&x.push(v.length),x},[]).map((x,b,w)=>{const _=Math.max(w[b-1]||0);return v.slice(_,x)}):[]}function g(v){return f?p(v,n):m(v)}return{groupSlides:g}}function cxe(t,e,n,r,s,i,o){const{align:a,axis:l,direction:c,startIndex:u,loop:d,duration:f,dragFree:p,dragThreshold:m,inViewThreshold:g,slidesToScroll:y,skipSnaps:v,containScroll:x,watchResize:b,watchSlides:w,watchDrag:_,watchFocus:C}=i,E=2,N=Vve(),I=N.measure(e),$=n.map(N.measure),O=Uve(l,c),k=O.measureSize(I),R=Hve(k),M=Fve(a,k),B=!d&&!!x,F=d||!!x,{slideSizes:L,slideSizesWithGaps:P,startGap:W,endGap:q}=axe(O,I,$,n,F,s),H=lxe(O,k,y,d,I,$,W,q,E),{snaps:Y,snapsAligned:se}=Zve(O,M,I,$,H),Se=-mo(Y)+mo(P),{snapsContained:De,scrollContainLimit:Pe}=Xve(k,Se,se,x,E),de=B?De:se,{limit:Ee}=Yve(Se,de,d),J=$H(Nv(de),u,d),ie=J.clone(),Z=sy(n),V=({dragHandler:nr,scrollBody:Ui,scrollBounds:Xr,options:{loop:Yr}},ma)=>{Yr||Xr.constrain(nr.pointerDown()),Ui.seek(ma)},ge=({scrollBody:nr,translate:Ui,location:Xr,offsetLocation:Yr,scrollLooper:ma,slideLooper:Wi,dragHandler:dn,animation:nn,eventHandler:Ge,scrollBounds:Q,options:{loop:oe}},Je)=>{const vn=nr.settled(),rr=!Q.shouldConstrain(),ga=oe?vn:vn&&rr;ga&&!dn.pointerDown()&&(nn.stop(),Ge.emit("settle")),ga||Ge.emit("scroll");const Zc=Xr.get()*Je+Ot.get()*(1-Je);Yr.set(Zc),oe&&(ma.loop(nr.direction()),Wi.loop()),Ui.to(Yr.get())},ve=Bve(r,s,nr=>V(An,nr),nr=>ge(An,nr)),Fe=.68,je=de[J.get()],mt=Bm(je),Ot=Bm(je),K=Bm(je),fe=Bm(je),Te=qve(mt,K,Ot,fe,f,Fe),Qe=txe(d,de,Se,Ee,fe),_e=nxe(ve,J,ie,Te,Qe,fe,o),gt=Jve(Ee),Ye=oy(),zt=oxe(e,n,o,g),{slideRegistry:Ue}=exe(B,x,de,Pe,H,Z),_t=rxe(t,n,Ue,_e,Te,Ye,o,C),An={ownerDocument:r,ownerWindow:s,eventHandler:o,containerRect:I,slideRects:$,animation:ve,axis:O,dragHandler:Wve(O,t,r,s,fe,zve(O,s),mt,ve,_e,Te,Qe,J,o,R,p,m,v,Fe,_),eventStore:Ye,percentOfView:R,index:J,indexPrevious:ie,limit:Ee,location:mt,offsetLocation:K,previousLocation:Ot,options:i,resizeHandler:Gve(e,o,s,n,O,b,N),scrollBody:Te,scrollBounds:Kve(Ee,K,fe,Te,R),scrollLooper:Qve(Se,Ee,K,[mt,K,Ot,fe]),scrollProgress:gt,scrollSnapList:de.map(gt.get),scrollSnaps:de,scrollTarget:Qe,scrollTo:_e,slideLooper:sxe(O,k,Se,L,P,Y,de,K,n),slideFocus:_t,slidesHandler:ixe(e,o,w),slidesInView:zt,slideIndexes:Z,slideRegistry:Ue,slidesToScroll:H,target:fe,translate:AH(O,e)};return An}function uxe(){let t={},e;function n(c){e=c}function r(c){return t[c]||[]}function s(c){return r(c).forEach(u=>u(e,c)),l}function i(c,u){return t[c]=r(c).concat([u]),l}function o(c,u){return t[c]=r(c).filter(d=>d!==u),l}function a(){t={}}const l={init:n,emit:s,off:o,on:i,clear:a};return l}const dxe={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function fxe(t){function e(i,o){return OH(i,o||{})}function n(i){const o=i.breakpoints||{},a=iy(o).filter(l=>t.matchMedia(l).matches).map(l=>o[l]).reduce((l,c)=>e(l,c),{});return e(i,a)}function r(i){return i.map(o=>iy(o.breakpoints||{})).reduce((o,a)=>o.concat(a),[]).map(t.matchMedia)}return{mergeOptions:e,optionsAtMedia:n,optionsMediaQueries:r}}function hxe(t){let e=[];function n(i,o){return e=o.filter(({options:a})=>t.optionsAtMedia(a).active!==!1),e.forEach(a=>a.init(i,t)),o.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function r(){e=e.filter(i=>i.destroy())}return{init:n,destroy:r}}function L0(t,e,n){const r=t.ownerDocument,s=r.defaultView,i=fxe(s),o=hxe(i),a=oy(),l=uxe(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:d}=i,{on:f,off:p,emit:m}=l,g=O;let y=!1,v,x=c(dxe,L0.globalOptions),b=c(x),w=[],_,C,E;function N(){const{container:Z,slides:V}=b;C=(cT(Z)?t.querySelector(Z):Z)||t.children[0];const ve=cT(V)?C.querySelectorAll(V):V;E=[].slice.call(ve||C.children)}function I(Z){const V=cxe(t,C,E,r,s,Z,l);if(Z.loop&&!V.slideLooper.canLoop()){const ge=Object.assign({},Z,{loop:!1});return I(ge)}return V}function $(Z,V){y||(x=c(x,Z),b=u(x),w=V||w,N(),v=I(b),d([x,...w.map(({options:ge})=>ge)]).forEach(ge=>a.add(ge,"change",O)),b.active&&(v.translate.to(v.location.get()),v.animation.init(),v.slidesInView.init(),v.slideFocus.init(ie),v.eventHandler.init(ie),v.resizeHandler.init(ie),v.slidesHandler.init(ie),v.options.loop&&v.slideLooper.loop(),C.offsetParent&&E.length&&v.dragHandler.init(ie),_=o.init(ie,w)))}function O(Z,V){const ge=H();k(),$(c({startIndex:ge},Z),V),l.emit("reInit")}function k(){v.dragHandler.destroy(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),v.slidesInView.destroy(),v.animation.destroy(),o.destroy(),a.clear()}function R(){y||(y=!0,a.clear(),k(),l.emit("destroy"),l.clear())}function M(Z,V,ge){!b.active||y||(v.scrollBody.useBaseFriction().useDuration(V===!0?0:b.duration),v.scrollTo.index(Z,ge||0))}function B(Z){const V=v.index.add(1).get();M(V,Z,-1)}function F(Z){const V=v.index.add(-1).get();M(V,Z,1)}function L(){return v.index.add(1).get()!==H()}function P(){return v.index.add(-1).get()!==H()}function W(){return v.scrollSnapList}function q(){return v.scrollProgress.get(v.location.get())}function H(){return v.index.get()}function Y(){return v.indexPrevious.get()}function se(){return v.slidesInView.get()}function Se(){return v.slidesInView.get(!1)}function De(){return _}function Pe(){return v}function de(){return t}function Ee(){return C}function J(){return E}const ie={canScrollNext:L,canScrollPrev:P,containerNode:Ee,internalEngine:Pe,destroy:R,off:p,on:f,emit:m,plugins:De,previousScrollSnap:Y,reInit:g,rootNode:de,scrollNext:B,scrollPrev:F,scrollProgress:q,scrollSnapList:W,scrollTo:M,selectedScrollSnap:H,slideNodes:J,slidesInView:se,slidesNotInView:Se};return $(e,n),setTimeout(()=>l.emit("init"),0),ie}L0.globalOptions=void 0;function gA(t={},e=[]){const n=S.useRef(t),r=S.useRef(e),[s,i]=S.useState(),[o,a]=S.useState(),l=S.useCallback(()=>{s&&s.reInit(n.current,r.current)},[s]);return S.useEffect(()=>{fA(n.current,t)||(n.current=t,l())},[t,l]),S.useEffect(()=>{Mve(r.current,e)||(r.current=e,l())},[e,l]),S.useEffect(()=>{if(jve()&&o){L0.globalOptions=gA.globalOptions;const c=L0(o,n.current,r.current);return i(c),()=>c.destroy()}else i(void 0)},[o,i]),[a,s]}gA.globalOptions=void 0;const PH=S.createContext(null);function rS(){const t=S.useContext(PH);if(!t)throw new Error("useCarousel must be used within a <Carousel />");return t}const RH=S.forwardRef(({orientation:t="horizontal",opts:e,setApi:n,plugins:r,className:s,children:i,...o},a)=>{const[l,c]=gA({...e,axis:t==="horizontal"?"x":"y"},r),[u,d]=S.useState(!1),[f,p]=S.useState(!1),m=S.useCallback(x=>{x&&(d(x.canScrollPrev()),p(x.canScrollNext()))},[]),g=S.useCallback(()=>{c==null||c.scrollPrev()},[c]),y=S.useCallback(()=>{c==null||c.scrollNext()},[c]),v=S.useCallback(x=>{x.key==="ArrowLeft"?(x.preventDefault(),g()):x.key==="ArrowRight"&&(x.preventDefault(),y())},[g,y]);return S.useEffect(()=>{!c||!n||n(c)},[c,n]),S.useEffect(()=>{if(c)return m(c),c.on("reInit",m),c.on("select",m),()=>{c==null||c.off("select",m)}},[c,m]),h.jsx(PH.Provider,{value:{carouselRef:l,api:c,opts:e,orientation:t||((e==null?void 0:e.axis)==="y"?"vertical":"horizontal"),scrollPrev:g,scrollNext:y,canScrollPrev:u,canScrollNext:f},children:h.jsx("div",{ref:a,onKeyDownCapture:v,className:ne("relative",s),role:"region","aria-roledescription":"carousel",...o,children:i})})});RH.displayName="Carousel";const DH=S.forwardRef(({className:t,...e},n)=>{const{carouselRef:r,orientation:s}=rS();return h.jsx("div",{ref:r,className:"overflow-hidden",children:h.jsx("div",{ref:n,className:ne("flex",s==="horizontal"?"-ml-4":"-mt-4 flex-col",t),...e})})});DH.displayName="CarouselContent";const jH=S.forwardRef(({className:t,...e},n)=>{const{orientation:r}=rS();return h.jsx("div",{ref:n,role:"group","aria-roledescription":"slide",className:ne("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",t),...e})});jH.displayName="CarouselItem";const MH=S.forwardRef(({className:t,variant:e="outline",size:n="icon",...r},s)=>{const{orientation:i,scrollPrev:o,canScrollPrev:a}=rS();return h.jsxs(ae,{ref:s,variant:e,size:n,className:ne("absolute  h-8 w-8 rounded-full",i==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!a,onClick:o,...r,children:[h.jsx(ZV,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Previous slide"})]})});MH.displayName="CarouselPrevious";const LH=S.forwardRef(({className:t,variant:e="outline",size:n="icon",...r},s)=>{const{orientation:i,scrollNext:o,canScrollNext:a}=rS();return h.jsxs(ae,{ref:s,variant:e,size:n,className:ne("absolute h-8 w-8 rounded-full",i==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!a,onClick:o,...r,children:[h.jsx(due,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Next slide"})]})});LH.displayName="CarouselNext";var pxe=S.createContext(void 0);function Sp(t){const e=S.useContext(pxe);return t||e||"ltr"}function mxe(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:p,...m}=d,g=(f==null?void 0:f[t][l])||a,y=S.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:y,children:p})}function u(d,f){const p=(f==null?void 0:f[t][l])||a,m=S.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,gxe(s,...e)]}function gxe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function sS(t){const e=t+"CollectionProvider",[n,r]=mxe(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:m,children:g}=p,y=j.useRef(null),v=j.useRef(new Map).current;return h.jsx(s,{scope:m,itemMap:v,collectionRef:y,children:g})};o.displayName=e;const a=t+"CollectionSlot",l=j.forwardRef((p,m)=>{const{scope:g,children:y}=p,v=i(a,g),x=lt(m,v.collectionRef);return h.jsx(Oi,{ref:x,children:y})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=j.forwardRef((p,m)=>{const{scope:g,children:y,...v}=p,x=j.useRef(null),b=lt(m,x),w=i(c,g);return j.useEffect(()=>(w.itemMap.set(x,{ref:x,...v}),()=>void w.itemMap.delete(x))),h.jsx(Oi,{[u]:"",ref:b,children:y})});d.displayName=c;function f(p){const m=i(t+"CollectionConsumer",p);return j.useCallback(()=>{const y=m.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((w,_)=>v.indexOf(w.ref.current)-v.indexOf(_.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}function iS(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var _p="NavigationMenu",[yA,FH,yxe]=sS(_p),[dT,vxe,xxe]=sS(_p),[vA,Kgt]=No(_p,[yxe,xxe]),[bxe,Pi]=vA(_p),[wxe,Sxe]=vA(_p),BH=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,value:r,onValueChange:s,defaultValue:i,delayDuration:o=200,skipDelayDuration:a=300,orientation:l="horizontal",dir:c,...u}=t,[d,f]=S.useState(null),p=lt(e,I=>f(I)),m=Sp(c),g=S.useRef(0),y=S.useRef(0),v=S.useRef(0),[x,b]=S.useState(!0),[w="",_]=ta({prop:r,onChange:I=>{const $=I!=="",O=a>0;$?(window.clearTimeout(v.current),O&&b(!1)):(window.clearTimeout(v.current),v.current=window.setTimeout(()=>b(!0),a)),s==null||s(I)},defaultProp:i}),C=S.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>_(""),150)},[_]),E=S.useCallback(I=>{window.clearTimeout(y.current),_(I)},[_]),N=S.useCallback(I=>{w===I?window.clearTimeout(y.current):g.current=window.setTimeout(()=>{window.clearTimeout(y.current),_(I)},o)},[w,_,o]);return S.useEffect(()=>()=>{window.clearTimeout(g.current),window.clearTimeout(y.current),window.clearTimeout(v.current)},[]),h.jsx(WH,{scope:n,isRootMenu:!0,value:w,dir:m,orientation:l,rootNavigationMenu:d,onTriggerEnter:I=>{window.clearTimeout(g.current),x?N(I):E(I)},onTriggerLeave:()=>{window.clearTimeout(g.current),C()},onContentEnter:()=>window.clearTimeout(y.current),onContentLeave:C,onItemSelect:I=>{_($=>$===I?"":I)},onItemDismiss:()=>_(""),children:h.jsx(Re.nav,{"aria-label":"Main","data-orientation":l,dir:m,...u,ref:p})})});BH.displayName=_p;var UH="NavigationMenuSub",_xe=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",...a}=t,l=Pi(UH,n),[c="",u]=ta({prop:r,onChange:s,defaultProp:i});return h.jsx(WH,{scope:n,isRootMenu:!1,value:c,dir:l.dir,orientation:o,rootNavigationMenu:l.rootNavigationMenu,onTriggerEnter:d=>u(d),onItemSelect:d=>u(d),onItemDismiss:()=>u(""),children:h.jsx(Re.div,{"data-orientation":o,...a,ref:e})})});_xe.displayName=UH;var WH=t=>{const{scope:e,isRootMenu:n,rootNavigationMenu:r,dir:s,orientation:i,children:o,value:a,onItemSelect:l,onItemDismiss:c,onTriggerEnter:u,onTriggerLeave:d,onContentEnter:f,onContentLeave:p}=t,[m,g]=S.useState(null),[y,v]=S.useState(new Map),[x,b]=S.useState(null);return h.jsx(bxe,{scope:e,isRootMenu:n,rootNavigationMenu:r,value:a,previousValue:iS(a),baseId:ho(),dir:s,orientation:i,viewport:m,onViewportChange:g,indicatorTrack:x,onIndicatorTrackChange:b,onTriggerEnter:cn(u),onTriggerLeave:cn(d),onContentEnter:cn(f),onContentLeave:cn(p),onItemSelect:cn(l),onItemDismiss:cn(c),onViewportContentChange:S.useCallback((w,_)=>{v(C=>(C.set(w,_),new Map(C)))},[]),onViewportContentRemove:S.useCallback(w=>{v(_=>_.has(w)?(_.delete(w),new Map(_)):_)},[]),children:h.jsx(yA.Provider,{scope:e,children:h.jsx(wxe,{scope:e,items:y,children:o})})})},zH="NavigationMenuList",VH=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,...r}=t,s=Pi(zH,n),i=h.jsx(Re.ul,{"data-orientation":s.orientation,...r,ref:e});return h.jsx(Re.div,{style:{position:"relative"},ref:s.onIndicatorTrackChange,children:h.jsx(yA.Slot,{scope:n,children:s.isRootMenu?h.jsx(eG,{asChild:!0,children:i}):i})})});VH.displayName=zH;var HH="NavigationMenuItem",[Cxe,GH]=vA(HH),qH=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,value:r,...s}=t,i=ho(),o=r||i||"LEGACY_REACT_AUTO_VALUE",a=S.useRef(null),l=S.useRef(null),c=S.useRef(null),u=S.useRef(()=>{}),d=S.useRef(!1),f=S.useCallback((m="start")=>{if(a.current){u.current();const g=hT(a.current);g.length&&wA(m==="start"?g:g.reverse())}},[]),p=S.useCallback(()=>{if(a.current){const m=hT(a.current);m.length&&(u.current=$xe(m))}},[]);return h.jsx(Cxe,{scope:n,value:o,triggerRef:l,contentRef:a,focusProxyRef:c,wasEscapeCloseRef:d,onEntryKeyDown:f,onFocusProxyEnter:f,onRootContentClose:p,onContentFocusOutside:p,children:h.jsx(Re.li,{...s,ref:e})})});qH.displayName=HH;var fT="NavigationMenuTrigger",KH=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,disabled:r,...s}=t,i=Pi(fT,t.__scopeNavigationMenu),o=GH(fT,t.__scopeNavigationMenu),a=S.useRef(null),l=lt(a,o.triggerRef,e),c=nG(i.baseId,o.value),u=rG(i.baseId,o.value),d=S.useRef(!1),f=S.useRef(!1),p=o.value===i.value;return h.jsxs(h.Fragment,{children:[h.jsx(yA.ItemSlot,{scope:n,value:o.value,children:h.jsx(tG,{asChild:!0,children:h.jsx(Re.button,{id:c,disabled:r,"data-disabled":r?"":void 0,"data-state":SA(p),"aria-expanded":p,"aria-controls":u,...s,ref:l,onPointerEnter:Ne(t.onPointerEnter,()=>{f.current=!1,o.wasEscapeCloseRef.current=!1}),onPointerMove:Ne(t.onPointerMove,F0(()=>{r||f.current||o.wasEscapeCloseRef.current||d.current||(i.onTriggerEnter(o.value),d.current=!0)})),onPointerLeave:Ne(t.onPointerLeave,F0(()=>{r||(i.onTriggerLeave(),d.current=!1)})),onClick:Ne(t.onClick,()=>{i.onItemSelect(o.value),f.current=p}),onKeyDown:Ne(t.onKeyDown,m=>{const y={horizontal:"ArrowDown",vertical:i.dir==="rtl"?"ArrowLeft":"ArrowRight"}[i.orientation];p&&m.key===y&&(o.onEntryKeyDown(),m.preventDefault())})})})}),p&&h.jsxs(h.Fragment,{children:[h.jsx(mV,{"aria-hidden":!0,tabIndex:0,ref:o.focusProxyRef,onFocus:m=>{const g=o.contentRef.current,y=m.relatedTarget,v=y===a.current,x=g==null?void 0:g.contains(y);(v||!x)&&o.onFocusProxyEnter(v?"start":"end")}}),i.viewport&&h.jsx("span",{"aria-owns":u})]})]})});KH.displayName=fT;var Nxe="NavigationMenuLink",RM="navigationMenu.linkSelect",XH=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,active:r,onSelect:s,...i}=t;return h.jsx(tG,{asChild:!0,children:h.jsx(Re.a,{"data-active":r?"":void 0,"aria-current":r?"page":void 0,...i,ref:e,onClick:Ne(t.onClick,o=>{const a=o.target,l=new CustomEvent(RM,{bubbles:!0,cancelable:!0});if(a.addEventListener(RM,c=>s==null?void 0:s(c),{once:!0}),kE(a,l),!l.defaultPrevented&&!o.metaKey){const c=new CustomEvent(Nb,{bubbles:!0,cancelable:!0});kE(a,c)}},{checkForDefaultPrevented:!1})})})});XH.displayName=Nxe;var xA="NavigationMenuIndicator",YH=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Pi(xA,t.__scopeNavigationMenu),i=!!s.value;return s.indicatorTrack?WO.createPortal(h.jsx(qr,{present:n||i,children:h.jsx(Exe,{...r,ref:e})}),s.indicatorTrack):null});YH.displayName=xA;var Exe=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,...r}=t,s=Pi(xA,n),i=FH(n),[o,a]=S.useState(null),[l,c]=S.useState(null),u=s.orientation==="horizontal",d=!!s.value;S.useEffect(()=>{var g;const m=(g=i().find(y=>y.value===s.value))==null?void 0:g.ref.current;m&&a(m)},[i,s.value]);const f=()=>{o&&c({size:u?o.offsetWidth:o.offsetHeight,offset:u?o.offsetLeft:o.offsetTop})};return pT(o,f),pT(s.indicatorTrack,f),l?h.jsx(Re.div,{"aria-hidden":!0,"data-state":d?"visible":"hidden","data-orientation":s.orientation,...r,ref:e,style:{position:"absolute",...u?{left:0,width:l.size+"px",transform:`translateX(${l.offset}px)`}:{top:0,height:l.size+"px",transform:`translateY(${l.offset}px)`},...r.style}}):null}),_h="NavigationMenuContent",QH=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Pi(_h,t.__scopeNavigationMenu),i=GH(_h,t.__scopeNavigationMenu),o=lt(i.contentRef,e),a=i.value===s.value,l={value:i.value,triggerRef:i.triggerRef,focusProxyRef:i.focusProxyRef,wasEscapeCloseRef:i.wasEscapeCloseRef,onContentFocusOutside:i.onContentFocusOutside,onRootContentClose:i.onRootContentClose,...r};return s.viewport?h.jsx(Txe,{forceMount:n,...l,ref:o}):h.jsx(qr,{present:n||a,children:h.jsx(JH,{"data-state":SA(a),...l,ref:o,onPointerEnter:Ne(t.onPointerEnter,s.onContentEnter),onPointerLeave:Ne(t.onPointerLeave,F0(s.onContentLeave)),style:{pointerEvents:!a&&s.isRootMenu?"none":void 0,...l.style}})})});QH.displayName=_h;var Txe=S.forwardRef((t,e)=>{const n=Pi(_h,t.__scopeNavigationMenu),{onViewportContentChange:r,onViewportContentRemove:s}=n;return jn(()=>{r(t.value,{ref:e,...t})},[t,e,r]),jn(()=>()=>s(t.value),[t.value,s]),null}),Nb="navigationMenu.rootContentDismiss",JH=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,value:r,triggerRef:s,focusProxyRef:i,wasEscapeCloseRef:o,onRootContentClose:a,onContentFocusOutside:l,...c}=t,u=Pi(_h,n),d=S.useRef(null),f=lt(d,e),p=nG(u.baseId,r),m=rG(u.baseId,r),g=FH(n),y=S.useRef(null),{onItemDismiss:v}=u;S.useEffect(()=>{const b=d.current;if(u.isRootMenu&&b){const w=()=>{var _;v(),a(),b.contains(document.activeElement)&&((_=s.current)==null||_.focus())};return b.addEventListener(Nb,w),()=>b.removeEventListener(Nb,w)}},[u.isRootMenu,t.value,s,v,a]);const x=S.useMemo(()=>{const w=g().map($=>$.value);u.dir==="rtl"&&w.reverse();const _=w.indexOf(u.value),C=w.indexOf(u.previousValue),E=r===u.value,N=C===w.indexOf(r);if(!E&&!N)return y.current;const I=(()=>{if(_!==C){if(E&&C!==-1)return _>C?"from-end":"from-start";if(N&&_!==-1)return _>C?"to-start":"to-end"}return null})();return y.current=I,I},[u.previousValue,u.value,u.dir,g,r]);return h.jsx(eG,{asChild:!0,children:h.jsx(lv,{id:m,"aria-labelledby":p,"data-motion":x,"data-orientation":u.orientation,...c,ref:f,disableOutsidePointerEvents:!1,onDismiss:()=>{var w;const b=new Event(Nb,{bubbles:!0,cancelable:!0});(w=d.current)==null||w.dispatchEvent(b)},onFocusOutside:Ne(t.onFocusOutside,b=>{var _;l();const w=b.target;(_=u.rootNavigationMenu)!=null&&_.contains(w)&&b.preventDefault()}),onPointerDownOutside:Ne(t.onPointerDownOutside,b=>{var E;const w=b.target,_=g().some(N=>{var I;return(I=N.ref.current)==null?void 0:I.contains(w)}),C=u.isRootMenu&&((E=u.viewport)==null?void 0:E.contains(w));(_||C||!u.isRootMenu)&&b.preventDefault()}),onKeyDown:Ne(t.onKeyDown,b=>{var C;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const E=hT(b.currentTarget),N=document.activeElement,I=E.findIndex(k=>k===N),O=b.shiftKey?E.slice(0,I).reverse():E.slice(I+1,E.length);wA(O)?b.preventDefault():(C=i.current)==null||C.focus()}}),onEscapeKeyDown:Ne(t.onEscapeKeyDown,b=>{o.current=!0})})})}),bA="NavigationMenuViewport",ZH=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=!!Pi(bA,t.__scopeNavigationMenu).value;return h.jsx(qr,{present:n||i,children:h.jsx(Ixe,{...r,ref:e})})});ZH.displayName=bA;var Ixe=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,children:r,...s}=t,i=Pi(bA,n),o=lt(e,i.onViewportChange),a=Sxe(_h,t.__scopeNavigationMenu),[l,c]=S.useState(null),[u,d]=S.useState(null),f=l?(l==null?void 0:l.width)+"px":void 0,p=l?(l==null?void 0:l.height)+"px":void 0,m=!!i.value,g=m?i.value:i.previousValue;return pT(u,()=>{u&&c({width:u.offsetWidth,height:u.offsetHeight})}),h.jsx(Re.div,{"data-state":SA(m),"data-orientation":i.orientation,...s,ref:o,style:{pointerEvents:!m&&i.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":f,"--radix-navigation-menu-viewport-height":p,...s.style},onPointerEnter:Ne(t.onPointerEnter,i.onContentEnter),onPointerLeave:Ne(t.onPointerLeave,F0(i.onContentLeave)),children:Array.from(a.items).map(([v,{ref:x,forceMount:b,...w}])=>{const _=g===v;return h.jsx(qr,{present:b||_,children:h.jsx(JH,{...w,ref:zO(x,C=>{_&&C&&d(C)})})},v)})})}),kxe="FocusGroup",eG=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,...r}=t,s=Pi(kxe,n);return h.jsx(dT.Provider,{scope:n,children:h.jsx(dT.Slot,{scope:n,children:h.jsx(Re.div,{dir:s.dir,...r,ref:e})})})}),DM=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],Oxe="FocusGroupItem",tG=S.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,...r}=t,s=vxe(n),i=Pi(Oxe,n);return h.jsx(dT.ItemSlot,{scope:n,children:h.jsx(Re.button,{...r,ref:e,onKeyDown:Ne(t.onKeyDown,o=>{if(["Home","End",...DM].includes(o.key)){let l=s().map(d=>d.ref.current);if([i.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(o.key)&&l.reverse(),DM.includes(o.key)){const d=l.indexOf(o.currentTarget);l=l.slice(d+1)}setTimeout(()=>wA(l)),o.preventDefault()}})})})});function hT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function wA(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}function $xe(t){return t.forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}),()=>{t.forEach(e=>{const n=e.dataset.tabindex;e.setAttribute("tabindex",n)})}}function pT(t,e){const n=cn(e);jn(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}function SA(t){return t?"open":"closed"}function nG(t,e){return`${t}-trigger-${e}`}function rG(t,e){return`${t}-content-${e}`}function F0(t){return e=>e.pointerType==="mouse"?t(e):void 0}var sG=BH,iG=VH,Axe=qH,oG=KH,Pxe=XH,aG=YH,lG=QH,cG=ZH;const uG=S.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(sG,{ref:r,className:ne("relative z-10 flex max-w-max flex-1 items-center justify-center",t),...n,children:[e,h.jsx(fG,{})]}));uG.displayName=sG.displayName;const dG=S.forwardRef(({className:t,...e},n)=>h.jsx(iG,{ref:n,className:ne("group flex flex-1 list-none items-center justify-center space-x-1",t),...e}));dG.displayName=iG.displayName;const ym=Axe,sf=Od("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),Rxe=S.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(oG,{ref:r,className:ne(sf(),"group",t),...n,children:[e," ",h.jsx(u$,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));Rxe.displayName=oG.displayName;const Dxe=S.forwardRef(({className:t,...e},n)=>h.jsx(lG,{ref:n,className:ne("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",t),...e}));Dxe.displayName=lG.displayName;const vm=Pxe,fG=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{className:ne("absolute left-0 top-full flex justify-center"),children:h.jsx(cG,{className:ne("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",t),ref:n,...e})}));fG.displayName=cG.displayName;const jxe=S.forwardRef(({className:t,...e},n)=>h.jsx(aG,{ref:n,className:ne("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",t),...e,children:h.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));jxe.displayName=aG.displayName;const Mxe=()=>{const[t,e]=S.useState(!1),[n,r]=S.useState("home");aa();const s=l=>{r(l);const c=document.getElementById(l);c&&c.scrollIntoView({behavior:"smooth"})},i=[{icon:h.jsx($ue,{className:"h-10 w-10 text-exam-primary animate-bounce"}),title:"Smart Learning Environment",description:"Experience a modern online examination platform designed for seamless learning and assessment."},{icon:h.jsx(e6,{className:"h-10 w-10 text-exam-primary animate-pulse"}),title:"Advanced Question Types",description:"Multiple choice, short answers, and more - tailored to meet diverse assessment needs."},{icon:h.jsx(Pue,{className:"h-10 w-10 text-exam-primary animate-bounce"}),title:"Real-time Monitoring",description:"Advanced proctoring with AI-powered features to ensure exam integrity."}],o=[{text:"This platform revolutionized how we conduct exams. The AI proctoring is fantastic!",author:"Tejas R",role:"Professor of Computer Science"},{text:"The interface is intuitive, and the real-time monitoring features are exceptional.",author:"Pawan Wadeyar",role:"Department Head"},{text:"As a student, I love how smooth and stress-free the exam experience is.",author:"Mahesh",role:"Student"}],a=["AI-powered examination security","Real-time performance analytics","Automated grading system","Scalable for institutions of any size","Secure data handling and privacy","24/7 technical support"];return h.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-primary/5 via-secondary/5 to-accent/5",children:[h.jsx("header",{className:"sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(cj,{className:"h-8 w-8 text-primary animate-bounce"}),h.jsx("span",{className:"ml-2 text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"SecureExam"})]}),h.jsx(uG,{className:"hidden md:flex",children:h.jsxs(dG,{children:[h.jsx(ym,{children:h.jsx(vm,{className:sf(),onClick:()=>s("home"),children:"Home"})}),h.jsx(ym,{children:h.jsx(vm,{className:sf(),onClick:()=>s("about"),children:"About Us"})}),h.jsx(ym,{children:h.jsx(vm,{className:sf(),onClick:()=>s("features"),children:"Features"})}),h.jsx(ym,{children:h.jsx(vm,{className:sf(),onClick:()=>s("testimonials"),children:"Testimonials"})}),h.jsx(ym,{children:h.jsx(vm,{className:sf(),onClick:()=>s("contact"),children:"Contact Us"})})]})}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx(WE,{}),h.jsx(ae,{onClick:()=>e(!0),className:"bg-primary/90 hover:bg-primary",children:"Get Started"})]})]})})}),h.jsx("main",{className:"flex-1",children:t?h.jsxs("div",{className:"max-w-md mx-auto py-16 px-4 sm:px-6 lg:px-8",children:[h.jsx("button",{onClick:()=>e(!1),className:"text-sm text-muted-foreground hover:text-primary mb-4 flex items-center",children:"← Back to Home"}),h.jsx(Rve,{})]}):h.jsxs("div",{className:"py-12",children:[h.jsx("section",{id:"home",className:"py-12 mb-8 animate-fade-in",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"text-center space-y-8",children:[h.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight sm:text-5xl md:text-6xl",children:[h.jsx("span",{className:"block",children:"Transform Your"}),h.jsx("span",{className:"block text-primary",children:"Examination Experience"})]}),h.jsx("p",{className:"mt-3 max-w-md mx-auto text-base text-muted-foreground sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:"Secure, intelligent, and user-friendly online examination platform powered by advanced AI technology."}),h.jsxs("div",{className:"flex justify-center space-x-4",children:[h.jsx(ae,{size:"lg",onClick:()=>e(!0),className:"animate-bounce",children:"Start Now"}),h.jsx(ae,{size:"lg",variant:"outline",onClick:()=>s("about"),children:"Learn More"})]})]})})}),h.jsx("section",{id:"about",className:"py-16 bg-gradient-to-r from-accent/10 to-secondary/10",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{className:"text-3xl font-bold tracking-tight text-primary",children:"About Us"}),h.jsx("p",{className:"mt-4 text-xl text-muted-foreground",children:"Transforming education through technology"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsx("h3",{className:"text-2xl font-semibold",children:"Our Mission"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"SecureExam is dedicated to revolutionizing the educational assessment process through cutting-edge technology. Founded by educators and technologists, we understand the challenges faced by institutions in conducting secure and fair examinations."}),h.jsx("h3",{className:"text-2xl font-semibold",children:"Our Vision"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"We envision a future where educational assessment is seamless, secure, and accessible to all. Through continuous innovation, we aim to empower educational institutions worldwide with the tools they need to evaluate student performance effectively."})]}),h.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-lg",children:[h.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Why Choose SecureExam?"}),h.jsx("ul",{className:"space-y-4",children:a.map((l,c)=>h.jsxs("li",{className:"flex items-center gap-3",children:[h.jsx(zg,{className:"h-5 w-5 text-exam-success"}),h.jsx("span",{children:l})]},c))})]})]})]})}),h.jsx("section",{id:"features",className:"py-16",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{className:"text-3xl font-bold tracking-tight text-primary",children:"Our Features"}),h.jsx("p",{className:"mt-4 text-xl text-muted-foreground",children:"Designed for modern education"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:i.map((l,c)=>h.jsxs(Me,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 animate-slide-in",children:[h.jsxs(it,{className:"flex flex-row items-center gap-4",children:[h.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:l.icon}),h.jsx(ct,{className:"text-xl",children:l.title})]}),h.jsx(ot,{children:h.jsx(qn,{className:"text-base",children:l.description})})]},c))})]})}),h.jsx("section",{id:"testimonials",className:"py-16 bg-gradient-to-r from-primary/5 to-secondary/5",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{className:"text-3xl font-bold tracking-tight text-primary",children:"What Our Users Say"}),h.jsx("p",{className:"mt-4 text-xl text-muted-foreground",children:"Trusted by educators and students worldwide"})]}),h.jsxs(RH,{className:"max-w-xl mx-auto",children:[h.jsx(DH,{children:o.map((l,c)=>h.jsx(jH,{children:h.jsxs(Me,{className:"mx-4",children:[h.jsx(it,{children:h.jsxs(qn,{className:"text-lg italic",children:['"',l.text,'"']})}),h.jsxs(ot,{children:[h.jsx("p",{className:"font-semibold",children:l.author}),h.jsx("p",{className:"text-sm text-muted-foreground",children:l.role})]})]})},c))}),h.jsx(MH,{}),h.jsx(LH,{})]})]})}),h.jsx("section",{id:"contact",className:"py-16",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{className:"text-3xl font-bold tracking-tight text-primary",children:"Contact Us"}),h.jsx("p",{className:"mt-4 text-xl text-muted-foreground",children:"We'd love to hear from you"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsx("h3",{className:"text-2xl font-semibold",children:"Get In Touch"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"Have questions or feedback? We're here to help. Contact our team for more information about SecureExam and how it can benefit your institution."}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Nue,{className:"h-5 w-5 text-primary"}),h.jsx("span",{children:"examportal@gmail.com"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Oue,{className:"h-5 w-5 text-primary"}),h.jsx("span",{children:"6360991933"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Eue,{className:"h-5 w-5 text-primary"}),h.jsx("address",{className:"not-italic",children:"Bangalore"})]})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-lg",children:[h.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Office Hours"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium",children:"Monday - Friday"}),h.jsx("p",{className:"text-muted-foreground",children:"9:00 AM - 6:00 PM"})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium",children:"Saturday"}),h.jsx("p",{className:"text-muted-foreground",children:"10:00 AM - 4:00 PM"})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium",children:"Sunday"}),h.jsx("p",{className:"text-muted-foreground",children:"Closed"})]})]})]})]})]})})]})}),h.jsx("footer",{className:"bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-t py-8",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(cj,{className:"h-6 w-6 text-primary"}),h.jsx("span",{className:"ml-2 font-semibold",children:"SecureExam"})]}),h.jsxs("div",{className:"mt-4 md:mt-0 flex gap-6",children:[h.jsx("a",{href:"#",onClick:()=>s("home"),className:"text-sm text-muted-foreground hover:text-primary",children:"Home"}),h.jsx("a",{href:"#",onClick:()=>s("about"),className:"text-sm text-muted-foreground hover:text-primary",children:"About"}),h.jsx("a",{href:"#",onClick:()=>s("features"),className:"text-sm text-muted-foreground hover:text-primary",children:"Features"}),h.jsx("a",{href:"#",onClick:()=>s("contact"),className:"text-sm text-muted-foreground hover:text-primary",children:"Contact"})]}),h.jsxs("div",{className:"mt-4 md:mt-0 text-sm text-muted-foreground",children:["© ",new Date().getFullYear()," SecureExam Portal. All rights reserved."]})]})})})]})},OC=768;function Lxe(){const[t,e]=S.useState(void 0);return S.useEffect(()=>{const n=window.matchMedia(`(max-width: ${OC-1}px)`),r=()=>{e(window.innerWidth<OC)};return n.addEventListener("change",r),e(window.innerWidth<OC),()=>n.removeEventListener("change",r)},[]),!!t}var Fxe="Separator",jM="horizontal",Bxe=["horizontal","vertical"],hG=S.forwardRef((t,e)=>{const{decorative:n,orientation:r=jM,...s}=t,i=Uxe(r)?r:jM,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return h.jsx(Re.div,{"data-orientation":i,...a,...s,ref:e})});hG.displayName=Fxe;function Uxe(t){return Bxe.includes(t)}var pG=hG;const mG=S.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>h.jsx(pG,{ref:s,decorative:n,orientation:e,className:ne("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));mG.displayName=pG.displayName;var $C="focusScope.autoFocusOnMount",AC="focusScope.autoFocusOnUnmount",MM={bubbles:!1,cancelable:!0},Wxe="FocusScope",_A=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=S.useState(null),c=cn(s),u=cn(i),d=S.useRef(null),f=lt(e,g=>l(g)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let g=function(b){if(p.paused||!a)return;const w=b.target;a.contains(w)?d.current=w:$l(d.current,{select:!0})},y=function(b){if(p.paused||!a)return;const w=b.relatedTarget;w!==null&&(a.contains(w)||$l(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&$l(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),x.disconnect()}}},[r,a,p.paused]),S.useEffect(()=>{if(a){FM.add(p);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent($C,MM);a.addEventListener($C,c),a.dispatchEvent(v),v.defaultPrevented||(zxe(Kxe(gG(a)),{select:!0}),document.activeElement===g&&$l(a))}return()=>{a.removeEventListener($C,c),setTimeout(()=>{const v=new CustomEvent(AC,MM);a.addEventListener(AC,u),a.dispatchEvent(v),v.defaultPrevented||$l(g??document.body,{select:!0}),a.removeEventListener(AC,u),FM.remove(p)},0)}}},[a,c,u,p]);const m=S.useCallback(g=>{if(!n&&!r||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(y&&v){const x=g.currentTarget,[b,w]=Vxe(x);b&&w?!g.shiftKey&&v===w?(g.preventDefault(),n&&$l(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&$l(w,{select:!0})):v===x&&g.preventDefault()}},[n,r,p.paused]);return h.jsx(Re.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});_A.displayName=Wxe;function zxe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if($l(r,{select:e}),document.activeElement!==n)return}function Vxe(t){const e=gG(t),n=LM(e,t),r=LM(e.reverse(),t);return[n,r]}function gG(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function LM(t,e){for(const n of t)if(!Hxe(n,{upTo:e}))return n}function Hxe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Gxe(t){return t instanceof HTMLInputElement&&"select"in t}function $l(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Gxe(t)&&e&&t.select()}}var FM=qxe();function qxe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=BM(t,e),t.unshift(e)},remove(e){var n;t=BM(t,e),(n=t[0])==null||n.resume()}}}function BM(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Kxe(t){return t.filter(e=>e.tagName!=="A")}var PC=0;function yG(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??UM()),document.body.insertAdjacentElement("beforeend",t[1]??UM()),PC++,()=>{PC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),PC--}},[])}function UM(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Eb="right-scroll-bar-position",Tb="width-before-scroll-bar",Xxe="with-scroll-bars-hidden",Yxe="--removed-body-scroll-bar-size";function RC(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Qxe(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Jxe=typeof window<"u"?S.useLayoutEffect:S.useEffect,WM=new WeakMap;function Zxe(t,e){var n=Qxe(null,function(r){return t.forEach(function(s){return RC(s,r)})});return Jxe(function(){var r=WM.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||RC(a,null)}),i.forEach(function(a){s.has(a)||RC(a,o)})}WM.set(n,t)},[t]),n}function ebe(t){return t}function tbe(t,e){e===void 0&&(e=ebe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function nbe(t){t===void 0&&(t={});var e=tbe(null);return e.options=Lo({async:!0,ssr:!1},t),e}var vG=function(t){var e=t.sideCar,n=fv(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Lo({},n))};vG.isSideCarExport=!0;function rbe(t,e){return t.useMedium(e),vG}var xG=nbe(),DC=function(){},oS=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:DC,onWheelCapture:DC,onTouchMoveCapture:DC}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,m=t.inert,g=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,x=t.gapMode,b=fv(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,_=Zxe([n,e]),C=Lo(Lo({},b),s);return S.createElement(S.Fragment,null,u&&S.createElement(w,{sideCar:xG,removeScrollBar:c,shards:d,noIsolation:p,inert:m,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:x}),o?S.cloneElement(S.Children.only(a),Lo(Lo({},C),{ref:_})):S.createElement(v,Lo({},C,{className:l,ref:_}),a))});oS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};oS.classNames={fullWidth:Tb,zeroRight:Eb};var sbe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ibe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=sbe();return e&&t.setAttribute("nonce",e),t}function obe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function abe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var lbe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ibe())&&(obe(e,n),abe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},cbe=function(){var t=lbe();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},bG=function(){var t=cbe(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},ube={left:0,top:0,right:0,gap:0},jC=function(t){return parseInt(t||"",10)||0},dbe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[jC(n),jC(r),jC(s)]},fbe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ube;var e=dbe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},hbe=bG(),Gf="data-scroll-locked",pbe=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Xxe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Gf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Eb,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Tb,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Eb," .").concat(Eb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tb," .").concat(Tb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Gf,`] {
    `).concat(Yxe,": ").concat(a,`px;
  }
`)},zM=function(){var t=parseInt(document.body.getAttribute(Gf)||"0",10);return isFinite(t)?t:0},mbe=function(){S.useEffect(function(){return document.body.setAttribute(Gf,(zM()+1).toString()),function(){var t=zM()-1;t<=0?document.body.removeAttribute(Gf):document.body.setAttribute(Gf,t.toString())}},[])},gbe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;mbe();var i=S.useMemo(function(){return fbe(s)},[s]);return S.createElement(hbe,{styles:pbe(i,!e,s,n?"":"!important")})},mT=!1;if(typeof window<"u")try{var $x=Object.defineProperty({},"passive",{get:function(){return mT=!0,!0}});window.addEventListener("test",$x,$x),window.removeEventListener("test",$x,$x)}catch{mT=!1}var Yd=mT?{passive:!1}:!1,ybe=function(t){return t.tagName==="TEXTAREA"},wG=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ybe(t)&&n[e]==="visible")},vbe=function(t){return wG(t,"overflowY")},xbe=function(t){return wG(t,"overflowX")},VM=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=SG(t,r);if(s){var i=_G(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},bbe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},wbe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},SG=function(t,e){return t==="v"?vbe(e):xbe(e)},_G=function(t,e){return t==="v"?bbe(e):wbe(e)},Sbe=function(t,e){return t==="h"&&e==="rtl"?-1:1},_be=function(t,e,n,r,s){var i=Sbe(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var p=_G(t,a),m=p[0],g=p[1],y=p[2],v=g-y-i*m;(m||v)&&SG(t,a)&&(d+=v,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!s)||!u&&(Math.abs(f)<1||!s))&&(c=!0),c},Ax=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},HM=function(t){return[t.deltaX,t.deltaY]},GM=function(t){return t&&"current"in t?t.current:t},Cbe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Nbe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Ebe=0,Qd=[];function Tbe(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(Ebe++)[0],i=S.useState(bG)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=yfe([t.lockRef.current],(t.shards||[]).map(GM),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=Ax(g),x=n.current,b="deltaX"in g?g.deltaX:x[0]-v[0],w="deltaY"in g?g.deltaY:x[1]-v[1],_,C=g.target,E=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in g&&E==="h"&&C.type==="range")return!1;var N=VM(E,C);if(!N)return!0;if(N?_=E:(_=E==="v"?"h":"v",N=VM(E,C)),!N)return!1;if(!r.current&&"changedTouches"in g&&(b||w)&&(r.current=_),!_)return!0;var I=r.current||_;return _be(I,y,g,I==="h"?b:w,!0)},[]),l=S.useCallback(function(g){var y=g;if(!(!Qd.length||Qd[Qd.length-1]!==i)){var v="deltaY"in y?HM(y):Ax(y),x=e.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&Cbe(_.delta,v)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(GM).filter(Boolean).filter(function(_){return _.contains(y.target)}),w=b.length>0?a(y,b[0]):!o.current.noIsolation;w&&y.cancelable&&y.preventDefault()}}},[]),c=S.useCallback(function(g,y,v,x){var b={name:g,delta:y,target:v,should:x,shadowParent:Ibe(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(w){return w!==b})},1)},[]),u=S.useCallback(function(g){n.current=Ax(g),r.current=void 0},[]),d=S.useCallback(function(g){c(g.type,HM(g),g.target,a(g,t.lockRef.current))},[]),f=S.useCallback(function(g){c(g.type,Ax(g),g.target,a(g,t.lockRef.current))},[]);S.useEffect(function(){return Qd.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Yd),document.addEventListener("touchmove",l,Yd),document.addEventListener("touchstart",u,Yd),function(){Qd=Qd.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,Yd),document.removeEventListener("touchmove",l,Yd),document.removeEventListener("touchstart",u,Yd)}},[]);var p=t.removeScrollBar,m=t.inert;return S.createElement(S.Fragment,null,m?S.createElement(i,{styles:Nbe(s)}):null,p?S.createElement(gbe,{gapMode:t.gapMode}):null)}function Ibe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const kbe=rbe(xG,Tbe);var CA=S.forwardRef(function(t,e){return S.createElement(oS,Lo({},t,{ref:e,sideCar:kbe}))});CA.classNames=oS.classNames;var Obe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Jd=new WeakMap,Px=new WeakMap,Rx={},MC=0,CG=function(t){return t&&(t.host||CG(t.parentNode))},$be=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=CG(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Abe=function(t,e,n,r){var s=$be(e,Array.isArray(t)?t:[t]);Rx[n]||(Rx[n]=new WeakMap);var i=Rx[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),m=p!==null&&p!=="false",g=(Jd.get(f)||0)+1,y=(i.get(f)||0)+1;Jd.set(f,g),i.set(f,y),o.push(f),g===1&&m&&Px.set(f,!0),y===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),MC++,function(){o.forEach(function(d){var f=Jd.get(d)-1,p=i.get(d)-1;Jd.set(d,f),i.set(d,p),f||(Px.has(d)||d.removeAttribute(r),Px.delete(d)),p||d.removeAttribute(n)}),MC--,MC||(Jd=new WeakMap,Jd=new WeakMap,Px=new WeakMap,Rx={})}},NG=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Obe(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Abe(r,s,n,"aria-hidden")):function(){return null}},NA="Dialog",[EG,TG]=No(NA),[Pbe,Eo]=EG(NA),IG=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c=!1,u]=ta({prop:r,defaultProp:s,onChange:i});return h.jsx(Pbe,{scope:e,triggerRef:a,contentRef:l,contentId:ho(),titleId:ho(),descriptionId:ho(),open:c,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};IG.displayName=NA;var kG="DialogTrigger",OG=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Eo(kG,n),i=lt(e,s.triggerRef);return h.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":IA(s.open),...r,ref:i,onClick:Ne(t.onClick,s.onOpenToggle)})});OG.displayName=kG;var EA="DialogPortal",[Rbe,$G]=EG(EA,{forceMount:void 0}),AG=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Eo(EA,e);return h.jsx(Rbe,{scope:e,forceMount:n,children:S.Children.map(r,o=>h.jsx(qr,{present:n||i.open,children:h.jsx(e$,{asChild:!0,container:s,children:o})}))})};AG.displayName=EA;var B0="DialogOverlay",PG=S.forwardRef((t,e)=>{const n=$G(B0,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Eo(B0,t.__scopeDialog);return i.modal?h.jsx(qr,{present:r||i.open,children:h.jsx(Dbe,{...s,ref:e})}):null});PG.displayName=B0;var Dbe=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Eo(B0,n);return h.jsx(CA,{as:Oi,allowPinchZoom:!0,shards:[s.contentRef],children:h.jsx(Re.div,{"data-state":IA(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ad="DialogContent",RG=S.forwardRef((t,e)=>{const n=$G(ad,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Eo(ad,t.__scopeDialog);return h.jsx(qr,{present:r||i.open,children:i.modal?h.jsx(jbe,{...s,ref:e}):h.jsx(Mbe,{...s,ref:e})})});RG.displayName=ad;var jbe=S.forwardRef((t,e)=>{const n=Eo(ad,t.__scopeDialog),r=S.useRef(null),s=lt(e,n.contentRef,r);return S.useEffect(()=>{const i=r.current;if(i)return NG(i)},[]),h.jsx(DG,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ne(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ne(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ne(t.onFocusOutside,i=>i.preventDefault())})}),Mbe=S.forwardRef((t,e)=>{const n=Eo(ad,t.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return h.jsx(DG,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),DG=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Eo(ad,n),l=S.useRef(null),c=lt(e,l);return yG(),h.jsxs(h.Fragment,{children:[h.jsx(_A,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:h.jsx(lv,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":IA(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(Fbe,{titleId:a.titleId}),h.jsx(Ube,{contentRef:l,descriptionId:a.descriptionId})]})]})}),TA="DialogTitle",jG=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Eo(TA,n);return h.jsx(Re.h2,{id:s.titleId,...r,ref:e})});jG.displayName=TA;var MG="DialogDescription",LG=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Eo(MG,n);return h.jsx(Re.p,{id:s.descriptionId,...r,ref:e})});LG.displayName=MG;var FG="DialogClose",BG=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Eo(FG,n);return h.jsx(Re.button,{type:"button",...r,ref:e,onClick:Ne(t.onClick,()=>s.onOpenChange(!1))})});BG.displayName=FG;function IA(t){return t?"open":"closed"}var UG="DialogTitleWarning",[Lbe,WG]=hoe(UG,{contentName:ad,titleName:TA,docsSlug:"dialog"}),Fbe=({titleId:t})=>{const e=WG(UG),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Bbe="DialogDescriptionWarning",Ube=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${WG(Bbe).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},kA=IG,zG=OG,OA=AG,Ev=PG,Tv=RG,Iv=jG,kv=LG,aS=BG;const Wbe=kA,zbe=OA,VG=S.forwardRef(({className:t,...e},n)=>h.jsx(Ev,{className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));VG.displayName=Ev.displayName;const Vbe=Od("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),HG=S.forwardRef(({side:t="right",className:e,children:n,...r},s)=>h.jsxs(zbe,{children:[h.jsx(VG,{}),h.jsxs(Tv,{ref:s,className:ne(Vbe({side:t}),e),...r,children:[n,h.jsxs(aS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[h.jsx(h$,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));HG.displayName=Tv.displayName;const Hbe=S.forwardRef(({className:t,...e},n)=>h.jsx(Iv,{ref:n,className:ne("text-lg font-semibold text-foreground",t),...e}));Hbe.displayName=Iv.displayName;const Gbe=S.forwardRef(({className:t,...e},n)=>h.jsx(kv,{ref:n,className:ne("text-sm text-muted-foreground",t),...e}));Gbe.displayName=kv.displayName;function qM({className:t,...e}){return h.jsx("div",{className:ne("animate-pulse rounded-md bg-muted",t),...e})}const qbe="sidebar:state",Kbe=60*60*24*7,Xbe="16rem",Ybe="18rem",Qbe="3rem",Jbe="b",GG=S.createContext(null);function lS(){const t=S.useContext(GG);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const qG=S.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:i,...o},a)=>{const l=Lxe(),[c,u]=S.useState(!1),[d,f]=S.useState(t),p=e??d,m=S.useCallback(x=>{const b=typeof x=="function"?x(p):x;n?n(b):f(b),document.cookie=`${qbe}=${b}; path=/; max-age=${Kbe}`},[n,p]),g=S.useCallback(()=>l?u(x=>!x):m(x=>!x),[l,m,u]);S.useEffect(()=>{const x=b=>{b.key===Jbe&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),g())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[g]);const y=p?"expanded":"collapsed",v=S.useMemo(()=>({state:y,open:p,setOpen:m,isMobile:l,openMobile:c,setOpenMobile:u,toggleSidebar:g}),[y,p,m,l,c,u,g]);return h.jsx(GG.Provider,{value:v,children:h.jsx(OV,{delayDuration:0,children:h.jsx("div",{style:{"--sidebar-width":Xbe,"--sidebar-width-icon":Qbe,...s},className:ne("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:a,...o,children:i})})})});qG.displayName="SidebarProvider";const KG=S.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...i},o)=>{const{isMobile:a,state:l,openMobile:c,setOpenMobile:u}=lS();return n==="none"?h.jsx("div",{className:ne("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...i,children:s}):a?h.jsx(Wbe,{open:c,onOpenChange:u,...i,children:h.jsx(HG,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Ybe},side:t,children:h.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):h.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":e,"data-side":t,children:[h.jsx("div",{className:ne("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),h.jsx("div",{className:ne("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:h.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});KG.displayName="Sidebar";const XG=S.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:s}=lS();return h.jsxs(ae,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:ne("h-7 w-7",t),onClick:i=>{e==null||e(i),s()},...n,children:[h.jsx(kue,{}),h.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});XG.displayName="SidebarTrigger";const Zbe=S.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=lS();return h.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:ne("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});Zbe.displayName="SidebarRail";const e0e=S.forwardRef(({className:t,...e},n)=>h.jsx("main",{ref:n,className:ne("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));e0e.displayName="SidebarInset";const t0e=S.forwardRef(({className:t,...e},n)=>h.jsx(Le,{ref:n,"data-sidebar":"input",className:ne("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));t0e.displayName="SidebarInput";const YG=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,"data-sidebar":"header",className:ne("flex flex-col gap-2 p-2",t),...e}));YG.displayName="SidebarHeader";const QG=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,"data-sidebar":"footer",className:ne("flex flex-col gap-2 p-2",t),...e}));QG.displayName="SidebarFooter";const n0e=S.forwardRef(({className:t,...e},n)=>h.jsx(mG,{ref:n,"data-sidebar":"separator",className:ne("mx-2 w-auto bg-sidebar-border",t),...e}));n0e.displayName="SidebarSeparator";const JG=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,"data-sidebar":"content",className:ne("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));JG.displayName="SidebarContent";const ZG=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,"data-sidebar":"group",className:ne("relative flex w-full min-w-0 flex-col p-2",t),...e}));ZG.displayName="SidebarGroup";const e8=S.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Oi:"div";return h.jsx(s,{ref:r,"data-sidebar":"group-label",className:ne("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});e8.displayName="SidebarGroupLabel";const r0e=S.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Oi:"button";return h.jsx(s,{ref:r,"data-sidebar":"group-action",className:ne("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});r0e.displayName="SidebarGroupAction";const t8=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,"data-sidebar":"group-content",className:ne("w-full text-sm",t),...e}));t8.displayName="SidebarGroupContent";const n8=S.forwardRef(({className:t,...e},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu",className:ne("flex w-full min-w-0 flex-col gap-1",t),...e}));n8.displayName="SidebarMenu";const r8=S.forwardRef(({className:t,...e},n)=>h.jsx("li",{ref:n,"data-sidebar":"menu-item",className:ne("group/menu-item relative",t),...e}));r8.displayName="SidebarMenuItem";const s0e=Od("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),s8=S.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:i,...o},a)=>{const l=t?Oi:"button",{isMobile:c,state:u}=lS(),d=h.jsx(l,{ref:a,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:ne(s0e({variant:n,size:r}),i),...o});return s?(typeof s=="string"&&(s={children:s}),h.jsxs(Lle,{children:[h.jsx(Fle,{asChild:!0,children:d}),h.jsx($V,{side:"right",align:"center",hidden:u!=="collapsed"||c,...s})]})):d});s8.displayName="SidebarMenuButton";const i0e=S.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},s)=>{const i=e?Oi:"button";return h.jsx(i,{ref:s,"data-sidebar":"menu-action",className:ne("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});i0e.displayName="SidebarMenuAction";const o0e=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:ne("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));o0e.displayName="SidebarMenuBadge";const a0e=S.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const s=S.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return h.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:ne("rounded-md h-8 flex gap-2 px-2 items-center",t),...n,children:[e&&h.jsx(qM,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),h.jsx(qM,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});a0e.displayName="SidebarMenuSkeleton";const l0e=S.forwardRef(({className:t,...e},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:ne("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));l0e.displayName="SidebarMenuSub";const c0e=S.forwardRef(({...t},e)=>h.jsx("li",{ref:e,...t}));c0e.displayName="SidebarMenuSubItem";const u0e=S.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...s},i)=>{const o=t?Oi:"a";return h.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:ne("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});u0e.displayName="SidebarMenuSubButton";const cS=S.forwardRef(({className:t,...e},n)=>h.jsx("textarea",{className:ne("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));cS.displayName="Textarea";const kr=kA,uS=zG,d0e=OA,i8=S.forwardRef(({className:t,...e},n)=>h.jsx(Ev,{ref:n,className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));i8.displayName=Ev.displayName;const hr=S.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(d0e,{children:[h.jsx(i8,{}),h.jsxs(Tv,{ref:r,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,h.jsxs(aS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(h$,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));hr.displayName=Tv.displayName;const pr=({className:t,...e})=>h.jsx("div",{className:ne("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});pr.displayName="DialogHeader";const Qs=({className:t,...e})=>h.jsx("div",{className:ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Qs.displayName="DialogFooter";const mr=S.forwardRef(({className:t,...e},n)=>h.jsx(Iv,{ref:n,className:ne("text-lg font-semibold leading-none tracking-tight",t),...e}));mr.displayName=Iv.displayName;const rl=S.forwardRef(({className:t,...e},n)=>h.jsx(kv,{ref:n,className:ne("text-sm text-muted-foreground",t),...e}));rl.displayName=kv.displayName;var o8="AlertDialog",[f0e,Xgt]=No(o8,[TG]),yl=TG(),a8=t=>{const{__scopeAlertDialog:e,...n}=t,r=yl(e);return h.jsx(kA,{...r,...n,modal:!0})};a8.displayName=o8;var h0e="AlertDialogTrigger",l8=S.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=yl(n);return h.jsx(zG,{...s,...r,ref:e})});l8.displayName=h0e;var p0e="AlertDialogPortal",c8=t=>{const{__scopeAlertDialog:e,...n}=t,r=yl(e);return h.jsx(OA,{...r,...n})};c8.displayName=p0e;var m0e="AlertDialogOverlay",u8=S.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=yl(n);return h.jsx(Ev,{...s,...r,ref:e})});u8.displayName=m0e;var qf="AlertDialogContent",[g0e,y0e]=f0e(qf),d8=S.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=yl(n),o=S.useRef(null),a=lt(e,o),l=S.useRef(null);return h.jsx(Lbe,{contentName:qf,titleName:f8,docsSlug:"alert-dialog",children:h.jsx(g0e,{scope:n,cancelRef:l,children:h.jsxs(Tv,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:Ne(s.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[h.jsx(VO,{children:r}),h.jsx(x0e,{contentRef:o})]})})})});d8.displayName=qf;var f8="AlertDialogTitle",h8=S.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=yl(n);return h.jsx(Iv,{...s,...r,ref:e})});h8.displayName=f8;var p8="AlertDialogDescription",m8=S.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=yl(n);return h.jsx(kv,{...s,...r,ref:e})});m8.displayName=p8;var v0e="AlertDialogAction",g8=S.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=yl(n);return h.jsx(aS,{...s,...r,ref:e})});g8.displayName=v0e;var y8="AlertDialogCancel",v8=S.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=y0e(y8,n),i=yl(n),o=lt(e,s);return h.jsx(aS,{...i,...r,ref:o})});v8.displayName=y8;var x0e=({contentRef:t})=>{const e=`\`${qf}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${qf}\` by passing a \`${p8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${qf}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return S.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},b0e=a8,w0e=l8,S0e=c8,x8=u8,b8=d8,w8=g8,S8=v8,_8=h8,C8=m8;const Ov=b0e,$A=w0e,_0e=S0e,N8=S.forwardRef(({className:t,...e},n)=>h.jsx(x8,{className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));N8.displayName=x8.displayName;const Cp=S.forwardRef(({className:t,...e},n)=>h.jsxs(_0e,{children:[h.jsx(N8,{}),h.jsx(b8,{ref:n,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Cp.displayName=b8.displayName;const Np=({className:t,...e})=>h.jsx("div",{className:ne("flex flex-col space-y-2 text-center sm:text-left",t),...e});Np.displayName="AlertDialogHeader";const Ep=({className:t,...e})=>h.jsx("div",{className:ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Ep.displayName="AlertDialogFooter";const Tp=S.forwardRef(({className:t,...e},n)=>h.jsx(_8,{ref:n,className:ne("text-lg font-semibold",t),...e}));Tp.displayName=_8.displayName;const Ip=S.forwardRef(({className:t,...e},n)=>h.jsx(C8,{ref:n,className:ne("text-sm text-muted-foreground",t),...e}));Ip.displayName=C8.displayName;const kp=S.forwardRef(({className:t,...e},n)=>h.jsx(w8,{ref:n,className:ne(Vg(),t),...e}));kp.displayName=w8.displayName;const Op=S.forwardRef(({className:t,...e},n)=>h.jsx(S8,{ref:n,className:ne(Vg({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Op.displayName=S8.displayName;var AA="Avatar",[C0e,Ygt]=No(AA),[N0e,E8]=C0e(AA),T8=S.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=S.useState("idle");return h.jsx(N0e,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:h.jsx(Re.span,{...r,ref:e})})});T8.displayName=AA;var I8="AvatarImage",k8=S.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=E8(I8,n),a=E0e(r,i.referrerPolicy),l=cn(c=>{s(c),o.onImageLoadingStatusChange(c)});return jn(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?h.jsx(Re.img,{...i,ref:e,src:r}):null});k8.displayName=I8;var O8="AvatarFallback",$8=S.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=E8(O8,n),[o,a]=S.useState(r===void 0);return S.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?h.jsx(Re.span,{...s,ref:e}):null});$8.displayName=O8;function E0e(t,e){const[n,r]=S.useState("idle");return jn(()=>{if(!t){r("error");return}let s=!0;const i=new window.Image,o=a=>()=>{s&&r(a)};return r("loading"),i.onload=o("loaded"),i.onerror=o("error"),i.src=t,e&&(i.referrerPolicy=e),()=>{s=!1}},[t,e]),n}var A8=T8,P8=k8,R8=$8;const PA=S.forwardRef(({className:t,...e},n)=>h.jsx(A8,{ref:n,className:ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));PA.displayName=A8.displayName;const RA=S.forwardRef(({className:t,...e},n)=>h.jsx(P8,{ref:n,className:ne("aspect-square h-full w-full",t),...e}));RA.displayName=P8.displayName;const DA=S.forwardRef(({className:t,...e},n)=>h.jsx(R8,{ref:n,className:ne("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));DA.displayName=R8.displayName;const dS=async t=>{try{const e="dyp2q6oy1",n="studentprofile",r=new FormData;r.append("file",t),r.append("upload_preset",n),console.log("Starting Cloudinary upload for file:",t.name,"size:",t.size);const s=await fetch(`https://api.cloudinary.com/v1_1/${e}/image/upload`,{method:"POST",body:r});if(!s.ok){const o=await s.text();throw console.error("Cloudinary upload failed:",o),new Error(`Upload failed: ${s.status} ${o}`)}const i=await s.json();return console.log("Cloudinary upload successful, URL:",i.secure_url),i.secure_url}catch(e){throw console.error("Error uploading to Cloudinary:",e),e}},T0e=(t,e)=>{const n=t.split(","),r=n[0].match(/:(.*?);/)[1],s=atob(n[1]);let i=s.length;const o=new Uint8Array(i);for(;i--;)o[i]=s.charCodeAt(i);return new File([o],e,{type:r})},I0e=async()=>new Promise(t=>{q6(wp,async e=>{if(e)try{const n=$e(Ae,`users/${e.uid}`),r=await Ct(n);if(r.exists()){const s=r.val();let i="";if(s.department){const a=$e(Ae,`departments/${s.department}`),l=await Ct(a);l.exists()?i=l.val().name||s.department:i=s.department}const o={id:e.uid,...s,departmentId:s.department,department:i};t(o)}else t(null)}catch(n){console.error("Error fetching user data:",n),t(null)}else t(null)})});function k0e(){const[t,e]=S.useState(!1),[n,r]=S.useState(!1),[s,i]=S.useState(null),[o,a]=S.useState({name:"",email:"",profileImage:"",registerNumber:"",department:"",adharNumber:"",address:""}),{toast:l}=ii(),c=async()=>{try{const p=await I0e();p&&(i(p),a({name:p.name||"",email:p.email||"",profileImage:p.profileImage||"",registerNumber:p.registerNumber||"",department:p.department||"",adharNumber:p.adharNumber||"",address:p.address||""}))}catch(p){console.error("Error loading user:",p),l({title:"Error",description:"Failed to load user profile",variant:"destructive"})}};S.useEffect(()=>{t&&c()},[t]);const u=async p=>{var g;const m=(g=p.target.files)==null?void 0:g[0];if(m)try{r(!0);const y=await dS(m);a(v=>({...v,profileImage:y})),l({title:"Success",description:"Profile image uploaded successfully"})}catch{l({title:"Error",description:"Failed to upload image",variant:"destructive"})}finally{r(!1)}},d=async p=>{p.preventDefault(),r(!0);try{const{success:m,error:g}=await Ave({...o,id:s.id});if(m)l({title:"Profile updated",description:"Your profile has been updated successfully."}),e(!1);else throw new Error(g)}catch{l({title:"Error",description:"Failed to update profile",variant:"destructive"})}finally{r(!1)}},f=async()=>{try{r(!0);const{success:p,error:m}=await kH(s.email);if(p)l({title:"Password reset email sent",description:"Please check your email for the password reset link."});else throw new Error(m)}catch{l({title:"Error",description:"Failed to send password reset email",variant:"destructive"})}finally{r(!1)}};return h.jsxs(kr,{open:t,onOpenChange:e,children:[h.jsx(uS,{asChild:!0,children:h.jsxs(ae,{variant:"outline",children:[h.jsx(dj,{className:"mr-2 h-4 w-4"}),"Profile"]})}),h.jsxs(hr,{className:"sm:max-w-[500px]",children:[h.jsx(pr,{children:h.jsx(mr,{children:"Profile Settings"})}),h.jsxs("form",{onSubmit:d,className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col items-center space-y-4 pb-6 border-b",children:[h.jsx(PA,{className:"h-24 w-24",children:o.profileImage?h.jsx(RA,{src:o.profileImage,alt:o.name}):h.jsx(DA,{children:h.jsx(dj,{className:"h-12 w-12"})})}),h.jsx("div",{children:h.jsxs(xe,{htmlFor:"image",className:"cursor-pointer inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 py-2 px-4",children:[h.jsx(t6,{className:"mr-2 h-4 w-4"}),"Change Photo",h.jsx(Le,{id:"image",type:"file",accept:"image/*",className:"hidden",onChange:u,disabled:n})]})})]}),h.jsxs("div",{className:"grid gap-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"name",children:"Full Name"}),h.jsx(Le,{id:"name",placeholder:"Enter your name",value:o.name,onChange:p=>a(m=>({...m,name:p.target.value})),disabled:n})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"registerNumber",children:"Register Number"}),h.jsx(Le,{id:"registerNumber",placeholder:"Enter register number",value:o.registerNumber,onChange:p=>a(m=>({...m,registerNumber:p.target.value})),disabled:n})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"department",children:"Department"}),h.jsx(Le,{id:"department",placeholder:"Enter department",value:o.department,readOnly:!0,disabled:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"adharNumber",children:"Aadhar Number"}),h.jsx(Le,{id:"adharNumber",placeholder:"Enter Aadhar number",value:o.adharNumber,onChange:p=>a(m=>({...m,adharNumber:p.target.value})),disabled:n})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"email",children:"Email"}),h.jsx(Le,{id:"email",type:"email",value:o.email,disabled:!0,className:"bg-muted"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"address",children:"Address"}),h.jsx(cS,{id:"address",placeholder:"Enter your address",value:o.address,onChange:p=>a(m=>({...m,address:p.target.value})),disabled:n})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{children:"Password"}),h.jsxs(Ov,{children:[h.jsx($A,{asChild:!0,children:h.jsxs(ae,{variant:"outline",className:"w-full",type:"button",children:[h.jsx(Sue,{className:"mr-2 h-4 w-4"}),"Change Password"]})}),h.jsxs(Cp,{children:[h.jsxs(Np,{children:[h.jsx(Tp,{children:"Change Password"}),h.jsx(Ip,{children:"We'll send you an email with instructions to reset your password. Are you sure you want to continue?"})]}),h.jsxs(Ep,{children:[h.jsx(Op,{children:"Cancel"}),h.jsx(kp,{onClick:f,children:"Send Reset Link"})]})]})]})]})]}),h.jsx(ae,{type:"submit",className:"w-full",disabled:n,children:n?"Saving...":"Save Changes"})]})]})]})}function D8({children:t}){var a;const[e,n]=S.useState(null),{toast:r}=ii(),s=aa();S.useEffect(()=>{(async()=>{const c=await TH();if(!c){s("/");return}n(c)})()},[s]);const i=async()=>{await $ve(),r({title:"Logged out",description:"You have been successfully logged out."}),s("/")},o=()=>{if(!e)return[];const l=[{title:"Dashboard",icon:n6,url:"/dashboard"}],c=[...l,{title:"Manage Teachers",icon:dc,url:"/dashboard/teachers"},{title:"Manage Exams",icon:$a,url:"/dashboard/adminexams"},{title:"Departments",icon:fue,url:"/departments"}],u=[...l,{title:"Students",icon:dc,url:"/dashboard/students"},{title:"Exams",icon:$a,url:"/dashboard/exams"},{title:"Schedule",icon:pp,url:"/dashboard/schedule"},{title:"Notice Board",icon:uc,url:"/dashboard/notices"}],d=[...l,{title:"My Exams",icon:l$,url:"/dashboard/myexams"},{title:"Results",icon:$a,url:"/dashboard/results"},{title:"Notice Board",icon:uc,url:"/dashboard/notices"}];switch(e.role){case"admin":return c;case"teacher":return u;case"student":return d;default:return l}};return h.jsx(qG,{children:h.jsxs("div",{className:"flex min-h-screen w-full",children:[h.jsxs(KG,{className:"border-r",children:[h.jsx(YG,{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"rounded-full bg-primary/10 p-1",children:h.jsx($a,{className:"h-6 w-6 text-primary"})}),h.jsx("div",{className:"font-semibold tracking-tight",children:"Secure Exam Portal"})]})}),h.jsx(JG,{children:h.jsxs(ZG,{children:[h.jsx(e8,{children:"Navigation"}),h.jsx(t8,{children:h.jsx(n8,{children:o().map(l=>h.jsx(r8,{children:h.jsx(s8,{asChild:!0,children:h.jsxs(QV,{to:l.url,className:"flex items-center gap-4",children:[h.jsx(l.icon,{className:"h-5 w-5"}),h.jsx("span",{children:l.title})]})})},l.title))})})]})}),h.jsx(QG,{className:"border-t p-4",children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx(k0e,{}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"rounded-full bg-primary/10 p-1",children:h.jsx("div",{className:"h-6 w-6 flex items-center justify-center text-primary font-medium",children:((a=e==null?void 0:e.name)==null?void 0:a.charAt(0))||"U"})}),h.jsxs("div",{className:"text-sm",children:[h.jsx("div",{className:"font-medium",children:(e==null?void 0:e.name)||"User"}),h.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:(e==null?void 0:e.role)||"Loading..."})]})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx(WE,{}),h.jsx(ae,{variant:"outline",size:"icon","aria-label":"Logout",onClick:i,children:h.jsx(Cue,{className:"h-4 w-4"})})]})]})]})})]}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsxs("header",{className:"flex items-center h-14 border-b px-4 lg:px-6 gap-4",children:[h.jsx(XG,{}),h.jsx("div",{className:"flex-1",children:h.jsx("h1",{className:"text-lg font-semibold",children:(e==null?void 0:e.role)==="admin"?"Admin Dashboard":(e==null?void 0:e.role)==="teacher"?"Teacher Dashboard":(e==null?void 0:e.role)==="student"?"Student Dashboard":"Dashboard"})}),h.jsxs("div",{className:"flex items-center gap-4 md:hidden",children:[h.jsx(WE,{}),h.jsx(ae,{variant:"outline",size:"icon","aria-label":"Menu",className:"md:hidden",children:h.jsx(Tue,{className:"h-5 w-5"})})]})]}),h.jsx("main",{className:"flex-1 overflow-auto p-4 md:p-6",children:t})]})]})})}const O0e=Od("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function gr({className:t,variant:e,...n}){return h.jsx("div",{className:ne(O0e({variant:e}),t),...n})}function $0e({id:t,name:e,email:n,role:r,status:s="active",additionalInfo:i,profileImage:o,department:a,semester:l,onView:c,onEdit:u,onDelete:d}){return h.jsxs(Me,{className:"overflow-hidden transition-all hover:shadow-md",children:[h.jsxs(it,{className:"pb-2",children:[o&&h.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden mb-4",children:h.jsx("img",{src:o,alt:`${e}'s profile`,className:"w-full h-full object-cover"})}),h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx(ct,{className:"text-xl font-bold",children:e}),h.jsx(qn,{children:n})]}),h.jsx(gr,{variant:s==="active"?"default":"secondary",className:s==="active"?"bg-exam-success":"bg-exam-warning",children:s})]})]}),h.jsx(ot,{children:h.jsxs("div",{className:"text-sm space-y-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium capitalize",children:r}),i&&h.jsx("p",{className:"text-muted-foreground mt-1",children:i})]}),a&&h.jsxs("div",{className:"text-muted-foreground",children:["Department: ",a]}),l&&h.jsxs("div",{className:"text-muted-foreground",children:["Semester: ",l]})]})}),h.jsxs(Ys,{className:"flex justify-end gap-2 border-t pt-4",children:[c&&h.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>c(t),children:[h.jsx(f$,{className:"h-4 w-4 mr-1"}),"View"]}),u&&h.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>u(t),children:[h.jsx(Uf,{className:"h-4 w-4 mr-1"}),"Edit"]}),d&&h.jsxs(Ov,{children:[h.jsx($A,{asChild:!0,children:h.jsxs(ae,{variant:"outline",size:"sm",className:"text-exam-danger hover:bg-exam-danger/10",children:[h.jsx(xb,{className:"h-4 w-4 mr-1"}),"Delete"]})}),h.jsxs(Cp,{children:[h.jsxs(Np,{children:[h.jsx(Tp,{children:"Are you sure?"}),h.jsxs(Ip,{children:["This action cannot be undone. This will permanently delete the ",r,"'s account and remove their data from the system."]})]}),h.jsxs(Ep,{children:[h.jsx(Op,{children:"Cancel"}),h.jsx(kp,{onClick:()=>d(t),className:"bg-exam-danger hover:bg-exam-danger/90",children:"Delete"})]})]})]})]})]})}function Wa({title:t,value:e,description:n,icon:r,trend:s,trendValue:i,className:o}){return h.jsxs(Me,{className:ne("overflow-hidden",o),children:[h.jsxs(it,{className:"flex flex-row items-center justify-between pb-2",children:[h.jsx(ct,{className:"text-sm font-medium",children:t}),r&&h.jsx("div",{className:"text-muted-foreground",children:r})]}),h.jsxs(ot,{children:[h.jsx("div",{className:"text-2xl font-bold",children:e}),(n||s)&&h.jsxs("div",{className:"mt-2 flex items-center text-xs",children:[s&&h.jsx("span",{className:ne("mr-1 rounded-full px-1 py-0.5 font-medium",s==="up"&&"bg-exam-success/20 text-exam-success",s==="down"&&"bg-exam-danger/20 text-exam-danger",s==="neutral"&&"bg-muted text-muted-foreground"),children:i}),n&&h.jsx("span",{className:"text-muted-foreground",children:n})]})]})]})}function gT(t,[e,n]){return Math.min(n,Math.max(e,t))}var A0e=[" ","Enter","ArrowUp","ArrowDown"],P0e=[" ","Enter"],$v="Select",[fS,hS,R0e]=sS($v),[$p,Qgt]=No($v,[R0e,A1]),pS=A1(),[D0e,Wc]=$p($v),[j0e,M0e]=$p($v),j8=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:m}=t,g=pS(e),[y,v]=S.useState(null),[x,b]=S.useState(null),[w,_]=S.useState(!1),C=Sp(c),[E=!1,N]=ta({prop:r,defaultProp:s,onChange:i}),[I,$]=ta({prop:o,defaultProp:a,onChange:l}),O=S.useRef(null),k=y?m||!!y.closest("form"):!0,[R,M]=S.useState(new Set),B=Array.from(R).map(F=>F.props.value).join(";");return h.jsx(dV,{...g,children:h.jsxs(D0e,{required:p,scope:e,trigger:y,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:_,contentId:ho(),value:I,onValueChange:$,open:E,onOpenChange:N,dir:C,triggerPointerDownPosRef:O,disabled:f,children:[h.jsx(fS.Provider,{scope:e,children:h.jsx(j0e,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(F=>{M(L=>new Set(L).add(F))},[]),onNativeOptionRemove:S.useCallback(F=>{M(L=>{const P=new Set(L);return P.delete(F),P})},[]),children:n})}),k?h.jsxs(aq,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:I,onChange:F=>$(F.target.value),disabled:f,form:m,children:[I===void 0?h.jsx("option",{value:""}):null,Array.from(R)]},B):null]})})};j8.displayName=$v;var M8="SelectTrigger",L8=S.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=pS(n),o=Wc(M8,n),a=o.disabled||r,l=lt(e,o.onTriggerChange),c=hS(n),u=S.useRef("touch"),[d,f,p]=lq(g=>{const y=c().filter(b=>!b.disabled),v=y.find(b=>b.value===o.value),x=cq(y,g,v);x!==void 0&&o.onValueChange(x.value)}),m=g=>{a||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return h.jsx(fV,{asChild:!0,...i,children:h.jsx(Re.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":oq(o.value)?"":void 0,...s,ref:l,onClick:Ne(s.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&m(g)}),onPointerDown:Ne(s.onPointerDown,g=>{u.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:Ne(s.onKeyDown,g=>{const y=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&A0e.includes(g.key)&&(m(),g.preventDefault())})})})});L8.displayName=M8;var F8="SelectValue",B8=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=Wc(F8,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=lt(e,l.onValueNodeChange);return jn(()=>{c(u)},[c,u]),h.jsx(Re.span,{...a,ref:d,style:{pointerEvents:"none"},children:oq(l.value)?h.jsx(h.Fragment,{children:o}):i})});B8.displayName=F8;var L0e="SelectIcon",U8=S.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return h.jsx(Re.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});U8.displayName=L0e;var F0e="SelectPortal",W8=t=>h.jsx(e$,{asChild:!0,...t});W8.displayName=F0e;var ld="SelectContent",z8=S.forwardRef((t,e)=>{const n=Wc(ld,t.__scopeSelect),[r,s]=S.useState();if(jn(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?lp.createPortal(h.jsx(V8,{scope:t.__scopeSelect,children:h.jsx(fS.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),i):null}return h.jsx(H8,{...t,ref:e})});z8.displayName=ld;var Gi=10,[V8,zc]=$p(ld),B0e="SelectContentImpl",H8=S.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:y,...v}=t,x=Wc(ld,n),[b,w]=S.useState(null),[_,C]=S.useState(null),E=lt(e,de=>w(de)),[N,I]=S.useState(null),[$,O]=S.useState(null),k=hS(n),[R,M]=S.useState(!1),B=S.useRef(!1);S.useEffect(()=>{if(b)return NG(b)},[b]),yG();const F=S.useCallback(de=>{const[Ee,...J]=k().map(V=>V.ref.current),[ie]=J.slice(-1),Z=document.activeElement;for(const V of de)if(V===Z||(V==null||V.scrollIntoView({block:"nearest"}),V===Ee&&_&&(_.scrollTop=0),V===ie&&_&&(_.scrollTop=_.scrollHeight),V==null||V.focus(),document.activeElement!==Z))return},[k,_]),L=S.useCallback(()=>F([N,b]),[F,N,b]);S.useEffect(()=>{R&&L()},[R,L]);const{onOpenChange:P,triggerPointerDownPosRef:W}=x;S.useEffect(()=>{if(b){let de={x:0,y:0};const Ee=ie=>{var Z,V;de={x:Math.abs(Math.round(ie.pageX)-(((Z=W.current)==null?void 0:Z.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((V=W.current)==null?void 0:V.y)??0))}},J=ie=>{de.x<=10&&de.y<=10?ie.preventDefault():b.contains(ie.target)||P(!1),document.removeEventListener("pointermove",Ee),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",J,{capture:!0})}}},[b,P,W]),S.useEffect(()=>{const de=()=>P(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[P]);const[q,H]=lq(de=>{const Ee=k().filter(Z=>!Z.disabled),J=Ee.find(Z=>Z.ref.current===document.activeElement),ie=cq(Ee,de,J);ie&&setTimeout(()=>ie.ref.current.focus())}),Y=S.useCallback((de,Ee,J)=>{const ie=!B.current&&!J;(x.value!==void 0&&x.value===Ee||ie)&&(I(de),ie&&(B.current=!0))},[x.value]),se=S.useCallback(()=>b==null?void 0:b.focus(),[b]),Se=S.useCallback((de,Ee,J)=>{const ie=!B.current&&!J;(x.value!==void 0&&x.value===Ee||ie)&&O(de)},[x.value]),De=r==="popper"?yT:G8,Pe=De===yT?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:y}:{};return h.jsx(V8,{scope:n,content:b,viewport:_,onViewportChange:C,itemRefCallback:Y,selectedItem:N,onItemLeave:se,itemTextRefCallback:Se,focusSelectedItem:L,selectedItemText:$,position:r,isPositioned:R,searchRef:q,children:h.jsx(CA,{as:Oi,allowPinchZoom:!0,children:h.jsx(_A,{asChild:!0,trapped:x.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:Ne(s,de=>{var Ee;(Ee=x.trigger)==null||Ee.focus({preventScroll:!0}),de.preventDefault()}),children:h.jsx(lv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx(De,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:de=>de.preventDefault(),...v,...Pe,onPlaced:()=>M(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Ne(v.onKeyDown,de=>{const Ee=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!Ee&&de.key.length===1&&H(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let ie=k().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(de.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const Z=de.target,V=ie.indexOf(Z);ie=ie.slice(V+1)}setTimeout(()=>F(ie)),de.preventDefault()}})})})})})})});H8.displayName=B0e;var U0e="SelectItemAlignedPosition",G8=S.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Wc(ld,n),o=zc(ld,n),[a,l]=S.useState(null),[c,u]=S.useState(null),d=lt(e,E=>u(E)),f=hS(n),p=S.useRef(!1),m=S.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:v,focusSelectedItem:x}=o,b=S.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&g&&y&&v){const E=i.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),$=v.getBoundingClientRect();if(i.dir!=="rtl"){const Z=$.left-N.left,V=I.left-Z,ge=E.left-V,ve=E.width+ge,Fe=Math.max(ve,N.width),je=window.innerWidth-Gi,mt=gT(V,[Gi,Math.max(Gi,je-Fe)]);a.style.minWidth=ve+"px",a.style.left=mt+"px"}else{const Z=N.right-$.right,V=window.innerWidth-I.right-Z,ge=window.innerWidth-E.right-V,ve=E.width+ge,Fe=Math.max(ve,N.width),je=window.innerWidth-Gi,mt=gT(V,[Gi,Math.max(Gi,je-Fe)]);a.style.minWidth=ve+"px",a.style.right=mt+"px"}const O=f(),k=window.innerHeight-Gi*2,R=g.scrollHeight,M=window.getComputedStyle(c),B=parseInt(M.borderTopWidth,10),F=parseInt(M.paddingTop,10),L=parseInt(M.borderBottomWidth,10),P=parseInt(M.paddingBottom,10),W=B+F+R+P+L,q=Math.min(y.offsetHeight*5,W),H=window.getComputedStyle(g),Y=parseInt(H.paddingTop,10),se=parseInt(H.paddingBottom,10),Se=E.top+E.height/2-Gi,De=k-Se,Pe=y.offsetHeight/2,de=y.offsetTop+Pe,Ee=B+F+de,J=W-Ee;if(Ee<=Se){const Z=O.length>0&&y===O[O.length-1].ref.current;a.style.bottom="0px";const V=c.clientHeight-g.offsetTop-g.offsetHeight,ge=Math.max(De,Pe+(Z?se:0)+V+L),ve=Ee+ge;a.style.height=ve+"px"}else{const Z=O.length>0&&y===O[0].ref.current;a.style.top="0px";const ge=Math.max(Se,B+g.offsetTop+(Z?Y:0)+Pe)+J;a.style.height=ge+"px",g.scrollTop=Ee-Se+g.offsetTop}a.style.margin=`${Gi}px 0`,a.style.minHeight=q+"px",a.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,g,y,v,i.dir,r]);jn(()=>b(),[b]);const[w,_]=S.useState();jn(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const C=S.useCallback(E=>{E&&m.current===!0&&(b(),x==null||x(),m.current=!1)},[b,x]);return h.jsx(z0e,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:h.jsx(Re.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});G8.displayName=U0e;var W0e="SelectPopperPosition",yT=S.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Gi,...i}=t,o=pS(n);return h.jsx(hV,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});yT.displayName=W0e;var[z0e,jA]=$p(ld,{}),vT="SelectViewport",q8=S.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=zc(vT,n),o=jA(vT,n),a=lt(e,i.onViewportChange),l=S.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(fS.Slot,{scope:n,children:h.jsx(Re.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ne(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const m=window.innerHeight-Gi*2,g=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),v=Math.max(g,y);if(v<m){const x=v+p,b=Math.min(m,x),w=x-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});q8.displayName=vT;var K8="SelectGroup",[V0e,H0e]=$p(K8),G0e=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ho();return h.jsx(V0e,{scope:n,id:s,children:h.jsx(Re.div,{role:"group","aria-labelledby":s,...r,ref:e})})});G0e.displayName=K8;var X8="SelectLabel",Y8=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=H0e(X8,n);return h.jsx(Re.div,{id:s.id,...r,ref:e})});Y8.displayName=X8;var U0="SelectItem",[q0e,Q8]=$p(U0),J8=S.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Wc(U0,n),l=zc(U0,n),c=a.value===r,[u,d]=S.useState(i??""),[f,p]=S.useState(!1),m=lt(e,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,r,s)}),g=ho(),y=S.useRef("touch"),v=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(q0e,{scope:n,value:r,disabled:s,textId:g,isSelected:c,onItemTextChange:S.useCallback(x=>{d(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx(fS.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:h.jsx(Re.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:m,onFocus:Ne(o.onFocus,()=>p(!0)),onBlur:Ne(o.onBlur,()=>p(!1)),onClick:Ne(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:Ne(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:Ne(o.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:Ne(o.onPointerMove,x=>{var b;y.current=x.pointerType,s?(b=l.onItemLeave)==null||b.call(l):y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ne(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:Ne(o.onKeyDown,x=>{var w;((w=l.searchRef)==null?void 0:w.current)!==""&&x.key===" "||(P0e.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});J8.displayName=U0;var Um="SelectItemText",Z8=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Wc(Um,n),a=zc(Um,n),l=Q8(Um,n),c=M0e(Um,n),[u,d]=S.useState(null),f=lt(e,v=>d(v),l.onItemTextChange,v=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,m=S.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=c;return jn(()=>(g(m),()=>y(m)),[g,y,m]),h.jsxs(h.Fragment,{children:[h.jsx(Re.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?lp.createPortal(i.children,o.valueNode):null]})});Z8.displayName=Um;var eq="SelectItemIndicator",tq=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Q8(eq,n).isSelected?h.jsx(Re.span,{"aria-hidden":!0,...r,ref:e}):null});tq.displayName=eq;var xT="SelectScrollUpButton",nq=S.forwardRef((t,e)=>{const n=zc(xT,t.__scopeSelect),r=jA(xT,t.__scopeSelect),[s,i]=S.useState(!1),o=lt(e,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(sq,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});nq.displayName=xT;var bT="SelectScrollDownButton",rq=S.forwardRef((t,e)=>{const n=zc(bT,t.__scopeSelect),r=jA(bT,t.__scopeSelect),[s,i]=S.useState(!1),o=lt(e,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(sq,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});rq.displayName=bT;var sq=S.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=zc("SelectScrollButton",n),o=S.useRef(null),a=hS(n),l=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),jn(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Re.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ne(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ne(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ne(s.onPointerLeave,()=>{l()})})}),K0e="SelectSeparator",iq=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx(Re.div,{"aria-hidden":!0,...r,ref:e})});iq.displayName=K0e;var wT="SelectArrow",X0e=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=pS(n),i=Wc(wT,n),o=zc(wT,n);return i.open&&o.position==="popper"?h.jsx(pV,{...s,...r,ref:e}):null});X0e.displayName=wT;function oq(t){return t===""||t===void 0}var aq=S.forwardRef((t,e)=>{const{value:n,...r}=t,s=S.useRef(null),i=lt(e,s),o=iS(n);return S.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),h.jsx(t$,{asChild:!0,children:h.jsx("select",{...r,ref:i,defaultValue:n})})});aq.displayName="BubbleSelect";function lq(t){const e=cn(t),n=S.useRef(""),r=S.useRef(0),s=S.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=S.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function cq(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Y0e(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Y0e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Q0e=j8,uq=L8,J0e=B8,Z0e=U8,ewe=W8,dq=z8,twe=q8,fq=Y8,hq=J8,nwe=Z8,rwe=tq,pq=nq,mq=rq,gq=iq;const Hn=Q0e,Gn=J0e,Ln=S.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(uq,{ref:r,className:ne("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,h.jsx(Z0e,{asChild:!0,children:h.jsx(u$,{className:"h-4 w-4 opacity-50"})})]}));Ln.displayName=uq.displayName;const yq=S.forwardRef(({className:t,...e},n)=>h.jsx(pq,{ref:n,className:ne("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(yue,{className:"h-4 w-4"})}));yq.displayName=pq.displayName;const vq=S.forwardRef(({className:t,...e},n)=>h.jsx(mq,{ref:n,className:ne("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(u$,{className:"h-4 w-4"})}));vq.displayName=mq.displayName;const Fn=S.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>h.jsx(ewe,{children:h.jsxs(dq,{ref:s,className:ne("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(yq,{}),h.jsx(twe,{className:ne("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(vq,{})]})}));Fn.displayName=dq.displayName;const swe=S.forwardRef(({className:t,...e},n)=>h.jsx(fq,{ref:n,className:ne("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));swe.displayName=fq.displayName;const Ut=S.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(hq,{ref:r,className:ne("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(rwe,{children:h.jsx(c$,{className:"h-4 w-4"})})}),h.jsx(nwe,{children:e})]}));Ut.displayName=hq.displayName;const iwe=S.forwardRef(({className:t,...e},n)=>h.jsx(gq,{ref:n,className:ne("-mx-1 my-1 h-px bg-muted",t),...e}));iwe.displayName=gq.displayName;var MA="Checkbox",[owe,Jgt]=No(MA),[awe,lwe]=owe(MA),xq=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=S.useState(null),m=lt(e,w=>p(w)),g=S.useRef(!1),y=f?u||!!f.closest("form"):!0,[v=!1,x]=ta({prop:s,defaultProp:i,onChange:c}),b=S.useRef(v);return S.useEffect(()=>{const w=f==null?void 0:f.form;if(w){const _=()=>x(b.current);return w.addEventListener("reset",_),()=>w.removeEventListener("reset",_)}},[f,x]),h.jsxs(awe,{scope:n,state:v,disabled:a,children:[h.jsx(Re.button,{type:"button",role:"checkbox","aria-checked":gc(v)?"mixed":v,"aria-required":o,"data-state":Sq(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:m,onKeyDown:Ne(t.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Ne(t.onClick,w=>{x(_=>gc(_)?!0:!_),y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),y&&h.jsx(cwe,{control:f,bubbles:!g.current,name:r,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"},defaultChecked:gc(i)?!1:i})]})});xq.displayName=MA;var bq="CheckboxIndicator",wq=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=lwe(bq,n);return h.jsx(qr,{present:r||gc(i.state)||i.state===!0,children:h.jsx(Re.span,{"data-state":Sq(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});wq.displayName=bq;var cwe=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...i}=t,o=S.useRef(null),a=iS(n),l=QO(e);S.useEffect(()=>{const u=o.current,d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==n&&p){const m=new Event("click",{bubbles:r});u.indeterminate=gc(n),p.call(u,gc(n)?!1:n),u.dispatchEvent(m)}},[a,n,r]);const c=S.useRef(gc(n)?!1:n);return h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??c.current,...i,tabIndex:-1,ref:o,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function gc(t){return t==="indeterminate"}function Sq(t){return gc(t)?"indeterminate":t?"checked":"unchecked"}var _q=xq,uwe=wq;const W0=S.forwardRef(({className:t,...e},n)=>h.jsx(_q,{ref:n,className:ne("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:h.jsx(uwe,{className:ne("flex items-center justify-center text-current"),children:h.jsx(c$,{className:"h-4 w-4"})})}));W0.displayName=_q.displayName;var dwe=Array.isArray,$s=dwe,fwe=typeof io=="object"&&io&&io.Object===Object&&io,Cq=fwe,hwe=Cq,pwe=typeof self=="object"&&self&&self.Object===Object&&self,mwe=hwe||pwe||Function("return this")(),ua=mwe,gwe=ua,ywe=gwe.Symbol,Av=ywe,KM=Av,Nq=Object.prototype,vwe=Nq.hasOwnProperty,xwe=Nq.toString,xm=KM?KM.toStringTag:void 0;function bwe(t){var e=vwe.call(t,xm),n=t[xm];try{t[xm]=void 0;var r=!0}catch{}var s=xwe.call(t);return r&&(e?t[xm]=n:delete t[xm]),s}var wwe=bwe,Swe=Object.prototype,_we=Swe.toString;function Cwe(t){return _we.call(t)}var Nwe=Cwe,XM=Av,Ewe=wwe,Twe=Nwe,Iwe="[object Null]",kwe="[object Undefined]",YM=XM?XM.toStringTag:void 0;function Owe(t){return t==null?t===void 0?kwe:Iwe:YM&&YM in Object(t)?Ewe(t):Twe(t)}var vl=Owe;function $we(t){return t!=null&&typeof t=="object"}var xl=$we,Awe=vl,Pwe=xl,Rwe="[object Symbol]";function Dwe(t){return typeof t=="symbol"||Pwe(t)&&Awe(t)==Rwe}var Ap=Dwe,jwe=$s,Mwe=Ap,Lwe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fwe=/^\w*$/;function Bwe(t,e){if(jwe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Mwe(t)?!0:Fwe.test(t)||!Lwe.test(t)||e!=null&&t in Object(e)}var LA=Bwe;function Uwe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Vc=Uwe;const Pp=Tt(Vc);var Wwe=vl,zwe=Vc,Vwe="[object AsyncFunction]",Hwe="[object Function]",Gwe="[object GeneratorFunction]",qwe="[object Proxy]";function Kwe(t){if(!zwe(t))return!1;var e=Wwe(t);return e==Hwe||e==Gwe||e==Vwe||e==qwe}var FA=Kwe;const Ze=Tt(FA);var Xwe=ua,Ywe=Xwe["__core-js_shared__"],Qwe=Ywe,LC=Qwe,QM=function(){var t=/[^.]+$/.exec(LC&&LC.keys&&LC.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Jwe(t){return!!QM&&QM in t}var Zwe=Jwe,e1e=Function.prototype,t1e=e1e.toString;function n1e(t){if(t!=null){try{return t1e.call(t)}catch{}try{return t+""}catch{}}return""}var Eq=n1e,r1e=FA,s1e=Zwe,i1e=Vc,o1e=Eq,a1e=/[\\^$.*+?()[\]{}|]/g,l1e=/^\[object .+?Constructor\]$/,c1e=Function.prototype,u1e=Object.prototype,d1e=c1e.toString,f1e=u1e.hasOwnProperty,h1e=RegExp("^"+d1e.call(f1e).replace(a1e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p1e(t){if(!i1e(t)||s1e(t))return!1;var e=r1e(t)?h1e:l1e;return e.test(o1e(t))}var m1e=p1e;function g1e(t,e){return t==null?void 0:t[e]}var y1e=g1e,v1e=m1e,x1e=y1e;function b1e(t,e){var n=x1e(t,e);return v1e(n)?n:void 0}var Dd=b1e,w1e=Dd,S1e=w1e(Object,"create"),mS=S1e,JM=mS;function _1e(){this.__data__=JM?JM(null):{},this.size=0}var C1e=_1e;function N1e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var E1e=N1e,T1e=mS,I1e="__lodash_hash_undefined__",k1e=Object.prototype,O1e=k1e.hasOwnProperty;function $1e(t){var e=this.__data__;if(T1e){var n=e[t];return n===I1e?void 0:n}return O1e.call(e,t)?e[t]:void 0}var A1e=$1e,P1e=mS,R1e=Object.prototype,D1e=R1e.hasOwnProperty;function j1e(t){var e=this.__data__;return P1e?e[t]!==void 0:D1e.call(e,t)}var M1e=j1e,L1e=mS,F1e="__lodash_hash_undefined__";function B1e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=L1e&&e===void 0?F1e:e,this}var U1e=B1e,W1e=C1e,z1e=E1e,V1e=A1e,H1e=M1e,G1e=U1e;function Rp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Rp.prototype.clear=W1e;Rp.prototype.delete=z1e;Rp.prototype.get=V1e;Rp.prototype.has=H1e;Rp.prototype.set=G1e;var q1e=Rp;function K1e(){this.__data__=[],this.size=0}var X1e=K1e;function Y1e(t,e){return t===e||t!==t&&e!==e}var BA=Y1e,Q1e=BA;function J1e(t,e){for(var n=t.length;n--;)if(Q1e(t[n][0],e))return n;return-1}var gS=J1e,Z1e=gS,eSe=Array.prototype,tSe=eSe.splice;function nSe(t){var e=this.__data__,n=Z1e(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():tSe.call(e,n,1),--this.size,!0}var rSe=nSe,sSe=gS;function iSe(t){var e=this.__data__,n=sSe(e,t);return n<0?void 0:e[n][1]}var oSe=iSe,aSe=gS;function lSe(t){return aSe(this.__data__,t)>-1}var cSe=lSe,uSe=gS;function dSe(t,e){var n=this.__data__,r=uSe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var fSe=dSe,hSe=X1e,pSe=rSe,mSe=oSe,gSe=cSe,ySe=fSe;function Dp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Dp.prototype.clear=hSe;Dp.prototype.delete=pSe;Dp.prototype.get=mSe;Dp.prototype.has=gSe;Dp.prototype.set=ySe;var yS=Dp,vSe=Dd,xSe=ua,bSe=vSe(xSe,"Map"),UA=bSe,ZM=q1e,wSe=yS,SSe=UA;function _Se(){this.size=0,this.__data__={hash:new ZM,map:new(SSe||wSe),string:new ZM}}var CSe=_Se;function NSe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ESe=NSe,TSe=ESe;function ISe(t,e){var n=t.__data__;return TSe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var vS=ISe,kSe=vS;function OSe(t){var e=kSe(this,t).delete(t);return this.size-=e?1:0,e}var $Se=OSe,ASe=vS;function PSe(t){return ASe(this,t).get(t)}var RSe=PSe,DSe=vS;function jSe(t){return DSe(this,t).has(t)}var MSe=jSe,LSe=vS;function FSe(t,e){var n=LSe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var BSe=FSe,USe=CSe,WSe=$Se,zSe=RSe,VSe=MSe,HSe=BSe;function jp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}jp.prototype.clear=USe;jp.prototype.delete=WSe;jp.prototype.get=zSe;jp.prototype.has=VSe;jp.prototype.set=HSe;var WA=jp,Tq=WA,GSe="Expected a function";function zA(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(GSe);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(zA.Cache||Tq),n}zA.Cache=Tq;var Iq=zA;const qSe=Tt(Iq);var KSe=Iq,XSe=500;function YSe(t){var e=KSe(t,function(r){return n.size===XSe&&n.clear(),r}),n=e.cache;return e}var QSe=YSe,JSe=QSe,ZSe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e_e=/\\(\\)?/g,t_e=JSe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(ZSe,function(n,r,s,i){e.push(s?i.replace(e_e,"$1"):r||n)}),e}),n_e=t_e;function r_e(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var VA=r_e,eL=Av,s_e=VA,i_e=$s,o_e=Ap,a_e=1/0,tL=eL?eL.prototype:void 0,nL=tL?tL.toString:void 0;function kq(t){if(typeof t=="string")return t;if(i_e(t))return s_e(t,kq)+"";if(o_e(t))return nL?nL.call(t):"";var e=t+"";return e=="0"&&1/t==-a_e?"-0":e}var l_e=kq,c_e=l_e;function u_e(t){return t==null?"":c_e(t)}var Oq=u_e,d_e=$s,f_e=LA,h_e=n_e,p_e=Oq;function m_e(t,e){return d_e(t)?t:f_e(t,e)?[t]:h_e(p_e(t))}var $q=m_e,g_e=Ap,y_e=1/0;function v_e(t){if(typeof t=="string"||g_e(t))return t;var e=t+"";return e=="0"&&1/t==-y_e?"-0":e}var xS=v_e,x_e=$q,b_e=xS;function w_e(t,e){e=x_e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[b_e(e[n++])];return n&&n==r?t:void 0}var HA=w_e,S_e=HA;function __e(t,e,n){var r=t==null?void 0:S_e(t,e);return r===void 0?n:r}var Aq=__e;const Js=Tt(Aq);function C_e(t){return t==null}var N_e=C_e;const yt=Tt(N_e);var E_e=vl,T_e=$s,I_e=xl,k_e="[object String]";function O_e(t){return typeof t=="string"||!T_e(t)&&I_e(t)&&E_e(t)==k_e}var $_e=O_e;const Pv=Tt($_e);var Pq={exports:{}},Lt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GA=Symbol.for("react.element"),qA=Symbol.for("react.portal"),bS=Symbol.for("react.fragment"),wS=Symbol.for("react.strict_mode"),SS=Symbol.for("react.profiler"),_S=Symbol.for("react.provider"),CS=Symbol.for("react.context"),A_e=Symbol.for("react.server_context"),NS=Symbol.for("react.forward_ref"),ES=Symbol.for("react.suspense"),TS=Symbol.for("react.suspense_list"),IS=Symbol.for("react.memo"),kS=Symbol.for("react.lazy"),P_e=Symbol.for("react.offscreen"),Rq;Rq=Symbol.for("react.module.reference");function Ri(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case GA:switch(t=t.type,t){case bS:case SS:case wS:case ES:case TS:return t;default:switch(t=t&&t.$$typeof,t){case A_e:case CS:case NS:case kS:case IS:case _S:return t;default:return e}}case qA:return e}}}Lt.ContextConsumer=CS;Lt.ContextProvider=_S;Lt.Element=GA;Lt.ForwardRef=NS;Lt.Fragment=bS;Lt.Lazy=kS;Lt.Memo=IS;Lt.Portal=qA;Lt.Profiler=SS;Lt.StrictMode=wS;Lt.Suspense=ES;Lt.SuspenseList=TS;Lt.isAsyncMode=function(){return!1};Lt.isConcurrentMode=function(){return!1};Lt.isContextConsumer=function(t){return Ri(t)===CS};Lt.isContextProvider=function(t){return Ri(t)===_S};Lt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===GA};Lt.isForwardRef=function(t){return Ri(t)===NS};Lt.isFragment=function(t){return Ri(t)===bS};Lt.isLazy=function(t){return Ri(t)===kS};Lt.isMemo=function(t){return Ri(t)===IS};Lt.isPortal=function(t){return Ri(t)===qA};Lt.isProfiler=function(t){return Ri(t)===SS};Lt.isStrictMode=function(t){return Ri(t)===wS};Lt.isSuspense=function(t){return Ri(t)===ES};Lt.isSuspenseList=function(t){return Ri(t)===TS};Lt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===bS||t===SS||t===wS||t===ES||t===TS||t===P_e||typeof t=="object"&&t!==null&&(t.$$typeof===kS||t.$$typeof===IS||t.$$typeof===_S||t.$$typeof===CS||t.$$typeof===NS||t.$$typeof===Rq||t.getModuleId!==void 0)};Lt.typeOf=Ri;Pq.exports=Lt;var Dq=Pq.exports,R_e=vl,D_e=xl,j_e="[object Number]";function M_e(t){return typeof t=="number"||D_e(t)&&R_e(t)==j_e}var jq=M_e;const L_e=Tt(jq);var F_e=jq;function B_e(t){return F_e(t)&&t!=+t}var U_e=B_e;const Rv=Tt(U_e);var ss=function(e){return e===0?0:e>0?1:-1},Nu=function(e){return Pv(e)&&e.indexOf("%")===e.length-1},pe=function(e){return L_e(e)&&!Rv(e)},Jn=function(e){return pe(e)||Pv(e)},W_e=0,Dv=function(e){var n=++W_e;return"".concat(e||"").concat(n)},is=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!pe(e)&&!Pv(e))return r;var i;if(Nu(e)){var o=e.indexOf("%");i=n*parseFloat(e.slice(0,o))/100}else i=+e;return Rv(i)&&(i=r),s&&i>n&&(i=n),i},zl=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},z_e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},Rl=function(e,n){return pe(e)&&pe(n)?function(r){return e+r*(n-e)}:function(){return n}};function ST(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Js(r,e))===n})}function Kf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function _T(t){"@babel/helpers - typeof";return _T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_T(t)}var V_e=["viewBox","children"],H_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],rL=["points","pathLength"],FC={svg:V_e,polygon:rL,polyline:rL},KA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],z0=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),!Pp(r))return null;var s={};return Object.keys(r).forEach(function(i){KA.includes(i)&&(s[i]=n||function(o){return r[i](r,o)})}),s},G_e=function(e,n,r){return function(s){return e(n,r,s),null}},cd=function(e,n,r){if(!Pp(e)||_T(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(i){var o=e[i];KA.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=G_e(o,n,r))}),s},q_e=["children"],K_e=["children"];function sL(t,e){if(t==null)return{};var n=X_e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function X_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var iL={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},za=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},oL=null,BC=null,XA=function t(e){if(e===oL&&Array.isArray(BC))return BC;var n=[];return S.Children.forEach(e,function(r){yt(r)||(Dq.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),BC=n,oL=e,n};function Ti(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return za(s)}):r=[za(e)],XA(t).forEach(function(s){var i=Js(s,"type.displayName")||Js(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}function Fs(t,e){var n=Ti(t,e);return n&&n[0]}var aL=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!pe(r)||r<=0||!pe(s)||s<=0)},Y_e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Q_e=function(e){return e&&e.type&&Pv(e.type)&&Y_e.indexOf(e.type)>=0},J_e=function(e,n,r,s){var i,o=(i=FC==null?void 0:FC[s])!==null&&i!==void 0?i:[];return!Ze(e)&&(s&&o.includes(n)||H_e.includes(n))||r&&KA.includes(n)},Xe=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(S.isValidElement(e)&&(s=e.props),!Pp(s))return null;var i={};return Object.keys(s).forEach(function(o){var a;J_e((a=s)===null||a===void 0?void 0:a[o],o,n,r)&&(i[o]=s[o])}),i},CT=function t(e,n){if(e===n)return!0;var r=S.Children.count(e);if(r!==S.Children.count(n))return!1;if(r===0)return!0;if(r===1)return lL(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var i=e[s],o=n[s];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!lL(i,o))return!1}return!0},lL=function(e,n){if(yt(e)&&yt(n))return!0;if(!yt(e)&&!yt(n)){var r=e.props||{},s=r.children,i=sL(r,q_e),o=n.props||{},a=o.children,l=sL(o,K_e);return s&&a?Kf(i,l)&&CT(s,a):!s&&!a?Kf(i,l):!1}return!1},cL=function(e,n){var r=[],s={};return XA(e).forEach(function(i,o){if(Q_e(i))r.push(i);else if(i){var a=za(i.type),l=n[a]||{},c=l.handler,u=l.once;if(c&&(!u||!s[a])){var d=c(i,a,o);r.push(d),s[a]=!0}}}),r},Z_e=function(e){var n=e&&e.type;return n&&iL[n]?iL[n]:null},eCe=function(e,n){return XA(n).indexOf(e)},tCe=["children","width","height","viewBox","className","style","title","desc"];function NT(){return NT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NT.apply(this,arguments)}function nCe(t,e){if(t==null)return{};var n=rCe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ET(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,i=t.className,o=t.style,a=t.title,l=t.desc,c=nCe(t,tCe),u=s||{width:n,height:r,x:0,y:0},d=at("recharts-surface",i);return j.createElement("svg",NT({},Xe(c,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),j.createElement("title",null,a),j.createElement("desc",null,l),e)}var sCe=["children","className"];function TT(){return TT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TT.apply(this,arguments)}function iCe(t,e){if(t==null)return{};var n=oCe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Dt=j.forwardRef(function(t,e){var n=t.children,r=t.className,s=iCe(t,sCe),i=at("recharts-layer",r);return j.createElement("g",TT({className:i},Xe(s,!0),{ref:e}),n)}),go=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]};function aCe(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}var lCe=aCe,cCe=lCe;function uCe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:cCe(t,e,n)}var dCe=uCe,fCe="\\ud800-\\udfff",hCe="\\u0300-\\u036f",pCe="\\ufe20-\\ufe2f",mCe="\\u20d0-\\u20ff",gCe=hCe+pCe+mCe,yCe="\\ufe0e\\ufe0f",vCe="\\u200d",xCe=RegExp("["+vCe+fCe+gCe+yCe+"]");function bCe(t){return xCe.test(t)}var Mq=bCe;function wCe(t){return t.split("")}var SCe=wCe,Lq="\\ud800-\\udfff",_Ce="\\u0300-\\u036f",CCe="\\ufe20-\\ufe2f",NCe="\\u20d0-\\u20ff",ECe=_Ce+CCe+NCe,TCe="\\ufe0e\\ufe0f",ICe="["+Lq+"]",IT="["+ECe+"]",kT="\\ud83c[\\udffb-\\udfff]",kCe="(?:"+IT+"|"+kT+")",Fq="[^"+Lq+"]",Bq="(?:\\ud83c[\\udde6-\\uddff]){2}",Uq="[\\ud800-\\udbff][\\udc00-\\udfff]",OCe="\\u200d",Wq=kCe+"?",zq="["+TCe+"]?",$Ce="(?:"+OCe+"(?:"+[Fq,Bq,Uq].join("|")+")"+zq+Wq+")*",ACe=zq+Wq+$Ce,PCe="(?:"+[Fq+IT+"?",IT,Bq,Uq,ICe].join("|")+")",RCe=RegExp(kT+"(?="+kT+")|"+PCe+ACe,"g");function DCe(t){return t.match(RCe)||[]}var jCe=DCe,MCe=SCe,LCe=Mq,FCe=jCe;function BCe(t){return LCe(t)?FCe(t):MCe(t)}var UCe=BCe,WCe=dCe,zCe=Mq,VCe=UCe,HCe=Oq;function GCe(t){return function(e){e=HCe(e);var n=zCe(e)?VCe(e):void 0,r=n?n[0]:e.charAt(0),s=n?WCe(n,1).join(""):e.slice(1);return r[t]()+s}}var qCe=GCe,KCe=qCe,XCe=KCe("toUpperCase"),YCe=XCe;const OS=Tt(YCe);function qt(t){return function(){return t}}const Vq=Math.cos,V0=Math.sin,To=Math.sqrt,H0=Math.PI,$S=2*H0,OT=Math.PI,$T=2*OT,uu=1e-6,QCe=$T-uu;function Hq(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function JCe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Hq;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class ZCe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Hq:JCe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,o){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=r-e,c=s-n,u=o-e,d=a-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>uu)if(!(Math.abs(d*l-c*u)>uu)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,m=s-a,g=l*l+c*c,y=p*p+m*m,v=Math.sqrt(g),x=Math.sqrt(f),b=i*Math.tan((OT-Math.acos((g+f-y)/(2*v*x)))/2),w=b/x,_=b/v;Math.abs(w-1)>uu&&this._append`L${e+w*u},${n+w*d}`,this._append`A${i},${i},0,0,${+(d*p>u*m)},${this._x1=e+_*l},${this._y1=n+_*c}`}}arc(e,n,r,s,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(s),l=r*Math.sin(s),c=e+a,u=n+l,d=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>uu||Math.abs(this._y1-u)>uu)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%$T+$T),f>QCe?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:f>uu&&this._append`A${r},${r},0,${+(f>=OT)},${d},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function YA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ZCe(e)}function QA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Gq(t){this._context=t}Gq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function AS(t){return new Gq(t)}function qq(t){return t[0]}function Kq(t){return t[1]}function Xq(t,e){var n=qt(!0),r=null,s=AS,i=null,o=YA(a);t=typeof t=="function"?t:t===void 0?qq:qt(t),e=typeof e=="function"?e:e===void 0?Kq:qt(e);function a(l){var c,u=(l=QA(l)).length,d,f=!1,p;for(r==null&&(i=s(p=o())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(d,c,l),+e(d,c,l));if(p)return i=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:qt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:qt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:qt(!!l),a):n},a.curve=function(l){return arguments.length?(s=l,r!=null&&(i=s(r)),a):s},a.context=function(l){return arguments.length?(l==null?r=i=null:i=s(r=l),a):r},a}function Dx(t,e,n){var r=null,s=qt(!0),i=null,o=AS,a=null,l=YA(c);t=typeof t=="function"?t:t===void 0?qq:qt(+t),e=typeof e=="function"?e:qt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Kq:qt(+n);function c(d){var f,p,m,g=(d=QA(d)).length,y,v=!1,x,b=new Array(g),w=new Array(g);for(i==null&&(a=o(x=l())),f=0;f<=g;++f){if(!(f<g&&s(y=d[f],f,d))===v)if(v=!v)p=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=f-1;m>=p;--m)a.point(b[m],w[m]);a.lineEnd(),a.areaEnd()}v&&(b[f]=+t(y,f,d),w[f]=+e(y,f,d),a.point(r?+r(y,f,d):b[f],n?+n(y,f,d):w[f]))}if(x)return a=null,x+""||null}function u(){return Xq().defined(s).curve(o).context(i)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:qt(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:qt(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:qt(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:qt(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:qt(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:qt(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(s=typeof d=="function"?d:qt(!!d),c):s},c.curve=function(d){return arguments.length?(o=d,i!=null&&(a=o(i)),c):o},c.context=function(d){return arguments.length?(d==null?i=a=null:a=o(i=d),c):i},c}class Yq{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function eNe(t){return new Yq(t,!0)}function tNe(t){return new Yq(t,!1)}const JA={draw(t,e){const n=To(e/H0);t.moveTo(n,0),t.arc(0,0,n,0,$S)}},nNe={draw(t,e){const n=To(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Qq=To(1/3),rNe=Qq*2,sNe={draw(t,e){const n=To(e/rNe),r=n*Qq;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},iNe={draw(t,e){const n=To(e),r=-n/2;t.rect(r,r,n,n)}},oNe=.8908130915292852,Jq=V0(H0/10)/V0(7*H0/10),aNe=V0($S/10)*Jq,lNe=-Vq($S/10)*Jq,cNe={draw(t,e){const n=To(e*oNe),r=aNe*n,s=lNe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const o=$S*i/5,a=Vq(o),l=V0(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*s,l*r+a*s)}t.closePath()}},UC=To(3),uNe={draw(t,e){const n=-To(e/(UC*3));t.moveTo(0,n*2),t.lineTo(-UC*n,-n),t.lineTo(UC*n,-n),t.closePath()}},di=-.5,fi=To(3)/2,AT=1/To(12),dNe=(AT/2+1)*3,fNe={draw(t,e){const n=To(e/dNe),r=n/2,s=n*AT,i=r,o=n*AT+n,a=-i,l=o;t.moveTo(r,s),t.lineTo(i,o),t.lineTo(a,l),t.lineTo(di*r-fi*s,fi*r+di*s),t.lineTo(di*i-fi*o,fi*i+di*o),t.lineTo(di*a-fi*l,fi*a+di*l),t.lineTo(di*r+fi*s,di*s-fi*r),t.lineTo(di*i+fi*o,di*o-fi*i),t.lineTo(di*a+fi*l,di*l-fi*a),t.closePath()}};function hNe(t,e){let n=null,r=YA(s);t=typeof t=="function"?t:qt(t||JA),e=typeof e=="function"?e:qt(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:qt(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:qt(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function G0(){}function q0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Zq(t){this._context=t}Zq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:q0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:q0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pNe(t){return new Zq(t)}function eK(t){this._context=t}eK.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:q0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mNe(t){return new eK(t)}function tK(t){this._context=t}tK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:q0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gNe(t){return new tK(t)}function nK(t){this._context=t}nK.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function yNe(t){return new nK(t)}function uL(t){return t<0?-1:1}function dL(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),a=(i*s+o*r)/(r+s);return(uL(i)+uL(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function fL(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function WC(t,e,n){var r=t._x0,s=t._y0,i=t._x1,o=t._y1,a=(i-r)/3;t._context.bezierCurveTo(r+a,s+a*e,i-a,o-a*n,i,o)}function K0(t){this._context=t}K0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:WC(this,this._t0,fL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,WC(this,fL(this,n=dL(this,t,e)),n);break;default:WC(this,this._t0,n=dL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function rK(t){this._context=new sK(t)}(rK.prototype=Object.create(K0.prototype)).point=function(t,e){K0.prototype.point.call(this,e,t)};function sK(t){this._context=t}sK.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function vNe(t){return new K0(t)}function xNe(t){return new rK(t)}function iK(t){this._context=t}iK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=hL(t),s=hL(e),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function hL(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function bNe(t){return new iK(t)}function PS(t,e){this._context=t,this._t=e}PS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function wNe(t){return new PS(t,.5)}function SNe(t){return new PS(t,0)}function _Ne(t){return new PS(t,1)}function Ch(t,e){if((o=t.length)>1)for(var n=1,r,s,i=t[e[0]],o,a=i.length;n<o;++n)for(s=i,i=t[e[n]],r=0;r<a;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function PT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function CNe(t,e){return t[e]}function NNe(t){const e=[];return e.key=t,e}function ENe(){var t=qt([]),e=PT,n=Ch,r=CNe;function s(i){var o=Array.from(t.apply(this,arguments),NNe),a,l=o.length,c=-1,u;for(const d of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(d,o[a].key,c,i)]).data=d;for(a=0,u=QA(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:qt(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:qt(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?PT:typeof i=="function"?i:qt(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??Ch,s):n},s}function TNe(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,o;s<i;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}Ch(t,e)}}function INe(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var o=0,a=0;o<s;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Ch(t,e)}}function kNe(t,e){if(!(!((o=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,o;r<i;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],d=u[r][1]||0,f=u[r-1][1]||0,p=(d-f)/2,m=0;m<a;++m){var g=t[e[m]],y=g[r][1]||0,v=g[r-1][1]||0;p+=y-v}l+=d,c+=p*d}s[r-1][1]+=s[r-1][0]=n,l&&(n-=c/l)}s[r-1][1]+=s[r-1][0]=n,Ch(t,e)}}function ay(t){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ay(t)}var ONe=["type","size","sizeType"];function RT(){return RT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RT.apply(this,arguments)}function pL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pL(Object(n),!0).forEach(function(r){$Ne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ne(t,e,n){return e=ANe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ANe(t){var e=PNe(t,"string");return ay(e)=="symbol"?e:e+""}function PNe(t,e){if(ay(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RNe(t,e){if(t==null)return{};var n=DNe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var oK={symbolCircle:JA,symbolCross:nNe,symbolDiamond:sNe,symbolSquare:iNe,symbolStar:cNe,symbolTriangle:uNe,symbolWye:fNe},jNe=Math.PI/180,MNe=function(e){var n="symbol".concat(OS(e));return oK[n]||JA},LNe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*jNe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},FNe=function(e,n){oK["symbol".concat(OS(e))]=n},ZA=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,i=s===void 0?64:s,o=e.sizeType,a=o===void 0?"area":o,l=RNe(e,ONe),c=mL(mL({},l),{},{type:r,size:i,sizeType:a}),u=function(){var y=MNe(r),v=hNe().type(y).size(LNe(i,a,r));return v()},d=c.className,f=c.cx,p=c.cy,m=Xe(c,!0);return f===+f&&p===+p&&i===+i?j.createElement("path",RT({},m,{className:at("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(p,")"),d:u()})):null};ZA.registerSymbol=FNe;function Nh(t){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(t)}function DT(){return DT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DT.apply(this,arguments)}function gL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function BNe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gL(Object(n),!0).forEach(function(r){ly(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lK(r.key),r)}}function zNe(t,e,n){return e&&WNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VNe(t,e,n){return e=X0(e),HNe(t,aK()?Reflect.construct(e,n||[],X0(t).constructor):e.apply(t,n))}function HNe(t,e){if(e&&(Nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GNe(t)}function GNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aK=function(){return!!t})()}function X0(t){return X0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X0(t)}function qNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jT(t,e)}function jT(t,e){return jT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jT(t,e)}function ly(t,e,n){return e=lK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lK(t){var e=KNe(t,"string");return Nh(e)=="symbol"?e:e+""}function KNe(t,e){if(Nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hi=32,eP=function(t){function e(){return UNe(this,e),VNe(this,e,arguments)}return qNe(e,t),zNe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,i=hi/2,o=hi/6,a=hi/3,l=r.inactive?s:r.color;if(r.type==="plainline")return j.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:hi,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return j.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(hi,"M").concat(2*a,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return j.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(hi/8,"h").concat(hi,"v").concat(hi*3/4,"h").concat(-hi,"z"),className:"recharts-legend-icon"});if(j.isValidElement(r.legendIcon)){var c=BNe({},r);return delete c.legendIcon,j.cloneElement(r.legendIcon,c)}return j.createElement(ZA,{fill:l,cx:i,cy:i,size:hi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,i=s.payload,o=s.iconSize,a=s.layout,l=s.formatter,c=s.inactiveColor,u={x:0,y:0,width:hi,height:hi},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,m){var g=p.formatter||l,y=at(ly(ly({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=Ze(p.value)?null:p.value;go(!Ze(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=p.inactive?c:p.color;return j.createElement("li",DT({className:y,style:d,key:"legend-item-".concat(m)},cd(r.props,p,m)),j.createElement(ET,{width:o,height:o,viewBox:u,style:f},r.renderIcon(p)),j.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},g?g(v,p,m):v))})}},{key:"render",value:function(){var r=this.props,s=r.payload,i=r.layout,o=r.align;if(!s||!s.length)return null;var a={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return j.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(S.PureComponent);ly(eP,"displayName","Legend");ly(eP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var XNe=yS;function YNe(){this.__data__=new XNe,this.size=0}var QNe=YNe;function JNe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var ZNe=JNe;function eEe(t){return this.__data__.get(t)}var tEe=eEe;function nEe(t){return this.__data__.has(t)}var rEe=nEe,sEe=yS,iEe=UA,oEe=WA,aEe=200;function lEe(t,e){var n=this.__data__;if(n instanceof sEe){var r=n.__data__;if(!iEe||r.length<aEe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new oEe(r)}return n.set(t,e),this.size=n.size,this}var cEe=lEe,uEe=yS,dEe=QNe,fEe=ZNe,hEe=tEe,pEe=rEe,mEe=cEe;function Mp(t){var e=this.__data__=new uEe(t);this.size=e.size}Mp.prototype.clear=dEe;Mp.prototype.delete=fEe;Mp.prototype.get=hEe;Mp.prototype.has=pEe;Mp.prototype.set=mEe;var cK=Mp,gEe="__lodash_hash_undefined__";function yEe(t){return this.__data__.set(t,gEe),this}var vEe=yEe;function xEe(t){return this.__data__.has(t)}var bEe=xEe,wEe=WA,SEe=vEe,_Ee=bEe;function Y0(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new wEe;++e<n;)this.add(t[e])}Y0.prototype.add=Y0.prototype.push=SEe;Y0.prototype.has=_Ee;var uK=Y0;function CEe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var dK=CEe;function NEe(t,e){return t.has(e)}var fK=NEe,EEe=uK,TEe=dK,IEe=fK,kEe=1,OEe=2;function $Ee(t,e,n,r,s,i){var o=n&kEe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,p=n&OEe?new EEe:void 0;for(i.set(t,e),i.set(e,t);++d<a;){var m=t[d],g=e[d];if(r)var y=o?r(g,m,d,e,t,i):r(m,g,d,t,e,i);if(y!==void 0){if(y)continue;f=!1;break}if(p){if(!TEe(e,function(v,x){if(!IEe(p,x)&&(m===v||s(m,v,n,r,i)))return p.push(x)})){f=!1;break}}else if(!(m===g||s(m,g,n,r,i))){f=!1;break}}return i.delete(t),i.delete(e),f}var hK=$Ee,AEe=ua,PEe=AEe.Uint8Array,REe=PEe;function DEe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var jEe=DEe;function MEe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var tP=MEe,yL=Av,vL=REe,LEe=BA,FEe=hK,BEe=jEe,UEe=tP,WEe=1,zEe=2,VEe="[object Boolean]",HEe="[object Date]",GEe="[object Error]",qEe="[object Map]",KEe="[object Number]",XEe="[object RegExp]",YEe="[object Set]",QEe="[object String]",JEe="[object Symbol]",ZEe="[object ArrayBuffer]",eTe="[object DataView]",xL=yL?yL.prototype:void 0,zC=xL?xL.valueOf:void 0;function tTe(t,e,n,r,s,i,o){switch(n){case eTe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ZEe:return!(t.byteLength!=e.byteLength||!i(new vL(t),new vL(e)));case VEe:case HEe:case KEe:return LEe(+t,+e);case GEe:return t.name==e.name&&t.message==e.message;case XEe:case QEe:return t==e+"";case qEe:var a=BEe;case YEe:var l=r&WEe;if(a||(a=UEe),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=zEe,o.set(t,e);var u=FEe(a(t),a(e),r,s,i,o);return o.delete(t),u;case JEe:if(zC)return zC.call(t)==zC.call(e)}return!1}var nTe=tTe;function rTe(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var pK=rTe,sTe=pK,iTe=$s;function oTe(t,e,n){var r=e(t);return iTe(t)?r:sTe(r,n(t))}var aTe=oTe;function lTe(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}var cTe=lTe;function uTe(){return[]}var dTe=uTe,fTe=cTe,hTe=dTe,pTe=Object.prototype,mTe=pTe.propertyIsEnumerable,bL=Object.getOwnPropertySymbols,gTe=bL?function(t){return t==null?[]:(t=Object(t),fTe(bL(t),function(e){return mTe.call(t,e)}))}:hTe,yTe=gTe;function vTe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var xTe=vTe,bTe=vl,wTe=xl,STe="[object Arguments]";function _Te(t){return wTe(t)&&bTe(t)==STe}var CTe=_Te,wL=CTe,NTe=xl,mK=Object.prototype,ETe=mK.hasOwnProperty,TTe=mK.propertyIsEnumerable,ITe=wL(function(){return arguments}())?wL:function(t){return NTe(t)&&ETe.call(t,"callee")&&!TTe.call(t,"callee")},nP=ITe,Q0={exports:{}};function kTe(){return!1}var OTe=kTe;Q0.exports;(function(t,e){var n=ua,r=OTe,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===s,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(Q0,Q0.exports);var gK=Q0.exports,$Te=9007199254740991,ATe=/^(?:0|[1-9]\d*)$/;function PTe(t,e){var n=typeof t;return e=e??$Te,!!e&&(n=="number"||n!="symbol"&&ATe.test(t))&&t>-1&&t%1==0&&t<e}var rP=PTe,RTe=9007199254740991;function DTe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=RTe}var sP=DTe,jTe=vl,MTe=sP,LTe=xl,FTe="[object Arguments]",BTe="[object Array]",UTe="[object Boolean]",WTe="[object Date]",zTe="[object Error]",VTe="[object Function]",HTe="[object Map]",GTe="[object Number]",qTe="[object Object]",KTe="[object RegExp]",XTe="[object Set]",YTe="[object String]",QTe="[object WeakMap]",JTe="[object ArrayBuffer]",ZTe="[object DataView]",eIe="[object Float32Array]",tIe="[object Float64Array]",nIe="[object Int8Array]",rIe="[object Int16Array]",sIe="[object Int32Array]",iIe="[object Uint8Array]",oIe="[object Uint8ClampedArray]",aIe="[object Uint16Array]",lIe="[object Uint32Array]",on={};on[eIe]=on[tIe]=on[nIe]=on[rIe]=on[sIe]=on[iIe]=on[oIe]=on[aIe]=on[lIe]=!0;on[FTe]=on[BTe]=on[JTe]=on[UTe]=on[ZTe]=on[WTe]=on[zTe]=on[VTe]=on[HTe]=on[GTe]=on[qTe]=on[KTe]=on[XTe]=on[YTe]=on[QTe]=!1;function cIe(t){return LTe(t)&&MTe(t.length)&&!!on[jTe(t)]}var uIe=cIe;function dIe(t){return function(e){return t(e)}}var yK=dIe,J0={exports:{}};J0.exports;(function(t,e){var n=Cq,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===r,o=i&&n.process,a=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(J0,J0.exports);var fIe=J0.exports,hIe=uIe,pIe=yK,SL=fIe,_L=SL&&SL.isTypedArray,mIe=_L?pIe(_L):hIe,vK=mIe,gIe=xTe,yIe=nP,vIe=$s,xIe=gK,bIe=rP,wIe=vK,SIe=Object.prototype,_Ie=SIe.hasOwnProperty;function CIe(t,e){var n=vIe(t),r=!n&&yIe(t),s=!n&&!r&&xIe(t),i=!n&&!r&&!s&&wIe(t),o=n||r||s||i,a=o?gIe(t.length,String):[],l=a.length;for(var c in t)(e||_Ie.call(t,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||bIe(c,l)))&&a.push(c);return a}var NIe=CIe,EIe=Object.prototype;function TIe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||EIe;return t===n}var IIe=TIe;function kIe(t,e){return function(n){return t(e(n))}}var xK=kIe,OIe=xK,$Ie=OIe(Object.keys,Object),AIe=$Ie,PIe=IIe,RIe=AIe,DIe=Object.prototype,jIe=DIe.hasOwnProperty;function MIe(t){if(!PIe(t))return RIe(t);var e=[];for(var n in Object(t))jIe.call(t,n)&&n!="constructor"&&e.push(n);return e}var LIe=MIe,FIe=FA,BIe=sP;function UIe(t){return t!=null&&BIe(t.length)&&!FIe(t)}var jv=UIe,WIe=NIe,zIe=LIe,VIe=jv;function HIe(t){return VIe(t)?WIe(t):zIe(t)}var RS=HIe,GIe=aTe,qIe=yTe,KIe=RS;function XIe(t){return GIe(t,KIe,qIe)}var YIe=XIe,CL=YIe,QIe=1,JIe=Object.prototype,ZIe=JIe.hasOwnProperty;function eke(t,e,n,r,s,i){var o=n&QIe,a=CL(t),l=a.length,c=CL(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:ZIe.call(e,f)))return!1}var p=i.get(t),m=i.get(e);if(p&&m)return p==e&&m==t;var g=!0;i.set(t,e),i.set(e,t);for(var y=o;++d<l;){f=a[d];var v=t[f],x=e[f];if(r)var b=o?r(x,v,f,e,t,i):r(v,x,f,t,e,i);if(!(b===void 0?v===x||s(v,x,n,r,i):b)){g=!1;break}y||(y=f=="constructor")}if(g&&!y){var w=t.constructor,_=e.constructor;w!=_&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof _=="function"&&_ instanceof _)&&(g=!1)}return i.delete(t),i.delete(e),g}var tke=eke,nke=Dd,rke=ua,ske=nke(rke,"DataView"),ike=ske,oke=Dd,ake=ua,lke=oke(ake,"Promise"),cke=lke,uke=Dd,dke=ua,fke=uke(dke,"Set"),bK=fke,hke=Dd,pke=ua,mke=hke(pke,"WeakMap"),gke=mke,MT=ike,LT=UA,FT=cke,BT=bK,UT=gke,wK=vl,Lp=Eq,NL="[object Map]",yke="[object Object]",EL="[object Promise]",TL="[object Set]",IL="[object WeakMap]",kL="[object DataView]",vke=Lp(MT),xke=Lp(LT),bke=Lp(FT),wke=Lp(BT),Ske=Lp(UT),du=wK;(MT&&du(new MT(new ArrayBuffer(1)))!=kL||LT&&du(new LT)!=NL||FT&&du(FT.resolve())!=EL||BT&&du(new BT)!=TL||UT&&du(new UT)!=IL)&&(du=function(t){var e=wK(t),n=e==yke?t.constructor:void 0,r=n?Lp(n):"";if(r)switch(r){case vke:return kL;case xke:return NL;case bke:return EL;case wke:return TL;case Ske:return IL}return e});var _ke=du,VC=cK,Cke=hK,Nke=nTe,Eke=tke,OL=_ke,$L=$s,AL=gK,Tke=vK,Ike=1,PL="[object Arguments]",RL="[object Array]",jx="[object Object]",kke=Object.prototype,DL=kke.hasOwnProperty;function Oke(t,e,n,r,s,i){var o=$L(t),a=$L(e),l=o?RL:OL(t),c=a?RL:OL(e);l=l==PL?jx:l,c=c==PL?jx:c;var u=l==jx,d=c==jx,f=l==c;if(f&&AL(t)){if(!AL(e))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new VC),o||Tke(t)?Cke(t,e,n,r,s,i):Nke(t,e,l,n,r,s,i);if(!(n&Ike)){var p=u&&DL.call(t,"__wrapped__"),m=d&&DL.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,y=m?e.value():e;return i||(i=new VC),s(g,y,n,r,i)}}return f?(i||(i=new VC),Eke(t,e,n,r,s,i)):!1}var $ke=Oke,Ake=$ke,jL=xl;function SK(t,e,n,r,s){return t===e?!0:t==null||e==null||!jL(t)&&!jL(e)?t!==t&&e!==e:Ake(t,e,n,r,SK,s)}var iP=SK,Pke=cK,Rke=iP,Dke=1,jke=2;function Mke(t,e,n,r){var s=n.length,i=s,o=!r;if(t==null)return!i;for(t=Object(t);s--;){var a=n[s];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<i;){a=n[s];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new Pke;if(r)var f=r(c,u,l,t,e,d);if(!(f===void 0?Rke(u,c,Dke|jke,r,d):f))return!1}}return!0}var Lke=Mke,Fke=Vc;function Bke(t){return t===t&&!Fke(t)}var _K=Bke,Uke=_K,Wke=RS;function zke(t){for(var e=Wke(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,Uke(s)]}return e}var Vke=zke;function Hke(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var CK=Hke,Gke=Lke,qke=Vke,Kke=CK;function Xke(t){var e=qke(t);return e.length==1&&e[0][2]?Kke(e[0][0],e[0][1]):function(n){return n===t||Gke(n,t,e)}}var Yke=Xke;function Qke(t,e){return t!=null&&e in Object(t)}var Jke=Qke,Zke=$q,eOe=nP,tOe=$s,nOe=rP,rOe=sP,sOe=xS;function iOe(t,e,n){e=Zke(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var o=sOe(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&rOe(s)&&nOe(o,s)&&(tOe(t)||eOe(t)))}var oOe=iOe,aOe=Jke,lOe=oOe;function cOe(t,e){return t!=null&&lOe(t,e,aOe)}var uOe=cOe,dOe=iP,fOe=Aq,hOe=uOe,pOe=LA,mOe=_K,gOe=CK,yOe=xS,vOe=1,xOe=2;function bOe(t,e){return pOe(t)&&mOe(e)?gOe(yOe(t),e):function(n){var r=fOe(n,t);return r===void 0&&r===e?hOe(n,t):dOe(e,r,vOe|xOe)}}var wOe=bOe;function SOe(t){return t}var Fp=SOe;function _Oe(t){return function(e){return e==null?void 0:e[t]}}var COe=_Oe,NOe=HA;function EOe(t){return function(e){return NOe(e,t)}}var TOe=EOe,IOe=COe,kOe=TOe,OOe=LA,$Oe=xS;function AOe(t){return OOe(t)?IOe($Oe(t)):kOe(t)}var POe=AOe,ROe=Yke,DOe=wOe,jOe=Fp,MOe=$s,LOe=POe;function FOe(t){return typeof t=="function"?t:t==null?jOe:typeof t=="object"?MOe(t)?DOe(t[0],t[1]):ROe(t):LOe(t)}var da=FOe;function BOe(t,e,n,r){for(var s=t.length,i=n+(r?1:-1);r?i--:++i<s;)if(e(t[i],i,t))return i;return-1}var NK=BOe;function UOe(t){return t!==t}var WOe=UOe;function zOe(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var VOe=zOe,HOe=NK,GOe=WOe,qOe=VOe;function KOe(t,e,n){return e===e?qOe(t,e,n):HOe(t,GOe,n)}var XOe=KOe,YOe=XOe;function QOe(t,e){var n=t==null?0:t.length;return!!n&&YOe(t,e,0)>-1}var JOe=QOe;function ZOe(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var e$e=ZOe;function t$e(){}var n$e=t$e,HC=bK,r$e=n$e,s$e=tP,i$e=1/0,o$e=HC&&1/s$e(new HC([,-0]))[1]==i$e?function(t){return new HC(t)}:r$e,a$e=o$e,l$e=uK,c$e=JOe,u$e=e$e,d$e=fK,f$e=a$e,h$e=tP,p$e=200;function m$e(t,e,n){var r=-1,s=c$e,i=t.length,o=!0,a=[],l=a;if(n)o=!1,s=u$e;else if(i>=p$e){var c=e?null:f$e(t);if(c)return h$e(c);o=!1,s=d$e,l=new l$e}else l=e?[]:a;e:for(;++r<i;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(u)}else s(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var g$e=m$e,y$e=da,v$e=g$e;function x$e(t,e){return t&&t.length?v$e(t,y$e(e)):[]}var b$e=x$e;const ML=Tt(b$e);function EK(t,e,n){return e===!0?ML(t,n):Ze(e)?ML(t,e):t}function Eh(t){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}var w$e=["ref"];function LL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LL(Object(n),!0).forEach(function(r){DS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IK(r.key),r)}}function _$e(t,e,n){return e&&FL(t.prototype,e),n&&FL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C$e(t,e,n){return e=Z0(e),N$e(t,TK()?Reflect.construct(e,n||[],Z0(t).constructor):e.apply(t,n))}function N$e(t,e){if(e&&(Eh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E$e(t)}function E$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TK=function(){return!!t})()}function Z0(t){return Z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z0(t)}function T$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WT(t,e)}function WT(t,e){return WT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},WT(t,e)}function DS(t,e,n){return e=IK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IK(t){var e=I$e(t,"string");return Eh(e)=="symbol"?e:e+""}function I$e(t,e){if(Eh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function k$e(t,e){if(t==null)return{};var n=O$e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function O$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $$e(t){return t.value}function A$e(t,e){if(j.isValidElement(t))return j.cloneElement(t,e);if(typeof t=="function")return j.createElement(t,e);e.ref;var n=k$e(e,w$e);return j.createElement(eP,n)}var BL=1,Bu=function(t){function e(){var n;S$e(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=C$e(this,e,[].concat(s)),DS(n,"lastBoundingBox",{width:-1,height:-1}),n}return T$e(e,t),_$e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>BL||Math.abs(s.height-this.lastBoundingBox.height)>BL)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?xa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,i=s.layout,o=s.align,a=s.verticalAlign,l=s.margin,c=s.chartWidth,u=s.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((c||0)-p.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var m=this.getBBoxSnapshot();f={top:((u||0)-m.height)/2}}else f=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return xa(xa({},d),f)}},{key:"render",value:function(){var r=this,s=this.props,i=s.content,o=s.width,a=s.height,l=s.wrapperStyle,c=s.payloadUniqBy,u=s.payload,d=xa(xa({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return j.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){r.wrapperNode=p}},A$e(i,xa(xa({},this.props),{},{payload:EK(u,c,$$e)})))}}],[{key:"getWithHeight",value:function(r,s){var i=xa(xa({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&pe(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||s}:null}}])}(S.PureComponent);DS(Bu,"displayName","Legend");DS(Bu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var UL=Av,P$e=nP,R$e=$s,WL=UL?UL.isConcatSpreadable:void 0;function D$e(t){return R$e(t)||P$e(t)||!!(WL&&t&&t[WL])}var j$e=D$e,M$e=pK,L$e=j$e;function kK(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=L$e),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?kK(a,e-1,n,r,s):M$e(s,a):r||(s[s.length]=a)}return s}var OK=kK;function F$e(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++s];if(n(i[l],l,i)===!1)break}return e}}var B$e=F$e,U$e=B$e,W$e=U$e(),z$e=W$e,V$e=z$e,H$e=RS;function G$e(t,e){return t&&V$e(t,e,H$e)}var $K=G$e,q$e=jv;function K$e(t,e){return function(n,r){if(n==null)return n;if(!q$e(n))return t(n,r);for(var s=n.length,i=e?s:-1,o=Object(n);(e?i--:++i<s)&&r(o[i],i,o)!==!1;);return n}}var X$e=K$e,Y$e=$K,Q$e=X$e,J$e=Q$e(Y$e),oP=J$e,Z$e=oP,eAe=jv;function tAe(t,e){var n=-1,r=eAe(t)?Array(t.length):[];return Z$e(t,function(s,i,o){r[++n]=e(s,i,o)}),r}var AK=tAe;function nAe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var rAe=nAe,zL=Ap;function sAe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,i=zL(t),o=e!==void 0,a=e===null,l=e===e,c=zL(e);if(!a&&!c&&!i&&t>e||i&&o&&l&&!a&&!c||r&&o&&l||!n&&l||!s)return 1;if(!r&&!i&&!c&&t<e||c&&n&&s&&!r&&!i||a&&n&&s||!o&&s||!l)return-1}return 0}var iAe=sAe,oAe=iAe;function aAe(t,e,n){for(var r=-1,s=t.criteria,i=e.criteria,o=s.length,a=n.length;++r<o;){var l=oAe(s[r],i[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var lAe=aAe,GC=VA,cAe=HA,uAe=da,dAe=AK,fAe=rAe,hAe=yK,pAe=lAe,mAe=Fp,gAe=$s;function yAe(t,e,n){e.length?e=GC(e,function(i){return gAe(i)?function(o){return cAe(o,i.length===1?i[0]:i)}:i}):e=[mAe];var r=-1;e=GC(e,hAe(uAe));var s=dAe(t,function(i,o,a){var l=GC(e,function(c){return c(i)});return{criteria:l,index:++r,value:i}});return fAe(s,function(i,o){return pAe(i,o,n)})}var vAe=yAe;function xAe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var bAe=xAe,wAe=bAe,VL=Math.max;function SAe(t,e,n){return e=VL(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=VL(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(o),wAe(t,this,a)}}var _Ae=SAe;function CAe(t){return function(){return t}}var NAe=CAe,EAe=Dd,TAe=function(){try{var t=EAe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),PK=TAe,IAe=NAe,HL=PK,kAe=Fp,OAe=HL?function(t,e){return HL(t,"toString",{configurable:!0,enumerable:!1,value:IAe(e),writable:!0})}:kAe,$Ae=OAe,AAe=800,PAe=16,RAe=Date.now;function DAe(t){var e=0,n=0;return function(){var r=RAe(),s=PAe-(r-n);if(n=r,s>0){if(++e>=AAe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var jAe=DAe,MAe=$Ae,LAe=jAe,FAe=LAe(MAe),BAe=FAe,UAe=Fp,WAe=_Ae,zAe=BAe;function VAe(t,e){return zAe(WAe(t,e,UAe),t+"")}var HAe=VAe,GAe=BA,qAe=jv,KAe=rP,XAe=Vc;function YAe(t,e,n){if(!XAe(n))return!1;var r=typeof e;return(r=="number"?qAe(n)&&KAe(e,n.length):r=="string"&&e in n)?GAe(n[e],t):!1}var jS=YAe,QAe=OK,JAe=vAe,ZAe=HAe,GL=jS,ePe=ZAe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&GL(t,e[0],e[1])?e=[]:n>2&&GL(e[0],e[1],e[2])&&(e=[e[0]]),JAe(t,QAe(e,1),[])}),tPe=ePe;const aP=Tt(tPe);function cy(t){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cy(t)}function zT(){return zT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zT.apply(this,arguments)}function nPe(t,e){return oPe(t)||iPe(t,e)||sPe(t,e)||rPe()}function rPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sPe(t,e){if(t){if(typeof t=="string")return qL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qL(t,e)}}function qL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function oPe(t){if(Array.isArray(t))return t}function KL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(n),!0).forEach(function(r){aPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aPe(t,e,n){return e=lPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lPe(t){var e=cPe(t,"string");return cy(e)=="symbol"?e:e+""}function cPe(t,e){if(cy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uPe(t){return Array.isArray(t)&&Jn(t[0])&&Jn(t[1])?t.join(" ~ "):t}var dPe=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,i=s===void 0?{}:s,o=e.itemStyle,a=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,f=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,g=e.label,y=e.labelFormatter,v=e.accessibilityLayer,x=v===void 0?!1:v,b=function(){if(u&&u.length){var k={padding:0,margin:0},R=(f?aP(u,f):u).map(function(M,B){if(M.type==="none")return null;var F=qC({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},a),L=M.formatter||d||uPe,P=M.value,W=M.name,q=P,H=W;if(L&&q!=null&&H!=null){var Y=L(P,W,M,B,u);if(Array.isArray(Y)){var se=nPe(Y,2);q=se[0],H=se[1]}else q=Y}return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:F},Jn(H)?j.createElement("span",{className:"recharts-tooltip-item-name"},H):null,Jn(H)?j.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,j.createElement("span",{className:"recharts-tooltip-item-value"},q),j.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:k},R)}return null},w=qC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),_=qC({margin:0},c),C=!yt(g),E=C?g:"",N=at("recharts-default-tooltip",p),I=at("recharts-tooltip-label",m);C&&y&&u!==void 0&&u!==null&&(E=y(g,u));var $=x?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",zT({className:N,style:w},$),j.createElement("p",{className:I,style:_},j.isValidElement(E)?E:"".concat(E)),b())};function uy(t){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uy(t)}function Mx(t,e,n){return e=fPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fPe(t){var e=hPe(t,"string");return uy(e)=="symbol"?e:e+""}function hPe(t,e){if(uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bm="recharts-tooltip-wrapper",pPe={visibility:"hidden"};function mPe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return at(bm,Mx(Mx(Mx(Mx({},"".concat(bm,"-right"),pe(n)&&e&&pe(e.x)&&n>=e.x),"".concat(bm,"-left"),pe(n)&&e&&pe(e.x)&&n<e.x),"".concat(bm,"-bottom"),pe(r)&&e&&pe(e.y)&&r>=e.y),"".concat(bm,"-top"),pe(r)&&e&&pe(e.y)&&r<e.y))}function XL(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(i&&pe(i[r]))return i[r];var u=n[r]-a-s,d=n[r]+s;if(e[r])return o[r]?u:d;if(o[r]){var f=u,p=l[r];return f<p?Math.max(d,l[r]):Math.max(u,l[r])}var m=d+a,g=l[r]+c;return m>g?Math.max(u,l[r]):Math.max(d,l[r])}function gPe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function yPe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,i=t.reverseDirection,o=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,u,d;return o.height>0&&o.width>0&&n?(u=XL({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=XL({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=gPe({translateX:u,translateY:d,useTranslate3d:a})):c=pPe,{cssProperties:c,cssClasses:mPe({translateX:u,translateY:d,coordinate:n})}}function Th(t){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}function YL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function QL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YL(Object(n),!0).forEach(function(r){HT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DK(r.key),r)}}function bPe(t,e,n){return e&&xPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wPe(t,e,n){return e=ew(e),SPe(t,RK()?Reflect.construct(e,n||[],ew(t).constructor):e.apply(t,n))}function SPe(t,e){if(e&&(Th(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Pe(t)}function _Pe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RK=function(){return!!t})()}function ew(t){return ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ew(t)}function CPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VT(t,e)}function VT(t,e){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},VT(t,e)}function HT(t,e,n){return e=DK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DK(t){var e=NPe(t,"string");return Th(e)=="symbol"?e:e+""}function NPe(t,e){if(Th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JL=1,EPe=function(t){function e(){var n;vPe(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=wPe(this,e,[].concat(s)),HT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),HT(n,"handleKeyDown",function(o){if(o.key==="Escape"){var a,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return CPe(e,t),bPe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>JL||Math.abs(r.height-this.state.lastBoundingBox.height)>JL)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,c=s.children,u=s.coordinate,d=s.hasPayload,f=s.isAnimationActive,p=s.offset,m=s.position,g=s.reverseDirection,y=s.useTranslate3d,v=s.viewBox,x=s.wrapperStyle,b=yPe({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:p,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:v}),w=b.cssClasses,_=b.cssProperties,C=QL(QL({transition:f&&i?"transform ".concat(a,"ms ").concat(l):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},x);return j.createElement("div",{tabIndex:-1,className:w,style:C,ref:function(N){r.wrapperNode=N}},c)}}])}(S.PureComponent),TPe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Va={isSsr:TPe(),get:function(e){return Va[e]},set:function(e,n){if(typeof e=="string")Va[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(s){Va[s]=e[s]})}}};function Ih(t){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(t)}function ZL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function eF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(n),!0).forEach(function(r){lP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MK(r.key),r)}}function OPe(t,e,n){return e&&kPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Pe(t,e,n){return e=tw(e),APe(t,jK()?Reflect.construct(e,n||[],tw(t).constructor):e.apply(t,n))}function APe(t,e){if(e&&(Ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PPe(t)}function PPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jK=function(){return!!t})()}function tw(t){return tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tw(t)}function RPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GT(t,e)}function GT(t,e){return GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GT(t,e)}function lP(t,e,n){return e=MK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MK(t){var e=DPe(t,"string");return Ih(e)=="symbol"?e:e+""}function DPe(t,e){if(Ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jPe(t){return t.dataKey}function MPe(t,e){return j.isValidElement(t)?j.cloneElement(t,e):typeof t=="function"?j.createElement(t,e):j.createElement(dPe,e)}var Us=function(t){function e(){return IPe(this,e),$Pe(this,e,arguments)}return RPe(e,t),OPe(e,[{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,c=s.content,u=s.coordinate,d=s.filterNull,f=s.isAnimationActive,p=s.offset,m=s.payload,g=s.payloadUniqBy,y=s.position,v=s.reverseDirection,x=s.useTranslate3d,b=s.viewBox,w=s.wrapperStyle,_=m??[];d&&_.length&&(_=EK(m.filter(function(E){return E.value!=null&&(E.hide!==!0||r.props.includeHidden)}),g,jPe));var C=_.length>0;return j.createElement(EPe,{allowEscapeViewBox:o,animationDuration:a,animationEasing:l,isAnimationActive:f,active:i,coordinate:u,hasPayload:C,offset:p,position:y,reverseDirection:v,useTranslate3d:x,viewBox:b,wrapperStyle:w},MPe(c,eF(eF({},this.props),{},{payload:_})))}}])}(S.PureComponent);lP(Us,"displayName","Tooltip");lP(Us,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Va.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var LPe=ua,FPe=function(){return LPe.Date.now()},BPe=FPe,UPe=/\s/;function WPe(t){for(var e=t.length;e--&&UPe.test(t.charAt(e)););return e}var zPe=WPe,VPe=zPe,HPe=/^\s+/;function GPe(t){return t&&t.slice(0,VPe(t)+1).replace(HPe,"")}var qPe=GPe,KPe=qPe,tF=Vc,XPe=Ap,nF=NaN,YPe=/^[-+]0x[0-9a-f]+$/i,QPe=/^0b[01]+$/i,JPe=/^0o[0-7]+$/i,ZPe=parseInt;function e2e(t){if(typeof t=="number")return t;if(XPe(t))return nF;if(tF(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=tF(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=KPe(t);var n=QPe.test(t);return n||JPe.test(t)?ZPe(t.slice(2),n?2:8):YPe.test(t)?nF:+t}var LK=e2e,t2e=Vc,KC=BPe,rF=LK,n2e="Expected a function",r2e=Math.max,s2e=Math.min;function i2e(t,e,n){var r,s,i,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(n2e);e=rF(e)||0,t2e(n)&&(u=!!n.leading,d="maxWait"in n,i=d?r2e(rF(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f);function p(C){var E=r,N=s;return r=s=void 0,c=C,o=t.apply(N,E),o}function m(C){return c=C,a=setTimeout(v,e),u?p(C):o}function g(C){var E=C-l,N=C-c,I=e-E;return d?s2e(I,i-N):I}function y(C){var E=C-l,N=C-c;return l===void 0||E>=e||E<0||d&&N>=i}function v(){var C=KC();if(y(C))return x(C);a=setTimeout(v,g(C))}function x(C){return a=void 0,f&&r?p(C):(r=s=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,r=l=s=a=void 0}function w(){return a===void 0?o:x(KC())}function _(){var C=KC(),E=y(C);if(r=arguments,s=this,l=C,E){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(v,e),p(l)}return a===void 0&&(a=setTimeout(v,e)),o}return _.cancel=b,_.flush=w,_}var o2e=i2e,a2e=o2e,l2e=Vc,c2e="Expected a function";function u2e(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(c2e);return l2e(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),a2e(t,e,{leading:r,maxWait:e,trailing:s})}var d2e=u2e;const FK=Tt(d2e);function dy(t){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(t)}function sF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Lx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sF(Object(n),!0).forEach(function(r){f2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f2e(t,e,n){return e=h2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h2e(t){var e=p2e(t,"string");return dy(e)=="symbol"?e:e+""}function p2e(t,e){if(dy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m2e(t,e){return x2e(t)||v2e(t,e)||y2e(t,e)||g2e()}function g2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y2e(t,e){if(t){if(typeof t=="string")return iF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iF(t,e)}}function iF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function x2e(t){if(Array.isArray(t))return t}var cP=S.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,i=t.width,o=i===void 0?"100%":i,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,u=c===void 0?0:c,d=t.minHeight,f=t.maxHeight,p=t.children,m=t.debounce,g=m===void 0?0:m,y=t.id,v=t.className,x=t.onResize,b=t.style,w=b===void 0?{}:b,_=S.useRef(null),C=S.useRef();C.current=x,S.useImperativeHandle(e,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var E=S.useState({containerWidth:s.width,containerHeight:s.height}),N=m2e(E,2),I=N[0],$=N[1],O=S.useCallback(function(R,M){$(function(B){var F=Math.round(R),L=Math.round(M);return B.containerWidth===F&&B.containerHeight===L?B:{containerWidth:F,containerHeight:L}})},[]);S.useEffect(function(){var R=function(W){var q,H=W[0].contentRect,Y=H.width,se=H.height;O(Y,se),(q=C.current)===null||q===void 0||q.call(C,Y,se)};g>0&&(R=FK(R,g,{trailing:!0,leading:!1}));var M=new ResizeObserver(R),B=_.current.getBoundingClientRect(),F=B.width,L=B.height;return O(F,L),M.observe(_.current),function(){M.disconnect()}},[O,g]);var k=S.useMemo(function(){var R=I.containerWidth,M=I.containerHeight;if(R<0||M<0)return null;go(Nu(o)||Nu(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),go(!n||n>0,"The aspect(%s) must be greater than zero.",n);var B=Nu(o)?R:o,F=Nu(l)?M:l;n&&n>0&&(B?F=B/n:F&&(B=F*n),f&&F>f&&(F=f)),go(B>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,F,o,l,u,d,n);var L=!Array.isArray(p)&&za(p.type).endsWith("Chart");return j.Children.map(p,function(P){return Dq.isElement(P)?S.cloneElement(P,Lx({width:B,height:F},L?{style:Lx({height:"100%",width:"100%",maxHeight:F,maxWidth:B},P.props.style)}:{})):P})},[n,p,l,f,d,u,I,o]);return j.createElement("div",{id:y?"".concat(y):void 0,className:at("recharts-responsive-container",v),style:Lx(Lx({},w),{},{width:o,height:l,minWidth:u,minHeight:d,maxHeight:f}),ref:_},k)}),Mv=function(e){return null};Mv.displayName="Cell";function fy(t){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(t)}function oF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oF(Object(n),!0).forEach(function(r){b2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b2e(t,e,n){return e=w2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w2e(t){var e=S2e(t,"string");return fy(e)=="symbol"?e:e+""}function S2e(t,e){if(fy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zd={widthCache:{},cacheCount:0},_2e=2e3,C2e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},aF="recharts_measurement_span";function N2e(t){var e=qT({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var ug=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Va.isSsr)return{width:0,height:0};var r=N2e(n),s=JSON.stringify({text:e,copyStyle:r});if(Zd.widthCache[s])return Zd.widthCache[s];try{var i=document.getElementById(aF);i||(i=document.createElement("span"),i.setAttribute("id",aF),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=qT(qT({},C2e),r);Object.assign(i.style,o),i.textContent="".concat(e);var a=i.getBoundingClientRect(),l={width:a.width,height:a.height};return Zd.widthCache[s]=l,++Zd.cacheCount>_2e&&(Zd.cacheCount=0,Zd.widthCache={}),l}catch{return{width:0,height:0}}},E2e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function hy(t){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hy(t)}function nw(t,e){return O2e(t)||k2e(t,e)||I2e(t,e)||T2e()}function T2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I2e(t,e){if(t){if(typeof t=="string")return lF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lF(t,e)}}function lF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function O2e(t){if(Array.isArray(t))return t}function $2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P2e(r.key),r)}}function A2e(t,e,n){return e&&cF(t.prototype,e),n&&cF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function P2e(t){var e=R2e(t,"string");return hy(e)=="symbol"?e:e+""}function R2e(t,e){if(hy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,D2e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,j2e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,BK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},M2e=Object.keys(BK),If="NaN";function L2e(t,e){return t*BK[e]}var Fx=function(){function t(e,n){$2e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!D2e.test(n)&&(this.num=NaN,this.unit=""),M2e.includes(n)&&(this.num=L2e(e,n),this.unit="px")}return A2e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=j2e.exec(n))!==null&&r!==void 0?r:[],i=nw(s,3),o=i[1],a=i[2];return new t(parseFloat(o),a??"")}}])}();function UK(t){if(t.includes(If))return If;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=uF.exec(e))!==null&&n!==void 0?n:[],s=nw(r,4),i=s[1],o=s[2],a=s[3],l=Fx.parse(i??""),c=Fx.parse(a??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return If;e=e.replace(uF,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=dF.exec(e))!==null&&d!==void 0?d:[],p=nw(f,4),m=p[1],g=p[2],y=p[3],v=Fx.parse(m??""),x=Fx.parse(y??""),b=g==="+"?v.add(x):v.subtract(x);if(b.isNaN())return If;e=e.replace(dF,b.toString())}return e}var fF=/\(([^()]*)\)/;function F2e(t){for(var e=t;e.includes("(");){var n=fF.exec(e),r=nw(n,2),s=r[1];e=e.replace(fF,UK(s))}return e}function B2e(t){var e=t.replace(/\s+/g,"");return e=F2e(e),e=UK(e),e}function U2e(t){try{return B2e(t)}catch{return If}}function XC(t){var e=U2e(t.slice(5,-1));return e===If?"":e}var W2e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],z2e=["dx","dy","angle","className","breakAll"];function KT(){return KT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KT.apply(this,arguments)}function hF(t,e){if(t==null)return{};var n=V2e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function V2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pF(t,e){return K2e(t)||q2e(t,e)||G2e(t,e)||H2e()}function H2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G2e(t,e){if(t){if(typeof t=="string")return mF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mF(t,e)}}function mF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function K2e(t){if(Array.isArray(t))return t}var WK=/[ \f\n\r\t\v\u2028\u2029]+/,zK=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var i=[];yt(n)||(r?i=n.toString().split(""):i=n.toString().split(WK));var o=i.map(function(l){return{word:l,width:ug(l,s).width}}),a=r?0:ug(" ",s).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},X2e=function(e,n,r,s,i){var o=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=pe(o),d=a,f=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(F,L){var P=L.word,W=L.width,q=F[F.length-1];if(q&&(s==null||i||q.width+W+r<Number(s)))q.words.push(P),q.width+=W+r;else{var H={words:[P],width:W};F.push(H)}return F},[])},p=f(n),m=function(B){return B.reduce(function(F,L){return F.width>L.width?F:L})};if(!u)return p;for(var g="…",y=function(B){var F=d.slice(0,B),L=zK({breakAll:c,style:l,children:F+g}).wordsWithComputedWidth,P=f(L),W=P.length>o||m(P).width>Number(s);return[W,P]},v=0,x=d.length-1,b=0,w;v<=x&&b<=d.length-1;){var _=Math.floor((v+x)/2),C=_-1,E=y(C),N=pF(E,2),I=N[0],$=N[1],O=y(_),k=pF(O,1),R=k[0];if(!I&&!R&&(v=_+1),I&&R&&(x=_-1),!I&&R){w=$;break}b++}return w||p},gF=function(e){var n=yt(e)?[]:e.toString().split(WK);return[{words:n}]},Y2e=function(e){var n=e.width,r=e.scaleToFit,s=e.children,i=e.style,o=e.breakAll,a=e.maxLines;if((n||r)&&!Va.isSsr){var l,c,u=zK({breakAll:o,children:s,style:i});if(u){var d=u.wordsWithComputedWidth,f=u.spaceWidth;l=d,c=f}else return gF(s);return X2e({breakAll:o,children:s,maxLines:a,style:i},l,c,n,r)}return gF(s)},yF="#808080",ud=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.lineHeight,a=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,f=e.textAnchor,p=f===void 0?"start":f,m=e.verticalAnchor,g=m===void 0?"end":m,y=e.fill,v=y===void 0?yF:y,x=hF(e,W2e),b=S.useMemo(function(){return Y2e({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),w=x.dx,_=x.dy,C=x.angle,E=x.className,N=x.breakAll,I=hF(x,z2e);if(!Jn(r)||!Jn(i))return null;var $=r+(pe(w)?w:0),O=i+(pe(_)?_:0),k;switch(g){case"start":k=XC("calc(".concat(c,")"));break;case"middle":k=XC("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:k=XC("calc(".concat(b.length-1," * -").concat(a,")"));break}var R=[];if(d){var M=b[0].width,B=x.width;R.push("scale(".concat((pe(B)?B/M:1)/M,")"))}return C&&R.push("rotate(".concat(C,", ").concat($,", ").concat(O,")")),R.length&&(I.transform=R.join(" ")),j.createElement("text",KT({},Xe(I,!0),{x:$,y:O,className:at("recharts-text",E),textAnchor:p,fill:v.includes("url")?yF:v}),b.map(function(F,L){var P=F.words.join(N?"":" ");return j.createElement("tspan",{x:$,dy:L===0?k:a,key:"".concat(P,"-").concat(L)},P)}))};function yc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Q2e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uP(t){let e,n,r;t.length!==2?(e=yc,n=(a,l)=>yc(t(a),l),r=(a,l)=>t(a)-l):(e=t===yc||t===Q2e?t:J2e,n=t,r=t);function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=s(a,l,c,u-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:s,center:o,right:i}}function J2e(){return 0}function VK(t){return t===null?NaN:+t}function*Z2e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const eRe=uP(yc),Lv=eRe.right;uP(VK).center;class vF extends Map{constructor(e,n=rRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(xF(this,e))}has(e){return super.has(xF(this,e))}set(e,n){return super.set(tRe(this,e),n)}delete(e){return super.delete(nRe(this,e))}}function xF({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function tRe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function nRe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function rRe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function sRe(t=yc){if(t===yc)return HK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function HK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const iRe=Math.sqrt(50),oRe=Math.sqrt(10),aRe=Math.sqrt(2);function rw(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=iRe?10:i>=oRe?5:i>=aRe?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?rw(t,e,n*2):[a,l,c]}function XT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,o]=r?rw(e,t,n):rw(t,e,n);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function YT(t,e,n){return e=+e,t=+t,n=+n,rw(t,e,n)[2]}function QT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?YT(e,t,n):YT(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function bF(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function wF(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function GK(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?HK:sRe(s);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(e-c*d/l+f)),m=Math.min(r,Math.floor(e+(l-c)*d/l+f));GK(t,e,p,m,s)}const i=t[e];let o=n,a=r;for(wm(t,n,e),s(t[r],i)>0&&wm(t,n,r);o<a;){for(wm(t,o,a),++o,--a;s(t[o],i)<0;)++o;for(;s(t[a],i)>0;)--a}s(t[n],i)===0?wm(t,n,a):(++a,wm(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function wm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function lRe(t,e,n){if(t=Float64Array.from(Z2e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return wF(t);if(e>=1)return bF(t);var r,s=(r-1)*e,i=Math.floor(s),o=bF(GK(t,i).subarray(0,i+1)),a=wF(t.subarray(i+1));return o+(a-o)*(s-i)}}function cRe(t,e,n=VK){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),o=+n(t[i],i,t),a=+n(t[i+1],i+1,t);return o+(a-o)*(s-i)}}function uRe(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function Di(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function bl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const JT=Symbol("implicit");function dP(){var t=new vF,e=[],n=[],r=JT;function s(i){let o=t.get(i);if(o===void 0){if(r!==JT)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new vF;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return dP(e,n).unknown(r)},Di.apply(s,arguments),s}function py(){var t=dP().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,p=s<r,m=p?s:r,g=p?r:s;i=(g-m)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),m+=(g-m-i*(f-l))*u,o=i*(1-l),a&&(m=Math.round(m),o=Math.round(o));var y=uRe(f).map(function(v){return m+i*v});return n(p?y.reverse():y)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,s]=f,r=+r,s=+s,d()):[r,s]},t.rangeRound=function(f){return[r,s]=f,r=+r,s=+s,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return py(e(),[r,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Di.apply(d(),arguments)}function qK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return qK(e())},t}function dg(){return qK(py.apply(null,arguments).paddingInner(1))}function fP(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function KK(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Fv(){}var my=.7,sw=1/my,Xf="\\s*([+-]?\\d+)\\s*",gy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dRe=/^#([0-9a-f]{3,8})$/,fRe=new RegExp(`^rgb\\(${Xf},${Xf},${Xf}\\)$`),hRe=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),pRe=new RegExp(`^rgba\\(${Xf},${Xf},${Xf},${gy}\\)$`),mRe=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${gy}\\)$`),gRe=new RegExp(`^hsl\\(${gy},${Yo},${Yo}\\)$`),yRe=new RegExp(`^hsla\\(${gy},${Yo},${Yo},${gy}\\)$`),SF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fP(Fv,yy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_F,formatHex:_F,formatHex8:vRe,formatHsl:xRe,formatRgb:CF,toString:CF});function _F(){return this.rgb().formatHex()}function vRe(){return this.rgb().formatHex8()}function xRe(){return XK(this).formatHsl()}function CF(){return this.rgb().formatRgb()}function yy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=dRe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?NF(e):n===3?new Ss(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fRe.exec(t))?new Ss(e[1],e[2],e[3],1):(e=hRe.exec(t))?new Ss(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=pRe.exec(t))?Bx(e[1],e[2],e[3],e[4]):(e=mRe.exec(t))?Bx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=gRe.exec(t))?IF(e[1],e[2]/100,e[3]/100,1):(e=yRe.exec(t))?IF(e[1],e[2]/100,e[3]/100,e[4]):SF.hasOwnProperty(t)?NF(SF[t]):t==="transparent"?new Ss(NaN,NaN,NaN,0):null}function NF(t){return new Ss(t>>16&255,t>>8&255,t&255,1)}function Bx(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ss(t,e,n,r)}function bRe(t){return t instanceof Fv||(t=yy(t)),t?(t=t.rgb(),new Ss(t.r,t.g,t.b,t.opacity)):new Ss}function ZT(t,e,n,r){return arguments.length===1?bRe(t):new Ss(t,e,n,r??1)}function Ss(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}fP(Ss,ZT,KK(Fv,{brighter(t){return t=t==null?sw:Math.pow(sw,t),new Ss(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?my:Math.pow(my,t),new Ss(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ss(Uu(this.r),Uu(this.g),Uu(this.b),iw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:EF,formatHex:EF,formatHex8:wRe,formatRgb:TF,toString:TF}));function EF(){return`#${Eu(this.r)}${Eu(this.g)}${Eu(this.b)}`}function wRe(){return`#${Eu(this.r)}${Eu(this.g)}${Eu(this.b)}${Eu((isNaN(this.opacity)?1:this.opacity)*255)}`}function TF(){const t=iw(this.opacity);return`${t===1?"rgb(":"rgba("}${Uu(this.r)}, ${Uu(this.g)}, ${Uu(this.b)}${t===1?")":`, ${t})`}`}function iw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Uu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Eu(t){return t=Uu(t),(t<16?"0":"")+t.toString(16)}function IF(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ro(t,e,n,r)}function XK(t){if(t instanceof ro)return new ro(t.h,t.s,t.l,t.opacity);if(t instanceof Fv||(t=yy(t)),!t)return new ro;if(t instanceof ro)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(e===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new ro(o,a,l,t.opacity)}function SRe(t,e,n,r){return arguments.length===1?XK(t):new ro(t,e,n,r??1)}function ro(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}fP(ro,SRe,KK(Fv,{brighter(t){return t=t==null?sw:Math.pow(sw,t),new ro(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?my:Math.pow(my,t),new ro(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Ss(YC(t>=240?t-240:t+120,s,r),YC(t,s,r),YC(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new ro(kF(this.h),Ux(this.s),Ux(this.l),iw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=iw(this.opacity);return`${t===1?"hsl(":"hsla("}${kF(this.h)}, ${Ux(this.s)*100}%, ${Ux(this.l)*100}%${t===1?")":`, ${t})`}`}}));function kF(t){return t=(t||0)%360,t<0?t+360:t}function Ux(t){return Math.max(0,Math.min(1,t||0))}function YC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const hP=t=>()=>t;function _Re(t,e){return function(n){return t+n*e}}function CRe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function NRe(t){return(t=+t)==1?YK:function(e,n){return n-e?CRe(e,n,t):hP(isNaN(e)?n:e)}}function YK(t,e){var n=e-t;return n?_Re(t,n):hP(isNaN(t)?e:t)}const OF=function t(e){var n=NRe(e);function r(s,i){var o=n((s=ZT(s)).r,(i=ZT(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),c=YK(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=t,r}(1);function ERe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function TRe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function IRe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=Bp(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<r;++o)i[o]=s[o](a);return i}}function kRe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ow(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ORe(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Bp(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var eI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QC=new RegExp(eI.source,"g");function $Re(t){return function(){return t}}function ARe(t){return function(e){return t(e)+""}}function PRe(t,e){var n=eI.lastIndex=QC.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=eI.exec(t))&&(s=QC.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:ow(r,s)})),n=QC.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?ARe(l[0].x):$Re(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function Bp(t,e){var n=typeof e,r;return e==null||n==="boolean"?hP(e):(n==="number"?ow:n==="string"?(r=yy(e))?(e=r,OF):PRe:e instanceof yy?OF:e instanceof Date?kRe:TRe(e)?ERe:Array.isArray(e)?IRe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ORe:ow)(t,e)}function pP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function RRe(t,e){e===void 0&&(e=t,t=Bp);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[a](o-a)}}function DRe(t){return function(){return t}}function aw(t){return+t}var $F=[0,1];function os(t){return t}function tI(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:DRe(isNaN(e)?NaN:.5)}function jRe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function MRe(t,e,n){var r=t[0],s=t[1],i=e[0],o=e[1];return s<r?(r=tI(s,r),i=n(o,i)):(r=tI(r,s),i=n(i,o)),function(a){return i(r(a))}}function LRe(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=tI(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=Lv(t,a,1,r)-1;return i[l](s[l](a))}}function Bv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function MS(){var t=$F,e=$F,n=Bp,r,s,i,o=os,a,l,c;function u(){var f=Math.min(t.length,e.length);return o!==os&&(o=jRe(t[0],t[f-1])),a=f>2?LRe:MRe,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?i:(l||(l=a(t.map(r),e,n)))(r(o(f)))}return d.invert=function(f){return o(s((c||(c=a(e,t.map(r),ow)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,aw),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=pP,u()},d.clamp=function(f){return arguments.length?(o=f?!0:os,u()):o!==os},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return r=f,s=p,u()}}function mP(){return MS()(os,os)}function FRe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function lw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function kh(t){return t=lw(Math.abs(t)),t?t[1]:NaN}function BRe(t,e){return function(n,r){for(var s=n.length,i=[],o=0,a=t[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(s-=a,s+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function URe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var WRe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vy(t){if(!(e=WRe.exec(t)))throw new Error("invalid format: "+t);var e;return new gP({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}vy.prototype=gP.prototype;function gP(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}gP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zRe(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var QK;function VRe(t,e){var n=lw(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(QK=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+lw(t,Math.max(0,e+i-1))[0]}function AF(t,e){var n=lw(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const PF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:FRe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>AF(t*100,e),r:AF,s:VRe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function RF(t){return t}var DF=Array.prototype.map,jF=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function HRe(t){var e=t.grouping===void 0||t.thousands===void 0?RF:BRe(DF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?RF:URe(DF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=vy(d);var f=d.fill,p=d.align,m=d.sign,g=d.symbol,y=d.zero,v=d.width,x=d.comma,b=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):PF[_]||(b===void 0&&(b=12),w=!0,_="g"),(y||f==="0"&&p==="=")&&(y=!0,f="0",p="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",E=g==="$"?r:/[%p]/.test(_)?o:"",N=PF[_],I=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function $(O){var k=C,R=E,M,B,F;if(_==="c")R=N(O)+R,O="";else{O=+O;var L=O<0||1/O<0;if(O=isNaN(O)?l:N(Math.abs(O),b),w&&(O=zRe(O)),L&&+O==0&&m!=="+"&&(L=!1),k=(L?m==="("?m:a:m==="-"||m==="("?"":m)+k,R=(_==="s"?jF[8+QK/3]:"")+R+(L&&m==="("?")":""),I){for(M=-1,B=O.length;++M<B;)if(F=O.charCodeAt(M),48>F||F>57){R=(F===46?s+O.slice(M+1):O.slice(M))+R,O=O.slice(0,M);break}}}x&&!y&&(O=e(O,1/0));var P=k.length+O.length+R.length,W=P<v?new Array(v-P+1).join(f):"";switch(x&&y&&(O=e(W+O,W.length?v-R.length:1/0),W=""),p){case"<":O=k+O+R+W;break;case"=":O=k+W+O+R;break;case"^":O=W.slice(0,P=W.length>>1)+k+O+R+W.slice(P);break;default:O=W+k+O+R;break}return i(O)}return $.toString=function(){return d+""},$}function u(d,f){var p=c((d=vy(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(kh(f)/3)))*3,g=Math.pow(10,-m),y=jF[8+m/3];return function(v){return p(g*v)+y}}return{format:c,formatPrefix:u}}var Wx,yP,JK;GRe({thousands:",",grouping:[3],currency:["$",""]});function GRe(t){return Wx=HRe(t),yP=Wx.format,JK=Wx.formatPrefix,Wx}function qRe(t){return Math.max(0,-kh(Math.abs(t)))}function KRe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kh(e)/3)))*3-kh(Math.abs(t)))}function XRe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,kh(e)-kh(t))+1}function ZK(t,e,n,r){var s=QT(t,e,n),i;switch(r=vy(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=KRe(s,o))&&(r.precision=i),JK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=XRe(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=qRe(s))&&(r.precision=i-(r.type==="%")*2);break}}return yP(r)}function Hc(t){var e=t.domain;return t.ticks=function(n){var r=e();return XT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return ZK(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,o=r[s],a=r[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=YT(o,a,n),c===l)return r[s]=o,r[i]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function cw(){var t=mP();return t.copy=function(){return Bv(t,cw())},Di.apply(t,arguments),Hc(t)}function e9(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,aw),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return e9(t).unknown(e)},t=arguments.length?Array.from(t,aw):[0,1],Hc(n)}function t9(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],o;return i<s&&(o=n,n=r,r=o,o=s,s=i,i=o),t[n]=e.floor(s),t[r]=e.ceil(i),t}function MF(t){return Math.log(t)}function LF(t){return Math.exp(t)}function YRe(t){return-Math.log(-t)}function QRe(t){return-Math.exp(-t)}function JRe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ZRe(t){return t===10?JRe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function eDe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function FF(t){return(e,n)=>-t(-e,n)}function vP(t){const e=t(MF,LF),n=e.domain;let r=10,s,i;function o(){return s=eDe(r),i=ZRe(r),n()[0]<0?(s=FF(s),i=FF(i),t(YRe,QRe)):t(MF,LF),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let f=s(c),p=s(u),m,g;const y=a==null?10:+a;let v=[];if(!(r%1)&&p-f<y){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(m=1;m<r;++m)if(g=f<0?m/i(-f):m*i(f),!(g<c)){if(g>u)break;v.push(g)}}else for(;f<=p;++f)for(m=r-1;m>=1;--m)if(g=f>0?m/i(-f):m*i(f),!(g<c)){if(g>u)break;v.push(g)}v.length*2<y&&(v=XT(c,u,y))}else v=XT(f,p,Math.min(p-f,y)).map(i);return d?v.reverse():v},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=vy(l)).precision==null&&(l.trim=!0),l=yP(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let d=u/i(Math.round(s(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(t9(n(),{floor:a=>i(Math.floor(s(a))),ceil:a=>i(Math.ceil(s(a)))})),e}function n9(){const t=vP(MS()).domain([1,10]);return t.copy=()=>Bv(t,n9()).base(t.base()),Di.apply(t,arguments),t}function BF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function UF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function xP(t){var e=1,n=t(BF(e),UF(e));return n.constant=function(r){return arguments.length?t(BF(e=+r),UF(e)):e},Hc(n)}function r9(){var t=xP(MS());return t.copy=function(){return Bv(t,r9()).constant(t.constant())},Di.apply(t,arguments)}function WF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function tDe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function nDe(t){return t<0?-t*t:t*t}function bP(t){var e=t(os,os),n=1;function r(){return n===1?t(os,os):n===.5?t(tDe,nDe):t(WF(n),WF(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},Hc(e)}function wP(){var t=bP(MS());return t.copy=function(){return Bv(t,wP()).exponent(t.exponent())},Di.apply(t,arguments),t}function rDe(){return wP.apply(null,arguments).exponent(.5)}function zF(t){return Math.sign(t)*t*t}function sDe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function s9(){var t=mP(),e=[0,1],n=!1,r;function s(i){var o=sDe(t(i));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(i){return t.invert(zF(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,aw)).map(zF)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return s9(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Di.apply(s,arguments),Hc(s)}function i9(){var t=[],e=[],n=[],r;function s(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=cRe(t,o/a);return i}function i(o){return o==null||isNaN(o=+o)?r:e[Lv(n,o)]}return i.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(yc),s()},i.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return i9().domain(t).range(e).unknown(r)},Di.apply(i,arguments)}function o9(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[Lv(r,l,0,n)]:i}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return o9().domain([t,e]).range(s).unknown(i)},Di.apply(Hc(o),arguments)}function a9(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[Lv(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return a9().domain(t).range(e).unknown(n)},Di.apply(s,arguments)}const JC=new Date,ZC=new Date;function er(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,a)=>{const l=[];if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;let c;do l.push(c=new Date(+i)),e(i,a),t(i);while(c<i&&i<o);return l},s.filter=i=>er(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!i(o););else for(;--a>=0;)for(;e(o,1),!i(o););}),n&&(s.count=(i,o)=>(JC.setTime(+i),ZC.setTime(+o),t(JC),t(ZC),Math.floor(n(JC,ZC))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?o=>r(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const uw=er(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);uw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?er(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):uw);uw.range;const Da=1e3,wi=Da*60,ja=wi*60,sl=ja*24,SP=sl*7,VF=sl*30,eN=sl*365,Tu=er(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Da)},(t,e)=>(e-t)/Da,t=>t.getUTCSeconds());Tu.range;const _P=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Da)},(t,e)=>{t.setTime(+t+e*wi)},(t,e)=>(e-t)/wi,t=>t.getMinutes());_P.range;const CP=er(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*wi)},(t,e)=>(e-t)/wi,t=>t.getUTCMinutes());CP.range;const NP=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Da-t.getMinutes()*wi)},(t,e)=>{t.setTime(+t+e*ja)},(t,e)=>(e-t)/ja,t=>t.getHours());NP.range;const EP=er(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ja)},(t,e)=>(e-t)/ja,t=>t.getUTCHours());EP.range;const Uv=er(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wi)/sl,t=>t.getDate()-1);Uv.range;const LS=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sl,t=>t.getUTCDate()-1);LS.range;const l9=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sl,t=>Math.floor(t/sl));l9.range;function jd(t){return er(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*wi)/SP)}const FS=jd(0),dw=jd(1),iDe=jd(2),oDe=jd(3),Oh=jd(4),aDe=jd(5),lDe=jd(6);FS.range;dw.range;iDe.range;oDe.range;Oh.range;aDe.range;lDe.range;function Md(t){return er(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/SP)}const BS=Md(0),fw=Md(1),cDe=Md(2),uDe=Md(3),$h=Md(4),dDe=Md(5),fDe=Md(6);BS.range;fw.range;cDe.range;uDe.range;$h.range;dDe.range;fDe.range;const TP=er(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());TP.range;const IP=er(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());IP.range;const il=er(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());il.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});il.range;const ol=er(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ol.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ol.range;function c9(t,e,n,r,s,i){const o=[[Tu,1,Da],[Tu,5,5*Da],[Tu,15,15*Da],[Tu,30,30*Da],[i,1,wi],[i,5,5*wi],[i,15,15*wi],[i,30,30*wi],[s,1,ja],[s,3,3*ja],[s,6,6*ja],[s,12,12*ja],[r,1,sl],[r,2,2*sl],[n,1,SP],[e,1,VF],[e,3,3*VF],[t,1,eN]];function a(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const p=d&&typeof d.range=="function"?d:l(c,u,d),m=p?p.range(c,+u+1):[];return f?m.reverse():m}function l(c,u,d){const f=Math.abs(u-c)/d,p=uP(([,,y])=>y).right(o,f);if(p===o.length)return t.every(QT(c/eN,u/eN,d));if(p===0)return uw.every(Math.max(QT(c,u,d),1));const[m,g]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return m.every(g)}return[a,l]}const[hDe,pDe]=c9(ol,IP,BS,l9,EP,CP),[mDe,gDe]=c9(il,TP,FS,Uv,NP,_P);function tN(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function nN(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function yDe(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=_m(s),u=Cm(s),d=_m(i),f=Cm(i),p=_m(o),m=Cm(o),g=_m(a),y=Cm(a),v=_m(l),x=Cm(l),b={a:L,A:P,b:W,B:q,c:null,d:YF,e:YF,f:BDe,g:YDe,G:JDe,H:MDe,I:LDe,j:FDe,L:u9,m:UDe,M:WDe,p:H,q:Y,Q:ZF,s:e3,S:zDe,u:VDe,U:HDe,V:GDe,w:qDe,W:KDe,x:null,X:null,y:XDe,Y:QDe,Z:ZDe,"%":JF},w={a:se,A:Se,b:De,B:Pe,c:null,d:QF,e:QF,f:rje,g:hje,G:mje,H:eje,I:tje,j:nje,L:f9,m:sje,M:ije,p:de,q:Ee,Q:ZF,s:e3,S:oje,u:aje,U:lje,V:cje,w:uje,W:dje,x:null,X:null,y:fje,Y:pje,Z:gje,"%":JF},_={a:$,A:O,b:k,B:R,c:M,d:KF,e:KF,f:PDe,g:qF,G:GF,H:XF,I:XF,j:kDe,L:ADe,m:IDe,M:ODe,p:I,q:TDe,Q:DDe,s:jDe,S:$De,u:SDe,U:_De,V:CDe,w:wDe,W:NDe,x:B,X:F,y:qF,Y:GF,Z:EDe,"%":RDe};b.x=C(n,b),b.X=C(r,b),b.c=C(e,b),w.x=C(n,w),w.X=C(r,w),w.c=C(e,w);function C(J,ie){return function(Z){var V=[],ge=-1,ve=0,Fe=J.length,je,mt,Ot;for(Z instanceof Date||(Z=new Date(+Z));++ge<Fe;)J.charCodeAt(ge)===37&&(V.push(J.slice(ve,ge)),(mt=HF[je=J.charAt(++ge)])!=null?je=J.charAt(++ge):mt=je==="e"?" ":"0",(Ot=ie[je])&&(je=Ot(Z,mt)),V.push(je),ve=ge+1);return V.push(J.slice(ve,ge)),V.join("")}}function E(J,ie){return function(Z){var V=Sm(1900,void 0,1),ge=N(V,J,Z+="",0),ve,Fe;if(ge!=Z.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(ie&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(ve=nN(Sm(V.y,0,1)),Fe=ve.getUTCDay(),ve=Fe>4||Fe===0?fw.ceil(ve):fw(ve),ve=LS.offset(ve,(V.V-1)*7),V.y=ve.getUTCFullYear(),V.m=ve.getUTCMonth(),V.d=ve.getUTCDate()+(V.w+6)%7):(ve=tN(Sm(V.y,0,1)),Fe=ve.getDay(),ve=Fe>4||Fe===0?dw.ceil(ve):dw(ve),ve=Uv.offset(ve,(V.V-1)*7),V.y=ve.getFullYear(),V.m=ve.getMonth(),V.d=ve.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),Fe="Z"in V?nN(Sm(V.y,0,1)).getUTCDay():tN(Sm(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(Fe+5)%7:V.w+V.U*7-(Fe+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,nN(V)):tN(V)}}function N(J,ie,Z,V){for(var ge=0,ve=ie.length,Fe=Z.length,je,mt;ge<ve;){if(V>=Fe)return-1;if(je=ie.charCodeAt(ge++),je===37){if(je=ie.charAt(ge++),mt=_[je in HF?ie.charAt(ge++):je],!mt||(V=mt(J,Z,V))<0)return-1}else if(je!=Z.charCodeAt(V++))return-1}return V}function I(J,ie,Z){var V=c.exec(ie.slice(Z));return V?(J.p=u.get(V[0].toLowerCase()),Z+V[0].length):-1}function $(J,ie,Z){var V=p.exec(ie.slice(Z));return V?(J.w=m.get(V[0].toLowerCase()),Z+V[0].length):-1}function O(J,ie,Z){var V=d.exec(ie.slice(Z));return V?(J.w=f.get(V[0].toLowerCase()),Z+V[0].length):-1}function k(J,ie,Z){var V=v.exec(ie.slice(Z));return V?(J.m=x.get(V[0].toLowerCase()),Z+V[0].length):-1}function R(J,ie,Z){var V=g.exec(ie.slice(Z));return V?(J.m=y.get(V[0].toLowerCase()),Z+V[0].length):-1}function M(J,ie,Z){return N(J,e,ie,Z)}function B(J,ie,Z){return N(J,n,ie,Z)}function F(J,ie,Z){return N(J,r,ie,Z)}function L(J){return o[J.getDay()]}function P(J){return i[J.getDay()]}function W(J){return l[J.getMonth()]}function q(J){return a[J.getMonth()]}function H(J){return s[+(J.getHours()>=12)]}function Y(J){return 1+~~(J.getMonth()/3)}function se(J){return o[J.getUTCDay()]}function Se(J){return i[J.getUTCDay()]}function De(J){return l[J.getUTCMonth()]}function Pe(J){return a[J.getUTCMonth()]}function de(J){return s[+(J.getUTCHours()>=12)]}function Ee(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var ie=C(J+="",b);return ie.toString=function(){return J},ie},parse:function(J){var ie=E(J+="",!1);return ie.toString=function(){return J},ie},utcFormat:function(J){var ie=C(J+="",w);return ie.toString=function(){return J},ie},utcParse:function(J){var ie=E(J+="",!0);return ie.toString=function(){return J},ie}}}var HF={"-":"",_:" ",0:"0"},br=/^\s*\d+/,vDe=/^%/,xDe=/[\\^$*+?|[\]().{}]/g;function Et(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function bDe(t){return t.replace(xDe,"\\$&")}function _m(t){return new RegExp("^(?:"+t.map(bDe).join("|")+")","i")}function Cm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function wDe(t,e,n){var r=br.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function SDe(t,e,n){var r=br.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function _De(t,e,n){var r=br.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function CDe(t,e,n){var r=br.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function NDe(t,e,n){var r=br.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function GF(t,e,n){var r=br.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qF(t,e,n){var r=br.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function EDe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function TDe(t,e,n){var r=br.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function IDe(t,e,n){var r=br.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function KF(t,e,n){var r=br.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function kDe(t,e,n){var r=br.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function XF(t,e,n){var r=br.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ODe(t,e,n){var r=br.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function $De(t,e,n){var r=br.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ADe(t,e,n){var r=br.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function PDe(t,e,n){var r=br.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function RDe(t,e,n){var r=vDe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function DDe(t,e,n){var r=br.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function jDe(t,e,n){var r=br.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function YF(t,e){return Et(t.getDate(),e,2)}function MDe(t,e){return Et(t.getHours(),e,2)}function LDe(t,e){return Et(t.getHours()%12||12,e,2)}function FDe(t,e){return Et(1+Uv.count(il(t),t),e,3)}function u9(t,e){return Et(t.getMilliseconds(),e,3)}function BDe(t,e){return u9(t,e)+"000"}function UDe(t,e){return Et(t.getMonth()+1,e,2)}function WDe(t,e){return Et(t.getMinutes(),e,2)}function zDe(t,e){return Et(t.getSeconds(),e,2)}function VDe(t){var e=t.getDay();return e===0?7:e}function HDe(t,e){return Et(FS.count(il(t)-1,t),e,2)}function d9(t){var e=t.getDay();return e>=4||e===0?Oh(t):Oh.ceil(t)}function GDe(t,e){return t=d9(t),Et(Oh.count(il(t),t)+(il(t).getDay()===4),e,2)}function qDe(t){return t.getDay()}function KDe(t,e){return Et(dw.count(il(t)-1,t),e,2)}function XDe(t,e){return Et(t.getFullYear()%100,e,2)}function YDe(t,e){return t=d9(t),Et(t.getFullYear()%100,e,2)}function QDe(t,e){return Et(t.getFullYear()%1e4,e,4)}function JDe(t,e){var n=t.getDay();return t=n>=4||n===0?Oh(t):Oh.ceil(t),Et(t.getFullYear()%1e4,e,4)}function ZDe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Et(e/60|0,"0",2)+Et(e%60,"0",2)}function QF(t,e){return Et(t.getUTCDate(),e,2)}function eje(t,e){return Et(t.getUTCHours(),e,2)}function tje(t,e){return Et(t.getUTCHours()%12||12,e,2)}function nje(t,e){return Et(1+LS.count(ol(t),t),e,3)}function f9(t,e){return Et(t.getUTCMilliseconds(),e,3)}function rje(t,e){return f9(t,e)+"000"}function sje(t,e){return Et(t.getUTCMonth()+1,e,2)}function ije(t,e){return Et(t.getUTCMinutes(),e,2)}function oje(t,e){return Et(t.getUTCSeconds(),e,2)}function aje(t){var e=t.getUTCDay();return e===0?7:e}function lje(t,e){return Et(BS.count(ol(t)-1,t),e,2)}function h9(t){var e=t.getUTCDay();return e>=4||e===0?$h(t):$h.ceil(t)}function cje(t,e){return t=h9(t),Et($h.count(ol(t),t)+(ol(t).getUTCDay()===4),e,2)}function uje(t){return t.getUTCDay()}function dje(t,e){return Et(fw.count(ol(t)-1,t),e,2)}function fje(t,e){return Et(t.getUTCFullYear()%100,e,2)}function hje(t,e){return t=h9(t),Et(t.getUTCFullYear()%100,e,2)}function pje(t,e){return Et(t.getUTCFullYear()%1e4,e,4)}function mje(t,e){var n=t.getUTCDay();return t=n>=4||n===0?$h(t):$h.ceil(t),Et(t.getUTCFullYear()%1e4,e,4)}function gje(){return"+0000"}function JF(){return"%"}function ZF(t){return+t}function e3(t){return Math.floor(+t/1e3)}var ef,p9,m9;yje({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yje(t){return ef=yDe(t),p9=ef.format,ef.parse,m9=ef.utcFormat,ef.utcParse,ef}function vje(t){return new Date(t)}function xje(t){return t instanceof Date?+t:+new Date(+t)}function kP(t,e,n,r,s,i,o,a,l,c){var u=mP(),d=u.invert,f=u.domain,p=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),v=c("%a %d"),x=c("%b %d"),b=c("%B"),w=c("%Y");function _(C){return(l(C)<C?p:a(C)<C?m:o(C)<C?g:i(C)<C?y:r(C)<C?s(C)<C?v:x:n(C)<C?b:w)(C)}return u.invert=function(C){return new Date(d(C))},u.domain=function(C){return arguments.length?f(Array.from(C,xje)):f().map(vje)},u.ticks=function(C){var E=f();return t(E[0],E[E.length-1],C??10)},u.tickFormat=function(C,E){return E==null?_:c(E)},u.nice=function(C){var E=f();return(!C||typeof C.range!="function")&&(C=e(E[0],E[E.length-1],C??10)),C?f(t9(E,C)):u},u.copy=function(){return Bv(u,kP(t,e,n,r,s,i,o,a,l,c))},u}function bje(){return Di.apply(kP(mDe,gDe,il,TP,FS,Uv,NP,_P,Tu,p9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wje(){return Di.apply(kP(hDe,pDe,ol,IP,BS,LS,EP,CP,Tu,m9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function US(){var t=0,e=1,n,r,s,i,o=os,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(s===0?.5:(d=(i(d)-n)*s,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(f){var p,m;return arguments.length?([p,m]=f,o=d(p,m),c):[o(0),o(1)]}}return c.range=u(Bp),c.rangeRound=u(pP),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return i=d,n=d(t),r=d(e),s=n===r?0:1/(r-n),c}}function Gc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function g9(){var t=Hc(US()(os));return t.copy=function(){return Gc(t,g9())},bl.apply(t,arguments)}function y9(){var t=vP(US()).domain([1,10]);return t.copy=function(){return Gc(t,y9()).base(t.base())},bl.apply(t,arguments)}function v9(){var t=xP(US());return t.copy=function(){return Gc(t,v9()).constant(t.constant())},bl.apply(t,arguments)}function OP(){var t=bP(US());return t.copy=function(){return Gc(t,OP()).exponent(t.exponent())},bl.apply(t,arguments)}function Sje(){return OP.apply(null,arguments).exponent(.5)}function x9(){var t=[],e=os;function n(r){if(r!=null&&!isNaN(r=+r))return e((Lv(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(yc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>lRe(t,i/r))},n.copy=function(){return x9(e).domain(t)},bl.apply(n,arguments)}function WS(){var t=0,e=.5,n=1,r=1,s,i,o,a,l,c=os,u,d=!1,f;function p(g){return isNaN(g=+g)?f:(g=.5+((g=+u(g))-i)*(r*g<r*i?a:l),c(d?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([t,e,n]=g,s=u(t=+t),i=u(e=+e),o=u(n=+n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,p):[t,e,n]},p.clamp=function(g){return arguments.length?(d=!!g,p):d},p.interpolator=function(g){return arguments.length?(c=g,p):c};function m(g){return function(y){var v,x,b;return arguments.length?([v,x,b]=y,c=RRe(g,[v,x,b]),p):[c(0),c(.5),c(1)]}}return p.range=m(Bp),p.rangeRound=m(pP),p.unknown=function(g){return arguments.length?(f=g,p):f},function(g){return u=g,s=g(t),i=g(e),o=g(n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,p}}function b9(){var t=Hc(WS()(os));return t.copy=function(){return Gc(t,b9())},bl.apply(t,arguments)}function w9(){var t=vP(WS()).domain([.1,1,10]);return t.copy=function(){return Gc(t,w9()).base(t.base())},bl.apply(t,arguments)}function S9(){var t=xP(WS());return t.copy=function(){return Gc(t,S9()).constant(t.constant())},bl.apply(t,arguments)}function $P(){var t=bP(WS());return t.copy=function(){return Gc(t,$P()).exponent(t.exponent())},bl.apply(t,arguments)}function _je(){return $P.apply(null,arguments).exponent(.5)}const t3=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:py,scaleDiverging:b9,scaleDivergingLog:w9,scaleDivergingPow:$P,scaleDivergingSqrt:_je,scaleDivergingSymlog:S9,scaleIdentity:e9,scaleImplicit:JT,scaleLinear:cw,scaleLog:n9,scaleOrdinal:dP,scalePoint:dg,scalePow:wP,scaleQuantile:i9,scaleQuantize:o9,scaleRadial:s9,scaleSequential:g9,scaleSequentialLog:y9,scaleSequentialPow:OP,scaleSequentialQuantile:x9,scaleSequentialSqrt:Sje,scaleSequentialSymlog:v9,scaleSqrt:rDe,scaleSymlog:r9,scaleThreshold:a9,scaleTime:bje,scaleUtc:wje,tickFormat:ZK},Symbol.toStringTag,{value:"Module"}));var Cje=Ap;function Nje(t,e,n){for(var r=-1,s=t.length;++r<s;){var i=t[r],o=e(i);if(o!=null&&(a===void 0?o===o&&!Cje(o):n(o,a)))var a=o,l=i}return l}var zS=Nje;function Eje(t,e){return t>e}var _9=Eje,Tje=zS,Ije=_9,kje=Fp;function Oje(t){return t&&t.length?Tje(t,kje,Ije):void 0}var $je=Oje;const VS=Tt($je);function Aje(t,e){return t<e}var C9=Aje,Pje=zS,Rje=C9,Dje=Fp;function jje(t){return t&&t.length?Pje(t,Dje,Rje):void 0}var Mje=jje;const HS=Tt(Mje);var Lje=VA,Fje=da,Bje=AK,Uje=$s;function Wje(t,e){var n=Uje(t)?Lje:Bje;return n(t,Fje(e))}var zje=Wje,Vje=OK,Hje=zje;function Gje(t,e){return Vje(Hje(t,e),1)}var qje=Gje;const Kje=Tt(qje);var Xje=iP;function Yje(t,e){return Xje(t,e)}var Qje=Yje;const GS=Tt(Qje);var Up=1e9,Jje={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PP,mn=!0,$i="[DecimalError] ",Wu=$i+"Invalid argument: ",AP=$i+"Exponent out of range: ",Wp=Math.floor,fu=Math.pow,Zje=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hs,ir=1e7,ln=7,N9=9007199254740991,hw=Wp(N9/ln),ke={};ke.absoluteValue=ke.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ke.comparedTo=ke.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};ke.decimalPlaces=ke.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*ln;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ke.dividedBy=ke.div=function(t){return Ha(this,new this.constructor(t))};ke.dividedToIntegerBy=ke.idiv=function(t){var e=this,n=e.constructor;return Ht(Ha(e,new n(t),0,1),n.precision)};ke.equals=ke.eq=function(t){return!this.cmp(t)};ke.exponent=function(){return Wn(this)};ke.greaterThan=ke.gt=function(t){return this.cmp(t)>0};ke.greaterThanOrEqualTo=ke.gte=function(t){return this.cmp(t)>=0};ke.isInteger=ke.isint=function(){return this.e>this.d.length-2};ke.isNegative=ke.isneg=function(){return this.s<0};ke.isPositive=ke.ispos=function(){return this.s>0};ke.isZero=function(){return this.s===0};ke.lessThan=ke.lt=function(t){return this.cmp(t)<0};ke.lessThanOrEqualTo=ke.lte=function(t){return this.cmp(t)<1};ke.logarithm=ke.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Hs))throw Error($i+"NaN");if(n.s<1)throw Error($i+(n.s?"NaN":"-Infinity"));return n.eq(Hs)?new r(0):(mn=!1,e=Ha(xy(n,i),xy(t,i),i),mn=!0,Ht(e,s))};ke.minus=ke.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?I9(e,t):E9(e,(t.s=-t.s,t))};ke.modulo=ke.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error($i+"NaN");return n.s?(mn=!1,e=Ha(n,t,0,1).times(t),mn=!0,n.minus(e)):Ht(new r(n),s)};ke.naturalExponential=ke.exp=function(){return T9(this)};ke.naturalLogarithm=ke.ln=function(){return xy(this)};ke.negated=ke.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ke.plus=ke.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?E9(e,t):I9(e,(t.s=-t.s,t))};ke.precision=ke.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Wu+t);if(e=Wn(s)+1,r=s.d.length-1,n=r*ln+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ke.squareRoot=ke.sqrt=function(){var t,e,n,r,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error($i+"NaN")}for(t=Wn(a),mn=!1,s=Math.sqrt(+a),s==0||s==1/0?(e=Uo(a.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Wp((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=o=n+3;;)if(i=r,r=i.plus(Ha(a,i,o+2)).times(.5),Uo(i.d).slice(0,o)===(e=Uo(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(Ht(i,n+1,0),i.times(i).eq(a)){r=i;break}}else if(e!="9999")break;o+=4}return mn=!0,Ht(r,n)};ke.times=ke.mul=function(t){var e,n,r,s,i,o,a,l,c,u=this,d=u.constructor,f=u.d,p=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=f.length,c=p.length,l<c&&(i=f,f=p,p=i,o=l,l=c,c=o),i=[],o=l+c,r=o;r--;)i.push(0);for(r=c;--r>=0;){for(e=0,s=l+r;s>r;)a=i[s]+p[r]*f[s-r-1]+e,i[s--]=a%ir|0,e=a/ir|0;i[s]=(i[s]+e)%ir|0}for(;!i[--o];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,mn?Ht(t,d.precision):t};ke.toDecimalPlaces=ke.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(sa(t,0,Up),e===void 0?e=r.rounding:sa(e,0,8),Ht(n,t+Wn(n)+1,e))};ke.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=dd(r,!0):(sa(t,0,Up),e===void 0?e=s.rounding:sa(e,0,8),r=Ht(new s(r),t+1,e),n=dd(r,!0,t+1)),n};ke.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?dd(s):(sa(t,0,Up),e===void 0?e=i.rounding:sa(e,0,8),r=Ht(new i(s),t+Wn(s)+1,e),n=dd(r.abs(),!1,t+Wn(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};ke.toInteger=ke.toint=function(){var t=this,e=t.constructor;return Ht(new e(t),Wn(t)+1,e.rounding)};ke.toNumber=function(){return+this};ke.toPower=ke.pow=function(t){var e,n,r,s,i,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Hs);if(a=new l(a),!a.s){if(t.s<1)throw Error($i+"Infinity");return a}if(a.eq(Hs))return a;if(r=l.precision,t.eq(Hs))return Ht(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,i=a.s,o){if((n=u<0?-u:u)<=N9){for(s=new l(Hs),e=Math.ceil(r/ln+4),mn=!1;n%2&&(s=s.times(a),r3(s.d,e)),n=Wp(n/2),n!==0;)a=a.times(a),r3(a.d,e);return mn=!0,t.s<0?new l(Hs).div(s):Ht(s,r)}}else if(i<0)throw Error($i+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,mn=!1,s=t.times(xy(a,r+c)),mn=!0,s=T9(s),s.s=i,s};ke.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=Wn(s),r=dd(s,n<=i.toExpNeg||n>=i.toExpPos)):(sa(t,1,Up),e===void 0?e=i.rounding:sa(e,0,8),s=Ht(new i(s),t,e),n=Wn(s),r=dd(s,t<=n||n<=i.toExpNeg,t)),r};ke.toSignificantDigits=ke.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(sa(t,1,Up),e===void 0?e=r.rounding:sa(e,0,8)),Ht(new r(n),t,e)};ke.toString=ke.valueOf=ke.val=ke.toJSON=ke[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Wn(t),n=t.constructor;return dd(t,e<=n.toExpNeg||e>=n.toExpPos)};function E9(t,e){var n,r,s,i,o,a,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),mn?Ht(e,d):e;if(l=t.d,c=e.d,o=t.e,s=e.e,l=l.slice(),i=o-s,i){for(i<0?(r=l,i=-i,a=c.length):(r=c,s=o,a=l.length),o=Math.ceil(d/ln),a=o>a?o+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=l.length,i=c.length,a-i<0&&(i=a,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/ir|0,l[i]%=ir;for(n&&(l.unshift(n),++s),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=s,mn?Ht(e,d):e}function sa(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Wu+t)}function Uo(t){var e,n,r,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)r=t[e]+"",n=ln-r.length,n&&(i+=Dl(n)),i+=r;o=t[e],r=o+"",n=ln-r.length,n&&(i+=Dl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ha=function(){function t(r,s){var i,o=0,a=r.length;for(r=r.slice();a--;)i=r[a]*s+o,r[a]=i%ir|0,o=i/ir|0;return o&&r.unshift(o),r}function e(r,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(r[a]!=s[a]){l=r[a]>s[a]?1:-1;break}return l}function n(r,s,i){for(var o=0;i--;)r[i]-=o,o=r[i]<s[i]?1:0,r[i]=o*ir+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,o){var a,l,c,u,d,f,p,m,g,y,v,x,b,w,_,C,E,N,I=r.constructor,$=r.s==s.s?1:-1,O=r.d,k=s.d;if(!r.s)return new I(r);if(!s.s)throw Error($i+"Division by zero");for(l=r.e-s.e,E=k.length,_=O.length,p=new I($),m=p.d=[],c=0;k[c]==(O[c]||0);)++c;if(k[c]>(O[c]||0)&&--l,i==null?x=i=I.precision:o?x=i+(Wn(r)-Wn(s))+1:x=i,x<0)return new I(0);if(x=x/ln+2|0,c=0,E==1)for(u=0,k=k[0],x++;(c<_||u)&&x--;c++)b=u*ir+(O[c]||0),m[c]=b/k|0,u=b%k|0;else{for(u=ir/(k[0]+1)|0,u>1&&(k=t(k,u),O=t(O,u),E=k.length,_=O.length),w=E,g=O.slice(0,E),y=g.length;y<E;)g[y++]=0;N=k.slice(),N.unshift(0),C=k[0],k[1]>=ir/2&&++C;do u=0,a=e(k,g,E,y),a<0?(v=g[0],E!=y&&(v=v*ir+(g[1]||0)),u=v/C|0,u>1?(u>=ir&&(u=ir-1),d=t(k,u),f=d.length,y=g.length,a=e(d,g,f,y),a==1&&(u--,n(d,E<f?N:k,f))):(u==0&&(a=u=1),d=k.slice()),f=d.length,f<y&&d.unshift(0),n(g,d,y),a==-1&&(y=g.length,a=e(k,g,E,y),a<1&&(u++,n(g,E<y?N:k,y))),y=g.length):a===0&&(u++,g=[0]),m[c++]=u,a&&g[0]?g[y++]=O[w]||0:(g=[O[w]],y=1);while((w++<_||g[0]!==void 0)&&x--)}return m[0]||m.shift(),p.e=l,Ht(p,o?i+Wn(p)+1:i)}}();function T9(t,e){var n,r,s,i,o,a,l=0,c=0,u=t.constructor,d=u.precision;if(Wn(t)>16)throw Error(AP+Wn(t));if(!t.s)return new u(Hs);for(e==null?(mn=!1,a=d):a=e,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(fu(2,c))/Math.LN10*2+5|0,a+=r,n=s=i=new u(Hs),u.precision=a;;){if(s=Ht(s.times(t),a),n=n.times(++l),o=i.plus(Ha(s,n,a)),Uo(o.d).slice(0,a)===Uo(i.d).slice(0,a)){for(;c--;)i=Ht(i.times(i),a);return u.precision=d,e==null?(mn=!0,Ht(i,d)):i}i=o}}function Wn(t){for(var e=t.e*ln,n=t.d[0];n>=10;n/=10)e++;return e}function rN(t,e,n){if(e>t.LN10.sd())throw mn=!0,n&&(t.precision=n),Error($i+"LN10 precision limit exceeded");return Ht(new t(t.LN10),e)}function Dl(t){for(var e="";t--;)e+="0";return e}function xy(t,e){var n,r,s,i,o,a,l,c,u,d=1,f=10,p=t,m=p.d,g=p.constructor,y=g.precision;if(p.s<1)throw Error($i+(p.s?"NaN":"-Infinity"));if(p.eq(Hs))return new g(0);if(e==null?(mn=!1,c=y):c=e,p.eq(10))return e==null&&(mn=!0),rN(g,c);if(c+=f,g.precision=c,n=Uo(m),r=n.charAt(0),i=Wn(p),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Uo(p.d),r=n.charAt(0),d++;i=Wn(p),r>1?(p=new g("0."+n),i++):p=new g(r+"."+n.slice(1))}else return l=rN(g,c+2,y).times(i+""),p=xy(new g(r+"."+n.slice(1)),c-f).plus(l),g.precision=y,e==null?(mn=!0,Ht(p,y)):p;for(a=o=p=Ha(p.minus(Hs),p.plus(Hs),c),u=Ht(p.times(p),c),s=3;;){if(o=Ht(o.times(u),c),l=a.plus(Ha(o,new g(s),c)),Uo(l.d).slice(0,c)===Uo(a.d).slice(0,c))return a=a.times(2),i!==0&&(a=a.plus(rN(g,c+2,y).times(i+""))),a=Ha(a,new g(d),c),g.precision=y,e==null?(mn=!0,Ht(a,y)):a;a=l,s+=2}}function n3(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=Wp(n/ln),t.d=[],r=(n+1)%ln,n<0&&(r+=ln),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=ln;r<s;)t.d.push(+e.slice(r,r+=ln));e=e.slice(r),r=ln-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),mn&&(t.e>hw||t.e<-hw))throw Error(AP+n)}else t.s=0,t.e=0,t.d=[0];return t}function Ht(t,e,n){var r,s,i,o,a,l,c,u,d=t.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(r=e-o,r<0)r+=ln,s=e,c=d[u=0];else{if(u=Math.ceil((r+1)/ln),i=d.length,u>=i)return t;for(c=i=d[u],o=1;i>=10;i/=10)o++;r%=ln,s=r-ln+o}if(n!==void 0&&(i=fu(10,o-s-1),a=c/i%10|0,l=e<0||d[u+1]!==void 0||c%i,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?s>0?c/fu(10,o-s):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(i=Wn(t),d.length=1,e=e-i-1,d[0]=fu(10,(ln-e%ln)%ln),t.e=Wp(-e/ln)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,i=1,u--):(d.length=u+1,i=fu(10,ln-r),d[u]=s>0?(c/fu(10,o-s)%fu(10,s)|0)*i:0),l)for(;;)if(u==0){(d[0]+=i)==ir&&(d[0]=1,++t.e);break}else{if(d[u]+=i,d[u]!=ir)break;d[u--]=0,i=1}for(r=d.length;d[--r]===0;)d.pop();if(mn&&(t.e>hw||t.e<-hw))throw Error(AP+Wn(t));return t}function I9(t,e){var n,r,s,i,o,a,l,c,u,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),mn?Ht(e,p):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,a=d.length):(n=d,r=c,a=l.length),s=Math.max(Math.ceil(p/ln),a)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=l.length,a=d.length,u=s<a,u&&(a=s),s=0;s<a;s++)if(l[s]!=d[s]){u=l[s]<d[s];break}o=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,s=d.length-a;s>0;--s)l[a++]=0;for(s=d.length;s>o;){if(l[--s]<d[s]){for(i=s;i&&l[--i]===0;)l[i]=ir-1;--l[i],l[s]+=ir}l[s]-=d[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,mn?Ht(e,p):e):new f(0)}function dd(t,e,n){var r,s=Wn(t),i=Uo(t.d),o=i.length;return e?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Dl(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Dl(-s-1)+i,n&&(r=n-o)>0&&(i+=Dl(r))):s>=o?(i+=Dl(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+Dl(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=Dl(r))),t.s<0?"-"+i:i}function r3(t,e){if(t.length>e)return t.length=e,!0}function k9(t){var e,n,r;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Wu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return n3(o,i.toString())}else if(typeof i!="string")throw Error(Wu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Zje.test(i))n3(o,i);else throw Error(Wu+i)}if(s.prototype=ke,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=k9,s.config=s.set=eMe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function eMe(t){if(!t||typeof t!="object")throw Error($i+"Object expected");var e,n,r,s=["precision",1,Up,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(Wp(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(Wu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Wu+n+": "+r);return this}var PP=k9(Jje);Hs=new PP(1);const Bt=PP;function tMe(t){return iMe(t)||sMe(t)||rMe(t)||nMe()}function nMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rMe(t,e){if(t){if(typeof t=="string")return nI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nI(t,e)}}function sMe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function iMe(t){if(Array.isArray(t))return nI(t)}function nI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var oMe=function(e){return e},O9={"@@functional/placeholder":!0},$9=function(e){return e===O9},s3=function(e){return function n(){return arguments.length===0||arguments.length===1&&$9(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},aMe=function t(e,n){return e===1?n:s3(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var o=s.filter(function(a){return a!==O9}).length;return o>=e?n.apply(void 0,s):t(e-o,s3(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=s.map(function(d){return $9(d)?l.shift():d});return n.apply(void 0,tMe(u).concat(l))}))})},qS=function(e){return aMe(e.length,e)},rI=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},lMe=qS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),cMe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return oMe;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(a,l){return l(a)},i.apply(void 0,arguments))}},sI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},A9=function(e){var n=null,r=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(a,l){return a===n[l]})||(n=i,r=e.apply(void 0,i)),r}};function uMe(t){var e;return t===0?e=1:e=Math.floor(new Bt(t).abs().log(10).toNumber())+1,e}function dMe(t,e,n){for(var r=new Bt(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var fMe=qS(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),hMe=qS(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),pMe=qS(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const KS={rangeStep:dMe,getDigitCount:uMe,interpolateNumber:fMe,uninterpolateNumber:hMe,uninterpolateTruncation:pMe};function iI(t){return yMe(t)||gMe(t)||P9(t)||mMe()}function mMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gMe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function yMe(t){if(Array.isArray(t))return oI(t)}function by(t,e){return bMe(t)||xMe(t,e)||P9(t,e)||vMe()}function vMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P9(t,e){if(t){if(typeof t=="string")return oI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oI(t,e)}}function oI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xMe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function bMe(t){if(Array.isArray(t))return t}function R9(t){var e=by(t,2),n=e[0],r=e[1],s=n,i=r;return n>r&&(s=r,i=n),[s,i]}function D9(t,e,n){if(t.lte(0))return new Bt(0);var r=KS.getDigitCount(t.toNumber()),s=new Bt(10).pow(r),i=t.div(s),o=r!==1?.05:.1,a=new Bt(Math.ceil(i.div(o).toNumber())).add(n).mul(o),l=a.mul(s);return e?l:new Bt(Math.ceil(l))}function wMe(t,e,n){var r=1,s=new Bt(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new Bt(10).pow(KS.getDigitCount(t)-1),s=new Bt(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new Bt(Math.floor(t)))}else t===0?s=new Bt(Math.floor((e-1)/2)):n||(s=new Bt(Math.floor(t)));var o=Math.floor((e-1)/2),a=cMe(lMe(function(l){return s.add(new Bt(l-o).mul(r)).toNumber()}),rI);return a(0,e)}function j9(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Bt(0),tickMin:new Bt(0),tickMax:new Bt(0)};var i=D9(new Bt(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new Bt(0):(o=new Bt(t).add(e).div(2),o=o.sub(new Bt(o).mod(i)));var a=Math.ceil(o.sub(t).div(i).toNumber()),l=Math.ceil(new Bt(e).sub(o).div(i).toNumber()),c=a+l+1;return c>n?j9(t,e,n,r,s+1):(c<n&&(l=e>0?l+(n-c):l,a=e>0?a:a+(n-c)),{step:i,tickMin:o.sub(new Bt(a).mul(i)),tickMax:o.add(new Bt(l).mul(i))})}function SMe(t){var e=by(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),a=R9([n,r]),l=by(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(iI(rI(0,s-1).map(function(){return 1/0}))):[].concat(iI(rI(0,s-1).map(function(){return-1/0})),[u]);return n>r?sI(d):d}if(c===u)return wMe(c,s,i);var f=j9(c,u,o,i),p=f.step,m=f.tickMin,g=f.tickMax,y=KS.rangeStep(m,g.add(new Bt(.1).mul(p)),p);return n>r?sI(y):y}function _Me(t,e){var n=by(t,2),r=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=R9([r,s]),a=by(o,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[r,s];if(l===c)return[l];var u=Math.max(e,2),d=D9(new Bt(c).sub(l).div(u-1),i,0),f=[].concat(iI(KS.rangeStep(new Bt(l),new Bt(c).sub(new Bt(.99).mul(d)),d)),[c]);return r>s?sI(f):f}var CMe=A9(SMe),NMe=A9(_Me),EMe="Invariant failed";function fd(t,e){throw new Error(EMe)}var TMe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pw.apply(this,arguments)}function IMe(t,e){return AMe(t)||$Me(t,e)||OMe(t,e)||kMe()}function kMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OMe(t,e){if(t){if(typeof t=="string")return i3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i3(t,e)}}function i3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $Me(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function AMe(t){if(Array.isArray(t))return t}function PMe(t,e){if(t==null)return{};var n=RMe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function DMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F9(r.key),r)}}function MMe(t,e,n){return e&&jMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LMe(t,e,n){return e=mw(e),FMe(t,M9()?Reflect.construct(e,n||[],mw(t).constructor):e.apply(t,n))}function FMe(t,e){if(e&&(Ah(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BMe(t)}function BMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M9=function(){return!!t})()}function mw(t){return mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mw(t)}function UMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aI(t,e)}function aI(t,e){return aI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},aI(t,e)}function L9(t,e,n){return e=F9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F9(t){var e=WMe(t,"string");return Ah(e)=="symbol"?e:e+""}function WMe(t,e){if(Ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XS=function(t){function e(){return DMe(this,e),LMe(this,e,arguments)}return UMe(e,t),MMe(e,[{key:"render",value:function(){var r=this.props,s=r.offset,i=r.layout,o=r.width,a=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,f=PMe(r,TMe),p=Xe(f,!1);this.props.direction==="x"&&u.type!=="number"&&fd();var m=l.map(function(g){var y=c(g,a),v=y.x,x=y.y,b=y.value,w=y.errorVal;if(!w)return null;var _=[],C,E;if(Array.isArray(w)){var N=IMe(w,2);C=N[0],E=N[1]}else C=E=w;if(i==="vertical"){var I=u.scale,$=x+s,O=$+o,k=$-o,R=I(b-C),M=I(b+E);_.push({x1:M,y1:O,x2:M,y2:k}),_.push({x1:R,y1:$,x2:M,y2:$}),_.push({x1:R,y1:O,x2:R,y2:k})}else if(i==="horizontal"){var B=d.scale,F=v+s,L=F-o,P=F+o,W=B(b-C),q=B(b+E);_.push({x1:L,y1:q,x2:P,y2:q}),_.push({x1:F,y1:W,x2:F,y2:q}),_.push({x1:L,y1:W,x2:P,y2:W})}return j.createElement(Dt,pw({className:"recharts-errorBar",key:"bar-".concat(_.map(function(H){return"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))},p),_.map(function(H){return j.createElement("line",pw({},H,{key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))}))});return j.createElement(Dt,{className:"recharts-errorBars"},m)}}])}(j.Component);L9(XS,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});L9(XS,"displayName","ErrorBar");function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}function o3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function tu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o3(Object(n),!0).forEach(function(r){zMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zMe(t,e,n){return e=VMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VMe(t){var e=HMe(t,"string");return wy(e)=="symbol"?e:e+""}function HMe(t,e){if(wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B9=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,i=e.legendContent,o=Fs(n,Bu);if(!o)return null;var a=Bu.defaultProps,l=a!==void 0?tu(tu({},a),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:i==="children"?c=(r||[]).reduce(function(u,d){var f=d.item,p=d.props,m=p.sectors||p.data||[];return u.concat(m.map(function(g){return{type:o.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):c=(r||[]).map(function(u){var d=u.item,f=d.type.defaultProps,p=f!==void 0?tu(tu({},f),d.props):{},m=p.dataKey,g=p.name,y=p.legendType,v=p.hide;return{inactive:v,dataKey:m,type:l.iconType||y||"square",color:RP(d),value:g||m,payload:p}}),tu(tu(tu({},l),Bu.getWithHeight(o,s)),{},{payload:c,item:o})};function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function a3(t){return XMe(t)||KMe(t)||qMe(t)||GMe()}function GMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qMe(t,e){if(t){if(typeof t=="string")return lI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lI(t,e)}}function KMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function XMe(t){if(Array.isArray(t))return lI(t)}function lI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l3(Object(n),!0).forEach(function(r){Yf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yf(t,e,n){return e=YMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YMe(t){var e=QMe(t,"string");return Sy(e)=="symbol"?e:e+""}function QMe(t,e){if(Sy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wr(t,e,n){return yt(t)||yt(e)?n:Jn(e)?Js(t,e,n):Ze(e)?e(t):n}function fg(t,e,n,r){var s=Kje(t,function(a){return Wr(a,e)});if(n==="number"){var i=s.filter(function(a){return pe(a)||parseFloat(a)});return i.length?[HS(i),VS(i)]:[1/0,-1/0]}var o=r?s.filter(function(a){return!yt(a)}):s;return o.map(function(a){return Jn(a)||a instanceof Date?a:""})}var JMe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,c=0;c<a;c++){var u=c>0?s[c-1].coordinate:s[a-1].coordinate,d=s[c].coordinate,f=c>=a-1?s[0].coordinate:s[c+1].coordinate,p=void 0;if(ss(d-u)!==ss(f-d)){var m=[];if(ss(f-d)===ss(l[1]-l[0])){p=f;var g=d+l[1]-l[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{p=u;var y=f+l[1]-l[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){o=s[c].index;break}}else{var x=Math.min(u,f),b=Math.max(u,f);if(e>(x+d)/2&&e<=(b+d)/2){o=s[c].index;break}}}else for(var w=0;w<a;w++)if(w===0&&e<=(r[w].coordinate+r[w+1].coordinate)/2||w>0&&w<a-1&&e>(r[w].coordinate+r[w-1].coordinate)/2&&e<=(r[w].coordinate+r[w+1].coordinate)/2||w===a-1&&e>(r[w].coordinate+r[w-1].coordinate)/2){o=r[w].index;break}return o},RP=function(e){var n,r=e,s=r.type.displayName,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?In(In({},e.type.defaultProps),e.props):e.props,o=i.stroke,a=i.fill,l;switch(s){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:a;break;default:l=a;break}return l},ZMe=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},a=Object.keys(i),l=0,c=a.length;l<c;l++)for(var u=i[a[l]].stackGroups,d=Object.keys(u),f=0,p=d.length;f<p;f++){var m=u[d[f]],g=m.items,y=m.cateAxisId,v=g.filter(function(E){return za(E.type).indexOf("Bar")>=0});if(v&&v.length){var x=v[0].type.defaultProps,b=x!==void 0?In(In({},x),v[0].props):v[0].props,w=b.barSize,_=b[y];o[_]||(o[_]=[]);var C=yt(w)?n:w;o[_].push({item:v[0],stackList:v.slice(1),barSize:yt(C)?void 0:is(C,r,0)})}}return o},eLe=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,a=e.maxBarSize,l=o.length;if(l<1)return null;var c=is(n,s,0,!0),u,d=[];if(o[0].barSize===+o[0].barSize){var f=!1,p=s/l,m=o.reduce(function(w,_){return w+_.barSize||0},0);m+=(l-1)*c,m>=s&&(m-=(l-1)*c,c=0),m>=s&&p>0&&(f=!0,p*=.9,m=l*p);var g=(s-m)/2>>0,y={offset:g-c,size:0};u=o.reduce(function(w,_){var C={item:_.item,position:{offset:y.offset+y.size+c,size:f?p:_.barSize}},E=[].concat(a3(w),[C]);return y=E[E.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(N){E.push({item:N,position:y})}),E},d)}else{var v=is(r,s,0,!0);s-2*v-(l-1)*c<=0&&(c=0);var x=(s-2*v-(l-1)*c)/l;x>1&&(x>>=0);var b=a===+a?Math.min(x,a):x;u=o.reduce(function(w,_,C){var E=[].concat(a3(w),[{item:_.item,position:{offset:v+(x+c)*C+(x-b)/2,size:b}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(N){E.push({item:N,position:E[E.length-1].position})}),E},d)}return u},tLe=function(e,n,r,s){var i=r.children,o=r.width,a=r.margin,l=o-(a.left||0)-(a.right||0),c=B9({children:i,legendWidth:l});if(c){var u=s||{},d=u.width,f=u.height,p=c.align,m=c.verticalAlign,g=c.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&p!=="center"&&pe(e[p]))return In(In({},e),{},Yf({},p,e[p]+(d||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&m!=="middle"&&pe(e[m]))return In(In({},e),{},Yf({},m,e[m]+(f||0)))}return e},nLe=function(e,n,r){return yt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},U9=function(e,n,r,s,i){var o=n.props.children,a=Ti(o,XS).filter(function(c){return nLe(s,i,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=Wr(u,r);if(yt(d))return c;var f=Array.isArray(d)?[HS(d),VS(d)]:[d,d],p=l.reduce(function(m,g){var y=Wr(u,g,0),v=f[0]-Math.abs(Array.isArray(y)?y[0]:y),x=f[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(v,m[0]),Math.max(x,m[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},rLe=function(e,n,r,s,i){var o=n.map(function(a){return U9(e,a,r,i,s)}).filter(function(a){return!yt(a)});return o&&o.length?o.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},W9=function(e,n,r,s,i){var o=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&U9(e,l,c,s)||fg(e,c,r,i)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return o.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},z9=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},V9=function(e,n,r,s){if(s)return e.map(function(l){return l.coordinate});var i,o,a=e.map(function(l){return l.coordinate===n&&(i=!0),l.coordinate===r&&(o=!0),l.coordinate});return i||a.push(n),o||a.push(r),a},Ma=function(e,n,r){if(!e)return null;var s=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,c=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?ss(a[0]-a[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var f=i?i.indexOf(d):d;return{coordinate:s(f)+c,value:d,offset:c}});return u.filter(function(d){return!Rv(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:s(d)+c,value:d,index:f,offset:c}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(d){return{coordinate:s(d)+c,value:d,offset:c}}):s.domain().map(function(d,f){return{coordinate:s(d)+c,value:i?i[d]:d,index:f,offset:c}})},sN=new WeakMap,zx=function(e,n){if(typeof n!="function")return e;sN.has(e)||sN.set(e,new WeakMap);var r=sN.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},H9=function(e,n,r){var s=e.scale,i=e.type,o=e.layout,a=e.axisType;if(s==="auto")return o==="radial"&&a==="radiusAxis"?{scale:py(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:cw(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:dg(),realScaleType:"point"}:i==="category"?{scale:py(),realScaleType:"band"}:{scale:cw(),realScaleType:"linear"};if(Pv(s)){var l="scale".concat(OS(s));return{scale:(t3[l]||dg)(),realScaleType:t3[l]?l:"point"}}return Ze(s)?{scale:s}:{scale:dg(),realScaleType:"point"}},c3=1e-4,G9=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),i=Math.min(s[0],s[1])-c3,o=Math.max(s[0],s[1])+c3,a=e(n[0]),l=e(n[r-1]);(a<i||a>o||l<i||l>o)&&e.domain([n[0],n[r-1]])}},sLe=function(e,n){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===n)return e[r].position;return null},iLe=function(e,n){if(!n||n.length!==2||!pe(n[0])||!pe(n[1]))return e;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[e[0],e[1]];return(!pe(e[0])||e[0]<r)&&(i[0]=r),(!pe(e[1])||e[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<r&&(i[1]=r),i},oLe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0,a=0;a<n;++a){var l=Rv(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1])}},aLe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0;o<n;++o){var a=Rv(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},lLe={sign:oLe,expand:TNe,none:Ch,silhouette:INe,wiggle:kNe,positive:aLe},cLe=function(e,n,r){var s=n.map(function(a){return a.props.dataKey}),i=lLe[r],o=ENe().keys(s).value(function(a,l){return+Wr(a,l,0)}).order(PT).offset(i);return o(e)},uLe=function(e,n,r,s,i,o){if(!e)return null;var a=o?n.reverse():n,l={},c=a.reduce(function(d,f){var p,m=(p=f.type)!==null&&p!==void 0&&p.defaultProps?In(In({},f.type.defaultProps),f.props):f.props,g=m.stackId,y=m.hide;if(y)return d;var v=m[r],x=d[v]||{hasStack:!1,stackGroups:{}};if(Jn(g)){var b=x.stackGroups[g]||{numericAxisId:r,cateAxisId:s,items:[]};b.items.push(f),x.hasStack=!0,x.stackGroups[g]=b}else x.stackGroups[Dv("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[f]};return In(In({},d),{},Yf({},v,x))},l),u={};return Object.keys(c).reduce(function(d,f){var p=c[f];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,y){var v=p.stackGroups[y];return In(In({},g),{},Yf({},y,{numericAxisId:r,cateAxisId:s,items:v.items,stackedData:cLe(e,v.items,i)}))},m)}return In(In({},d),{},Yf({},f,p))},u)},q9=function(e,n){var r=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=CMe(c,i,a);return e.domain([HS(u),VS(u)]),{niceTicks:u}}if(i&&s==="number"){var d=e.domain(),f=NMe(d,i,a);return{niceTicks:f}}return null},u3=function(e){var n=e.axis,r=e.ticks,s=e.offset,i=e.bandSize,o=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+s:null;var l=Wr(o,n.dataKey,n.domain[a]);return yt(l)?null:n.scale(l)-i/2+s},dLe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return s<=0&&i>=0?0:i<0?i:s}return r[0]},fLe=function(e,n){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?In(In({},e.type.defaultProps),e.props):e.props,i=s.stackId;if(Jn(i)){var o=n[i];if(o){var a=o.items.indexOf(e);return a>=0?o.stackedData[a]:null}}return null},hLe=function(e){return e.reduce(function(n,r){return[HS(r.concat([n[0]]).filter(pe)),VS(r.concat([n[1]]).filter(pe))]},[1/0,-1/0])},K9=function(e,n,r){return Object.keys(e).reduce(function(s,i){var o=e[i],a=o.stackedData,l=a.reduce(function(c,u){var d=hLe(u.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},d3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cI=function(e,n,r){if(Ze(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(pe(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(d3.test(e[0])){var i=+d3.exec(e[0])[1];s[0]=n[0]-i}else Ze(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(pe(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(f3.test(e[1])){var o=+f3.exec(e[1])[1];s[1]=n[1]+o}else Ze(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},gw=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var i=aP(n,function(d){return d.coordinate}),o=1/0,a=1,l=i.length;a<l;a++){var c=i[a],u=i[a-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},h3=function(e,n,r){return!e||!e.length||GS(e,Js(r,"type.defaultProps.domain"))?n:e},X9=function(e,n){var r=e.type.defaultProps?In(In({},e.type.defaultProps),e.props):e.props,s=r.dataKey,i=r.name,o=r.unit,a=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return In(In({},Xe(e,!1)),{},{dataKey:s,unit:o,formatter:a,name:i||s,color:RP(e),value:Wr(n,s),type:l,payload:n,chartType:c,hide:u})};function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function p3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p3(Object(n),!0).forEach(function(r){Y9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y9(t,e,n){return e=pLe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pLe(t){var e=mLe(t,"string");return _y(e)=="symbol"?e:e+""}function mLe(t,e){if(_y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gLe(t,e){return bLe(t)||xLe(t,e)||vLe(t,e)||yLe()}function yLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vLe(t,e){if(t){if(typeof t=="string")return m3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m3(t,e)}}function m3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function bLe(t){if(Array.isArray(t))return t}var yw=Math.PI/180,wLe=function(e){return e*180/Math.PI},Jt=function(e,n,r,s){return{x:e+Math.cos(-yw*s)*r,y:n+Math.sin(-yw*s)*r}},Q9=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},SLe=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.startAngle,c=e.endAngle,u=is(e.cx,o,o/2),d=is(e.cy,a,a/2),f=Q9(o,a,r),p=is(e.innerRadius,f,0),m=is(e.outerRadius,f,f*.8),g=Object.keys(n);return g.reduce(function(y,v){var x=n[v],b=x.domain,w=x.reversed,_;if(yt(x.range))s==="angleAxis"?_=[l,c]:s==="radiusAxis"&&(_=[p,m]),w&&(_=[_[1],_[0]]);else{_=x.range;var C=_,E=gLe(C,2);l=E[0],c=E[1]}var N=H9(x,i),I=N.realScaleType,$=N.scale;$.domain(b).range(_),G9($);var O=q9($,_a(_a({},x),{},{realScaleType:I})),k=_a(_a(_a({},x),O),{},{range:_,radius:m,realScaleType:I,scale:$,cx:u,cy:d,innerRadius:p,outerRadius:m,startAngle:l,endAngle:c});return _a(_a({},y),{},Y9({},v,k))},{})},_Le=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(s-o,2))},CLe=function(e,n){var r=e.x,s=e.y,i=n.cx,o=n.cy,a=_Le({x:r,y:s},{x:i,y:o});if(a<=0)return{radius:a};var l=(r-i)/a,c=Math.acos(l);return s>o&&(c=2*Math.PI-c),{radius:a,angle:wLe(c),angleInRadian:c}},NLe=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:r-o*360}},ELe=function(e,n){var r=n.startAngle,s=n.endAngle,i=Math.floor(r/360),o=Math.floor(s/360),a=Math.min(i,o);return e+a*360},g3=function(e,n){var r=e.x,s=e.y,i=CLe({x:r,y:s},n),o=i.radius,a=i.angle,l=n.innerRadius,c=n.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var u=NLe(n),d=u.startAngle,f=u.endAngle,p=a,m;if(d<=f){for(;p>f;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=f}else{for(;p>d;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=d}return m?_a(_a({},n),{},{radius:o,angle:ELe(p,n)}):null},J9=function(e){return!S.isValidElement(e)&&!Ze(e)&&typeof e!="boolean"?e.className:""};function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}var TLe=["offset"];function ILe(t){return ALe(t)||$Le(t)||OLe(t)||kLe()}function kLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OLe(t,e){if(t){if(typeof t=="string")return uI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uI(t,e)}}function $Le(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ALe(t){if(Array.isArray(t))return uI(t)}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PLe(t,e){if(t==null)return{};var n=RLe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RLe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(n),!0).forEach(function(r){DLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DLe(t,e,n){return e=jLe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jLe(t){var e=MLe(t,"string");return Cy(e)=="symbol"?e:e+""}function MLe(t,e){if(Cy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ny(){return Ny=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ny.apply(this,arguments)}var LLe=function(e){var n=e.value,r=e.formatter,s=yt(e.children)?n:e.children;return Ze(r)?r(s):s},FLe=function(e,n){var r=ss(n-e),s=Math.min(Math.abs(n-e),360);return r*s},BLe=function(e,n,r){var s=e.position,i=e.viewBox,o=e.offset,a=e.className,l=i,c=l.cx,u=l.cy,d=l.innerRadius,f=l.outerRadius,p=l.startAngle,m=l.endAngle,g=l.clockWise,y=(d+f)/2,v=FLe(p,m),x=v>=0?1:-1,b,w;s==="insideStart"?(b=p+x*o,w=g):s==="insideEnd"?(b=m-x*o,w=!g):s==="end"&&(b=m+x*o,w=g),w=v<=0?w:!w;var _=Jt(c,u,y,b),C=Jt(c,u,y,b+(w?1:-1)*359),E="M".concat(_.x,",").concat(_.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(w?0:1,`,
    `).concat(C.x,",").concat(C.y),N=yt(e.id)?Dv("recharts-radial-line-"):e.id;return j.createElement("text",Ny({},r,{dominantBaseline:"central",className:at("recharts-radial-bar-label",a)}),j.createElement("defs",null,j.createElement("path",{id:N,d:E})),j.createElement("textPath",{xlinkHref:"#".concat(N)},n))},ULe=function(e){var n=e.viewBox,r=e.offset,s=e.position,i=n,o=i.cx,a=i.cy,l=i.innerRadius,c=i.outerRadius,u=i.startAngle,d=i.endAngle,f=(u+d)/2;if(s==="outside"){var p=Jt(o,a,c+r,f),m=p.x,g=p.y;return{x:m,y:g,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var y=(l+c)/2,v=Jt(o,a,y,f),x=v.x,b=v.y;return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},WLe=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,i=e.position,o=n,a=o.x,l=o.y,c=o.width,u=o.height,d=u>=0?1:-1,f=d*s,p=d>0?"end":"start",m=d>0?"start":"end",g=c>=0?1:-1,y=g*s,v=g>0?"end":"start",x=g>0?"start":"end";if(i==="top"){var b={x:a+c/2,y:l-d*s,textAnchor:"middle",verticalAnchor:p};return zn(zn({},b),r?{height:Math.max(l-r.y,0),width:c}:{})}if(i==="bottom"){var w={x:a+c/2,y:l+u+f,textAnchor:"middle",verticalAnchor:m};return zn(zn({},w),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(i==="left"){var _={x:a-y,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return zn(zn({},_),r?{width:Math.max(_.x-r.x,0),height:u}:{})}if(i==="right"){var C={x:a+c+y,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return zn(zn({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:u}:{})}var E=r?{width:c,height:u}:{};return i==="insideLeft"?zn({x:a+y,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},E):i==="insideRight"?zn({x:a+c-y,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},E):i==="insideTop"?zn({x:a+c/2,y:l+f,textAnchor:"middle",verticalAnchor:m},E):i==="insideBottom"?zn({x:a+c/2,y:l+u-f,textAnchor:"middle",verticalAnchor:p},E):i==="insideTopLeft"?zn({x:a+y,y:l+f,textAnchor:x,verticalAnchor:m},E):i==="insideTopRight"?zn({x:a+c-y,y:l+f,textAnchor:v,verticalAnchor:m},E):i==="insideBottomLeft"?zn({x:a+y,y:l+u-f,textAnchor:x,verticalAnchor:p},E):i==="insideBottomRight"?zn({x:a+c-y,y:l+u-f,textAnchor:v,verticalAnchor:p},E):Pp(i)&&(pe(i.x)||Nu(i.x))&&(pe(i.y)||Nu(i.y))?zn({x:a+is(i.x,c),y:l+is(i.y,u),textAnchor:"end",verticalAnchor:"end"},E):zn({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},E)},zLe=function(e){return"cx"in e&&pe(e.cx)};function cr(t){var e=t.offset,n=e===void 0?5:e,r=PLe(t,TLe),s=zn({offset:n},r),i=s.viewBox,o=s.position,a=s.value,l=s.children,c=s.content,u=s.className,d=u===void 0?"":u,f=s.textBreakAll;if(!i||yt(a)&&yt(l)&&!S.isValidElement(c)&&!Ze(c))return null;if(S.isValidElement(c))return S.cloneElement(c,s);var p;if(Ze(c)){if(p=S.createElement(c,s),S.isValidElement(p))return p}else p=LLe(s);var m=zLe(i),g=Xe(s,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return BLe(s,p,g);var y=m?ULe(s):WLe(s);return j.createElement(ud,Ny({className:at("recharts-label",d)},g,y,{breakAll:f}),p)}cr.displayName="Label";var Z9=function(e){var n=e.cx,r=e.cy,s=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,f=e.y,p=e.top,m=e.left,g=e.width,y=e.height,v=e.clockWise,x=e.labelViewBox;if(x)return x;if(pe(g)&&pe(y)){if(pe(d)&&pe(f))return{x:d,y:f,width:g,height:y};if(pe(p)&&pe(m))return{x:p,y:m,width:g,height:y}}return pe(d)&&pe(f)?{x:d,y:f,width:0,height:0}:pe(n)&&pe(r)?{cx:n,cy:r,startAngle:i||s||0,endAngle:o||s||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:v}:e.viewBox?e.viewBox:{}},VLe=function(e,n){return e?e===!0?j.createElement(cr,{key:"label-implicit",viewBox:n}):Jn(e)?j.createElement(cr,{key:"label-implicit",viewBox:n,value:e}):S.isValidElement(e)?e.type===cr?S.cloneElement(e,{key:"label-implicit",viewBox:n}):j.createElement(cr,{key:"label-implicit",content:e,viewBox:n}):Ze(e)?j.createElement(cr,{key:"label-implicit",content:e,viewBox:n}):Pp(e)?j.createElement(cr,Ny({viewBox:n},e,{key:"label-implicit"})):null:null},HLe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,i=Z9(e),o=Ti(s,cr).map(function(l,c){return S.cloneElement(l,{viewBox:n||i,key:"label-".concat(c)})});if(!r)return o;var a=VLe(e.label,n||i);return[a].concat(ILe(o))};cr.parseViewBox=Z9;cr.renderCallByParent=HLe;function GLe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var qLe=GLe;const KLe=Tt(qLe);function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}var XLe=["valueAccessor"],YLe=["data","dataKey","clockWise","id","textBreakAll"];function QLe(t){return tFe(t)||eFe(t)||ZLe(t)||JLe()}function JLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZLe(t,e){if(t){if(typeof t=="string")return dI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dI(t,e)}}function eFe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tFe(t){if(Array.isArray(t))return dI(t)}function dI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vw(){return vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vw.apply(this,arguments)}function v3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function x3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v3(Object(n),!0).forEach(function(r){nFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nFe(t,e,n){return e=rFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rFe(t){var e=sFe(t,"string");return Ey(e)=="symbol"?e:e+""}function sFe(t,e){if(Ey(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b3(t,e){if(t==null)return{};var n=iFe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var oFe=function(e){return Array.isArray(e.value)?KLe(e.value):e.value};function vc(t){var e=t.valueAccessor,n=e===void 0?oFe:e,r=b3(t,XLe),s=r.data,i=r.dataKey,o=r.clockWise,a=r.id,l=r.textBreakAll,c=b3(r,YLe);return!s||!s.length?null:j.createElement(Dt,{className:"recharts-label-list"},s.map(function(u,d){var f=yt(i)?n(u,d):Wr(u&&u.payload,i),p=yt(a)?{}:{id:"".concat(a,"-").concat(d)};return j.createElement(cr,vw({},Xe(u,!0),c,p,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:cr.parseViewBox(yt(o)?u:x3(x3({},u),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}vc.displayName="LabelList";function aFe(t,e){return t?t===!0?j.createElement(vc,{key:"labelList-implicit",data:e}):j.isValidElement(t)||Ze(t)?j.createElement(vc,{key:"labelList-implicit",data:e,content:t}):Pp(t)?j.createElement(vc,vw({data:e},t,{key:"labelList-implicit"})):null:null}function lFe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=Ti(r,vc).map(function(o,a){return S.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!n)return s;var i=aFe(t.label,e);return[i].concat(QLe(s))}vc.renderCallByParent=lFe;function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}function fI(){return fI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fI.apply(this,arguments)}function w3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function S3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w3(Object(n),!0).forEach(function(r){cFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cFe(t,e,n){return e=uFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uFe(t){var e=dFe(t,"string");return Ty(e)=="symbol"?e:e+""}function dFe(t,e){if(Ty(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fFe=function(e,n){var r=ss(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},Vx=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+s,d=Math.asin(l/u)/yw,f=c?i:i+o*d,p=Jt(n,r,u,f),m=Jt(n,r,s,f),g=c?i-o*d:i,y=Jt(n,r,u*Math.cos(d*yw),g);return{center:p,circleTangency:m,lineTangency:y,theta:d}},e7=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=e.endAngle,l=fFe(o,a),c=o+l,u=Jt(n,r,i,o),d=Jt(n,r,i,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(s>0){var p=Jt(n,r,s,o),m=Jt(n,r,s,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},hFe=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=ss(u-c),f=Vx({cx:n,cy:r,radius:i,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),p=f.circleTangency,m=f.lineTangency,g=f.theta,y=Vx({cx:n,cy:r,radius:i,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),v=y.circleTangency,x=y.lineTangency,b=y.theta,w=l?Math.abs(c-u):Math.abs(c-u)-g-b;if(w<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):e7({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u});var _="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(s>0){var C=Vx({cx:n,cy:r,radius:s,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),E=C.circleTangency,N=C.lineTangency,I=C.theta,$=Vx({cx:n,cy:r,radius:s,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),O=$.circleTangency,k=$.lineTangency,R=$.theta,M=l?Math.abs(c-u):Math.abs(c-u)-I-R;if(M<0&&o===0)return"".concat(_,"L").concat(n,",").concat(r,"Z");_+="L".concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(M>180),",").concat(+(d>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else _+="L".concat(n,",").concat(r,"Z");return _},pFe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},t7=function(e){var n=S3(S3({},pFe),e),r=n.cx,s=n.cy,i=n.innerRadius,o=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,d=n.endAngle,f=n.className;if(o<i||u===d)return null;var p=at("recharts-sector",f),m=o-i,g=is(a,m,0,!0),y;return g>0&&Math.abs(u-d)<360?y=hFe({cx:r,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=e7({cx:r,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:d}),j.createElement("path",fI({},Xe(n,!0),{className:p,d:y,role:"img"}))};function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function hI(){return hI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hI.apply(this,arguments)}function _3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function C3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_3(Object(n),!0).forEach(function(r){mFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mFe(t,e,n){return e=gFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gFe(t){var e=yFe(t,"string");return Iy(e)=="symbol"?e:e+""}function yFe(t,e){if(Iy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Iy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N3={curveBasisClosed:mNe,curveBasisOpen:gNe,curveBasis:pNe,curveBumpX:eNe,curveBumpY:tNe,curveLinearClosed:yNe,curveLinear:AS,curveMonotoneX:vNe,curveMonotoneY:xNe,curveNatural:bNe,curveStep:wNe,curveStepAfter:_Ne,curveStepBefore:SNe},Hx=function(e){return e.x===+e.x&&e.y===+e.y},Nm=function(e){return e.x},Em=function(e){return e.y},vFe=function(e,n){if(Ze(e))return e;var r="curve".concat(OS(e));return(r==="curveMonotone"||r==="curveBump")&&n?N3["".concat(r).concat(n==="vertical"?"Y":"X")]:N3[r]||AS},xFe=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,i=s===void 0?[]:s,o=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=vFe(r,a),d=c?i.filter(function(g){return Hx(g)}):i,f;if(Array.isArray(o)){var p=c?o.filter(function(g){return Hx(g)}):o,m=d.map(function(g,y){return C3(C3({},g),{},{base:p[y]})});return a==="vertical"?f=Dx().y(Em).x1(Nm).x0(function(g){return g.base.x}):f=Dx().x(Nm).y1(Em).y0(function(g){return g.base.y}),f.defined(Hx).curve(u),f(m)}return a==="vertical"&&pe(o)?f=Dx().y(Em).x1(Nm).x0(o):pe(o)?f=Dx().x(Nm).y1(Em).y0(o):f=Xq().x(Nm).y(Em),f.defined(Hx).curve(u),f(d)},pI=function(e){var n=e.className,r=e.points,s=e.path,i=e.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?xFe(e):s;return j.createElement("path",hI({},Xe(e,!1),z0(e),{className:at("recharts-curve",n),d:o,ref:i}))},n7={exports:{}},bFe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wFe=bFe,SFe=wFe;function r7(){}function s7(){}s7.resetWarningCache=r7;var _Fe=function(){function t(r,s,i,o,a,l){if(l!==SFe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s7,resetWarningCache:r7};return n.PropTypes=n,n};n7.exports=_Fe();var CFe=n7.exports;const rt=Tt(CFe);var NFe=Object.getOwnPropertyNames,EFe=Object.getOwnPropertySymbols,TFe=Object.prototype.hasOwnProperty;function E3(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function Gx(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var i=s.cache,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);var l=t(n,r,s);return i.delete(n),i.delete(r),l}}function T3(t){return NFe(t).concat(EFe(t))}var i7=Object.hasOwn||function(t,e){return TFe.call(t,e)};function zp(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var o7="_owner",I3=Object.getOwnPropertyDescriptor,k3=Object.keys;function IFe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function kFe(t,e){return zp(t.getTime(),e.getTime())}function O3(t,e,n){if(t.size!==e.size)return!1;for(var r={},s=t.entries(),i=0,o,a;(o=s.next())&&!o.done;){for(var l=e.entries(),c=!1,u=0;(a=l.next())&&!a.done;){var d=o.value,f=d[0],p=d[1],m=a.value,g=m[0],y=m[1];!c&&!r[u]&&(c=n.equals(f,g,i,u,t,e,n)&&n.equals(p,y,f,g,t,e,n))&&(r[u]=!0),u++}if(!c)return!1;i++}return!0}function OFe(t,e,n){var r=k3(t),s=r.length;if(k3(e).length!==s)return!1;for(var i;s-- >0;)if(i=r[s],i===o7&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!i7(e,i)||!n.equals(t[i],e[i],i,i,t,e,n))return!1;return!0}function Tm(t,e,n){var r=T3(t),s=r.length;if(T3(e).length!==s)return!1;for(var i,o,a;s-- >0;)if(i=r[s],i===o7&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!i7(e,i)||!n.equals(t[i],e[i],i,i,t,e,n)||(o=I3(t,i),a=I3(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function $Fe(t,e){return zp(t.valueOf(),e.valueOf())}function AFe(t,e){return t.source===e.source&&t.flags===e.flags}function $3(t,e,n){if(t.size!==e.size)return!1;for(var r={},s=t.values(),i,o;(i=s.next())&&!i.done;){for(var a=e.values(),l=!1,c=0;(o=a.next())&&!o.done;)!l&&!r[c]&&(l=n.equals(i.value,o.value,i.value,o.value,t,e,n))&&(r[c]=!0),c++;if(!l)return!1}return!0}function PFe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var RFe="[object Arguments]",DFe="[object Boolean]",jFe="[object Date]",MFe="[object Map]",LFe="[object Number]",FFe="[object Object]",BFe="[object RegExp]",UFe="[object Set]",WFe="[object String]",zFe=Array.isArray,A3=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,P3=Object.assign,VFe=Object.prototype.toString.call.bind(Object.prototype.toString);function HFe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,s=t.areObjectsEqual,i=t.arePrimitiveWrappersEqual,o=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(u,d,f){if(u===d)return!0;if(u==null||d==null||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;var p=u.constructor;if(p!==d.constructor)return!1;if(p===Object)return s(u,d,f);if(zFe(u))return e(u,d,f);if(A3!=null&&A3(u))return l(u,d,f);if(p===Date)return n(u,d,f);if(p===RegExp)return o(u,d,f);if(p===Map)return r(u,d,f);if(p===Set)return a(u,d,f);var m=VFe(u);return m===jFe?n(u,d,f):m===BFe?o(u,d,f):m===MFe?r(u,d,f):m===UFe?a(u,d,f):m===FFe?typeof u.then!="function"&&typeof d.then!="function"&&s(u,d,f):m===RFe?s(u,d,f):m===DFe||m===LFe||m===WFe?i(u,d,f):!1}}function GFe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?Tm:IFe,areDatesEqual:kFe,areMapsEqual:r?E3(O3,Tm):O3,areObjectsEqual:r?Tm:OFe,arePrimitiveWrappersEqual:$Fe,areRegExpsEqual:AFe,areSetsEqual:r?E3($3,Tm):$3,areTypedArraysEqual:r?Tm:PFe};if(n&&(s=P3({},s,n(s))),e){var i=Gx(s.areArraysEqual),o=Gx(s.areMapsEqual),a=Gx(s.areObjectsEqual),l=Gx(s.areSetsEqual);s=P3({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return s}function qFe(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function KFe(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,i=t.strict;if(r)return function(l,c){var u=r(),d=u.cache,f=d===void 0?e?new WeakMap:void 0:d,p=u.meta;return n(l,c,{cache:f,equals:s,meta:p,strict:i})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(l,c){return n(l,c,o)}}var XFe=qc();qc({strict:!0});qc({circular:!0});qc({circular:!0,strict:!0});qc({createInternalComparator:function(){return zp}});qc({strict:!0,createInternalComparator:function(){return zp}});qc({circular:!0,createInternalComparator:function(){return zp}});qc({circular:!0,createInternalComparator:function(){return zp},strict:!0});function qc(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,i=t.strict,o=i===void 0?!1:i,a=GFe(t),l=HFe(a),c=r?r(l):qFe(l);return KFe({circular:n,comparator:l,createState:s,equals:c,strict:o})}function YFe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function R3(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(i){n<0&&(n=i),i-n>e?(t(i),n=-1):YFe(s)};requestAnimationFrame(r)}function mI(t){"@babel/helpers - typeof";return mI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mI(t)}function QFe(t){return t3e(t)||e3e(t)||ZFe(t)||JFe()}function JFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZFe(t,e){if(t){if(typeof t=="string")return D3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D3(t,e)}}function D3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function t3e(t){if(Array.isArray(t))return t}function n3e(){var t={},e=function(){return null},n=!1,r=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,a=QFe(o),l=a[0],c=a.slice(1);if(typeof l=="number"){R3(s.bind(null,c),l);return}s(l),R3(s.bind(null,c));return}mI(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function j3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function M3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j3(Object(n),!0).forEach(function(r){a7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a7(t,e,n){return e=r3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r3e(t){var e=s3e(t,"string");return ky(e)==="symbol"?e:String(e)}function s3e(t,e){if(ky(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ky(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i3e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(i){return s.includes(i)})})},o3e=function(e){return e},a3e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},hg=function(e,n){return Object.keys(n).reduce(function(r,s){return M3(M3({},r),{},a7({},s,e(s,n[s])))},{})},L3=function(e,n,r){return e.map(function(s){return"".concat(a3e(s)," ").concat(n,"ms ").concat(r)}).join(",")};function l3e(t,e){return d3e(t)||u3e(t,e)||l7(t,e)||c3e()}function c3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function d3e(t){if(Array.isArray(t))return t}function f3e(t){return m3e(t)||p3e(t)||l7(t)||h3e()}function h3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l7(t,e){if(t){if(typeof t=="string")return gI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gI(t,e)}}function p3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function m3e(t){if(Array.isArray(t))return gI(t)}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xw=1e-4,c7=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},u7=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},F3=function(e,n){return function(r){var s=c7(e,n);return u7(s,r)}},g3e=function(e,n){return function(r){var s=c7(e,n),i=[].concat(f3e(s.map(function(o,a){return o*a}).slice(1)),[0]);return u7(i,r)}},B3=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],i=n[1],o=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,a=1;break;case"ease":s=.25,i=.1,o=.25,a=1;break;case"ease-in":s=.42,i=0,o=1,a=1;break;case"ease-out":s=.42,i=0,o=.58,a=1;break;case"ease-in-out":s=0,i=0,o=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=l3e(c,4);s=u[0],i=u[1],o=u[2],a=u[3]}}}var d=F3(s,o),f=F3(i,a),p=g3e(s,o),m=function(v){return v>1?1:v<0?0:v},g=function(v){for(var x=v>1?1:v,b=x,w=0;w<8;++w){var _=d(b)-x,C=p(b);if(Math.abs(_-x)<xw||C<xw)return f(b);b=m(b-_/C)}return f(b)};return g.isStepper=!1,g},y3e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,i=s===void 0?8:s,o=e.dt,a=o===void 0?17:o,l=function(u,d,f){var p=-(u-d)*r,m=f*i,g=f+(p-m)*a/1e3,y=f*a/1e3+u;return Math.abs(y-d)<xw&&Math.abs(g)<xw?[d,0]:[y,g]};return l.isStepper=!0,l.dt=a,l},v3e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return B3(s);case"spring":return y3e();default:if(s.split("(")[0]==="cubic-bezier")return B3(s)}return typeof s=="function"?s:null};function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function U3(t){return w3e(t)||b3e(t)||d7(t)||x3e()}function x3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function w3e(t){if(Array.isArray(t))return vI(t)}function W3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W3(Object(n),!0).forEach(function(r){yI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yI(t,e,n){return e=S3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S3e(t){var e=_3e(t,"string");return Oy(e)==="symbol"?e:String(e)}function _3e(t,e){if(Oy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Oy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C3e(t,e){return T3e(t)||E3e(t,e)||d7(t,e)||N3e()}function N3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d7(t,e){if(t){if(typeof t=="string")return vI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vI(t,e)}}function vI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function T3e(t){if(Array.isArray(t))return t}var bw=function(e,n,r){return e+(n-e)*r},xI=function(e){var n=e.from,r=e.to;return n!==r},I3e=function t(e,n,r){var s=hg(function(i,o){if(xI(o)){var a=e(o.from,o.to,o.velocity),l=C3e(a,2),c=l[0],u=l[1];return Cr(Cr({},o),{},{from:c,velocity:u})}return o},n);return r<1?hg(function(i,o){return xI(o)?Cr(Cr({},o),{},{velocity:bw(o.velocity,s[i].velocity,r),from:bw(o.from,s[i].from,r)}):o},n):t(e,s,r-1)};const k3e=function(t,e,n,r,s){var i=i3e(t,e),o=i.reduce(function(y,v){return Cr(Cr({},y),{},yI({},v,[t[v],e[v]]))},{}),a=i.reduce(function(y,v){return Cr(Cr({},y),{},yI({},v,{from:t[v],velocity:0,to:e[v]}))},{}),l=-1,c,u,d=function(){return null},f=function(){return hg(function(v,x){return x.from},a)},p=function(){return!Object.values(a).filter(xI).length},m=function(v){c||(c=v);var x=v-c,b=x/n.dt;a=I3e(n,a,b),s(Cr(Cr(Cr({},t),e),f())),c=v,p()||(l=requestAnimationFrame(d))},g=function(v){u||(u=v);var x=(v-u)/r,b=hg(function(_,C){return bw.apply(void 0,U3(C).concat([n(x)]))},o);if(s(Cr(Cr(Cr({},t),e),b)),x<1)l=requestAnimationFrame(d);else{var w=hg(function(_,C){return bw.apply(void 0,U3(C).concat([n(1)]))},o);s(Cr(Cr(Cr({},t),e),w))}};return d=n.isStepper?m:g,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Ph(t){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(t)}var O3e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function $3e(t,e){if(t==null)return{};var n=A3e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A3e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function iN(t){return j3e(t)||D3e(t)||R3e(t)||P3e()}function P3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R3e(t,e){if(t){if(typeof t=="string")return bI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bI(t,e)}}function D3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function j3e(t){if(Array.isArray(t))return bI(t)}function bI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z3(Object(n),!0).forEach(function(r){Wm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wm(t,e,n){return e=f7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f7(r.key),r)}}function F3e(t,e,n){return e&&L3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function f7(t){var e=B3e(t,"string");return Ph(e)==="symbol"?e:String(e)}function B3e(t,e){if(Ph(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ph(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wI(t,e)}function wI(t,e){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},wI(t,e)}function W3e(t){var e=z3e();return function(){var r=ww(t),s;if(e){var i=ww(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return SI(this,s)}}function SI(t,e){if(e&&(Ph(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _I(t)}function _I(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ww(t){return ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ww(t)}var al=function(t){U3e(n,t);var e=W3e(n);function n(r,s){var i;M3e(this,n),i=e.call(this,r,s);var o=i.props,a=o.isActive,l=o.attributeName,c=o.from,u=o.to,d=o.steps,f=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(_I(i)),i.changeStyle=i.changeStyle.bind(_I(i)),!a||p<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:u}),SI(i);if(d&&d.length)i.state={style:d[0].style};else if(c){if(typeof f=="function")return i.state={style:c},SI(i);i.state={style:l?Wm({},l,c):c}}else i.state={style:{}};return i}return F3e(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,a=i.canBegin,l=i.attributeName,c=i.shouldReAnimate,u=i.to,d=i.from,f=this.state.style;if(a){if(!o){var p={style:l?Wm({},l,u):u};this.state&&f&&(l&&f[l]!==u||!l&&f!==u)&&this.setState(p);return}if(!(XFe(s.to,u)&&s.canBegin&&s.isActive)){var m=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||c?d:s.to;if(this.state&&f){var y={style:l?Wm({},l,g):g};(l&&f[l]!==g||!l&&f!==g)&&this.setState(y)}this.runAnimation(Hi(Hi({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,a=s.to,l=s.duration,c=s.easing,u=s.begin,d=s.onAnimationEnd,f=s.onAnimationStart,p=k3e(o,a,v3e(c),l,this.changeStyle),m=function(){i.stopJSAnimation=p()};this.manager.start([f,u,m,l,d])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,a=s.begin,l=s.onAnimationStart,c=o[0],u=c.style,d=c.duration,f=d===void 0?0:d,p=function(g,y,v){if(v===0)return g;var x=y.duration,b=y.easing,w=b===void 0?"ease":b,_=y.style,C=y.properties,E=y.onAnimationEnd,N=v>0?o[v-1]:y,I=C||Object.keys(_);if(typeof w=="function"||w==="spring")return[].concat(iN(g),[i.runJSAnimation.bind(i,{from:N.style,to:_,duration:x,easing:w}),x]);var $=L3(I,x,w),O=Hi(Hi(Hi({},N.style),_),{},{transition:$});return[].concat(iN(g),[O,x,E]).filter(o3e)};return this.manager.start([l].concat(iN(o.reduce(p,[u,Math.max(f,a)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=n3e());var i=s.begin,o=s.duration,a=s.attributeName,l=s.to,c=s.easing,u=s.onAnimationStart,d=s.onAnimationEnd,f=s.steps,p=s.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var g=a?Wm({},a,l):l,y=L3(Object.keys(g),o,c);m.start([u,i,Hi(Hi({},g),{},{transition:y}),o,d])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var a=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var l=$3e(s,O3e),c=S.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!a||c===0||o<=0)return i;var d=function(p){var m=p.props,g=m.style,y=g===void 0?{}:g,v=m.className,x=S.cloneElement(p,Hi(Hi({},l),{},{style:Hi(Hi({},y),u),className:v}));return x};return c===1?d(S.Children.only(i)):j.createElement("div",null,S.Children.map(i,function(f){return d(f)}))}}]),n}(S.PureComponent);al.displayName="Animate";al.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};al.propTypes={from:rt.oneOfType([rt.object,rt.string]),to:rt.oneOfType([rt.object,rt.string]),attributeName:rt.string,duration:rt.number,begin:rt.number,easing:rt.oneOfType([rt.string,rt.func]),steps:rt.arrayOf(rt.shape({duration:rt.number.isRequired,style:rt.object.isRequired,easing:rt.oneOfType([rt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),rt.func]),properties:rt.arrayOf("string"),onAnimationEnd:rt.func})),children:rt.oneOfType([rt.node,rt.func]),isActive:rt.bool,canBegin:rt.bool,onAnimationEnd:rt.func,shouldReAnimate:rt.bool,onAnimationStart:rt.func,onAnimationReStart:rt.func};rt.object,rt.object,rt.object,rt.element;rt.object,rt.object,rt.object,rt.oneOfType([rt.array,rt.element]),rt.any;function $y(t){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(t)}function Sw(){return Sw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sw.apply(this,arguments)}function V3e(t,e){return K3e(t)||q3e(t,e)||G3e(t,e)||H3e()}function H3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G3e(t,e){if(t){if(typeof t=="string")return V3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V3(t,e)}}function V3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function K3e(t){if(Array.isArray(t))return t}function H3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function G3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H3(Object(n),!0).forEach(function(r){X3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X3e(t,e,n){return e=Y3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y3e(t){var e=Q3e(t,"string");return $y(e)=="symbol"?e:e+""}function Q3e(t,e){if($y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q3=function(e,n,r,s,i){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),a=s>=0?1:-1,l=r>=0?1:-1,c=s>=0&&r>=0||s<0&&r<0?1:0,u;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,p=4;f<p;f++)d[f]=i[f]>o?o:i[f];u="M".concat(e,",").concat(n+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),u+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+a*d[1])),u+="L ".concat(e+r,",").concat(n+s-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+s)),u+="L ".concat(e+l*d[3],",").concat(n+s),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+s-a*d[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var m=Math.min(o,i);u="M ".concat(e,",").concat(n+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(n,`
            L `).concat(e+r-l*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(n+a*m,`
            L `).concat(e+r,",").concat(n+s-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(n+s,`
            L `).concat(e+l*m,",").concat(n+s,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(n+s-a*m," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return u},J3e=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,i=n.x,o=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(i,i+a),u=Math.max(i,i+a),d=Math.min(o,o+l),f=Math.max(o,o+l);return r>=c&&r<=u&&s>=d&&s<=f}return!1},Z3e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DP=function(e){var n=G3(G3({},Z3e),e),r=S.useRef(),s=S.useState(-1),i=V3e(s,2),o=i[0],a=i[1];S.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&a(w)}catch{}},[]);var l=n.x,c=n.y,u=n.width,d=n.height,f=n.radius,p=n.className,m=n.animationEasing,g=n.animationDuration,y=n.animationBegin,v=n.isAnimationActive,x=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var b=at("recharts-rectangle",p);return x?j.createElement(al,{canBegin:o>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:g,animationEasing:m,isActive:x},function(w){var _=w.width,C=w.height,E=w.x,N=w.y;return j.createElement(al,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:v,easing:m},j.createElement("path",Sw({},Xe(n,!0),{className:b,d:q3(E,N,_,C,f),ref:r})))}):j.createElement("path",Sw({},Xe(n,!0),{className:b,d:q3(l,c,u,d,f)}))},e4e=["points","className","baseLinePoints","connectNulls"];function kf(){return kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kf.apply(this,arguments)}function t4e(t,e){if(t==null)return{};var n=n4e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function n4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function K3(t){return o4e(t)||i4e(t)||s4e(t)||r4e()}function r4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s4e(t,e){if(t){if(typeof t=="string")return CI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CI(t,e)}}function i4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function o4e(t){if(Array.isArray(t))return CI(t)}function CI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X3=function(e){return e&&e.x===+e.x&&e.y===+e.y},a4e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){X3(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),X3(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},pg=function(e,n){var r=a4e(e);n&&(r=[r.reduce(function(i,o){return[].concat(K3(i),K3(o))},[])]);var s=r.map(function(i){return i.reduce(function(o,a,l){return"".concat(o).concat(l===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},l4e=function(e,n,r){var s=pg(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(pg(n.reverse(),r).slice(1))},c4e=function(e){var n=e.points,r=e.className,s=e.baseLinePoints,i=e.connectNulls,o=t4e(e,e4e);if(!n||!n.length)return null;var a=at("recharts-polygon",r);if(s&&s.length){var l=o.stroke&&o.stroke!=="none",c=l4e(n,s,i);return j.createElement("g",{className:a},j.createElement("path",kf({},Xe(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:c})),l?j.createElement("path",kf({},Xe(o,!0),{fill:"none",d:pg(n,i)})):null,l?j.createElement("path",kf({},Xe(o,!0),{fill:"none",d:pg(s,i)})):null)}var u=pg(n,i);return j.createElement("path",kf({},Xe(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:a,d:u}))};function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NI.apply(this,arguments)}var jP=function(e){var n=e.cx,r=e.cy,s=e.r,i=e.className,o=at("recharts-dot",i);return n===+n&&r===+r&&s===+s?j.createElement("circle",NI({},Xe(e,!1),z0(e),{className:o,cx:n,cy:r,r:s})):null};function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}var u4e=["x","y","top","left","width","height","className"];function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI.apply(this,arguments)}function Y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function d4e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y3(Object(n),!0).forEach(function(r){f4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f4e(t,e,n){return e=h4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h4e(t){var e=p4e(t,"string");return Ay(e)=="symbol"?e:e+""}function p4e(t,e){if(Ay(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m4e(t,e){if(t==null)return{};var n=g4e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function g4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var y4e=function(e,n,r,s,i,o){return"M".concat(e,",").concat(i,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},v4e=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.top,a=o===void 0?0:o,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,f=e.height,p=f===void 0?0:f,m=e.className,g=m4e(e,u4e),y=d4e({x:r,y:i,top:a,left:c,width:d,height:p},g);return!pe(r)||!pe(i)||!pe(d)||!pe(p)||!pe(a)||!pe(c)?null:j.createElement("path",EI({},Xe(y,!0),{className:at("recharts-cross",m),d:y4e(r,i,d,p,a,c)}))},x4e=zS,b4e=_9,w4e=da;function S4e(t,e){return t&&t.length?x4e(t,w4e(e),b4e):void 0}var _4e=S4e;const C4e=Tt(_4e);var N4e=zS,E4e=da,T4e=C9;function I4e(t,e){return t&&t.length?N4e(t,E4e(e),T4e):void 0}var k4e=I4e;const O4e=Tt(k4e);var $4e=["cx","cy","angle","ticks","axisLine"],A4e=["ticks","tick","angle","tickFormatter","stroke"];function Rh(t){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(t)}function mg(){return mg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mg.apply(this,arguments)}function Q3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q3(Object(n),!0).forEach(function(r){YS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J3(t,e){if(t==null)return{};var n=P4e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function P4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function R4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p7(r.key),r)}}function D4e(t,e,n){return e&&Z3(t.prototype,e),n&&Z3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function j4e(t,e,n){return e=_w(e),M4e(t,h7()?Reflect.construct(e,n||[],_w(t).constructor):e.apply(t,n))}function M4e(t,e){if(e&&(Rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L4e(t)}function L4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h7=function(){return!!t})()}function _w(t){return _w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_w(t)}function F4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TI(t,e)}function TI(t,e){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},TI(t,e)}function YS(t,e,n){return e=p7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p7(t){var e=B4e(t,"string");return Rh(e)=="symbol"?e:e+""}function B4e(t,e){if(Rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QS=function(t){function e(){return R4e(this,e),j4e(this,e,arguments)}return F4e(e,t),D4e(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,i=this.props,o=i.angle,a=i.cx,l=i.cy;return Jt(a,l,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=C4e(a,function(u){return u.coordinate||0}),c=O4e(a,function(u){return u.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=r.axisLine,c=J3(r,$4e),u=a.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),d=Jt(s,i,u[0],o),f=Jt(s,i,u[1],o),p=nu(nu(nu({},Xe(c,!1)),{},{fill:"none"},Xe(l,!1)),{},{x1:d.x,y1:d.y,x2:f.x,y2:f.y});return j.createElement("line",mg({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.angle,l=s.tickFormatter,c=s.stroke,u=J3(s,A4e),d=this.getTickTextAnchor(),f=Xe(u,!1),p=Xe(o,!1),m=i.map(function(g,y){var v=r.getTickValueCoord(g),x=nu(nu(nu(nu({textAnchor:d,transform:"rotate(".concat(90-a,", ").concat(v.x,", ").concat(v.y,")")},f),{},{stroke:"none",fill:c},p),{},{index:y},v),{},{payload:g});return j.createElement(Dt,mg({className:at("recharts-polar-radius-axis-tick",J9(o)),key:"tick-".concat(g.coordinate)},cd(r.props,g,y)),e.renderTickItem(o,x,l?l(g.value,y):g.value))});return j.createElement(Dt,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.axisLine,o=r.tick;return!s||!s.length?null:j.createElement(Dt,{className:at("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),cr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,i){var o;return j.isValidElement(r)?o=j.cloneElement(r,s):Ze(r)?o=r(s):o=j.createElement(ud,mg({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(S.PureComponent);YS(QS,"displayName","PolarRadiusAxis");YS(QS,"axisType","radiusAxis");YS(QS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Dh(t){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(t)}function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mu.apply(this,arguments)}function e4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ru(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e4(Object(n),!0).forEach(function(r){JS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g7(r.key),r)}}function W4e(t,e,n){return e&&t4(t.prototype,e),n&&t4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function z4e(t,e,n){return e=Cw(e),V4e(t,m7()?Reflect.construct(e,n||[],Cw(t).constructor):e.apply(t,n))}function V4e(t,e){if(e&&(Dh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H4e(t)}function H4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m7=function(){return!!t})()}function Cw(t){return Cw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cw(t)}function G4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&II(t,e)}function II(t,e){return II=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},II(t,e)}function JS(t,e,n){return e=g7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g7(t){var e=q4e(t,"string");return Dh(e)=="symbol"?e:e+""}function q4e(t,e){if(Dh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K4e=Math.PI/180,n4=1e-5,ZS=function(t){function e(){return U4e(this,e),z4e(this,e,arguments)}return G4e(e,t),W4e(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.cx,o=s.cy,a=s.radius,l=s.orientation,c=s.tickSize,u=c||8,d=Jt(i,o,a,r.coordinate),f=Jt(i,o,a+(l==="inner"?-1:1)*u,r.coordinate);return{x1:d.x,y1:d.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,i=Math.cos(-r.coordinate*K4e),o;return i>n4?o=s==="outer"?"start":"end":i<-n4?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.radius,a=r.axisLine,l=r.axisLineType,c=ru(ru({},Xe(this.props,!1)),{},{fill:"none"},Xe(a,!1));if(l==="circle")return j.createElement(jP,mu({className:"recharts-polar-angle-axis-line"},c,{cx:s,cy:i,r:o}));var u=this.props.ticks,d=u.map(function(f){return Jt(s,i,o,f.coordinate)});return j.createElement(c4e,mu({className:"recharts-polar-angle-axis-line"},c,{points:d}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.tickLine,l=s.tickFormatter,c=s.stroke,u=Xe(this.props,!1),d=Xe(o,!1),f=ru(ru({},u),{},{fill:"none"},Xe(a,!1)),p=i.map(function(m,g){var y=r.getTickLineCoord(m),v=r.getTickTextAnchor(m),x=ru(ru(ru({textAnchor:v},u),{},{stroke:"none",fill:c},d),{},{index:g,payload:m,x:y.x2,y:y.y2});return j.createElement(Dt,mu({className:at("recharts-polar-angle-axis-tick",J9(o)),key:"tick-".concat(m.coordinate)},cd(r.props,m,g)),a&&j.createElement("line",mu({className:"recharts-polar-angle-axis-tick-line"},f,y)),o&&e.renderTickItem(o,x,l?l(m.value,g):m.value))});return j.createElement(Dt,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!s||!s.length?null:j.createElement(Dt,{className:at("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,i){var o;return j.isValidElement(r)?o=j.cloneElement(r,s):Ze(r)?o=r(s):o=j.createElement(ud,mu({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(S.PureComponent);JS(ZS,"displayName","PolarAngleAxis");JS(ZS,"axisType","angleAxis");JS(ZS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var X4e=xK,Y4e=X4e(Object.getPrototypeOf,Object),Q4e=Y4e,J4e=vl,Z4e=Q4e,eBe=xl,tBe="[object Object]",nBe=Function.prototype,rBe=Object.prototype,y7=nBe.toString,sBe=rBe.hasOwnProperty,iBe=y7.call(Object);function oBe(t){if(!eBe(t)||J4e(t)!=tBe)return!1;var e=Z4e(t);if(e===null)return!0;var n=sBe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&y7.call(n)==iBe}var aBe=oBe;const lBe=Tt(aBe);var cBe=vl,uBe=xl,dBe="[object Boolean]";function fBe(t){return t===!0||t===!1||uBe(t)&&cBe(t)==dBe}var hBe=fBe;const pBe=Tt(hBe);function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function Nw(){return Nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nw.apply(this,arguments)}function mBe(t,e){return xBe(t)||vBe(t,e)||yBe(t,e)||gBe()}function gBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yBe(t,e){if(t){if(typeof t=="string")return r4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r4(t,e)}}function r4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function xBe(t){if(Array.isArray(t))return t}function s4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function i4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s4(Object(n),!0).forEach(function(r){bBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bBe(t,e,n){return e=wBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wBe(t){var e=SBe(t,"string");return Py(e)=="symbol"?e:e+""}function SBe(t,e){if(Py(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o4=function(e,n,r,s,i){var o=r-s,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-o/2,",").concat(n+i),a+="L ".concat(e+r-o/2-s,",").concat(n+i),a+="L ".concat(e,",").concat(n," Z"),a},_Be={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CBe=function(e){var n=i4(i4({},_Be),e),r=S.useRef(),s=S.useState(-1),i=mBe(s,2),o=i[0],a=i[1];S.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,d=n.lowerWidth,f=n.height,p=n.className,m=n.animationEasing,g=n.animationDuration,y=n.animationBegin,v=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var x=at("recharts-trapezoid",p);return v?j.createElement(al,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:f,x:l,y:c},duration:g,animationEasing:m,isActive:v},function(b){var w=b.upperWidth,_=b.lowerWidth,C=b.height,E=b.x,N=b.y;return j.createElement(al,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:m},j.createElement("path",Nw({},Xe(n,!0),{className:x,d:o4(E,N,w,_,C),ref:r})))}):j.createElement("g",null,j.createElement("path",Nw({},Xe(n,!0),{className:x,d:o4(l,c,u,d,f)})))},NBe=["option","shapeType","propTransformer","activeClassName","isActive"];function Ry(t){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(t)}function EBe(t,e){if(t==null)return{};var n=TBe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TBe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function a4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ew(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a4(Object(n),!0).forEach(function(r){IBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IBe(t,e,n){return e=kBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kBe(t){var e=OBe(t,"string");return Ry(e)=="symbol"?e:e+""}function OBe(t,e){if(Ry(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ry(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Be(t,e){return Ew(Ew({},e),t)}function ABe(t,e){return t==="symbols"}function l4(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return j.createElement(DP,n);case"trapezoid":return j.createElement(CBe,n);case"sector":return j.createElement(t7,n);case"symbols":if(ABe(e))return j.createElement(ZA,n);break;default:return null}}function PBe(t){return S.isValidElement(t)?t.props:t}function v7(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?$Be:r,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,a=t.isActive,l=EBe(t,NBe),c;if(S.isValidElement(e))c=S.cloneElement(e,Ew(Ew({},l),PBe(e)));else if(Ze(e))c=e(l);else if(lBe(e)&&!pBe(e)){var u=s(e,l);c=j.createElement(l4,{shapeType:n,elementProps:u})}else{var d=l;c=j.createElement(l4,{shapeType:n,elementProps:d})}return a?j.createElement(Dt,{className:o},c):c}function e_(t,e){return e!=null&&"trapezoids"in t.props}function t_(t,e){return e!=null&&"sectors"in t.props}function Dy(t,e){return e!=null&&"points"in t.props}function RBe(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,i=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&i}function DBe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function jBe(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function MBe(t,e){var n;return e_(t,e)?n=RBe:t_(t,e)?n=DBe:Dy(t,e)&&(n=jBe),n}function LBe(t,e){var n;return e_(t,e)?n="trapezoids":t_(t,e)?n="sectors":Dy(t,e)&&(n="points"),n}function FBe(t,e){if(e_(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(t_(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Dy(t,e)?e.payload:{}}function BBe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=LBe(n,e),i=FBe(n,e),o=r.filter(function(l,c){var u=GS(i,l),d=n.props[s].filter(function(m){var g=MBe(n,e);return g(m,e)}),f=n.props[s].indexOf(d[d.length-1]),p=c===f;return u&&p}),a=r.indexOf(o[o.length-1]);return a}var Ib;function jh(t){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Of.apply(this,arguments)}function c4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c4(Object(n),!0).forEach(function(r){xi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b7(r.key),r)}}function WBe(t,e,n){return e&&u4(t.prototype,e),n&&u4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zBe(t,e,n){return e=Tw(e),VBe(t,x7()?Reflect.construct(e,n||[],Tw(t).constructor):e.apply(t,n))}function VBe(t,e){if(e&&(jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HBe(t)}function HBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x7=function(){return!!t})()}function Tw(t){return Tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tw(t)}function GBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kI(t,e)}function kI(t,e){return kI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},kI(t,e)}function xi(t,e,n){return e=b7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b7(t){var e=qBe(t,"string");return jh(e)=="symbol"?e:e+""}function qBe(t,e){if(jh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fa=function(t){function e(n){var r;return UBe(this,e),r=zBe(this,e,[n]),xi(r,"pieRef",null),xi(r,"sectorRefs",[]),xi(r,"id",Dv("recharts-pie-")),xi(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ze(s)&&s()}),xi(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ze(s)&&s()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return GBe(e,t),WBe(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,a=i.labelLine,l=i.dataKey,c=i.valueKey,u=Xe(this.props,!1),d=Xe(o,!1),f=Xe(a,!1),p=o&&o.offsetRadius||20,m=r.map(function(g,y){var v=(g.startAngle+g.endAngle)/2,x=Jt(g.cx,g.cy,g.outerRadius+p,v),b=Gt(Gt(Gt(Gt({},u),g),{},{stroke:"none"},d),{},{index:y,textAnchor:e.getTextAnchor(x.x,g.cx)},x),w=Gt(Gt(Gt(Gt({},u),g),{},{fill:"none",stroke:g.fill},f),{},{index:y,points:[Jt(g.cx,g.cy,g.outerRadius,v),x]}),_=l;return yt(l)&&yt(c)?_="value":yt(l)&&(_=c),j.createElement(Dt,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},a&&e.renderLabelLineItem(a,w,"line"),e.renderLabelItem(o,b,Wr(g,_)))});return j.createElement(Dt,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(r){var s=this,i=this.props,o=i.activeShape,a=i.blendStroke,l=i.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var d=s.isActiveIndex(u),f=l&&s.hasActiveIndex()?l:null,p=d?o:f,m=Gt(Gt({},c),{},{stroke:a?c.fill:c.stroke,tabIndex:-1});return j.createElement(Dt,Of({ref:function(y){y&&!s.sectorRefs.includes(y)&&s.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},cd(s.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),j.createElement(v7,Of({option:p,isActive:d,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,i=s.sectors,o=s.isAnimationActive,a=s.animationBegin,l=s.animationDuration,c=s.animationEasing,u=s.animationId,d=this.state,f=d.prevSectors,p=d.prevIsAnimationActive;return j.createElement(al,{begin:a,duration:l,isActive:o,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,y=[],v=i&&i[0],x=v.startAngle;return i.forEach(function(b,w){var _=f&&f[w],C=w>0?Js(b,"paddingAngle",0):0;if(_){var E=Rl(_.endAngle-_.startAngle,b.endAngle-b.startAngle),N=Gt(Gt({},b),{},{startAngle:x+C,endAngle:x+E(g)+C});y.push(N),x=N.endAngle}else{var I=b.endAngle,$=b.startAngle,O=Rl(0,I-$),k=O(g),R=Gt(Gt({},b),{},{startAngle:x+C,endAngle:x+k+C});y.push(R),x=R.endAngle}}),j.createElement(Dt,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var a=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[a].focus(),s.setState({sectorToFocus:a});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!GS(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,i=s.hide,o=s.sectors,a=s.className,l=s.label,c=s.cx,u=s.cy,d=s.innerRadius,f=s.outerRadius,p=s.isAnimationActive,m=this.state.isAnimationFinished;if(i||!o||!o.length||!pe(c)||!pe(u)||!pe(d)||!pe(f))return null;var g=at("recharts-pie",a);return j.createElement(Dt,{tabIndex:this.props.rootTabIndex,className:g,ref:function(v){r.pieRef=v}},this.renderSectors(),l&&this.renderLabels(o),cr.renderCallByParent(this.props,null,!1),(!p||m)&&vc.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,i){if(j.isValidElement(r))return j.cloneElement(r,s);if(Ze(r))return r(s);var o=at("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return j.createElement(pI,Of({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,s,i){if(j.isValidElement(r))return j.cloneElement(r,s);var o=i;if(Ze(r)&&(o=r(s),j.isValidElement(o)))return o;var a=at("recharts-pie-label-text",typeof r!="boolean"&&!Ze(r)?r.className:"");return j.createElement(ud,Of({},s,{alignmentBaseline:"middle",className:a}),o)}}])}(S.PureComponent);Ib=fa;xi(fa,"displayName","Pie");xi(fa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Va.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});xi(fa,"parseDeltaAngle",function(t,e){var n=ss(e-t),r=Math.min(Math.abs(e-t),360);return n*r});xi(fa,"getRealPieData",function(t){var e=t.data,n=t.children,r=Xe(t,!1),s=Ti(n,Mv);return e&&e.length?e.map(function(i,o){return Gt(Gt(Gt({payload:i},r),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return Gt(Gt({},r),i.props)}):[]});xi(fa,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,s=e.width,i=e.height,o=Q9(s,i),a=r+is(t.cx,s,s/2),l=n+is(t.cy,i,i/2),c=is(t.innerRadius,o,0),u=is(t.outerRadius,o,o*.8),d=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:a,cy:l,innerRadius:c,outerRadius:u,maxRadius:d}});xi(fa,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Gt(Gt({},e.type.defaultProps),e.props):e.props,s=Ib.getRealPieData(r);if(!s||!s.length)return null;var i=r.cornerRadius,o=r.startAngle,a=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,d=r.valueKey,f=r.tooltipType,p=Math.abs(r.minAngle),m=Ib.parseCoordinateOfPie(r,n),g=Ib.parseDeltaAngle(o,a),y=Math.abs(g),v=c;yt(c)&&yt(d)?(go(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):yt(c)&&(go(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=d);var x=s.filter(function(N){return Wr(N,v,0)!==0}).length,b=(y>=360?x:x-1)*l,w=y-x*p-b,_=s.reduce(function(N,I){var $=Wr(I,v,0);return N+(pe($)?$:0)},0),C;if(_>0){var E;C=s.map(function(N,I){var $=Wr(N,v,0),O=Wr(N,u,I),k=(pe($)?$:0)/_,R;I?R=E.endAngle+ss(g)*l*($!==0?1:0):R=o;var M=R+ss(g)*(($!==0?p:0)+k*w),B=(R+M)/2,F=(m.innerRadius+m.outerRadius)/2,L=[{name:O,value:$,payload:N,dataKey:v,type:f}],P=Jt(m.cx,m.cy,F,B);return E=Gt(Gt(Gt({percent:k,cornerRadius:i,name:O,tooltipPayload:L,midAngle:B,middleRadius:F,tooltipPosition:P},N),m),{},{value:Wr(N,v),startAngle:R,endAngle:M,payload:N,paddingAngle:ss(g)*l}),E})}return Gt(Gt({},m),{},{sectors:C,data:s})});var KBe=Math.ceil,XBe=Math.max;function YBe(t,e,n,r){for(var s=-1,i=XBe(KBe((e-t)/(n||1)),0),o=Array(i);i--;)o[r?i:++s]=t,t+=n;return o}var QBe=YBe,JBe=LK,d4=1/0,ZBe=17976931348623157e292;function eUe(t){if(!t)return t===0?t:0;if(t=JBe(t),t===d4||t===-d4){var e=t<0?-1:1;return e*ZBe}return t===t?t:0}var w7=eUe,tUe=QBe,nUe=jS,oN=w7;function rUe(t){return function(e,n,r){return r&&typeof r!="number"&&nUe(e,n,r)&&(n=r=void 0),e=oN(e),n===void 0?(n=e,e=0):n=oN(n),r=r===void 0?e<n?1:-1:oN(r),tUe(e,n,r,t)}}var sUe=rUe,iUe=sUe,oUe=iUe(),aUe=oUe;const Iw=Tt(aUe);function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}function f4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function h4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f4(Object(n),!0).forEach(function(r){S7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S7(t,e,n){return e=lUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lUe(t){var e=cUe(t,"string");return jy(e)=="symbol"?e:e+""}function cUe(t,e){if(jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uUe=["Webkit","Moz","O","ms"],dUe=function(e,n){var r=e.replace(/(\w)/,function(i){return i.toUpperCase()}),s=uUe.reduce(function(i,o){return h4(h4({},i),{},S7({},o+r,n))},{});return s[e]=n,s};function Mh(t){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(t)}function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kw.apply(this,arguments)}function p4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function aN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p4(Object(n),!0).forEach(function(r){Ds(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C7(r.key),r)}}function hUe(t,e,n){return e&&m4(t.prototype,e),n&&m4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pUe(t,e,n){return e=Ow(e),mUe(t,_7()?Reflect.construct(e,n||[],Ow(t).constructor):e.apply(t,n))}function mUe(t,e){if(e&&(Mh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gUe(t)}function gUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_7=function(){return!!t})()}function Ow(t){return Ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ow(t)}function yUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OI(t,e)}function OI(t,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},OI(t,e)}function Ds(t,e,n){return e=C7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C7(t){var e=vUe(t,"string");return Mh(e)=="symbol"?e:e+""}function vUe(t,e){if(Mh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xUe=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=dg().domain(Iw(0,l)).range([i,i+o-a]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(s),scale:c,scaleValues:u}},g4=function(e){return e.changedTouches&&!!e.changedTouches.length},Lh=function(t){function e(n){var r;return fUe(this,e),r=pUe(this,e,[n]),Ds(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Ds(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Ds(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,i=s.endIndex,o=s.onDragEnd,a=s.startIndex;o==null||o({endIndex:i,startIndex:a})}),r.detachDragEndListener()}),Ds(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ds(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ds(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ds(r,"handleSlideDragStart",function(s){var i=g4(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return yUe(e,t),hUe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,i=r.endX,o=this.state.scaleValues,a=this.props,l=a.gap,c=a.data,u=c.length-1,d=Math.min(s,i),f=Math.max(s,i),p=e.getIndexInRange(o,d),m=e.getIndexInRange(o,f);return{startIndex:p-p%l,endIndex:m===u?u:m-m%l}}},{key:"getTextOfTick",value:function(r){var s=this.props,i=s.data,o=s.tickFormatter,a=s.dataKey,l=Wr(i[r],a,r);return Ze(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,i=s.slideMoveStartX,o=s.startX,a=s.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,f=l.startIndex,p=l.endIndex,m=l.onChange,g=r.pageX-i;g>0?g=Math.min(g,c+u-d-a,c+u-d-o):g<0&&(g=Math.max(g,c-o,c-a));var y=this.getIndex({startX:o+g,endX:a+g});(y.startIndex!==f||y.endIndex!==p)&&m&&m(y),this.setState({startX:o+g,endX:a+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var i=g4(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,a=s.endX,l=s.startX,c=this.state[o],u=this.props,d=u.x,f=u.width,p=u.travellerWidth,m=u.onChange,g=u.gap,y=u.data,v={startX:this.state.startX,endX:this.state.endX},x=r.pageX-i;x>0?x=Math.min(x,d+f-p-c):x<0&&(x=Math.max(x,d-c)),v[o]=c+x;var b=this.getIndex(v),w=b.startIndex,_=b.endIndex,C=function(){var N=y.length-1;return o==="startX"&&(a>l?w%g===0:_%g===0)||a<l&&_===N||o==="endX"&&(a>l?_%g===0:w%g===0)||a>l&&_===N};this.setState(Ds(Ds({},o,c+x),"brushMoveStartX",r.pageX),function(){m&&C()&&m(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var i=this,o=this.state,a=o.scaleValues,l=o.startX,c=o.endX,u=this.state[s],d=a.indexOf(u);if(d!==-1){var f=d+r;if(!(f===-1||f>=a.length)){var p=a[f];s==="startX"&&p>=c||s==="endX"&&p<=l||this.setState(Ds({},s,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.fill,c=r.stroke;return j.createElement("rect",{stroke:c,fill:l,x:s,y:i,width:o,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.data,c=r.children,u=r.padding,d=S.Children.only(c);return d?j.cloneElement(d,{x:s,y:i,width:o,height:a,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,s){var i,o,a=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,f=l.traveller,p=l.ariaLabel,m=l.data,g=l.startIndex,y=l.endIndex,v=Math.max(r,this.props.x),x=aN(aN({},Xe(this.props,!1)),{},{x:v,y:c,width:u,height:d}),b=p||"Min value: ".concat((i=m[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=m[y])===null||o===void 0?void 0:o.name);return j.createElement(Dt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),a.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,s))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,x))}},{key:"renderSlide",value:function(r,s){var i=this.props,o=i.y,a=i.height,l=i.stroke,c=i.travellerWidth,u=Math.min(r,s)+c,d=Math.max(Math.abs(s-r)-c,0);return j.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:o,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,i=r.endIndex,o=r.y,a=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,f=u.endX,p=5,m={pointerEvents:"none",fill:c};return j.createElement(Dt,{className:"recharts-brush-texts"},j.createElement(ud,kw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-p,y:o+a/2},m),this.getTextOfTick(s)),j.createElement(ud,kw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+p,y:o+a/2},m),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,s=r.data,i=r.className,o=r.children,a=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,f=this.state,p=f.startX,m=f.endX,g=f.isTextActive,y=f.isSlideMoving,v=f.isTravellerMoving,x=f.isTravellerFocused;if(!s||!s.length||!pe(a)||!pe(l)||!pe(c)||!pe(u)||c<=0||u<=0)return null;var b=at("recharts-brush",i),w=j.Children.count(o)===1,_=dUe("userSelect","none");return j.createElement(Dt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||y||v||x||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,i=r.y,o=r.width,a=r.height,l=r.stroke,c=Math.floor(i+a/2)-1;return j.createElement(j.Fragment,null,j.createElement("rect",{x:s,y:i,width:o,height:a,fill:l,stroke:"none"}),j.createElement("line",{x1:s+1,y1:c,x2:s+o-1,y2:c,fill:"none",stroke:"#fff"}),j.createElement("line",{x1:s+1,y1:c+2,x2:s+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var i;return j.isValidElement(r)?i=j.cloneElement(r,s):Ze(r)?i=r(s):i=e.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(r,s){var i=r.data,o=r.width,a=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(i!==s.prevData||c!==s.prevUpdateId)return aN({prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:o},i&&i.length?xUe({data:i,width:o,x:a,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||a!==s.prevX||l!==s.prevTravellerWidth)){s.scale.range([a,a+o-l]);var f=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,s){for(var i=r.length,o=0,a=i-1;a-o>1;){var l=Math.floor((o+a)/2);r[l]>s?a=l:o=l}return s>=r[a]?a:o}}])}(S.PureComponent);Ds(Lh,"displayName","Brush");Ds(Lh,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var bUe=oP;function wUe(t,e){var n;return bUe(t,function(r,s,i){return n=e(r,s,i),!n}),!!n}var SUe=wUe,_Ue=dK,CUe=da,NUe=SUe,EUe=$s,TUe=jS;function IUe(t,e,n){var r=EUe(t)?_Ue:NUe;return n&&TUe(t,e,n)&&(e=void 0),r(t,CUe(e))}var kUe=IUe;const OUe=Tt(kUe);var Qo=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},y4=PK;function $Ue(t,e,n){e=="__proto__"&&y4?y4(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var AUe=$Ue,PUe=AUe,RUe=$K,DUe=da;function jUe(t,e){var n={};return e=DUe(e),RUe(t,function(r,s,i){PUe(n,s,e(r,s,i))}),n}var MUe=jUe;const LUe=Tt(MUe);function FUe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var BUe=FUe,UUe=oP;function WUe(t,e){var n=!0;return UUe(t,function(r,s,i){return n=!!e(r,s,i),n}),n}var zUe=WUe,VUe=BUe,HUe=zUe,GUe=da,qUe=$s,KUe=jS;function XUe(t,e,n){var r=qUe(t)?VUe:HUe;return n&&KUe(t,e,n)&&(e=void 0),r(t,GUe(e))}var YUe=XUe;const N7=Tt(YUe);var QUe=["x","y"];function My(t){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(t)}function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}function v4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Im(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v4(Object(n),!0).forEach(function(r){JUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JUe(t,e,n){return e=ZUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZUe(t){var e=eWe(t,"string");return My(e)=="symbol"?e:e+""}function eWe(t,e){if(My(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(My(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tWe(t,e){if(t==null)return{};var n=nWe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nWe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function rWe(t,e){var n=t.x,r=t.y,s=tWe(t,QUe),i="".concat(n),o=parseInt(i,10),a="".concat(r),l=parseInt(a,10),c="".concat(e.height||s.height),u=parseInt(c,10),d="".concat(e.width||s.width),f=parseInt(d,10);return Im(Im(Im(Im(Im({},e),s),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function x4(t){return j.createElement(v7,$I({shapeType:"rectangle",propTransformer:rWe,activeClassName:"recharts-active-bar"},t))}var sWe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var i=typeof r=="number";return i?e(r,s):(i||fd(),n)}},iWe=["value","background"],E7;function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}function oWe(t,e){if(t==null)return{};var n=aWe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aWe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $w(){return $w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$w.apply(this,arguments)}function b4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Mn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b4(Object(n),!0).forEach(function(r){Jl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I7(r.key),r)}}function cWe(t,e,n){return e&&w4(t.prototype,e),n&&w4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uWe(t,e,n){return e=Aw(e),dWe(t,T7()?Reflect.construct(e,n||[],Aw(t).constructor):e.apply(t,n))}function dWe(t,e){if(e&&(Fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fWe(t)}function fWe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T7=function(){return!!t})()}function Aw(t){return Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Aw(t)}function hWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AI(t,e)}function AI(t,e){return AI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},AI(t,e)}function Jl(t,e,n){return e=I7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I7(t){var e=pWe(t,"string");return Fh(e)=="symbol"?e:e+""}function pWe(t,e){if(Fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kc=function(t){function e(){var n;lWe(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=uWe(this,e,[].concat(s)),Jl(n,"state",{isAnimationFinished:!1}),Jl(n,"id",Dv("recharts-bar-")),Jl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Jl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return hWe(e,t),cWe(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,i=this.props,o=i.shape,a=i.dataKey,l=i.activeIndex,c=i.activeBar,u=Xe(this.props,!1);return r&&r.map(function(d,f){var p=f===l,m=p?c:o,g=Mn(Mn(Mn({},u),d),{},{isActive:p,option:m,index:f,dataKey:a,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return j.createElement(Dt,$w({className:"recharts-bar-rectangle"},cd(s.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value)}),j.createElement(x4,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,i=s.data,o=s.layout,a=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,d=s.animationId,f=this.state.prevData;return j.createElement(al,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,g=i.map(function(y,v){var x=f&&f[v];if(x){var b=Rl(x.x,y.x),w=Rl(x.y,y.y),_=Rl(x.width,y.width),C=Rl(x.height,y.height);return Mn(Mn({},y),{},{x:b(m),y:w(m),width:_(m),height:C(m)})}if(o==="horizontal"){var E=Rl(0,y.height),N=E(m);return Mn(Mn({},y),{},{y:y.y+y.height-N,height:N})}var I=Rl(0,y.width),$=I(m);return Mn(Mn({},y),{},{width:$})});return j.createElement(Dt,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!GS(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,i=s.data,o=s.dataKey,a=s.activeIndex,l=Xe(this.props.background,!1);return i.map(function(c,u){c.value;var d=c.background,f=oWe(c,iWe);if(!d)return null;var p=Mn(Mn(Mn(Mn(Mn({},f),{},{fill:"#eee"},d),l),cd(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return j.createElement(x4,$w({key:"background-bar-".concat(u),option:r.props.background,isActive:u===a},p))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,a=i.xAxis,l=i.yAxis,c=i.layout,u=i.children,d=Ti(u,XS);if(!d)return null;var f=c==="vertical"?o[0].height/2:o[0].width/2,p=function(y,v){var x=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:x,errorVal:Wr(y,v)}},m={clipPath:r?"url(#clipPath-".concat(s,")"):null};return j.createElement(Dt,m,d.map(function(g){return j.cloneElement(g,{key:"error-bar-".concat(s,"-").concat(g.props.dataKey),data:o,xAxis:a,yAxis:l,layout:c,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.data,o=r.className,a=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,f=r.height,p=r.isAnimationActive,m=r.background,g=r.id;if(s||!i||!i.length)return null;var y=this.state.isAnimationFinished,v=at("recharts-bar",o),x=a&&a.allowDataOverflow,b=l&&l.allowDataOverflow,w=x||b,_=yt(g)?this.id:g;return j.createElement(Dt,{className:v},x||b?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(_)},j.createElement("rect",{x:x?c:c-d/2,y:b?u:u-f/2,width:x?d:d*2,height:b?f:f*2}))):null,j.createElement(Dt,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(_,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,_),(!p||y)&&vc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(S.PureComponent);E7=Kc;Jl(Kc,"displayName","Bar");Jl(Kc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Va.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Jl(Kc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,s=t.bandSize,i=t.xAxis,o=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,f=t.offset,p=sLe(r,n);if(!p)return null;var m=e.layout,g=n.type.defaultProps,y=g!==void 0?Mn(Mn({},g),n.props):n.props,v=y.dataKey,x=y.children,b=y.minPointSize,w=m==="horizontal"?o:i,_=c?w.scale.domain():null,C=dLe({numericAxis:w}),E=Ti(x,Mv),N=d.map(function(I,$){var O,k,R,M,B,F;c?O=iLe(c[u+$],_):(O=Wr(I,v),Array.isArray(O)||(O=[C,O]));var L=sWe(b,E7.defaultProps.minPointSize)(O[1],$);if(m==="horizontal"){var P,W=[o.scale(O[0]),o.scale(O[1])],q=W[0],H=W[1];k=u3({axis:i,ticks:a,bandSize:s,offset:p.offset,entry:I,index:$}),R=(P=H??q)!==null&&P!==void 0?P:void 0,M=p.size;var Y=q-H;if(B=Number.isNaN(Y)?0:Y,F={x:k,y:o.y,width:M,height:o.height},Math.abs(L)>0&&Math.abs(B)<Math.abs(L)){var se=ss(B||L)*(Math.abs(L)-Math.abs(B));R-=se,B+=se}}else{var Se=[i.scale(O[0]),i.scale(O[1])],De=Se[0],Pe=Se[1];if(k=De,R=u3({axis:o,ticks:l,bandSize:s,offset:p.offset,entry:I,index:$}),M=Pe-De,B=p.size,F={x:i.x,y:R,width:i.width,height:B},Math.abs(L)>0&&Math.abs(M)<Math.abs(L)){var de=ss(M||L)*(Math.abs(L)-Math.abs(M));M+=de}}return Mn(Mn(Mn({},I),{},{x:k,y:R,width:M,height:B,value:c?O:O[1],payload:I,background:F},E&&E[$]&&E[$].props),{},{tooltipPayload:[X9(n,I)],tooltipPosition:{x:k+M/2,y:R+B/2}})});return Mn({data:N,layout:m},f)});function Ly(t){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(t)}function mWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k7(r.key),r)}}function gWe(t,e,n){return e&&S4(t.prototype,e),n&&S4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Qi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_4(Object(n),!0).forEach(function(r){n_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n_(t,e,n){return e=k7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k7(t){var e=yWe(t,"string");return Ly(e)=="symbol"?e:e+""}function yWe(t,e){if(Ly(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ly(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vWe=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!Fs(c,Kc);return u.reduce(function(p,m){var g=n[m],y=g.orientation,v=g.domain,x=g.padding,b=x===void 0?{}:x,w=g.mirror,_=g.reversed,C="".concat(y).concat(w?"Mirror":""),E,N,I,$,O;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var k=v[1]-v[0],R=1/0,M=g.categoricalDomain.sort();if(M.forEach(function(Se,De){De>0&&(R=Math.min((Se||0)-(M[De-1]||0),R))}),Number.isFinite(R)){var B=R/k,F=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(E=B*F/2),g.padding==="no-gap"){var L=is(e.barCategoryGap,B*F),P=B*F/2;E=P-L-(P-L)/F*L}}}s==="xAxis"?N=[r.left+(b.left||0)+(E||0),r.left+r.width-(b.right||0)-(E||0)]:s==="yAxis"?N=l==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(E||0),r.top+r.height-(b.bottom||0)-(E||0)]:N=g.range,_&&(N=[N[1],N[0]]);var W=H9(g,i,f),q=W.scale,H=W.realScaleType;q.domain(v).range(N),G9(q);var Y=q9(q,Qi(Qi({},g),{},{realScaleType:H}));s==="xAxis"?(O=y==="top"&&!w||y==="bottom"&&w,I=r.left,$=d[C]-O*g.height):s==="yAxis"&&(O=y==="left"&&!w||y==="right"&&w,I=d[C]-O*g.width,$=r.top);var se=Qi(Qi(Qi({},g),Y),{},{realScaleType:H,x:I,y:$,scale:q,width:s==="xAxis"?r.width:g.width,height:s==="yAxis"?r.height:g.height});return se.bandSize=gw(se,Y),!g.hide&&s==="xAxis"?d[C]+=(O?-1:1)*se.height:g.hide||(d[C]+=(O?-1:1)*se.width),Qi(Qi({},p),{},n_({},m,se))},{})},O7=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(s,o),width:Math.abs(i-r),height:Math.abs(o-s)}},xWe=function(e){var n=e.x1,r=e.y1,s=e.x2,i=e.y2;return O7({x:n,y:r},{x:s,y:i})},$7=function(){function t(e){mWe(this,t),this.scale=e}return gWe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(s){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],i=r[r.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])}();n_($7,"EPS",1e-4);var MP=function(e){var n=Object.keys(e).reduce(function(r,s){return Qi(Qi({},r),{},n_({},s,$7.create(e[s])))},{});return Qi(Qi({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,a=i.position;return LUe(s,function(l,c){return n[c].apply(l,{bandAware:o,position:a})})},isInRange:function(s){return N7(s,function(i,o){return n[o].isInRange(i)})}})};function bWe(t){return(t%180+180)%180}var wWe=function(e){var n=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=bWe(s),o=i*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},SWe=da,_We=jv,CWe=RS;function NWe(t){return function(e,n,r){var s=Object(e);if(!_We(e)){var i=SWe(n);e=CWe(e),n=function(a){return i(s[a],a,s)}}var o=t(e,n,r);return o>-1?s[i?e[o]:o]:void 0}}var EWe=NWe,TWe=w7;function IWe(t){var e=TWe(t),n=e%1;return e===e?n?e-n:e:0}var kWe=IWe,OWe=NK,$We=da,AWe=kWe,PWe=Math.max;function RWe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:AWe(n);return s<0&&(s=PWe(r+s,0)),OWe(t,$We(e),s)}var DWe=RWe,jWe=EWe,MWe=DWe,LWe=jWe(MWe),FWe=LWe;const BWe=Tt(FWe);var UWe=qSe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),LP=S.createContext(void 0),FP=S.createContext(void 0),A7=S.createContext(void 0),P7=S.createContext({}),R7=S.createContext(void 0),D7=S.createContext(0),j7=S.createContext(0),C4=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,i=n.offset,o=e.clipPathId,a=e.children,l=e.width,c=e.height,u=UWe(i);return j.createElement(LP.Provider,{value:r},j.createElement(FP.Provider,{value:s},j.createElement(P7.Provider,{value:i},j.createElement(A7.Provider,{value:u},j.createElement(R7.Provider,{value:o},j.createElement(D7.Provider,{value:c},j.createElement(j7.Provider,{value:l},a)))))))},WWe=function(){return S.useContext(R7)},M7=function(e){var n=S.useContext(LP);n==null&&fd();var r=n[e];return r==null&&fd(),r},zWe=function(){var e=S.useContext(LP);return zl(e)},VWe=function(){var e=S.useContext(FP),n=BWe(e,function(r){return N7(r.domain,Number.isFinite)});return n||zl(e)},L7=function(e){var n=S.useContext(FP);n==null&&fd();var r=n[e];return r==null&&fd(),r},HWe=function(){var e=S.useContext(A7);return e},GWe=function(){return S.useContext(P7)},BP=function(){return S.useContext(j7)},UP=function(){return S.useContext(D7)};function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}function qWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KWe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B7(r.key),r)}}function XWe(t,e,n){return e&&KWe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YWe(t,e,n){return e=Pw(e),QWe(t,F7()?Reflect.construct(e,n||[],Pw(t).constructor):e.apply(t,n))}function QWe(t,e){if(e&&(Bh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JWe(t)}function JWe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F7=function(){return!!t})()}function Pw(t){return Pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pw(t)}function ZWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PI(t,e)}function PI(t,e){return PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},PI(t,e)}function N4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function E4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N4(Object(n),!0).forEach(function(r){WP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WP(t,e,n){return e=B7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B7(t){var e=eze(t,"string");return Bh(e)=="symbol"?e:e+""}function eze(t,e){if(Bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tze(t,e){return ize(t)||sze(t,e)||rze(t,e)||nze()}function nze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rze(t,e){if(t){if(typeof t=="string")return T4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T4(t,e)}}function T4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sze(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function ize(t){if(Array.isArray(t))return t}function RI(){return RI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RI.apply(this,arguments)}var oze=function(e,n){var r;return j.isValidElement(e)?r=j.cloneElement(e,n):Ze(e)?r=e(n):r=j.createElement("line",RI({},n,{className:"recharts-reference-line-line"})),r},aze=function(e,n,r,s,i,o,a,l,c){var u=i.x,d=i.y,f=i.width,p=i.height;if(r){var m=c.y,g=e.y.apply(m,{position:o});if(Qo(c,"discard")&&!e.y.isInRange(g))return null;var y=[{x:u+f,y:g},{x:u,y:g}];return l==="left"?y.reverse():y}if(n){var v=c.x,x=e.x.apply(v,{position:o});if(Qo(c,"discard")&&!e.x.isInRange(x))return null;var b=[{x,y:d+p},{x,y:d}];return a==="top"?b.reverse():b}if(s){var w=c.segment,_=w.map(function(C){return e.apply(C,{position:o})});return Qo(c,"discard")&&OUe(_,function(C){return!e.isInRange(C)})?null:_}return null};function lze(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,i=t.yAxisId,o=t.shape,a=t.className,l=t.alwaysShow,c=WWe(),u=M7(s),d=L7(i),f=HWe();if(!c||!f)return null;go(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=MP({x:u.scale,y:d.scale}),m=Jn(e),g=Jn(n),y=r&&r.length===2,v=aze(p,m,g,y,f,t.position,u.orientation,d.orientation,t);if(!v)return null;var x=tze(v,2),b=x[0],w=b.x,_=b.y,C=x[1],E=C.x,N=C.y,I=Qo(t,"hidden")?"url(#".concat(c,")"):void 0,$=E4(E4({clipPath:I},Xe(t,!0)),{},{x1:w,y1:_,x2:E,y2:N});return j.createElement(Dt,{className:at("recharts-reference-line",a)},oze(o,$),cr.renderCallByParent(t,xWe({x1:w,y1:_,x2:E,y2:N})))}var zP=function(t){function e(){return qWe(this,e),YWe(this,e,arguments)}return ZWe(e,t),XWe(e,[{key:"render",value:function(){return j.createElement(lze,this.props)}}])}(j.Component);WP(zP,"displayName","ReferenceLine");WP(zP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DI.apply(this,arguments)}function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function I4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function k4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I4(Object(n),!0).forEach(function(r){r_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W7(r.key),r)}}function dze(t,e,n){return e&&uze(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fze(t,e,n){return e=Rw(e),hze(t,U7()?Reflect.construct(e,n||[],Rw(t).constructor):e.apply(t,n))}function hze(t,e){if(e&&(Uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pze(t)}function pze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U7=function(){return!!t})()}function Rw(t){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rw(t)}function mze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jI(t,e)}function jI(t,e){return jI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jI(t,e)}function r_(t,e,n){return e=W7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W7(t){var e=gze(t,"string");return Uh(e)=="symbol"?e:e+""}function gze(t,e){if(Uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yze=function(e){var n=e.x,r=e.y,s=e.xAxis,i=e.yAxis,o=MP({x:s.scale,y:i.scale}),a=o.apply({x:n,y:r},{bandAware:!0});return Qo(e,"discard")&&!o.isInRange(a)?null:a},s_=function(t){function e(){return cze(this,e),fze(this,e,arguments)}return mze(e,t),dze(e,[{key:"render",value:function(){var r=this.props,s=r.x,i=r.y,o=r.r,a=r.alwaysShow,l=r.clipPathId,c=Jn(s),u=Jn(i);if(go(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=yze(this.props);if(!d)return null;var f=d.x,p=d.y,m=this.props,g=m.shape,y=m.className,v=Qo(this.props,"hidden")?"url(#".concat(l,")"):void 0,x=k4(k4({clipPath:v},Xe(this.props,!0)),{},{cx:f,cy:p});return j.createElement(Dt,{className:at("recharts-reference-dot",y)},e.renderDot(g,x),cr.renderCallByParent(this.props,{x:f-o,y:p-o,width:2*o,height:2*o}))}}])}(j.Component);r_(s_,"displayName","ReferenceDot");r_(s_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});r_(s_,"renderDot",function(t,e){var n;return j.isValidElement(t)?n=j.cloneElement(t,e):Ze(t)?n=t(e):n=j.createElement(jP,DI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MI.apply(this,arguments)}function Wh(t){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(t)}function O4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O4(Object(n),!0).forEach(function(r){i_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V7(r.key),r)}}function bze(t,e,n){return e&&xze(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wze(t,e,n){return e=Dw(e),Sze(t,z7()?Reflect.construct(e,n||[],Dw(t).constructor):e.apply(t,n))}function Sze(t,e){if(e&&(Wh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ze(t)}function _ze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z7=function(){return!!t})()}function Dw(t){return Dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dw(t)}function Cze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LI(t,e)}function LI(t,e){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},LI(t,e)}function i_(t,e,n){return e=V7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V7(t){var e=Nze(t,"string");return Wh(e)=="symbol"?e:e+""}function Nze(t,e){if(Wh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eze=function(e,n,r,s,i){var o=i.x1,a=i.x2,l=i.y1,c=i.y2,u=i.xAxis,d=i.yAxis;if(!u||!d)return null;var f=MP({x:u.scale,y:d.scale}),p={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},m={x:n?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(c,{position:"end"}):f.y.rangeMax};return Qo(i,"discard")&&(!f.isInRange(p)||!f.isInRange(m))?null:O7(p,m)},o_=function(t){function e(){return vze(this,e),wze(this,e,arguments)}return Cze(e,t),bze(e,[{key:"render",value:function(){var r=this.props,s=r.x1,i=r.x2,o=r.y1,a=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;go(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Jn(s),f=Jn(i),p=Jn(o),m=Jn(a),g=this.props.shape;if(!d&&!f&&!p&&!m&&!g)return null;var y=Eze(d,f,p,m,this.props);if(!y&&!g)return null;var v=Qo(this.props,"hidden")?"url(#".concat(u,")"):void 0;return j.createElement(Dt,{className:at("recharts-reference-area",l)},e.renderRect(g,$4($4({clipPath:v},Xe(this.props,!0)),y)),cr.renderCallByParent(this.props,y))}}])}(j.Component);i_(o_,"displayName","ReferenceArea");i_(o_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});i_(o_,"renderRect",function(t,e){var n;return j.isValidElement(t)?n=j.cloneElement(t,e):Ze(t)?n=t(e):n=j.createElement(DP,MI({},e,{className:"recharts-reference-area-rect"})),n});function H7(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function Tze(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return wWe(r,n)}function Ize(t,e,n){var r=n==="width",s=t.x,i=t.y,o=t.width,a=t.height;return e===1?{start:r?s:i,end:r?s+o:i+a}:{start:r?s+o:i+a,end:r?s:i}}function jw(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function kze(t,e){return H7(t,e+1)}function Oze(t,e,n,r,s){for(var i=(r||[]).slice(),o=e.start,a=e.end,l=0,c=1,u=o,d=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:H7(r,c)};var g=l,y,v=function(){return y===void 0&&(y=n(m,g)),y},x=m.coordinate,b=l===0||jw(t,x,v,u,a);b||(l=0,u=o,c+=1),b&&(u=x+t*(v()/2+s),l+=c)},f;c<=i.length;)if(f=d(),f)return f.v;return[]}function Fy(t){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(t)}function A4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A4(Object(n),!0).forEach(function(r){$ze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ze(t,e,n){return e=Aze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aze(t){var e=Pze(t,"string");return Fy(e)=="symbol"?e:e+""}function Pze(t,e){if(Fy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rze(t,e,n,r,s){for(var i=(r||[]).slice(),o=i.length,a=e.start,l=e.end,c=function(f){var p=i[f],m,g=function(){return m===void 0&&(m=n(p,f)),m};if(f===o-1){var y=t*(p.coordinate+t*g()/2-l);i[f]=p=jr(jr({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate})}else i[f]=p=jr(jr({},p),{},{tickCoord:p.coordinate});var v=jw(t,p.tickCoord,g,a,l);v&&(l=p.tickCoord-t*(g()/2+s),i[f]=jr(jr({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function Dze(t,e,n,r,s,i){var o=(r||[]).slice(),a=o.length,l=e.start,c=e.end;if(i){var u=r[a-1],d=n(u,a-1),f=t*(u.coordinate+t*d/2-c);o[a-1]=u=jr(jr({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate});var p=jw(t,u.tickCoord,function(){return d},l,c);p&&(c=u.tickCoord-t*(d/2+s),o[a-1]=jr(jr({},u),{},{isShow:!0}))}for(var m=i?a-1:a,g=function(x){var b=o[x],w,_=function(){return w===void 0&&(w=n(b,x)),w};if(x===0){var C=t*(b.coordinate-t*_()/2-l);o[x]=b=jr(jr({},b),{},{tickCoord:C<0?b.coordinate-C*t:b.coordinate})}else o[x]=b=jr(jr({},b),{},{tickCoord:b.coordinate});var E=jw(t,b.tickCoord,_,l,c);E&&(l=b.tickCoord+t*(_()/2+s),o[x]=jr(jr({},b),{},{isShow:!0}))},y=0;y<m;y++)g(y);return o}function VP(t,e,n){var r=t.tick,s=t.ticks,i=t.viewBox,o=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,d=t.angle;if(!s||!s.length||!r)return[];if(pe(l)||Va.isSsr)return kze(s,typeof l=="number"&&pe(l)?l:0);var f=[],p=a==="top"||a==="bottom"?"width":"height",m=u&&p==="width"?ug(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(b,w){var _=Ze(c)?c(b.value,w):b.value;return p==="width"?Tze(ug(_,{fontSize:e,letterSpacing:n}),m,d):ug(_,{fontSize:e,letterSpacing:n})[p]},y=s.length>=2?ss(s[1].coordinate-s[0].coordinate):1,v=Ize(i,y,p);return l==="equidistantPreserveStart"?Oze(y,v,g,s,o):(l==="preserveStart"||l==="preserveStartEnd"?f=Dze(y,v,g,s,o,l==="preserveStartEnd"):f=Rze(y,v,g,s,o),f.filter(function(x){return x.isShow}))}var jze=["viewBox"],Mze=["viewBox"],Lze=["ticks"];function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}function $f(){return $f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$f.apply(this,arguments)}function P4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P4(Object(n),!0).forEach(function(r){HP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lN(t,e){if(t==null)return{};var n=Fze(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fze(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Bze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q7(r.key),r)}}function Uze(t,e,n){return e&&R4(t.prototype,e),n&&R4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wze(t,e,n){return e=Mw(e),zze(t,G7()?Reflect.construct(e,n||[],Mw(t).constructor):e.apply(t,n))}function zze(t,e){if(e&&(zh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vze(t)}function Vze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G7=function(){return!!t})()}function Mw(t){return Mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mw(t)}function Hze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FI(t,e)}function FI(t,e){return FI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},FI(t,e)}function HP(t,e,n){return e=q7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q7(t){var e=Gze(t,"string");return zh(e)=="symbol"?e:e+""}function Gze(t,e){if(zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vp=function(t){function e(n){var r;return Bze(this,e),r=Wze(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Hze(e,t),Uze(e,[{key:"shouldComponentUpdate",value:function(r,s){var i=r.viewBox,o=lN(r,jze),a=this.props,l=a.viewBox,c=lN(a,Mze);return!Kf(i,l)||!Kf(o,c)||!Kf(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.x,o=s.y,a=s.width,l=s.height,c=s.orientation,u=s.tickSize,d=s.mirror,f=s.tickMargin,p,m,g,y,v,x,b=d?-1:1,w=r.tickSize||u,_=pe(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":p=m=r.coordinate,y=o+ +!d*l,g=y-b*w,x=g-b*f,v=_;break;case"left":g=y=r.coordinate,m=i+ +!d*a,p=m-b*w,v=p-b*f,x=_;break;case"right":g=y=r.coordinate,m=i+ +d*a,p=m+b*w,v=p+b*f,x=_;break;default:p=m=r.coordinate,y=o+ +d*l,g=y+b*w,x=g+b*f,v=_;break}return{line:{x1:p,y1:g,x2:m,y2:y},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=Qr(Qr(Qr({},Xe(this.props,!1)),Xe(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!c||l==="bottom"&&c);d=Qr(Qr({},d),{},{x1:s,y1:i+f*a,x2:s+o,y2:i+f*a})}else{var p=+(l==="left"&&!c||l==="right"&&c);d=Qr(Qr({},d),{},{x1:s+p*o,y1:i,x2:s+p*o,y2:i+a})}return j.createElement("line",$f({},d,{className:at("recharts-cartesian-axis-line",Js(u,"className"))}))}},{key:"renderTicks",value:function(r,s,i){var o=this,a=this.props,l=a.tickLine,c=a.stroke,u=a.tick,d=a.tickFormatter,f=a.unit,p=VP(Qr(Qr({},this.props),{},{ticks:r}),s,i),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=Xe(this.props,!1),v=Xe(u,!1),x=Qr(Qr({},y),{},{fill:"none"},Xe(l,!1)),b=p.map(function(w,_){var C=o.getTickLineCoord(w),E=C.line,N=C.tick,I=Qr(Qr(Qr(Qr({textAnchor:m,verticalAnchor:g},y),{},{stroke:"none",fill:c},v),N),{},{index:_,payload:w,visibleTicksCount:p.length,tickFormatter:d});return j.createElement(Dt,$f({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},cd(o.props,w,_)),l&&j.createElement("line",$f({},x,E,{className:at("recharts-cartesian-axis-tick-line",Js(l,"className"))})),u&&e.renderTickItem(u,I,"".concat(Ze(d)?d(w.value,_):w.value).concat(f||"")))});return j.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,s=this.props,i=s.axisLine,o=s.width,a=s.height,l=s.ticksGenerator,c=s.className,u=s.hide;if(u)return null;var d=this.props,f=d.ticks,p=lN(d,Lze),m=f;return Ze(l)&&(m=f&&f.length>0?l(this.props):l(p)),o<=0||a<=0||!m||!m.length?null:j.createElement(Dt,{className:at("recharts-cartesian-axis",c),ref:function(y){r.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),cr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,i){var o;return j.isValidElement(r)?o=j.cloneElement(r,s):Ze(r)?o=r(s):o=j.createElement(ud,$f({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(S.Component);HP(Vp,"displayName","CartesianAxis");HP(Vp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qze=["x1","y1","x2","y2","key"],Kze=["offset"];function hd(t){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(t)}function D4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D4(Object(n),!0).forEach(function(r){Xze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xze(t,e,n){return e=Yze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yze(t){var e=Qze(t,"string");return hd(e)=="symbol"?e:e+""}function Qze(t,e){if(hd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iu(){return Iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Iu.apply(this,arguments)}function j4(t,e){if(t==null)return{};var n=Jze(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jze(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Zze=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,s=e.x,i=e.y,o=e.width,a=e.height,l=e.ry;return j.createElement("rect",{x:s,y:i,ry:l,width:o,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function K7(t,e){var n;if(j.isValidElement(t))n=j.cloneElement(t,e);else if(Ze(t))n=t(e);else{var r=e.x1,s=e.y1,i=e.x2,o=e.y2,a=e.key,l=j4(e,qze),c=Xe(l,!1);c.offset;var u=j4(c,Kze);n=j.createElement("line",Iu({},u,{x1:r,y1:s,x2:i,y2:o,fill:"none",key:a}))}return n}function eVe(t){var e=t.x,n=t.width,r=t.horizontal,s=r===void 0?!0:r,i=t.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(a,l){var c=Br(Br({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return K7(s,c)});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function tVe(t){var e=t.y,n=t.height,r=t.vertical,s=r===void 0?!0:r,i=t.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(a,l){var c=Br(Br({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return K7(s,c)});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function nVe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,s=t.y,i=t.width,o=t.height,a=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=a.map(function(f){return Math.round(f+s-s)}).sort(function(f,p){return f-p});s!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var m=!u[p+1],g=m?s+o-f:u[p+1]-f;if(g<=0)return null;var y=p%e.length;return j.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:g,width:i,stroke:"none",fill:e[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function rVe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,i=t.x,o=t.y,a=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var m=!u[p+1],g=m?i+a-f:u[p+1]-f;if(g<=0)return null;var y=p%r.length;return j.createElement("rect",{key:"react-".concat(p),x:f,y:o,width:g,height:l,stroke:"none",fill:r[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var sVe=function(e,n){var r=e.xAxis,s=e.width,i=e.height,o=e.offset;return V9(VP(Br(Br(Br({},Vp.defaultProps),r),{},{ticks:Ma(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,n)},iVe=function(e,n){var r=e.yAxis,s=e.width,i=e.height,o=e.offset;return V9(VP(Br(Br(Br({},Vp.defaultProps),r),{},{ticks:Ma(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,n)},tf={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function GP(t){var e,n,r,s,i,o,a=BP(),l=UP(),c=GWe(),u=Br(Br({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:tf.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:tf.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:tf.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:tf.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:tf.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:tf.verticalFill,x:pe(t.x)?t.x:c.left,y:pe(t.y)?t.y:c.top,width:pe(t.width)?t.width:c.width,height:pe(t.height)?t.height:c.height}),d=u.x,f=u.y,p=u.width,m=u.height,g=u.syncWithTicks,y=u.horizontalValues,v=u.verticalValues,x=zWe(),b=VWe();if(!pe(p)||p<=0||!pe(m)||m<=0||!pe(d)||d!==+d||!pe(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||sVe,_=u.horizontalCoordinatesGenerator||iVe,C=u.horizontalPoints,E=u.verticalPoints;if((!C||!C.length)&&Ze(_)){var N=y&&y.length,I=_({yAxis:b?Br(Br({},b),{},{ticks:N?y:b.ticks}):void 0,width:a,height:l,offset:c},N?!0:g);go(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(hd(I),"]")),Array.isArray(I)&&(C=I)}if((!E||!E.length)&&Ze(w)){var $=v&&v.length,O=w({xAxis:x?Br(Br({},x),{},{ticks:$?v:x.ticks}):void 0,width:a,height:l,offset:c},$?!0:g);go(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(hd(O),"]")),Array.isArray(O)&&(E=O)}return j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(Zze,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),j.createElement(eVe,Iu({},u,{offset:c,horizontalPoints:C,xAxis:x,yAxis:b})),j.createElement(tVe,Iu({},u,{offset:c,verticalPoints:E,xAxis:x,yAxis:b})),j.createElement(nVe,Iu({},u,{horizontalPoints:C})),j.createElement(rVe,Iu({},u,{verticalPoints:E})))}GP.displayName="CartesianGrid";function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function oVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aVe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q7(r.key),r)}}function lVe(t,e,n){return e&&aVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cVe(t,e,n){return e=Lw(e),uVe(t,X7()?Reflect.construct(e,n||[],Lw(t).constructor):e.apply(t,n))}function uVe(t,e){if(e&&(Vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dVe(t)}function dVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X7=function(){return!!t})()}function Lw(t){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lw(t)}function fVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BI(t,e)}function BI(t,e){return BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},BI(t,e)}function Y7(t,e,n){return e=Q7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q7(t){var e=hVe(t,"string");return Vh(e)=="symbol"?e:e+""}function hVe(t,e){if(Vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UI.apply(this,arguments)}function pVe(t){var e=t.xAxisId,n=BP(),r=UP(),s=M7(e);return s==null?null:j.createElement(Vp,UI({},s,{className:at("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Ma(o,!0)}}))}var Wv=function(t){function e(){return oVe(this,e),cVe(this,e,arguments)}return fVe(e,t),lVe(e,[{key:"render",value:function(){return j.createElement(pVe,this.props)}}])}(j.Component);Y7(Wv,"displayName","XAxis");Y7(Wv,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Hh(t){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(t)}function mVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gVe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eX(r.key),r)}}function yVe(t,e,n){return e&&gVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vVe(t,e,n){return e=Fw(e),xVe(t,J7()?Reflect.construct(e,n||[],Fw(t).constructor):e.apply(t,n))}function xVe(t,e){if(e&&(Hh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bVe(t)}function bVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J7=function(){return!!t})()}function Fw(t){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fw(t)}function wVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WI(t,e)}function WI(t,e){return WI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},WI(t,e)}function Z7(t,e,n){return e=eX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eX(t){var e=SVe(t,"string");return Hh(e)=="symbol"?e:e+""}function SVe(t,e){if(Hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zI.apply(this,arguments)}var _Ve=function(e){var n=e.yAxisId,r=BP(),s=UP(),i=L7(n);return i==null?null:j.createElement(Vp,zI({},i,{className:at("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(a){return Ma(a,!0)}}))},zv=function(t){function e(){return mVe(this,e),vVe(this,e,arguments)}return wVe(e,t),yVe(e,[{key:"render",value:function(){return j.createElement(_Ve,this.props)}}])}(j.Component);Z7(zv,"displayName","YAxis");Z7(zv,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function M4(t){return TVe(t)||EVe(t)||NVe(t)||CVe()}function CVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NVe(t,e){if(t){if(typeof t=="string")return VI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VI(t,e)}}function EVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TVe(t){if(Array.isArray(t))return VI(t)}function VI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var HI=function(e,n,r,s,i){var o=Ti(e,zP),a=Ti(e,s_),l=[].concat(M4(o),M4(a)),c=Ti(e,o_),u="".concat(s,"Id"),d=s[0],f=n;if(l.length&&(f=l.reduce(function(g,y){if(y.props[u]===r&&Qo(y.props,"extendDomain")&&pe(y.props[d])){var v=y.props[d];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},f)),c.length){var p="".concat(d,"1"),m="".concat(d,"2");f=c.reduce(function(g,y){if(y.props[u]===r&&Qo(y.props,"extendDomain")&&pe(y.props[p])&&pe(y.props[m])){var v=y.props[p],x=y.props[m];return[Math.min(g[0],v,x),Math.max(g[1],v,x)]}return g},f)}return i&&i.length&&(f=i.reduce(function(g,y){return pe(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},f)),f},tX={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,d||l,f),m=n?n+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,m=new Array(p);f<p;f++)m[f]=d[f].fn;return m},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,p,m){var g=n?n+c:c;if(!this._events[g])return!1;var y=this._events[g],v=arguments.length,x,b;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,f),!0;case 5:return y.fn.call(y.context,u,d,f,p),!0;case 6:return y.fn.call(y.context,u,d,f,p,m),!0}for(b=1,x=new Array(v-1);b<v;b++)x[b-1]=arguments[b];y.fn.apply(y.context,x)}else{var w=y.length,_;for(b=0;b<w;b++)switch(y[b].once&&this.removeListener(c,y[b].fn,void 0,!0),v){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,d);break;case 4:y[b].fn.call(y[b].context,u,d,f);break;default:if(!x)for(_=1,x=new Array(v-1);_<v;_++)x[_-1]=arguments[_];y[b].fn.apply(y[b].context,x)}}return!0},a.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!f||m.once)&&(!d||m.context===d)&&o(this,p);else{for(var g=0,y=[],v=m.length;g<v;g++)(m[g].fn!==u||f&&!m[g].once||d&&m[g].context!==d)&&y.push(m[g]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(tX);var IVe=tX.exports;const kVe=Tt(IVe);var cN=new kVe,uN="recharts.syncMouseEvents";function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function OVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nX(r.key),r)}}function AVe(t,e,n){return e&&$Ve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dN(t,e,n){return e=nX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nX(t){var e=PVe(t,"string");return By(e)=="symbol"?e:e+""}function PVe(t,e){if(By(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(By(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var RVe=function(){function t(){OVe(this,t),dN(this,"activeIndex",0),dN(this,"coordinateList",[]),dN(this,"layout","horizontal")}return AVe(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,i=s===void 0?null:s,o=n.container,a=o===void 0?null:o,l=n.layout,c=l===void 0?null:l,u=n.offset,d=u===void 0?null:u,f=n.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,a=s.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=i+l+c,f=o+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function DVe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&pe(r)&&pe(s))return!0}return!1}function jVe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function rX(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,i=t.endAngle,o=Jt(e,n,r,s),a=Jt(e,n,r,i);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}function MVe(t,e,n){var r,s,i,o;if(t==="horizontal")r=e.x,i=r,s=n.top,o=n.top+n.height;else if(t==="vertical")s=e.y,o=s,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,f=Jt(a,l,c,d),p=Jt(a,l,u,d);r=f.x,s=f.y,i=p.x,o=p.y}else return rX(e);return[{x:r,y:s},{x:i,y:o}]}function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function L4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L4(Object(n),!0).forEach(function(r){LVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LVe(t,e,n){return e=FVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FVe(t){var e=BVe(t,"string");return Uy(e)=="symbol"?e:e+""}function BVe(t,e){if(Uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UVe(t){var e,n,r=t.element,s=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,a=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!i||!o||f!=="ScatterChart"&&s!=="axis")return null;var m,g=pI;if(f==="ScatterChart")m=o,g=v4e;else if(f==="BarChart")m=jVe(d,o,l,u),g=DP;else if(d==="radial"){var y=rX(o),v=y.cx,x=y.cy,b=y.radius,w=y.startAngle,_=y.endAngle;m={cx:v,cy:x,startAngle:w,endAngle:_,innerRadius:b,outerRadius:b},g=t7}else m={points:MVe(d,o,l)},g=pI;var C=qx(qx(qx(qx({stroke:"#ccc",pointerEvents:"none"},l),m),Xe(p,!1)),{},{payload:a,payloadIndex:c,className:at("recharts-tooltip-cursor",p.className)});return S.isValidElement(p)?S.cloneElement(p,C):S.createElement(g,C)}var WVe=["item"],zVe=["children","className","width","height","style","compact","title","desc"];function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}function gg(){return gg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gg.apply(this,arguments)}function F4(t,e){return GVe(t)||HVe(t,e)||iX(t,e)||VVe()}function VVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HVe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function GVe(t){if(Array.isArray(t))return t}function B4(t,e){if(t==null)return{};var n=qVe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function KVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XVe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oX(r.key),r)}}function YVe(t,e,n){return e&&XVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function QVe(t,e,n){return e=Bw(e),JVe(t,sX()?Reflect.construct(e,n||[],Bw(t).constructor):e.apply(t,n))}function JVe(t,e){if(e&&(Gh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZVe(t)}function ZVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!t})()}function Bw(t){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bw(t)}function e6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GI(t,e)}function GI(t,e){return GI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GI(t,e)}function qh(t){return r6e(t)||n6e(t)||iX(t)||t6e()}function t6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iX(t,e){if(t){if(typeof t=="string")return qI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qI(t,e)}}function n6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function r6e(t){if(Array.isArray(t))return qI(t)}function qI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function U4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U4(Object(n),!0).forEach(function(r){qe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qe(t,e,n){return e=oX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oX(t){var e=s6e(t,"string");return Gh(e)=="symbol"?e:e+""}function s6e(t,e){if(Gh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i6e={xAxis:["bottom","top"],yAxis:["left","right"]},o6e={width:"100%",height:"100%"},aX={x:0,y:0};function Kx(t){return t}var a6e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},l6e=function(e,n,r,s){var i=n.find(function(u){return u&&u.index===r});if(i){if(e==="horizontal")return{x:i.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,a=s.radius;return ee(ee(ee({},s),Jt(s.cx,s.cy,a,o)),{},{angle:o,radius:a})}var l=i.coordinate,c=s.angle;return ee(ee(ee({},s),Jt(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return aX},a_=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(qh(a),qh(c)):a},[]);return o.length>0?o:e&&e.length&&pe(s)&&pe(i)?e.slice(s,i+1):[]};function lX(t){return t==="number"?[0,"auto"]:void 0}var KI=function(e,n,r,s){var i=e.graphicalItems,o=e.tooltipAxis,a=a_(n,e);return r<0||!i||!i.length||r>=a.length?null:i.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?a:d;f=ST(p,o.dataKey,s)}else f=d&&d[r]||a[r];return f?[].concat(qh(l),[X9(c,f)]):l},[])},W4=function(e,n,r,s){var i=s||{x:e.chartX,y:e.chartY},o=a6e(i,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=JMe(o,a,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,f=KI(e,n,u,d),p=l6e(r,a,u,i);return{activeTooltipIndex:u,activeLabel:d,activePayload:f,activeCoordinate:p}}return null},c6e=function(e,n){var r=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,f=e.stackOffset,p=z9(u,i);return r.reduce(function(m,g){var y,v=g.type.defaultProps!==void 0?ee(ee({},g.type.defaultProps),g.props):g.props,x=v.type,b=v.dataKey,w=v.allowDataOverflow,_=v.allowDuplicatedCategory,C=v.scale,E=v.ticks,N=v.includeHidden,I=v[o];if(m[I])return m;var $=a_(e.data,{graphicalItems:s.filter(function(Y){var se,Se=o in Y.props?Y.props[o]:(se=Y.type.defaultProps)===null||se===void 0?void 0:se[o];return Se===I}),dataStartIndex:l,dataEndIndex:c}),O=$.length,k,R,M;DVe(v.domain,w,x)&&(k=cI(v.domain,null,w),p&&(x==="number"||C!=="auto")&&(M=fg($,b,"category")));var B=lX(x);if(!k||k.length===0){var F,L=(F=v.domain)!==null&&F!==void 0?F:B;if(b){if(k=fg($,b,x),x==="category"&&p){var P=z_e(k);_&&P?(R=k,k=Iw(0,O)):_||(k=h3(L,k,g).reduce(function(Y,se){return Y.indexOf(se)>=0?Y:[].concat(qh(Y),[se])},[]))}else if(x==="category")_?k=k.filter(function(Y){return Y!==""&&!yt(Y)}):k=h3(L,k,g).reduce(function(Y,se){return Y.indexOf(se)>=0||se===""||yt(se)?Y:[].concat(qh(Y),[se])},[]);else if(x==="number"){var W=rLe($,s.filter(function(Y){var se,Se,De=o in Y.props?Y.props[o]:(se=Y.type.defaultProps)===null||se===void 0?void 0:se[o],Pe="hide"in Y.props?Y.props.hide:(Se=Y.type.defaultProps)===null||Se===void 0?void 0:Se.hide;return De===I&&(N||!Pe)}),b,i,u);W&&(k=W)}p&&(x==="number"||C!=="auto")&&(M=fg($,b,"category"))}else p?k=Iw(0,O):a&&a[I]&&a[I].hasStack&&x==="number"?k=f==="expand"?[0,1]:K9(a[I].stackGroups,l,c):k=W9($,s.filter(function(Y){var se=o in Y.props?Y.props[o]:Y.type.defaultProps[o],Se="hide"in Y.props?Y.props.hide:Y.type.defaultProps.hide;return se===I&&(N||!Se)}),x,u,!0);if(x==="number")k=HI(d,k,I,i,E),L&&(k=cI(L,k,w));else if(x==="category"&&L){var q=L,H=k.every(function(Y){return q.indexOf(Y)>=0});H&&(k=q)}}return ee(ee({},m),{},qe({},I,ee(ee({},v),{},{axisType:i,domain:k,categoricalDomain:M,duplicateDomain:R,originalDomain:(y=v.domain)!==null&&y!==void 0?y:B,isCategorical:p,layout:u})))},{})},u6e=function(e,n){var r=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,f=a_(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),p=f.length,m=z9(u,i),g=-1;return r.reduce(function(y,v){var x=v.type.defaultProps!==void 0?ee(ee({},v.type.defaultProps),v.props):v.props,b=x[o],w=lX("number");if(!y[b]){g++;var _;return m?_=Iw(0,p):a&&a[b]&&a[b].hasStack?(_=K9(a[b].stackGroups,l,c),_=HI(d,_,b,i)):(_=cI(w,W9(f,r.filter(function(C){var E,N,I=o in C.props?C.props[o]:(E=C.type.defaultProps)===null||E===void 0?void 0:E[o],$="hide"in C.props?C.props.hide:(N=C.type.defaultProps)===null||N===void 0?void 0:N.hide;return I===b&&!$}),"number",u),s.defaultProps.allowDataOverflow),_=HI(d,_,b,i)),ee(ee({},y),{},qe({},b,ee(ee({axisType:i},s.defaultProps),{},{hide:!0,orientation:Js(i6e,"".concat(i,".").concat(g%2),null),domain:_,originalDomain:w,isCategorical:m,layout:u})))}return y},{})},d6e=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,d="".concat(s,"Id"),f=Ti(u,i),p={};return f&&f.length?p=c6e(e,{axes:f,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(p=u6e(e,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),p},f6e=function(e){var n=zl(e),r=Ma(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:aP(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:gw(n,r)}},z4=function(e){var n=e.children,r=e.defaultShowTooltip,s=Fs(n,Lh),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},h6e=function(e){return!e||!e.length?!1:e.some(function(n){var r=za(n&&n.type);return r&&r.indexOf("Bar")>=0})},V4=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},p6e=function(e,n){var r=e.props,s=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,a=e.yAxisMap,l=a===void 0?{}:a,c=r.width,u=r.height,d=r.children,f=r.margin||{},p=Fs(d,Lh),m=Fs(d,Bu),g=Object.keys(l).reduce(function(_,C){var E=l[C],N=E.orientation;return!E.mirror&&!E.hide?ee(ee({},_),{},qe({},N,_[N]+E.width)):_},{left:f.left||0,right:f.right||0}),y=Object.keys(o).reduce(function(_,C){var E=o[C],N=E.orientation;return!E.mirror&&!E.hide?ee(ee({},_),{},qe({},N,Js(_,"".concat(N))+E.height)):_},{top:f.top||0,bottom:f.bottom||0}),v=ee(ee({},y),g),x=v.bottom;p&&(v.bottom+=p.props.height||Lh.defaultProps.height),m&&n&&(v=tLe(v,s,r,n));var b=c-v.left-v.right,w=u-v.top-v.bottom;return ee(ee({brushBottom:x},v),{},{width:Math.max(b,0),height:Math.max(w,0)})},m6e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},cX=function(e){var n=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,i=s===void 0?"axis":s,o=e.validateTooltipEventTypes,a=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,f=function(y,v){var x=v.graphicalItems,b=v.stackGroups,w=v.offset,_=v.updateId,C=v.dataStartIndex,E=v.dataEndIndex,N=y.barSize,I=y.layout,$=y.barGap,O=y.barCategoryGap,k=y.maxBarSize,R=V4(I),M=R.numericAxisName,B=R.cateAxisName,F=h6e(x),L=[];return x.forEach(function(P,W){var q=a_(y.data,{graphicalItems:[P],dataStartIndex:C,dataEndIndex:E}),H=P.type.defaultProps!==void 0?ee(ee({},P.type.defaultProps),P.props):P.props,Y=H.dataKey,se=H.maxBarSize,Se=H["".concat(M,"Id")],De=H["".concat(B,"Id")],Pe={},de=l.reduce(function(fe,Te){var Qe=v["".concat(Te.axisType,"Map")],_e=H["".concat(Te.axisType,"Id")];Qe&&Qe[_e]||Te.axisType==="zAxis"||fd();var gt=Qe[_e];return ee(ee({},fe),{},qe(qe({},Te.axisType,gt),"".concat(Te.axisType,"Ticks"),Ma(gt)))},Pe),Ee=de[B],J=de["".concat(B,"Ticks")],ie=b&&b[Se]&&b[Se].hasStack&&fLe(P,b[Se].stackGroups),Z=za(P.type).indexOf("Bar")>=0,V=gw(Ee,J),ge=[],ve=F&&ZMe({barSize:N,stackGroups:b,totalSize:m6e(de,B)});if(Z){var Fe,je,mt=yt(se)?k:se,Ot=(Fe=(je=gw(Ee,J,!0))!==null&&je!==void 0?je:mt)!==null&&Fe!==void 0?Fe:0;ge=eLe({barGap:$,barCategoryGap:O,bandSize:Ot!==V?Ot:V,sizeList:ve[De],maxBarSize:mt}),Ot!==V&&(ge=ge.map(function(fe){return ee(ee({},fe),{},{position:ee(ee({},fe.position),{},{offset:fe.position.offset-Ot/2})})}))}var K=P&&P.type&&P.type.getComposedData;K&&L.push({props:ee(ee({},K(ee(ee({},de),{},{displayedData:q,props:y,dataKey:Y,item:P,bandSize:V,barPosition:ge,offset:w,stackedData:ie,layout:I,dataStartIndex:C,dataEndIndex:E}))),{},qe(qe(qe({key:P.key||"item-".concat(W)},M,de[M]),B,de[B]),"animationId",_)),childIndex:eCe(P,y.children),item:P})}),L},p=function(y,v){var x=y.props,b=y.dataStartIndex,w=y.dataEndIndex,_=y.updateId;if(!aL({props:x}))return null;var C=x.children,E=x.layout,N=x.stackOffset,I=x.data,$=x.reverseStackOrder,O=V4(E),k=O.numericAxisName,R=O.cateAxisName,M=Ti(C,r),B=uLe(I,M,"".concat(k,"Id"),"".concat(R,"Id"),N,$),F=l.reduce(function(H,Y){var se="".concat(Y.axisType,"Map");return ee(ee({},H),{},qe({},se,d6e(x,ee(ee({},Y),{},{graphicalItems:M,stackGroups:Y.axisType===k&&B,dataStartIndex:b,dataEndIndex:w}))))},{}),L=p6e(ee(ee({},F),{},{props:x,graphicalItems:M}),v==null?void 0:v.legendBBox);Object.keys(F).forEach(function(H){F[H]=u(x,F[H],L,H.replace("Map",""),n)});var P=F["".concat(R,"Map")],W=f6e(P),q=f(x,ee(ee({},F),{},{dataStartIndex:b,dataEndIndex:w,updateId:_,graphicalItems:M,stackGroups:B,offset:L}));return ee(ee({formattedGraphicalItems:q,graphicalItems:M,offset:L,stackGroups:B},W),F)},m=function(g){function y(v){var x,b,w;return KVe(this,y),w=QVe(this,y,[v]),qe(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),qe(w,"accessibilityManager",new RVe),qe(w,"handleLegendBBoxUpdate",function(_){if(_){var C=w.state,E=C.dataStartIndex,N=C.dataEndIndex,I=C.updateId;w.setState(ee({legendBBox:_},p({props:w.props,dataStartIndex:E,dataEndIndex:N,updateId:I},ee(ee({},w.state),{},{legendBBox:_}))))}}),qe(w,"handleReceiveSyncEvent",function(_,C,E){if(w.props.syncId===_){if(E===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(C)}}),qe(w,"handleBrushChange",function(_){var C=_.startIndex,E=_.endIndex;if(C!==w.state.dataStartIndex||E!==w.state.dataEndIndex){var N=w.state.updateId;w.setState(function(){return ee({dataStartIndex:C,dataEndIndex:E},p({props:w.props,dataStartIndex:C,dataEndIndex:E,updateId:N},w.state))}),w.triggerSyncEvent({dataStartIndex:C,dataEndIndex:E})}}),qe(w,"handleMouseEnter",function(_){var C=w.getMouseInfo(_);if(C){var E=ee(ee({},C),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var N=w.props.onMouseEnter;Ze(N)&&N(E,_)}}),qe(w,"triggeredAfterMouseMove",function(_){var C=w.getMouseInfo(_),E=C?ee(ee({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var N=w.props.onMouseMove;Ze(N)&&N(E,_)}),qe(w,"handleItemMouseEnter",function(_){w.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),qe(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),qe(w,"handleMouseMove",function(_){_.persist(),w.throttleTriggeredAfterMouseMove(_)}),qe(w,"handleMouseLeave",function(_){w.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var E=w.props.onMouseLeave;Ze(E)&&E(C,_)}),qe(w,"handleOuterEvent",function(_){var C=Z_e(_),E=Js(w.props,"".concat(C));if(C&&Ze(E)){var N,I;/.*touch.*/i.test(C)?I=w.getMouseInfo(_.changedTouches[0]):I=w.getMouseInfo(_),E((N=I)!==null&&N!==void 0?N:{},_)}}),qe(w,"handleClick",function(_){var C=w.getMouseInfo(_);if(C){var E=ee(ee({},C),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var N=w.props.onClick;Ze(N)&&N(E,_)}}),qe(w,"handleMouseDown",function(_){var C=w.props.onMouseDown;if(Ze(C)){var E=w.getMouseInfo(_);C(E,_)}}),qe(w,"handleMouseUp",function(_){var C=w.props.onMouseUp;if(Ze(C)){var E=w.getMouseInfo(_);C(E,_)}}),qe(w,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),qe(w,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseDown(_.changedTouches[0])}),qe(w,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseUp(_.changedTouches[0])}),qe(w,"triggerSyncEvent",function(_){w.props.syncId!==void 0&&cN.emit(uN,w.props.syncId,_,w.eventEmitterSymbol)}),qe(w,"applySyncEvent",function(_){var C=w.props,E=C.layout,N=C.syncMethod,I=w.state.updateId,$=_.dataStartIndex,O=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)w.setState(ee({dataStartIndex:$,dataEndIndex:O},p({props:w.props,dataStartIndex:$,dataEndIndex:O,updateId:I},w.state)));else if(_.activeTooltipIndex!==void 0){var k=_.chartX,R=_.chartY,M=_.activeTooltipIndex,B=w.state,F=B.offset,L=B.tooltipTicks;if(!F)return;if(typeof N=="function")M=N(L,_);else if(N==="value"){M=-1;for(var P=0;P<L.length;P++)if(L[P].value===_.activeLabel){M=P;break}}var W=ee(ee({},F),{},{x:F.left,y:F.top}),q=Math.min(k,W.x+W.width),H=Math.min(R,W.y+W.height),Y=L[M]&&L[M].value,se=KI(w.state,w.props.data,M),Se=L[M]?{x:E==="horizontal"?L[M].coordinate:q,y:E==="horizontal"?H:L[M].coordinate}:aX;w.setState(ee(ee({},_),{},{activeLabel:Y,activeCoordinate:Se,activePayload:se,activeTooltipIndex:M}))}else w.setState(_)}),qe(w,"renderCursor",function(_){var C,E=w.state,N=E.isTooltipActive,I=E.activeCoordinate,$=E.activePayload,O=E.offset,k=E.activeTooltipIndex,R=E.tooltipAxisBandSize,M=w.getTooltipEventType(),B=(C=_.props.active)!==null&&C!==void 0?C:N,F=w.props.layout,L=_.key||"_recharts-cursor";return j.createElement(UVe,{key:L,activeCoordinate:I,activePayload:$,activeTooltipIndex:k,chartName:n,element:_,isActive:B,layout:F,offset:O,tooltipAxisBandSize:R,tooltipEventType:M})}),qe(w,"renderPolarAxis",function(_,C,E){var N=Js(_,"type.axisType"),I=Js(w.state,"".concat(N,"Map")),$=_.type.defaultProps,O=$!==void 0?ee(ee({},$),_.props):_.props,k=I&&I[O["".concat(N,"Id")]];return S.cloneElement(_,ee(ee({},k),{},{className:at(N,k.className),key:_.key||"".concat(C,"-").concat(E),ticks:Ma(k,!0)}))}),qe(w,"renderPolarGrid",function(_){var C=_.props,E=C.radialLines,N=C.polarAngles,I=C.polarRadius,$=w.state,O=$.radiusAxisMap,k=$.angleAxisMap,R=zl(O),M=zl(k),B=M.cx,F=M.cy,L=M.innerRadius,P=M.outerRadius;return S.cloneElement(_,{polarAngles:Array.isArray(N)?N:Ma(M,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(I)?I:Ma(R,!0).map(function(W){return W.coordinate}),cx:B,cy:F,innerRadius:L,outerRadius:P,key:_.key||"polar-grid",radialLines:E})}),qe(w,"renderLegend",function(){var _=w.state.formattedGraphicalItems,C=w.props,E=C.children,N=C.width,I=C.height,$=w.props.margin||{},O=N-($.left||0)-($.right||0),k=B9({children:E,formattedGraphicalItems:_,legendWidth:O,legendContent:c});if(!k)return null;var R=k.item,M=B4(k,WVe);return S.cloneElement(R,ee(ee({},M),{},{chartWidth:N,chartHeight:I,margin:$,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),qe(w,"renderTooltip",function(){var _,C=w.props,E=C.children,N=C.accessibilityLayer,I=Fs(E,Us);if(!I)return null;var $=w.state,O=$.isTooltipActive,k=$.activeCoordinate,R=$.activePayload,M=$.activeLabel,B=$.offset,F=(_=I.props.active)!==null&&_!==void 0?_:O;return S.cloneElement(I,{viewBox:ee(ee({},B),{},{x:B.left,y:B.top}),active:F,label:M,payload:F?R:[],coordinate:k,accessibilityLayer:N})}),qe(w,"renderBrush",function(_){var C=w.props,E=C.margin,N=C.data,I=w.state,$=I.offset,O=I.dataStartIndex,k=I.dataEndIndex,R=I.updateId;return S.cloneElement(_,{key:_.key||"_recharts-brush",onChange:zx(w.handleBrushChange,_.props.onChange),data:N,x:pe(_.props.x)?_.props.x:$.left,y:pe(_.props.y)?_.props.y:$.top+$.height+$.brushBottom-(E.bottom||0),width:pe(_.props.width)?_.props.width:$.width,startIndex:O,endIndex:k,updateId:"brush-".concat(R)})}),qe(w,"renderReferenceElement",function(_,C,E){if(!_)return null;var N=w,I=N.clipPathId,$=w.state,O=$.xAxisMap,k=$.yAxisMap,R=$.offset,M=_.type.defaultProps||{},B=_.props,F=B.xAxisId,L=F===void 0?M.xAxisId:F,P=B.yAxisId,W=P===void 0?M.yAxisId:P;return S.cloneElement(_,{key:_.key||"".concat(C,"-").concat(E),xAxis:O[L],yAxis:k[W],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:I})}),qe(w,"renderActivePoints",function(_){var C=_.item,E=_.activePoint,N=_.basePoint,I=_.childIndex,$=_.isRange,O=[],k=C.props.key,R=C.item.type.defaultProps!==void 0?ee(ee({},C.item.type.defaultProps),C.item.props):C.item.props,M=R.activeDot,B=R.dataKey,F=ee(ee({index:I,dataKey:B,cx:E.x,cy:E.y,r:4,fill:RP(C.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},Xe(M,!1)),z0(M));return O.push(y.renderActiveDot(M,F,"".concat(k,"-activePoint-").concat(I))),N?O.push(y.renderActiveDot(M,ee(ee({},F),{},{cx:N.x,cy:N.y}),"".concat(k,"-basePoint-").concat(I))):$&&O.push(null),O}),qe(w,"renderGraphicChild",function(_,C,E){var N=w.filterFormatItem(_,C,E);if(!N)return null;var I=w.getTooltipEventType(),$=w.state,O=$.isTooltipActive,k=$.tooltipAxis,R=$.activeTooltipIndex,M=$.activeLabel,B=w.props.children,F=Fs(B,Us),L=N.props,P=L.points,W=L.isRange,q=L.baseLine,H=N.item.type.defaultProps!==void 0?ee(ee({},N.item.type.defaultProps),N.item.props):N.item.props,Y=H.activeDot,se=H.hide,Se=H.activeBar,De=H.activeShape,Pe=!!(!se&&O&&F&&(Y||Se||De)),de={};I!=="axis"&&F&&F.props.trigger==="click"?de={onClick:zx(w.handleItemMouseEnter,_.props.onClick)}:I!=="axis"&&(de={onMouseLeave:zx(w.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:zx(w.handleItemMouseEnter,_.props.onMouseEnter)});var Ee=S.cloneElement(_,ee(ee({},N.props),de));function J(Te){return typeof k.dataKey=="function"?k.dataKey(Te.payload):null}if(Pe)if(R>=0){var ie,Z;if(k.dataKey&&!k.allowDuplicatedCategory){var V=typeof k.dataKey=="function"?J:"payload.".concat(k.dataKey.toString());ie=ST(P,V,M),Z=W&&q&&ST(q,V,M)}else ie=P==null?void 0:P[R],Z=W&&q&&q[R];if(De||Se){var ge=_.props.activeIndex!==void 0?_.props.activeIndex:R;return[S.cloneElement(_,ee(ee(ee({},N.props),de),{},{activeIndex:ge})),null,null]}if(!yt(ie))return[Ee].concat(qh(w.renderActivePoints({item:N,activePoint:ie,basePoint:Z,childIndex:R,isRange:W})))}else{var ve,Fe=(ve=w.getItemByXY(w.state.activeCoordinate))!==null&&ve!==void 0?ve:{graphicalItem:Ee},je=Fe.graphicalItem,mt=je.item,Ot=mt===void 0?_:mt,K=je.childIndex,fe=ee(ee(ee({},N.props),de),{},{activeIndex:K});return[S.cloneElement(Ot,fe),null,null]}return W?[Ee,null,null]:[Ee,null]}),qe(w,"renderCustomized",function(_,C,E){return S.cloneElement(_,ee(ee({key:"recharts-customized-".concat(E)},w.props),w.state))}),qe(w,"renderMap",{CartesianGrid:{handler:Kx,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Kx},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Kx},YAxis:{handler:Kx},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=v.id)!==null&&x!==void 0?x:Dv("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=FK(w.triggeredAfterMouseMove,(b=v.throttleDelay)!==null&&b!==void 0?b:1e3/60),w.state={},w}return e6e(y,g),YVe(y,[{key:"componentDidMount",value:function(){var x,b;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,b=x.children,w=x.data,_=x.height,C=x.layout,E=Fs(b,Us);if(E){var N=E.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,$=KI(this.state,w,N,I),O=this.state.tooltipTicks[N].coordinate,k=(this.state.offset.top+_)/2,R=C==="horizontal",M=R?{x:O,y:k}:{y:O,x:k},B=this.state.formattedGraphicalItems.find(function(L){var P=L.item;return P.type.name==="Scatter"});B&&(M=ee(ee({},M),B.props.points[N].tooltipPosition),$=B.props.points[N].tooltipPayload);var F={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:I,activePayload:$,activeCoordinate:M};this.setState(F),this.renderCursor(E),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,b){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==b.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var w,_;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(x){CT([Fs(x.children,Us)],[Fs(this.props.children,Us)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=Fs(this.props.children,Us);if(x&&typeof x.props.shared=="boolean"){var b=x.props.shared?"axis":"item";return a.indexOf(b)>=0?b:i}return i}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var b=this.container,w=b.getBoundingClientRect(),_=E2e(w),C={chartX:Math.round(x.pageX-_.left),chartY:Math.round(x.pageY-_.top)},E=w.width/b.offsetWidth||1,N=this.inRange(C.chartX,C.chartY,E);if(!N)return null;var I=this.state,$=I.xAxisMap,O=I.yAxisMap,k=this.getTooltipEventType();if(k!=="axis"&&$&&O){var R=zl($).scale,M=zl(O).scale,B=R&&R.invert?R.invert(C.chartX):null,F=M&&M.invert?M.invert(C.chartY):null;return ee(ee({},C),{},{xValue:B,yValue:F})}var L=W4(this.state,this.props.data,this.props.layout,N);return L?ee(ee({},C),L):null}},{key:"inRange",value:function(x,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,C=x/w,E=b/w;if(_==="horizontal"||_==="vertical"){var N=this.state.offset,I=C>=N.left&&C<=N.left+N.width&&E>=N.top&&E<=N.top+N.height;return I?{x:C,y:E}:null}var $=this.state,O=$.angleAxisMap,k=$.radiusAxisMap;if(O&&k){var R=zl(O);return g3({x:C,y:E},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,b=this.getTooltipEventType(),w=Fs(x,Us),_={};w&&b==="axis"&&(w.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var C=z0(this.props,this.handleOuterEvent);return ee(ee({},C),_)}},{key:"addListener",value:function(){cN.on(uN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){cN.removeListener(uN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,b,w){for(var _=this.state.formattedGraphicalItems,C=0,E=_.length;C<E;C++){var N=_[C];if(N.item===x||N.props.key===x.key||b===za(N.item.type)&&w===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,b=this.state.offset,w=b.left,_=b.top,C=b.height,E=b.width;return j.createElement("defs",null,j.createElement("clipPath",{id:x},j.createElement("rect",{x:w,y:_,height:C,width:E})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(b,w){var _=F4(w,2),C=_[0],E=_[1];return ee(ee({},b),{},qe({},C,E.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(b,w){var _=F4(w,2),C=_[0],E=_[1];return ee(ee({},b),{},qe({},C,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var b;return(b=this.state.xAxisMap)===null||b===void 0||(b=b[x])===null||b===void 0?void 0:b.scale}},{key:"getYScaleByAxisId",value:function(x){var b;return(b=this.state.yAxisMap)===null||b===void 0||(b=b[x])===null||b===void 0?void 0:b.scale}},{key:"getItemByXY",value:function(x){var b=this.state,w=b.formattedGraphicalItems,_=b.activeItem;if(w&&w.length)for(var C=0,E=w.length;C<E;C++){var N=w[C],I=N.props,$=N.item,O=$.type.defaultProps!==void 0?ee(ee({},$.type.defaultProps),$.props):$.props,k=za($.type);if(k==="Bar"){var R=(I.data||[]).find(function(L){return J3e(x,L)});if(R)return{graphicalItem:N,payload:R}}else if(k==="RadialBar"){var M=(I.data||[]).find(function(L){return g3(x,L)});if(M)return{graphicalItem:N,payload:M}}else if(e_(N,_)||t_(N,_)||Dy(N,_)){var B=BBe({graphicalItem:N,activeTooltipItem:_,itemData:O.data}),F=O.activeIndex===void 0?B:O.activeIndex;return{graphicalItem:ee(ee({},N),{},{childIndex:F}),payload:Dy(N,_)?O.data[B]:N.props.data[B]}}}return null}},{key:"render",value:function(){var x=this;if(!aL(this))return null;var b=this.props,w=b.children,_=b.className,C=b.width,E=b.height,N=b.style,I=b.compact,$=b.title,O=b.desc,k=B4(b,zVe),R=Xe(k,!1);if(I)return j.createElement(C4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},j.createElement(ET,gg({},R,{width:C,height:E,title:$,desc:O}),this.renderClipPath(),cL(w,this.renderMap)));if(this.props.accessibilityLayer){var M,B;R.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,R.role=(B=this.props.role)!==null&&B!==void 0?B:"application",R.onKeyDown=function(L){x.accessibilityManager.keyboardEvent(L)},R.onFocus=function(){x.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return j.createElement(C4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},j.createElement("div",gg({className:at("recharts-wrapper",_),style:ee({position:"relative",cursor:"default",width:C,height:E},N)},F,{ref:function(P){x.container=P}}),j.createElement(ET,gg({},R,{width:C,height:E,title:$,desc:O,style:o6e}),this.renderClipPath(),cL(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(S.Component);return qe(m,"displayName",n),qe(m,"defaultProps",ee({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),qe(m,"getDerivedStateFromProps",function(g,y){var v=g.dataKey,x=g.data,b=g.children,w=g.width,_=g.height,C=g.layout,E=g.stackOffset,N=g.margin,I=y.dataStartIndex,$=y.dataEndIndex;if(y.updateId===void 0){var O=z4(g);return ee(ee(ee({},O),{},{updateId:0},p(ee(ee({props:g},O),{},{updateId:0}),y)),{},{prevDataKey:v,prevData:x,prevWidth:w,prevHeight:_,prevLayout:C,prevStackOffset:E,prevMargin:N,prevChildren:b})}if(v!==y.prevDataKey||x!==y.prevData||w!==y.prevWidth||_!==y.prevHeight||C!==y.prevLayout||E!==y.prevStackOffset||!Kf(N,y.prevMargin)){var k=z4(g),R={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},M=ee(ee({},W4(y,x,C)),{},{updateId:y.updateId+1}),B=ee(ee(ee({},k),R),M);return ee(ee(ee({},B),p(ee({props:g},B),y)),{},{prevDataKey:v,prevData:x,prevWidth:w,prevHeight:_,prevLayout:C,prevStackOffset:E,prevMargin:N,prevChildren:b})}if(!CT(b,y.prevChildren)){var F,L,P,W,q=Fs(b,Lh),H=q&&(F=(L=q.props)===null||L===void 0?void 0:L.startIndex)!==null&&F!==void 0?F:I,Y=q&&(P=(W=q.props)===null||W===void 0?void 0:W.endIndex)!==null&&P!==void 0?P:$,se=H!==I||Y!==$,Se=!yt(x),De=Se&&!se?y.updateId:y.updateId+1;return ee(ee({updateId:De},p(ee(ee({props:g},y),{},{updateId:De,dataStartIndex:H,dataEndIndex:Y}),y)),{},{prevChildren:b,dataStartIndex:H,dataEndIndex:Y})}return null}),qe(m,"renderActiveDot",function(g,y,v){var x;return S.isValidElement(g)?x=S.cloneElement(g,y):Ze(g)?x=g(y):x=j.createElement(jP,y),j.createElement(Dt,{className:"recharts-active-dot",key:v},x)}),function(y){return j.createElement(m,y)}},uX=cX({chartName:"BarChart",GraphicalChild:Kc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Wv},{axisType:"yAxis",AxisComp:zv}],formatAxisMap:vWe}),dX=cX({chartName:"PieChart",GraphicalChild:fa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:ZS},{axisType:"radiusAxis",AxisComp:QS}],formatAxisMap:SLe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const g6e={light:"",dark:".dark"},fX=S.createContext(null);function hX(){const t=S.useContext(fX);if(!t)throw new Error("useChart must be used within a <ChartContainer />");return t}const Uw=S.forwardRef(({id:t,className:e,children:n,config:r,...s},i)=>{const o=S.useId(),a=`chart-${t||o.replace(/:/g,"")}`;return h.jsx(fX.Provider,{value:{config:r},children:h.jsxs("div",{"data-chart":a,ref:i,className:ne("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",e),...s,children:[h.jsx(y6e,{id:a,config:r}),h.jsx(cP,{children:n})]})})});Uw.displayName="Chart";const y6e=({id:t,config:e})=>{const n=Object.entries(e).filter(([r,s])=>s.theme||s.color);return n.length?h.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(g6e).map(([r,s])=>`
${s} [data-chart=${t}] {
${n.map(([i,o])=>{var l;const a=((l=o.theme)==null?void 0:l[r])||o.color;return a?`  --color-${i}: ${a};`:null}).join(`
`)}
}
`).join(`
`)}}):null},v6e=Us,XI=S.forwardRef(({active:t,payload:e,className:n,indicator:r="dot",hideLabel:s=!1,hideIndicator:i=!1,label:o,labelFormatter:a,labelClassName:l,formatter:c,color:u,nameKey:d,labelKey:f},p)=>{const{config:m}=hX(),g=S.useMemo(()=>{var _;if(s||!(e!=null&&e.length))return null;const[v]=e,x=`${f||v.dataKey||v.name||"value"}`,b=YI(m,v,x),w=!f&&typeof o=="string"?((_=m[o])==null?void 0:_.label)||o:b==null?void 0:b.label;return a?h.jsx("div",{className:ne("font-medium",l),children:a(w,e)}):w?h.jsx("div",{className:ne("font-medium",l),children:w}):null},[o,a,e,s,l,m,f]);if(!t||!(e!=null&&e.length))return null;const y=e.length===1&&r!=="dot";return h.jsxs("div",{ref:p,className:ne("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[y?null:g,h.jsx("div",{className:"grid gap-1.5",children:e.map((v,x)=>{const b=`${d||v.name||v.dataKey||"value"}`,w=YI(m,v,b),_=u||v.payload.fill||v.color;return h.jsx("div",{className:ne("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:c&&(v==null?void 0:v.value)!==void 0&&v.name?c(v.value,v.name,v,x,v.payload):h.jsxs(h.Fragment,{children:[w!=null&&w.icon?h.jsx(w.icon,{}):!i&&h.jsx("div",{className:ne("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":y&&r==="dashed"}),style:{"--color-bg":_,"--color-border":_}}),h.jsxs("div",{className:ne("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[h.jsxs("div",{className:"grid gap-1.5",children:[y?g:null,h.jsx("span",{className:"text-muted-foreground",children:(w==null?void 0:w.label)||v.name})]}),v.value&&h.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:v.value.toLocaleString()})]})]})},v.dataKey)})})]})});XI.displayName="ChartTooltip";const x6e=S.forwardRef(({className:t,hideIcon:e=!1,payload:n,verticalAlign:r="bottom",nameKey:s},i)=>{const{config:o}=hX();return n!=null&&n.length?h.jsx("div",{ref:i,className:ne("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",t),children:n.map(a=>{const l=`${s||a.dataKey||"value"}`,c=YI(o,a,l);return h.jsxs("div",{className:ne("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[c!=null&&c.icon&&!e?h.jsx(c.icon,{}):h.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:a.color}}),c==null?void 0:c.label]},a.value)})}):null});x6e.displayName="ChartLegend";function YI(t,e,n){if(typeof e!="object"||e===null)return;const r="payload"in e&&typeof e.payload=="object"&&e.payload!==null?e.payload:void 0;let s=n;return n in e&&typeof e[n]=="string"?s=e[n]:r&&n in r&&typeof r[n]=="string"&&(s=r[n]),s in t?t[s]:t[n]}const qP=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:ne("w-full caption-bottom text-sm",t),...e})}));qP.displayName="Table";const KP=S.forwardRef(({className:t,...e},n)=>h.jsx("thead",{ref:n,className:ne("[&_tr]:border-b",t),...e}));KP.displayName="TableHeader";const XP=S.forwardRef(({className:t,...e},n)=>h.jsx("tbody",{ref:n,className:ne("[&_tr:last-child]:border-0",t),...e}));XP.displayName="TableBody";const b6e=S.forwardRef(({className:t,...e},n)=>h.jsx("tfoot",{ref:n,className:ne("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));b6e.displayName="TableFooter";const Qf=S.forwardRef(({className:t,...e},n)=>h.jsx("tr",{ref:n,className:ne("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Qf.displayName="TableRow";const vs=S.forwardRef(({className:t,...e},n)=>h.jsx("th",{ref:n,className:ne("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));vs.displayName="TableHead";const es=S.forwardRef(({className:t,...e},n)=>h.jsx("td",{ref:n,className:ne("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));es.displayName="TableCell";const w6e=S.forwardRef(({className:t,...e},n)=>h.jsx("caption",{ref:n,className:ne("mt-4 text-sm text-muted-foreground",t),...e}));w6e.displayName="TableCaption";function S6e({section:t}){var mt,Ot;const[e,n]=S.useState([]),[r,s]=S.useState([]),[i,o]=S.useState([]),[a,l]=S.useState([]),[c,u]=S.useState([]),[d,f]=S.useState(!1),[p,m]=S.useState(!1),[g,y]=S.useState(!1),[v,x]=S.useState({name:"",email:"",subjects:[],password:"",department:"",profileImage:""}),[b,w]=S.useState(null),[_,C]=S.useState(""),[E,N]=S.useState(null),[I,$]=S.useState(""),[O,k]=S.useState(!1),[R,M]=S.useState(""),[B,F]=S.useState(""),[L,P]=S.useState(""),[W,q]=S.useState({teachersBySemester:[],teachersByDepartment:[],studentsBySemester:[],studentsByDepartment:[],examsByDepartment:[]}),H=S.useRef(null),{toast:Y}=ii(),se=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82ca9d"];S.useEffect(()=>{(async()=>{const fe=$e(Ae,"users"),Te=$e(Ae,"departments"),Qe=$e(Ae,"exams"),[_e,gt,Ye]=await Promise.all([Ct(fe),Ct(Te),Ct(Qe)]);if(_e.exists()){const zt=[],Ue=[];_e.forEach(_t=>{const An=_t.val();An.role==="teacher"?zt.push({id:_t.key,...An,status:"active"}):An.role==="student"&&Ue.push({id:_t.key,...An,status:"active"})}),n(zt),l(Ue)}if(gt.exists()){const zt=Object.entries(gt.val()).map(([Ue,_t])=>({id:Ue,..._t}));s(zt)}if(Ye.exists()){const zt=Object.entries(Ye.val()||{}).map(([Ue,_t])=>({id:Ue,..._t}));u(zt)}})()},[]),S.useEffect(()=>{r.length>0&&(!R&&r[0]?M(r[0].id):R&&de(R))},[R,r,e,a,c]);const Se=()=>t==="teachers"?De():t==="adminexams"?Pe():h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),h.jsxs(Hn,{value:R,onValueChange:M,children:[h.jsx(Ln,{className:"w-[200px]",children:h.jsx(Gn,{placeholder:"Select Department"})}),h.jsx(Fn,{children:r.map(K=>h.jsx(Ut,{value:K.id,children:K.name},K.id))})]})]}),h.jsxs("div",{className:"dashboard-grid grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsx(Wa,{title:"Total Teachers",value:e.filter(K=>!R||K.department===R).length,description:"Faculty members",icon:h.jsx(dc,{className:"h-4 w-4"})}),h.jsx(Wa,{title:"Active Teachers",value:e.filter(K=>K.status==="active"&&(!R||K.department===R)).length,description:"Currently teaching",trend:"up",trendValue:"+2 this month"}),h.jsx(Wa,{title:"Total Students",value:a.filter(K=>!R||K.department===R).length,description:"Enrolled students",icon:h.jsx(dc,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[h.jsxs("div",{className:"border rounded-lg p-4",children:[h.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[h.jsx(n6,{className:"h-5 w-5 mr-2"}),"Teachers by Semester"]}),h.jsx(Uw,{className:"h-64",config:{},children:h.jsxs(uX,{data:W.teachersBySemester,margin:{top:10,right:30,left:0,bottom:20},children:[h.jsx(GP,{strokeDasharray:"3 3"}),h.jsx(Wv,{dataKey:"name"}),h.jsx(zv,{}),h.jsx(Us,{content:h.jsx(XI,{})}),h.jsx(Kc,{dataKey:"value",fill:"#8884d8"})]})})]}),h.jsxs("div",{className:"border rounded-lg p-4",children:[h.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[h.jsx(pue,{className:"h-5 w-5 mr-2"}),"Teachers by Department"]}),h.jsx(Uw,{className:"h-64",config:{},children:h.jsxs(dX,{children:[h.jsx(fa,{data:W.teachersByDepartment.filter(K=>K.value>0),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:W.teachersByDepartment.map((K,fe)=>h.jsx(Mv,{fill:se[fe%se.length]},`cell-${fe}`))}),h.jsx(Us,{content:h.jsx(XI,{})}),h.jsx(Bu,{})]})})]})]})]}),De=()=>h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 items-start md:items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Manage Teachers"}),h.jsx("p",{className:"text-muted-foreground",children:"Add, edit or remove teacher accounts"})]}),h.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[h.jsx(Le,{placeholder:"Search teachers...",value:_,onChange:K=>C(K.target.value),className:"md:w-64"}),h.jsxs(kr,{open:d,onOpenChange:f,children:[h.jsx(uS,{asChild:!0,children:h.jsxs(ae,{children:[h.jsx(ng,{className:"h-4 w-4 mr-2"}),"Add Teacher"]})}),h.jsxs(hr,{className:"sm:max-w-[425px]",children:[h.jsxs(pr,{children:[h.jsx(mr,{children:"Add New Teacher"}),h.jsx(rl,{children:"Create a new teacher account. They will receive login credentials via email."})]}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"profileImage",children:"Profile Image"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsxs(ae,{variant:"outline",onClick:()=>{var K;return(K=H.current)==null?void 0:K.click()},className:"w-full flex items-center justify-center",disabled:O,children:[h.jsx(uj,{className:"h-4 w-4 mr-2"}),O?"Uploading...":E?"Change Image":"Upload Image"]}),h.jsx("input",{ref:H,id:"profileImage",type:"file",accept:"image/*",className:"hidden",onChange:J})]}),I&&h.jsx("div",{className:"mt-2",children:h.jsx("img",{src:I,alt:"Profile preview",className:"w-16 h-16 rounded-full object-cover"})}),E&&!I&&h.jsxs("div",{className:"text-sm text-muted-foreground",children:["Selected: ",E.name]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"name",children:"Full Name"}),h.jsx(Le,{id:"name",value:v.name,onChange:K=>x({...v,name:K.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"email",children:"Email"}),h.jsx(Le,{id:"email",type:"email",value:v.email,onChange:K=>x({...v,email:K.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"department",children:"Department"}),h.jsxs(Hn,{value:v.department,onValueChange:K=>Ee(K),children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select Department"})}),h.jsx(Fn,{children:r.map(K=>h.jsx(Ut,{value:K.id,children:K.name},K.id))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{children:"Subjects"}),h.jsx("div",{className:"border rounded-md p-4 max-h-48 overflow-y-auto",children:i.length===0?h.jsx("p",{className:"text-sm text-muted-foreground",children:"No subjects available for this department"}):h.jsx("div",{className:"grid gap-3",children:i.map(K=>h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(W0,{id:`subject-${K.id}`,checked:v.subjects.includes(K.id),onCheckedChange:()=>ie(K.id)}),h.jsxs("label",{htmlFor:`subject-${K.id}`,className:"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[K.name," (",K.semester,")"]})]},K.id))})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"password",children:"Initial Password"}),h.jsx(Le,{id:"password",type:"password",value:v.password,onChange:K=>x({...v,password:K.target.value})})]})]}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),h.jsx(ae,{onClick:Z,disabled:O,children:"Add Teacher"})]})]})]})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:je.length>0?je.map(K=>{var fe,Te;return h.jsx($0e,{id:K.id,name:K.name,email:K.email,role:"teacher",status:K.status,additionalInfo:Array.isArray(K.subjects)?K.subjects.map(Qe=>{var _e;return(_e=i.find(gt=>gt.id===Qe))==null?void 0:_e.name}).filter(Boolean).join(", "):((fe=i.find(Qe=>Qe.id===K.subject))==null?void 0:fe.name)||"",profileImage:K.profileImage,department:(Te=r.find(Qe=>Qe.id===K.department))==null?void 0:Te.name,onView:V,onEdit:ge,onDelete:Fe},K.id)}):h.jsx("div",{className:"col-span-full text-center py-10",children:h.jsx("p",{className:"text-muted-foreground",children:"No teachers found. Add a new teacher to get started."})})})]}),Pe=()=>{var Qe;const K=R?((Qe=r.find(_e=>_e.id===R))==null?void 0:Qe.semesters)||[]:[],fe=c.filter(_e=>{var Ue,_t;const gt=R?_e.department===R:!0,Ye=B?_e.semester===B:!0,zt=L.trim()===""?!0:((Ue=_e.title)==null?void 0:Ue.toLowerCase().includes(L.toLowerCase()))||((_t=_e.subject)==null?void 0:_t.toLowerCase().includes(L.toLowerCase()));return gt&&Ye&&zt}),Te=_e=>{switch(_e==null?void 0:_e.toLowerCase()){case"active":return"bg-green-500";case"scheduled":return"bg-blue-500";case"draft":return"bg-gray-500";case"completed":return"bg-purple-500";case"expired":return"bg-red-500";default:return"bg-gray-500"}};return h.jsx(h.Fragment,{children:h.jsxs("div",{className:"flex flex-col space-y-4",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsx("h2",{className:"text-2xl font-bold",children:"Manage Exams"})}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[h.jsx("div",{className:"flex-1",children:h.jsx(Le,{placeholder:"Search exams...",value:L,onChange:_e=>P(_e.target.value)})}),h.jsx("div",{className:"w-full md:w-auto",children:h.jsxs(Hn,{value:R,onValueChange:M,children:[h.jsx(Ln,{className:"w-full md:w-[180px]",children:h.jsx(Gn,{placeholder:"Select Department"})}),h.jsxs(Fn,{children:[h.jsx(Ut,{value:null,children:"All Departments"}),r.map(_e=>h.jsx(Ut,{value:_e.id,children:_e.name},_e.id))]})]})}),h.jsx("div",{className:"w-full md:w-auto",children:h.jsxs(Hn,{value:B,onValueChange:F,disabled:!R,children:[h.jsx(Ln,{className:"w-full md:w-[180px]",children:h.jsx(Gn,{placeholder:"Select Semester"})}),h.jsxs(Fn,{children:[h.jsx(Ut,{value:null,children:"All Semesters"}),K.map(_e=>h.jsx(Ut,{value:_e,children:_e},_e))]})]})})]}),fe.length>0?h.jsx("div",{className:"border rounded-md",children:h.jsxs(qP,{children:[h.jsx(KP,{children:h.jsxs(Qf,{children:[h.jsx(vs,{children:"Title"}),h.jsx(vs,{children:"Subject"}),h.jsx(vs,{children:"Department"}),h.jsx(vs,{children:"Semester"}),h.jsx(vs,{children:"Duration"}),h.jsx(vs,{children:"Status"}),h.jsx(vs,{children:"Submissions"}),h.jsx(vs,{children:"Actions"})]})}),h.jsx(XP,{children:fe.map(_e=>{var zt;const gt=((zt=r.find(Ue=>Ue.id===_e.department))==null?void 0:zt.name)||"Unknown",Ye=_e.submissions?Object.keys(_e.submissions).length:0;return h.jsxs(Qf,{children:[h.jsx(es,{className:"font-medium",children:_e.title}),h.jsx(es,{children:_e.subject}),h.jsx(es,{children:gt}),h.jsx(es,{children:_e.semester}),h.jsxs(es,{children:[_e.duration," min"]}),h.jsx(es,{children:h.jsx(gr,{className:Te(_e.status),children:_e.status})}),h.jsx(es,{children:Ye}),h.jsx(es,{children:h.jsx("div",{className:"flex items-center gap-2",children:h.jsx(ae,{variant:"outline",size:"sm",asChild:!0,children:h.jsx("a",{href:`/exam/monitor/${_e.id}`,children:"View"})})})})]},_e.id)})})]})}):h.jsx("div",{className:"text-center py-8 border rounded-md",children:h.jsx("p",{className:"text-muted-foreground",children:"No exams found matching the selected filters."})})]})})},de=K=>{const fe=r.find(Ue=>Ue.id===K);if(!fe)return;const Te=[],Qe=fe.semesters||[];Qe.forEach(Ue=>{Te.push({name:Ue,value:0})}),e.forEach(Ue=>{Ue.department===K&&(Array.isArray(Ue.subjects)?Ue.subjects:[Ue.subject]).forEach(An=>{fe.subjects&&Object.entries(fe.subjects).forEach(([nr,Ui])=>{if(Ui.some(Xr=>Xr.id===An)){const Xr=Te.find(Yr=>Yr.name===nr);Xr&&(Xr.value+=1)}})})});const _e=Qe.map(Ue=>({name:Ue,value:a.filter(_t=>_t.department===K&&_t.semester===Ue).length})),gt=r.map(Ue=>({name:Ue.name,value:e.filter(_t=>_t.department===Ue.id).length})),Ye=r.map(Ue=>({name:Ue.name,value:a.filter(_t=>_t.department===Ue.id).length})),zt=r.map(Ue=>({name:Ue.name,value:c.filter(_t=>_t.department===Ue.id).length}));q({teachersBySemester:Te,teachersByDepartment:gt,studentsBySemester:_e,studentsByDepartment:Ye,examsByDepartment:zt})},Ee=async K=>{if(x({...v,department:K,subjects:[]}),M(K),!K){o([]);return}try{const fe=$e(Ae,`departments/${K}/subjects`),Te=await Ct(fe);if(Te.exists()){const Qe=[],_e=Te.val();Object.entries(_e).forEach(([gt,Ye])=>{Ye.forEach(zt=>{Qe.push({...zt,semester:gt})})}),o(Qe)}else o([])}catch(fe){console.error("Error fetching subjects:",fe),o([])}},J=async K=>{if(K.target.files&&K.target.files[0]){const fe=K.target.files[0];N(fe);try{k(!0);const Te=await dS(fe);$(Te),x({...v,profileImage:Te}),Y({title:"Image uploaded",description:"Profile image has been uploaded successfully."})}catch{Y({title:"Upload failed",description:"Failed to upload image. Please try again.",variant:"destructive"})}finally{k(!1)}}},ie=K=>{x(fe=>{const Te=[...fe.subjects],Qe=Te.indexOf(K);return Qe===-1?Te.push(K):Te.splice(Qe,1),{...fe,subjects:Te}})},Z=async()=>{if(!v.name||!v.email||!v.password||!v.department||v.subjects.length===0){Y({title:"Missing information",description:"Please fill in all required fields and select at least one subject",variant:"destructive"});return}try{const{success:K,user:fe,error:Te}=await IH(v.name,v.email,v.password,"teacher");if(K&&fe){const Qe=$e(Ae,`departments/${v.department}/teachers`),_e=await Ct(Qe),gt=_e.exists()?_e.val():[];await At(Qe,[...gt,fe.id]),await At($e(Ae,`users/${fe.id}`),{name:fe.name,email:fe.email,role:"teacher",subjects:v.subjects,department:v.department,profileImage:v.profileImage}),Y({title:"Teacher added",description:`${v.name} has been added successfully.`}),x({name:"",email:"",subjects:[],password:"",department:"",profileImage:""}),N(null),$(""),H.current&&(H.current.value=""),f(!1)}else Y({title:"Failed to add teacher",description:Te||"An error occurred while adding the teacher.",variant:"destructive"})}catch{Y({title:"Error",description:"Failed to add teacher. Please try again.",variant:"destructive"})}},V=K=>{const fe=e.find(Te=>Te.id===K);fe&&(w(fe),m(!0))},ge=K=>{const fe=e.find(Te=>Te.id===K);fe&&(w(fe),x({name:fe.name,email:fe.email,subjects:Array.isArray(fe.subjects)?fe.subjects:[fe.subject],password:"",department:fe.department,profileImage:fe.profileImage}),$(fe.profileImage||""),y(!0),fe.department&&Ee(fe.department))},ve=async()=>{if(!b||!v.name||!v.email||!v.department||v.subjects.length===0){Y({title:"Missing information",description:"Please fill in all required fields and select at least one subject",variant:"destructive"});return}try{const K={name:v.name,email:v.email,subjects:v.subjects,department:v.department};if(v.profileImage&&(K.profileImage=v.profileImage),await At($e(Ae,`users/${b.id}`),{...b,...K}),b.department!==v.department){const Qe=$e(Ae,`departments/${b.department}/teachers`),_e=await Ct(Qe);if(_e.exists()){const Ue=_e.val();await At(Qe,Ue.filter(_t=>_t!==b.id))}const gt=$e(Ae,`departments/${v.department}/teachers`),Ye=await Ct(gt),zt=Ye.exists()?Ye.val():[];await At(gt,[...zt,b.id])}Y({title:"Teacher updated",description:`${v.name}'s information has been updated.`});const fe=$e(Ae,"users"),Te=await Ct(fe);if(Te.exists()){const Qe=[];Te.forEach(_e=>{const gt=_e.val();gt.role==="teacher"&&Qe.push({id:_e.key,...gt,status:"active"})}),n(Qe)}y(!1),w(null),x({name:"",email:"",subjects:[],password:"",department:"",profileImage:""}),$("")}catch{Y({title:"Error",description:"Failed to update teacher. Please try again.",variant:"destructive"})}},Fe=async K=>{try{const fe=e.find(Te=>Te.id===K);if(fe&&fe.department){const Te=$e(Ae,`departments/${fe.department}/teachers`),Qe=await Ct(Te);if(Qe.exists()){const _e=Qe.val();await At(Te,_e.filter(gt=>gt!==K))}}await At($e(Ae,`users/${K}`),null),n(e.filter(Te=>Te.id!==K)),Y({title:"Teacher deleted",description:"The teacher has been deleted successfully."})}catch{Y({title:"Error",description:"Failed to delete teacher. Please try again.",variant:"destructive"})}},je=e.filter(K=>K.name.toLowerCase().includes(_.toLowerCase())||K.email.toLowerCase().includes(_.toLowerCase()));return h.jsxs("div",{className:"flex flex-col space-y-6",children:[Se(),h.jsx(kr,{open:p,onOpenChange:m,children:h.jsxs(hr,{className:"sm:max-w-[425px]",children:[h.jsx(pr,{children:h.jsx(mr,{children:"Teacher Details"})}),b&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex justify-center",children:b.profileImage?h.jsx("img",{src:b.profileImage,alt:`${b.name}'s profile`,className:"w-24 h-24 rounded-full object-cover"}):h.jsx("div",{className:"w-24 h-24 rounded-full bg-muted flex items-center justify-center",children:h.jsx(dc,{className:"h-12 w-12 text-muted-foreground"})})}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{children:"Name"}),h.jsx("div",{className:"p-2 bg-muted rounded",children:b.name})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{children:"Email"}),h.jsx("div",{className:"p-2 bg-muted rounded",children:b.email})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{children:"Department"}),h.jsx("div",{className:"p-2 bg-muted rounded",children:((mt=r.find(K=>K.id===b.department))==null?void 0:mt.name)||"Not assigned"})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{children:"Subjects"}),h.jsx("div",{className:"p-2 bg-muted rounded",children:Array.isArray(b.subjects)?b.subjects.map(K=>{const fe=i.find(Te=>Te.id===K);return fe?`${fe.name} (${fe.semester})`:K}).join(", "):((Ot=i.find(K=>K.id===b.subject))==null?void 0:Ot.name)||b.subject||"Not assigned"})]})]}),h.jsx(Qs,{children:h.jsx(ae,{onClick:()=>m(!1),children:"Close"})})]})}),h.jsx(kr,{open:g,onOpenChange:y,children:h.jsxs(hr,{className:"sm:max-w-[425px]",children:[h.jsx(pr,{children:h.jsx(mr,{children:"Edit Teacher"})}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"edit-profileImage",children:"Profile Image"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsxs(ae,{variant:"outline",onClick:()=>{var K;return(K=H.current)==null?void 0:K.click()},className:"w-full flex items-center justify-center",disabled:O,children:[h.jsx(uj,{className:"h-4 w-4 mr-2"}),O?"Uploading...":"Change Image"]}),h.jsx("input",{ref:H,id:"edit-profileImage",type:"file",accept:"image/*",className:"hidden",onChange:J})]}),I&&h.jsx("div",{className:"mt-2",children:h.jsx("img",{src:I,alt:"Profile preview",className:"w-16 h-16 rounded-full object-cover"})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"edit-name",children:"Full Name"}),h.jsx(Le,{id:"edit-name",value:v.name,onChange:K=>x({...v,name:K.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"edit-email",children:"Email"}),h.jsx(Le,{id:"edit-email",type:"email",value:v.email,onChange:K=>x({...v,email:K.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"edit-department",children:"Department"}),h.jsxs(Hn,{value:v.department,onValueChange:K=>Ee(K),children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select Department"})}),h.jsx(Fn,{children:r.map(K=>h.jsx(Ut,{value:K.id,children:K.name},K.id))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{children:"Subjects"}),h.jsx("div",{className:"border rounded-md p-4 max-h-48 overflow-y-auto",children:i.length===0?h.jsx("p",{className:"text-sm text-muted-foreground",children:"No subjects available for this department"}):h.jsx("div",{className:"grid gap-3",children:i.map(K=>h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(W0,{id:`edit-subject-${K.id}`,checked:v.subjects.includes(K.id),onCheckedChange:()=>ie(K.id)}),h.jsxs("label",{htmlFor:`edit-subject-${K.id}`,className:"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[K.name," (",K.semester,")"]})]},K.id))})})]})]}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),h.jsx(ae,{onClick:ve,disabled:O,children:"Save Changes"})]})]})})]})}const _6e=(t,e,n)=>{if(!t)return 0;const r=c=>c.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,""),s=r(t),o=r(e).split(/\s+/).filter(c=>c.length>=3);if(o.length===0)return 0;let a=0;o.forEach(c=>{s.includes(c)&&a++});const l=a/o.length;return l>=.8?n:l>=.6?Math.round(n*.75):l>=.4?Math.round(n*.5):l>=.2?Math.round(n*.25):0},YP=async t=>{try{const e=$e(Ae,`exams/${t}`),n=await Ct(e);if(n.exists()){const r=n.val();return{success:!0,exam:{id:t,...r,sections:r.sections.map((s,i)=>({...s,id:`section-${i+1}`,questions:r.questions.filter(o=>o.section===s.name)}))}}}return{success:!1,error:"Exam not found"}}catch{return{success:!1,error:"Failed to fetch exam"}}},C6e=async(t,e,n,r,s=[],i=new Date().toISOString(),o=new Date().toISOString(),a=0)=>{try{const{success:l,exam:c}=await YP(t);if(!l||!c)return{success:!1,error:"Exam not found"};const u=$e(Ae,`users/${e}`),d=await Ct(u),f=d.exists()?d.val():null,p=(f==null?void 0:f.name)||`Student ${e.slice(-4)}`,m=(f==null?void 0:f.photo)||"";let g=0,y=0,v=!1;c.questions.forEach(b=>{y+=b.points,b.type==="short-answer"?(v=!0,b.correctAnswer&&typeof b.correctAnswer=="string"&&n[b.id]&&(g+=_6e(n[b.id],b.correctAnswer,b.points))):n[b.id]===b.correctAnswer&&(g+=b.points)});const x={examId:t,studentId:e,studentName:p,studentPhoto:m,answers:n,startTime:i,endTime:o,timeTaken:a,score:g,maxScore:y,warningCount:r,warnings:s,percentage:y>0?Math.round(g/y*100):0,evaluationComplete:!v,needsEvaluation:v};return await At($e(Ae,`exams/${t}/submissions/${e}`),x),await At($e(Ae,`students/${e}/exams/${t}/status`),"completed"),{success:!0,submission:x}}catch(l){return console.error("Error submitting exam:",l),{success:!1,error:"Failed to submit exam"}}},pX=async t=>{try{const e=$e(Ae,"exams"),n=await Ct(e);if(n.exists()){const r=[],s=new Date;return n.forEach(i=>{var a;const o=i.val();if(o.assignedStudents&&o.assignedStudents.includes(t)){const l=(a=o.submissions)==null?void 0:a[t],c=new Date(o.endDate);let u=o.status;if(s>c)u="expired",H4(i.key||"","expired");else if(u==="scheduled"){const d=new Date(o.startDate);s>=d&&s<=c&&(u="active",H4(i.key||"","active"))}r.push({...o,id:i.key||"",status:l?"completed":u,score:l==null?void 0:l.score,maxScore:l==null?void 0:l.maxScore})}}),r}return[]}catch(e){return console.error("Error fetching student exams:",e),[]}},H4=async(t,e)=>{try{const n=$e(Ae,`exams/${t}/status`);await At(n,e)}catch(n){console.error("Error updating exam status:",n)}},N6e=async t=>{try{const e=await Rd();if(e!=="teacher"&&e!=="admin")return{success:!1,error:"Only teachers and admins can create exams"};const n=$e(Ae,"exams"),r=cA(n),s=r.key;return s?(await At(r,t),{success:!0,exam:{id:s,...t}}):{success:!1,error:"Failed to generate exam ID"}}catch(e){return console.error("Error creating exam:",e),{success:!1,error:"Failed to create exam"}}},E6e=async t=>{try{const e=await Rd();if(e!=="teacher"&&e!=="admin")return{success:!1,error:"Only teachers and admins can view submissions"};const n=$e(Ae,`exams/${t}/submissions`),r=await Ct(n);if(r.exists()){const s=[],i=$e(Ae,"users"),o=await Ct(i),a={};return o.exists()&&o.forEach(l=>{const c=l.val();c.role==="student"&&(a[l.key]={name:c.name||`Student ${l.key.slice(-4)}`,photo:c.photo||""})}),r.forEach(l=>{var d,f;const c=l.val(),u=l.key;(!c.studentName||!c.studentPhoto)&&(c.studentName=((d=a[u])==null?void 0:d.name)||`Student ${u.slice(-4)}`,c.studentPhoto=((f=a[u])==null?void 0:f.photo)||"",At($e(Ae,`exams/${t}/submissions/${u}/studentName`),c.studentName),At($e(Ae,`exams/${t}/submissions/${u}/studentPhoto`),c.studentPhoto)),s.push({studentId:u,...c})}),{success:!0,submissions:s}}return{success:!0,submissions:[]}}catch{return{success:!1,error:"Failed to fetch submissions"}}},mX=async t=>{try{return{success:!0,results:(await pX(t)).filter(r=>r.status==="completed").map(r=>{var i;const s=((i=r.submissions)==null?void 0:i[t])||{};return{examId:r.id,examTitle:r.title,examSubject:r.subject,examDate:r.startDate,_questions:r.questions,...s}})}}catch{return{success:!1,error:"Failed to fetch results"}}},T6e=async t=>{try{const e=$e(Ae,"exams"),n=$e(Ae,"users");let r,s;s=await Ct(n);const i={};if(s.exists()&&s.forEach(l=>{const c=l.val();c.role==="student"&&(i[l.key]={id:l.key,name:c.name||"Unknown Student",email:c.email,photo:c.photo||"",semester:c.semester})}),t==="All")r=await Ct(e);else{const l=_H(e,SH("subject"),Uye(t));r=await Ct(l)}if(!r.exists())return{success:!0,topStudents:[]};const o={};return r.forEach(l=>{const u=l.val().submissions||{};Object.entries(u).forEach(([d,f])=>{if(!o[d]){const p=i[d]||{};o[d]={totalScore:0,totalMaxScore:0,examCount:0,name:p.name||"Unknown Student",photo:p.photo||""}}o[d].totalScore+=f.score||0,o[d].totalMaxScore+=f.maxScore||0,o[d].examCount+=1})}),{success:!0,topStudents:Object.entries(o).map(([l,c])=>({id:l,name:c.name,photo:c.photo,averageScore:c.totalMaxScore>0?Math.round(c.totalScore/c.totalMaxScore*100):0,examCount:c.examCount})).sort((l,c)=>c.averageScore-l.averageScore).slice(0,3)}}catch(e){return console.error("Error fetching top students:",e),{success:!1,error:"Failed to fetch top students",topStudents:[]}}},I6e=async(t,e)=>{if(!t)return console.error("No video element provided for capture"),null;try{console.log("Capturing warning image..."),console.log("Video element status:",{readyState:t.readyState,paused:t.paused,ended:t.ended,videoWidth:t.videoWidth,videoHeight:t.videoHeight});const n=document.createElement("canvas");n.width=t.videoWidth||640,n.height=t.videoHeight||480;const r=n.getContext("2d");if(!r)return console.error("Could not get canvas context"),null;r.drawImage(t,0,0,n.width,n.height);const s=n.toDataURL("image/jpeg",.8),i=T0e(s,`warning-${Date.now()}.jpg`);console.log("Successfully captured image:",i.size,"bytes");const o=await dS(i);return console.log("Upload complete, returning URL:",o),o}catch(n){return console.error("Error capturing warning image:",n),null}},k6e=async(t,e,n)=>{try{const r=await Rd();if(r!=="teacher"&&r!=="admin")return{success:!1,error:"Only teachers and admins can update submissions"};const s=$e(Ae,`exams/${t}/submissions/${e}`),i=await Ct(s);if(!i.exists())return{success:!1,error:"Submission not found"};const o={...i.val()||{},evaluationComplete:!1,needsEvaluation:!1},a={...o,...n,percentage:n.score!==void 0?Math.round(n.score/o.maxScore*100):o.percentage};return await At(s,a),{success:!0,submission:a}}catch(r){return console.error("Error updating submission:",r),{success:!1,error:"Failed to update submission"}}},O6e=async(t,e)=>{try{const n=await Rd();if(n!=="teacher"&&n!=="admin")return{success:!1,error:"Only teachers and admins can update exams"};const r=$e(Ae,`exams/${t}`),s=await Ct(r);if(!s.exists())return{success:!1,error:"Exam not found"};const o={...s.val(),...e};return await At(r,o),{success:!0,exam:{id:t,...o}}}catch(n){return console.error("Error updating exam:",n),{success:!1,error:"Failed to update exam"}}},$6e=async t=>{try{const e=await Rd();if(e!=="teacher"&&e!=="admin")return{success:!1,error:"Only teachers and admins can delete exams"};const n=$e(Ae,`exams/${t}`),r=await Ct(n);if(!r.exists())return{success:!1,error:"Exam not found"};const s=r.val();return s.submissions&&Object.keys(s.submissions).length>0?{success:!1,error:"Cannot delete an exam with submissions"}:(await uA(n),{success:!0,message:"Exam deleted successfully"})}catch(e){return console.error("Error deleting exam:",e),{success:!1,error:"Failed to delete exam"}}};function A6e({totalExams:t,totalAttended:e,studentsPassed:n,selectedSemester:r,selectedSubject:s,setSelectedSemester:i,setSelectedSubject:o,SEMESTERS:a,availableSubjects:l,subjectData:c}){const[u,d]=S.useState([]);S.useEffect(()=>{(async()=>{try{const y=await T6e(s);if(y.success&&y.topStudents){const v=y.topStudents.map(x=>({name:x.name,score:x.averageScore,photo:x.photo}));d(v)}}catch(y){console.error("Error fetching top students:",y)}})()},[s,r]);const f=S.useMemo(()=>!e||e===0?0:Math.round(n/e*100),[n,e]),p=S.useMemo(()=>c.length>0?c:[{subject:"No Data",count:1}],[c]),m=["#9b87f5","#33C3F0","#7E69AB","#6E59A5","#a497d7"];return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs(Me,{className:"flex flex-col items-center p-6 rounded-2xl shadow bg-gradient-to-br from-[#F1F0FB] to-[#E5DEFF] dark:from-[#222237] dark:to-[#1a1a2e] border-none",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-[#f4f0fa] dark:bg-[#2d2d45] mb-2 shadow-inner",children:h.jsx(l$,{size:28,strokeWidth:1.5,className:"text-[#9b87f5]"})}),h.jsx("div",{className:"text-2xl font-semibold text-[#9b87f5]",children:t||0}),h.jsx("div",{className:"text-xs text-[#7E69AB] dark:text-[#b9a6eb] mt-1 tracking-wide text-center",children:s==="All"?"Total Exams":`${s} Exams`}),h.jsx("div",{className:"mt-2 text-sm text-[#7E69AB] dark:text-[#b9a6eb]",children:"Active Tests"})]}),h.jsxs(Me,{className:"flex flex-col items-center p-6 rounded-2xl shadow bg-gradient-to-br from-[#E7F4FB] to-[#D3E4FD] dark:from-[#1c2636] dark:to-[#162039] border-none",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-[#e5fafd] dark:bg-[#25364d] mb-2 shadow-inner",children:h.jsx(pp,{size:28,strokeWidth:1.5,className:"text-[#33C3F0]"})}),h.jsx("div",{className:"text-2xl font-semibold text-[#33C3F0]",children:e||0}),h.jsx("div",{className:"text-xs text-[#6E59A5] dark:text-[#8e80c0] mt-1 tracking-wide text-center",children:"Students Attended"}),h.jsx("div",{className:"mt-2 text-sm text-[#6E59A5] dark:text-[#8e80c0]",children:"Active Participation"})]}),h.jsxs(Me,{className:"flex flex-col items-center p-6 rounded-2xl shadow bg-gradient-to-br from-[#EDE7FB] to-[#F1F0FB] dark:from-[#252337] dark:to-[#1e1e30] border-none",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-[#ede7fb] dark:bg-[#302c51] mb-2 shadow-inner",children:h.jsx(dc,{size:26,strokeWidth:1.5,className:"text-[#7E69AB]"})}),h.jsxs("div",{className:"text-2xl font-semibold text-[#7E69AB]",children:[f,"%"]}),h.jsx("div",{className:"text-xs text-[#a497d7] mt-1 tracking-wide text-center",children:"Pass Rate"}),h.jsxs("div",{className:"mt-2 text-sm text-[#7E69AB] dark:text-[#b9a6eb]",children:[n||0," Students Passed"]})]})]}),h.jsxs("div",{className:"flex flex-wrap gap-4 items-center mt-2",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block mb-1 text-sm font-semibold",children:"Semester"}),h.jsx("select",{value:r,onChange:g=>i(g.target.value),className:"border rounded px-4 py-2 bg-background",children:a.map(g=>h.jsx("option",{value:g,children:g},g))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block mb-1 text-sm font-semibold",children:"Subject"}),h.jsx("select",{value:s,onChange:g=>o(g.target.value),className:"border rounded px-4 py-2 bg-background",children:l.map(g=>h.jsx("option",{value:g,children:g},g))})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs(Me,{className:"border rounded-lg p-4 bg-white dark:bg-card",children:[h.jsx("h2",{className:"text-lg font-bold mb-4 text-[#7E69AB] dark:text-[#b9a6eb]",children:"Subject Distribution"}),h.jsx(cP,{width:"100%",height:240,children:h.jsxs(dX,{children:[h.jsx(fa,{data:p,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"count",nameKey:"subject",label:({subject:g,percent:y})=>`${g}: ${(y*100).toFixed(0)}%`,children:p.map((g,y)=>h.jsx(Mv,{fill:m[y%m.length]},`cell-${y}`))}),h.jsx(Us,{formatter:(g,y,v)=>[`${g} exams`,v.payload.subject]})]})}),h.jsx("div",{className:"mt-4 text-sm text-[#7E69AB] dark:text-[#b9a6eb] text-center",children:"Exam distribution across subjects"})]}),h.jsxs(Me,{className:"border rounded-lg p-4 bg-white dark:bg-card",children:[h.jsx("h2",{className:"text-lg font-bold mb-4 text-[#7E69AB] dark:text-[#b9a6eb]",children:"Top Performing Students"}),h.jsx("div",{className:"space-y-4",children:u.length>0?u.map((g,y)=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#F1F0FB] dark:bg-[#252337] rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-[#9b87f5] dark:bg-[#6e5ac7] flex items-center justify-center",children:g.photo?h.jsx("img",{src:g.photo,alt:g.name,className:"w-full h-full object-cover"}):h.jsx("div",{className:"text-white text-lg font-semibold",children:g.name.charAt(0)})}),h.jsx("div",{className:"absolute -top-2 -left-2 w-6 h-6 flex items-center justify-center rounded-full bg-[#7E69AB] dark:bg-[#5a4889] text-white text-xs font-bold border-2 border-white dark:border-[#222237]",children:y+1})]}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium text-[#6E59A5] dark:text-[#b9a6eb]",children:g.name}),h.jsx("div",{className:"text-xs text-[#9b87f5] dark:text-[#c3b7f9]",children:"Achievement Score"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"text-[#9b87f5] dark:text-[#c3b7f9] font-bold",children:[g.score,"%"]}),h.jsx("div",{className:`w-2 h-2 rounded-full ${g.score>=90?"bg-green-500":g.score>=80?"bg-blue-500":"bg-yellow-500"}`})]})]},y)):h.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No student data available for this subject"})})]})]})]})}function P6e({student:t,onEdit:e,onDelete:n}){var r;return h.jsxs("div",{className:"rounded-2xl shadow-lg relative bg-gradient-to-br from-[#F1F0FB] to-[#E5DEFF] p-6 flex flex-col items-center border-2 border-[#9b87f5]/30 hover:scale-105 transition-transform min-h-[240px]",children:[h.jsx("div",{className:"relative -mt-10 mb-2",children:h.jsxs("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center border-2 border-[#9b87f5] shadow-lg",children:[t.photo?h.jsx("img",{src:t.photo,alt:t.name,className:"w-20 h-20 object-cover rounded-full"}):h.jsx("div",{className:"w-16 h-16 rounded-full bg-[#E5DEFF] flex items-center justify-center text-[#9b87f5] text-3xl",children:((r=t.name)==null?void 0:r.charAt(0))??"?"}),h.jsx("span",{className:"absolute bottom-[-8px] right-[0px] bg-gradient-to-br from-[#7E69AB] to-[#9b87f5] text-white text-xs px-2 py-0.5 rounded-full shadow font-bold",children:t.semester})]})}),h.jsxs("div",{className:"pt-2 text-center w-full",children:[h.jsx("h3",{className:"font-bold text-lg text-[#403E43]",children:t.name}),h.jsx("p",{className:"text-[#8A898C] text-sm",children:t.email}),h.jsx("p",{className:"text-xs mt-1 text-[#7E69AB]",children:t.regNumber})]}),h.jsxs("div",{className:"mt-4 flex justify-center gap-3 w-full",children:[h.jsx(ae,{className:"bg-[#9b87f5] hover:bg-[#7E69AB] text-white text-xs px-4 py-1.5 rounded-lg font-semibold transition",onClick:()=>e(t.id),children:"Edit"}),h.jsxs(Ov,{children:[h.jsx($A,{asChild:!0,children:h.jsx(ae,{className:"bg-[#ea384c] hover:bg-[#cf2840] text-white text-xs px-4 py-1.5 rounded-lg font-semibold transition",children:"Delete"})}),h.jsxs(Cp,{children:[h.jsxs(Np,{children:[h.jsx(Tp,{children:"Delete Student"}),h.jsxs(Ip,{children:["Are you sure you want to delete ",t.name,"? This action cannot be undone."]})]}),h.jsxs(Ep,{children:[h.jsx(Op,{children:"Cancel"}),h.jsx(kp,{onClick:()=>n(t.id),className:"bg-exam-danger hover:bg-exam-danger/90",children:"Delete"})]})]})]})]})]})}function R6e({students:t,searchQuery:e,setSearchQuery:n,isAddStudentDialogOpen:r,setIsAddStudentDialogOpen:s,newStudent:i,setNewStudent:o,SEMESTERS:a,handleAddStudent:l,handleEditStudent:c,handleDeleteStudent:u,teacherDepartment:d}){const[f,p]=S.useState(!1),{toast:m}=ii(),g=t.filter(v=>{var x,b,w;return v.department===d&&(((x=v.name)==null?void 0:x.toLowerCase().includes(e.toLowerCase()))||((b=v.email)==null?void 0:b.toLowerCase().includes(e.toLowerCase()))||((w=v.regNumber)==null?void 0:w.toLowerCase().includes(e.toLowerCase())))}),y=async v=>{if(v.target.files&&v.target.files[0]){const x=v.target.files[0];try{p(!0);const b=await dS(x);o({...i,photo:b}),m({title:"Image uploaded",description:"Profile image has been uploaded successfully."})}catch{m({title:"Upload failed",description:"Failed to upload image. Please try again.",variant:"destructive"})}finally{p(!1)}}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 items-start md:items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Manage Students"}),h.jsx("p",{className:"text-muted-foreground",children:"Add, edit or remove student accounts"})]}),h.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[h.jsx(Le,{placeholder:"Search students...",value:e,onChange:v=>n(v.target.value),className:"md:w-64"}),h.jsxs(kr,{open:r,onOpenChange:s,children:[h.jsx(uS,{asChild:!0,children:h.jsxs(ae,{children:[h.jsx(ng,{className:"h-4 w-4 mr-2"}),"Add Student"]})}),h.jsxs(hr,{className:"sm:max-w-[425px]",children:[h.jsxs(pr,{children:[h.jsx(mr,{children:"Add New Student"}),h.jsx(rl,{children:"Create a new student account with a unique registration number."})]}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"name",children:"Full Name"}),h.jsx(Le,{id:"name",value:i.name,onChange:v=>o({...i,name:v.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"email",children:"Email"}),h.jsx(Le,{id:"email",type:"email",value:i.email,onChange:v=>o({...i,email:v.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"regNumber",children:"Registration Number"}),h.jsx(Le,{id:"regNumber",value:i.regNumber,onChange:v=>o({...i,regNumber:v.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"semester",children:"Semester"}),h.jsx("select",{id:"semester",value:i.semester,onChange:v=>o({...i,semester:v.target.value}),className:"border rounded px-3 py-2 bg-background",children:a.slice(1).map(v=>h.jsx("option",{value:v,children:v},v))})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"studentPhoto",children:"Profile Image (optional)"}),h.jsx(Le,{id:"studentPhoto",type:"file",accept:"image/*",onChange:y,disabled:f}),i.photo&&h.jsx("img",{src:i.photo,alt:"preview",className:"h-14 w-14 object-cover rounded mt-1"})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"studentPassword",children:"Initial Password"}),h.jsx(Le,{id:"studentPassword",type:"password",value:i.password,onChange:v=>o({...i,password:v.target.value})})]})]}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),h.jsx(ae,{onClick:l,disabled:f,children:"Save"})]})]})]})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.length>0?g.map(v=>h.jsx(P6e,{student:v,onEdit:c,onDelete:u},v.id)):h.jsx("div",{className:"col-span-full text-center py-10",children:h.jsx("p",{className:"text-muted-foreground",children:"No students found. Add a new student to get started."})})})]})}function D6e(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:p,...m}=d,g=(f==null?void 0:f[t][l])||a,y=S.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:y,children:p})}function u(d,f){const p=(f==null?void 0:f[t][l])||a,m=S.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,j6e(s,...e)]}function j6e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var fN="rovingFocusGroup.onEntryFocus",M6e={bubbles:!1,cancelable:!0},l_="RovingFocusGroup",[QI,gX,L6e]=sS(l_),[F6e,c_]=D6e(l_,[L6e]),[B6e,U6e]=F6e(l_),yX=S.forwardRef((t,e)=>h.jsx(QI.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(QI.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(W6e,{...t,ref:e})})}));yX.displayName=l_;var W6e=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=S.useRef(null),p=lt(e,f),m=Sp(i),[g=null,y]=ta({prop:o,defaultProp:a,onChange:l}),[v,x]=S.useState(!1),b=cn(c),w=gX(n),_=S.useRef(!1),[C,E]=S.useState(0);return S.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(fN,b),()=>N.removeEventListener(fN,b)},[b]),h.jsx(B6e,{scope:n,orientation:r,dir:m,loop:s,currentTabStopId:g,onItemFocus:S.useCallback(N=>y(N),[y]),onItemShiftTab:S.useCallback(()=>x(!0),[]),onFocusableItemAdd:S.useCallback(()=>E(N=>N+1),[]),onFocusableItemRemove:S.useCallback(()=>E(N=>N-1),[]),children:h.jsx(Re.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:Ne(t.onMouseDown,()=>{_.current=!0}),onFocus:Ne(t.onFocus,N=>{const I=!_.current;if(N.target===N.currentTarget&&I&&!v){const $=new CustomEvent(fN,M6e);if(N.currentTarget.dispatchEvent($),!$.defaultPrevented){const O=w().filter(F=>F.focusable),k=O.find(F=>F.active),R=O.find(F=>F.id===g),B=[k,R,...O].filter(Boolean).map(F=>F.ref.current);bX(B,u)}}_.current=!1}),onBlur:Ne(t.onBlur,()=>x(!1))})})}),vX="RovingFocusGroupItem",xX=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=ho(),l=i||a,c=U6e(vX,n),u=c.currentTabStopId===l,d=gX(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=c;return S.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),h.jsx(QI.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:h.jsx(Re.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:Ne(t.onMouseDown,m=>{r?c.onItemFocus(l):m.preventDefault()}),onFocus:Ne(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ne(t.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const g=H6e(m,c.orientation,c.dir);if(g!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let v=d().filter(x=>x.focusable).map(x=>x.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const x=v.indexOf(m.currentTarget);v=c.loop?G6e(v,x+1):v.slice(x+1)}setTimeout(()=>bX(v))}})})})});xX.displayName=vX;var z6e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function V6e(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function H6e(t,e,n){const r=V6e(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return z6e[r]}function bX(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function G6e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var wX=yX,SX=xX,QP="Tabs",[q6e,Zgt]=No(QP,[c_]),_X=c_(),[K6e,JP]=q6e(QP),CX=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Sp(a),[d,f]=ta({prop:r,onChange:s,defaultProp:i});return h.jsx(K6e,{scope:n,baseId:ho(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(Re.div,{dir:u,"data-orientation":o,...c,ref:e})})});CX.displayName=QP;var NX="TabsList",EX=S.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=JP(NX,n),o=_X(n);return h.jsx(wX,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:h.jsx(Re.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});EX.displayName=NX;var TX="TabsTrigger",IX=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=JP(TX,n),a=_X(n),l=$X(o.baseId,r),c=AX(o.baseId,r),u=r===o.value;return h.jsx(SX,{asChild:!0,...a,focusable:!s,active:u,children:h.jsx(Re.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:Ne(t.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ne(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ne(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!s&&d&&o.onValueChange(r)})})})});IX.displayName=TX;var kX="TabsContent",OX=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=JP(kX,n),l=$X(a.baseId,r),c=AX(a.baseId,r),u=r===a.value,d=S.useRef(u);return S.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(qr,{present:s||u,children:({present:f})=>h.jsx(Re.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&i})})});OX.displayName=kX;function $X(t,e){return`${t}-trigger-${e}`}function AX(t,e){return`${t}-content-${e}`}var X6e=CX,PX=EX,RX=IX,DX=OX;const ZP=X6e,u_=S.forwardRef(({className:t,...e},n)=>h.jsx(PX,{ref:n,className:ne("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));u_.displayName=PX.displayName;const Ga=S.forwardRef(({className:t,...e},n)=>h.jsx(RX,{ref:n,className:ne("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Ga.displayName=RX.displayName;const qa=S.forwardRef(({className:t,...e},n)=>h.jsx(DX,{ref:n,className:ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));qa.displayName=DX.displayName;var e2="Radio",[Y6e,jX]=No(e2),[Q6e,J6e]=Y6e(e2),MX=S.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:a="on",onCheck:l,form:c,...u}=t,[d,f]=S.useState(null),p=lt(e,y=>f(y)),m=S.useRef(!1),g=d?c||!!d.closest("form"):!0;return h.jsxs(Q6e,{scope:n,checked:s,disabled:o,children:[h.jsx(Re.button,{type:"button",role:"radio","aria-checked":s,"data-state":BX(s),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:p,onClick:Ne(t.onClick,y=>{s||l==null||l(),g&&(m.current=y.isPropagationStopped(),m.current||y.stopPropagation())})}),g&&h.jsx(Z6e,{control:d,bubbles:!m.current,name:r,value:a,checked:s,required:i,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});MX.displayName=e2;var LX="RadioIndicator",FX=S.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=J6e(LX,n);return h.jsx(qr,{present:r||i.checked,children:h.jsx(Re.span,{"data-state":BX(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});FX.displayName=LX;var Z6e=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=S.useRef(null),o=iS(n),a=QO(e);return S.useEffect(()=>{const l=i.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&d){const f=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(f)}},[o,n,r]),h.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function BX(t){return t?"checked":"unchecked"}var e5e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t2="RadioGroup",[t5e,eyt]=No(t2,[c_,jX]),UX=c_(),WX=jX(),[n5e,r5e]=t5e(t2),zX=S.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:d,...f}=t,p=UX(n),m=Sp(c),[g,y]=ta({prop:i,defaultProp:s,onChange:d});return h.jsx(n5e,{scope:n,name:r,required:o,disabled:a,value:g,onValueChange:y,children:h.jsx(wX,{asChild:!0,...p,orientation:l,dir:m,loop:u,children:h.jsx(Re.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:m,...f,ref:e})})})});zX.displayName=t2;var VX="RadioGroupItem",HX=S.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=r5e(VX,n),o=i.disabled||r,a=UX(n),l=WX(n),c=S.useRef(null),u=lt(e,c),d=i.value===s.value,f=S.useRef(!1);return S.useEffect(()=>{const p=g=>{e5e.includes(g.key)&&(f.current=!0)},m=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",m)}},[]),h.jsx(SX,{asChild:!0,...a,focusable:!o,active:d,children:h.jsx(MX,{disabled:o,required:i.required,checked:d,...l,...s,name:i.name,ref:u,onCheck:()=>i.onValueChange(s.value),onKeyDown:Ne(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Ne(s.onFocus,()=>{var p;f.current&&((p=c.current)==null||p.click())})})})});HX.displayName=VX;var s5e="RadioGroupIndicator",GX=S.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=WX(n);return h.jsx(FX,{...s,...r,ref:e})});GX.displayName=s5e;var qX=zX,KX=HX,i5e=GX;const Ww=S.forwardRef(({className:t,...e},n)=>h.jsx(qX,{className:ne("grid gap-2",t),...e,ref:n}));Ww.displayName=qX.displayName;const yg=S.forwardRef(({className:t,...e},n)=>h.jsx(KX,{ref:n,className:ne("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:h.jsx(i5e,{className:"flex items-center justify-center",children:h.jsx(vue,{className:"h-2.5 w-2.5 fill-current text-current"})})}));yg.displayName=KX.displayName;const XX=async t=>{try{if(!t)return console.error("No department ID provided"),{semesters:[],subjects:[],subjectsBySemester:{}};console.log("Fetching academic data for department:",t);const e=$e(Ae,`departments/${t}`),n=await Ct(e);if(n.exists()){const r=n.val();console.log("Department data:",r);let s=new Set,i=new Set;const o={};return Array.isArray(r.semesters)&&r.semesters.forEach(a=>{s.add(a),o[a]||(o[a]=[])}),r.subjects&&Object.entries(r.subjects).forEach(([a,l])=>{Array.isArray(l)&&(o[a]||(o[a]=[]),l.forEach(c=>{c.name&&(i.add(c.name),o[a].includes(c.name)||o[a].push(c.name))}))}),console.log("Processed academic data:",{semesters:Array.from(s),subjects:Array.from(i),subjectsBySemester:o}),{semesters:Array.from(s),subjects:Array.from(i),subjectsBySemester:o}}return console.log("Department not found"),{semesters:[],subjects:[],subjectsBySemester:{}}}catch(e){return console.error("Error fetching academic data:",e),{semesters:[],subjects:[],subjectsBySemester:{}}}};function G4({section:t}){const[e,n]=S.useState([]),[r,s]=S.useState([]),[i,o]=S.useState(!1),[a,l]=S.useState({name:"",email:"",regNumber:"",password:"",photo:"",semester:"Semester 1"}),[c,u]=S.useState(""),[d,f]=S.useState("All"),[p,m]=S.useState("All"),[g,y]=S.useState("details"),[v,x]=S.useState(""),[b,w]=S.useState(""),[_,C]=S.useState("Semester 1"),[E,N]=S.useState("60"),[I,$]=S.useState(""),[O,k]=S.useState(""),[R,M]=S.useState([]),[B,F]=S.useState([]),[L,P]=S.useState(!1),[W,q]=S.useState({id:"1",type:"multiple-choice",text:"",options:["","","",""],correctAnswer:"",points:1,section:"Section 1",timeLimit:5}),[H,Y]=S.useState([{id:"section-1",name:"Section 1",timeLimit:30,questions:[]}]),[se,Se]=S.useState("Section 1"),[De,Pe]=S.useState([]),[de,Ee]=S.useState([]),[J,ie]=S.useState({}),[Z,V]=S.useState(""),[ge,ve]=S.useState(!1),[Fe,je]=S.useState(!1),[mt,Ot]=S.useState([]),[K,fe]=S.useState(0),[Te,Qe]=S.useState(null),[_e,gt]=S.useState(3),{toast:Ye}=ii(),zt=aa();S.useEffect(()=>{const ue=$e(Ae,"users"),G=Ua(ue,_r=>{if(_r.exists()){const ya=[];_r.forEach(zi=>{const ui=zi.val();ui.role==="student"&&ya.push({id:zi.key,...ui,status:ui.status||"active",semester:ui.semester||"Semester 1",photo:ui.photo||""})}),n(ya)}}),We=async()=>{const _r=localStorage.getItem("examUser");if(_r){const ya=JSON.parse(_r),zi=$e(Ae,"exams"),ui=Ua(zi,async eu=>{if(eu.exists()){const R_=[];eu.forEach(SR=>{const _R=SR.val();_R.createdBy===ya.id&&R_.push({id:SR.key,..._R})}),s(R_),console.log("Fetched exams:",R_)}else s([])});return()=>ui()}return()=>{}};let fn=()=>{};return(async()=>fn=await We())(),(async()=>{const _r=localStorage.getItem("examUser");if(_r){const ya=JSON.parse(_r),zi=$e(Ae,`users/${ya.id}`);Ua(zi,ui=>{if(ui.exists()){const eu=ui.val();console.log("Teacher data:",eu),V(eu.department||"")}})}})(),()=>{G(),fn()}},[]),S.useEffect(()=>{(async()=>{if(Z){console.log("Loading academic data for department:",Z);const G=await XX(Z);console.log("Academic data received:",G),Pe(["All",...G.semesters]),Ee(["All",...G.subjects]),ie(G.subjectsBySemester||{})}})()},[Z]),S.useEffect(()=>{_&&J[_]?(console.log(`Setting subjects for semester ${_}:`,J[_]),Ot(J[_]),w("")):Ot([])},[_,J]);const Ue=async()=>{try{if(!a.name||!a.email||!a.regNumber||!a.password){Ye({title:"Missing information",description:"Please fill in all required fields",variant:"destructive"});return}const ue={name:a.name,email:a.email,password:a.password,role:"student",regNumber:a.regNumber,semester:a.semester,photo:a.photo,status:"active",department:Z},{success:G,user:We,error:fn}=await IH(ue.name,ue.email,ue.password,"student");if(G&&We)Ye({title:"Student added",description:"New student account has been created successfully"}),await At($e(Ae,`users/${We.id}`),{id:We.id,name:ue.name,email:ue.email,role:"student",regNumber:ue.regNumber,semester:ue.semester,photo:ue.photo,status:"active",department:Z});else{Ye({title:"Error",description:fn||"Failed to create student account",variant:"destructive"});return}l({name:"",email:"",regNumber:"",password:"",photo:"",semester:"Semester 1"}),o(!1)}catch(ue){console.error("Error adding student:",ue),Ye({title:"Error",description:"An error occurred. Please try again.",variant:"destructive"})}},_t=()=>{const ue=`section-${H.length+1}`,G=`Section ${H.length+1}`;Y([...H,{id:ue,name:G,timeLimit:30,questions:[]}])},An=(ue,G)=>{const We=[...H];We[ue].timeLimit=G,Y(We)},nr=()=>{var fn;if(!W.text){Ye({title:"Incomplete question",description:"Please add question text",variant:"destructive"});return}if(W.type==="multiple-choice"){if(!((fn=W.options)!=null&&fn.every(Rs=>Rs.trim()))){Ye({title:"Incomplete options",description:"Please fill in all options",variant:"destructive"});return}if(!W.correctAnswer){Ye({title:"Missing correct answer",description:"Please select the correct answer",variant:"destructive"});return}}M([...R,{...W}]);const ue=[...H],G=ue.findIndex(Rs=>Rs.name===se);G!==-1&&(ue[G].questions||(ue[G].questions=[]),ue[G].questions.push({...W}),Y(ue));const We=String(R.length+2);q({id:We,type:"multiple-choice",text:"",options:["","","",""],correctAnswer:"",points:1,section:se,timeLimit:5}),Ye({title:"Question added",description:`Question ${R.length+1} added to ${se}`})},Ui=ue=>{let G={...W,type:ue};ue==="multiple-choice"?(G.options=["","","",""],G.correctAnswer=""):(delete G.options,G.correctAnswer=""),q(G)},Xr=(ue,G)=>{const We=[...W.options||[]];We[ue]=G,q({...W,options:We})},Yr=ue=>{const G=e.find(We=>We.id===ue);if(G){const We={id:G.id,name:G.name,email:G.email,regNumber:G.regNumber||"",password:"",photo:G.photo||"",semester:G.semester||"Semester 1"};l(We),o(!0)}},ma=async ue=>{try{await At($e(Ae,`users/${ue}`),null),Ye({title:"Student deleted",description:"The student has been deleted successfully."})}catch{Ye({title:"Error",description:"Failed to delete student. Please try again.",variant:"destructive"})}},Wi=()=>R.reduce((ue,G)=>ue+G.points,0),dn=async()=>{try{if(!v||!b||!E){Ye({title:"Missing information",description:"Please fill in all required exam details",variant:"destructive"}),y("details");return}if(!I||!O){Ye({title:"Missing dates",description:"Please set both start and end dates for the exam",variant:"destructive"});return}const ue=new Date(I),G=new Date(O);if(ue>=G){Ye({title:"Invalid dates",description:"End date must be after start date",variant:"destructive"});return}if(R.length===0){Ye({title:"No questions",description:"Please add at least one question to the exam",variant:"destructive"}),y("questions");return}if(B.length===0){Ye({title:"No students assigned",description:"Please assign this exam to at least one student",variant:"destructive"}),y("students");return}const We=localStorage.getItem("examUser");if(!We){Ye({title:"Authentication error",description:"Please login again",variant:"destructive"});return}const fn=JSON.parse(We),Rs=H.map(zi=>{const ui=R.filter(eu=>eu.section===zi.name);return{id:zi.id,name:zi.name,timeLimit:zi.timeLimit,questions:ui}}),_r={title:v,subject:b,semester:_,createdBy:fn.id,duration:Number(E),status:"scheduled",questions:R,assignedStudents:B,sections:Rs,startDate:I,endDate:O,department:Z,minScoreToPass:Number(K),maxScore:Wi(),warningsThreshold:Number(_e)},ya=await N6e(_r);ya.success?(Ye({title:"Exam created",description:"The exam has been created and assigned successfully"}),x(""),w(""),N("60"),$(""),k(""),M([]),F([]),Y([{id:"section-1",name:"Section 1",timeLimit:30,questions:[]}]),P(!1)):Ye({title:"Error",description:ya.error||"Failed to create exam",variant:"destructive"})}catch(ue){console.error("Error creating exam:",ue),Ye({title:"Error",description:"Failed to create exam. Please try again.",variant:"destructive"})}},nn=async()=>{if(Te)try{const ue={title:v,subject:b,semester:_,duration:Number(E),startDate:I,endDate:O,minScoreToPass:Number(K),warningsThreshold:Number(_e)},G=await O6e(Te.id,ue);G.success?(Ye({title:"Exam updated",description:"The exam has been updated successfully"}),ve(!1)):Ye({title:"Error",description:G.error||"Failed to update exam",variant:"destructive"})}catch(ue){console.error("Error updating exam:",ue),Ye({title:"Error",description:"Failed to update exam. Please try again.",variant:"destructive"})}},Ge=async()=>{if(Te)try{const ue=await $6e(Te.id);ue.success?(Ye({title:"Exam deleted",description:"The exam has been deleted successfully"}),je(!1)):Ye({title:"Error",description:ue.error||"Failed to delete exam",variant:"destructive"})}catch(ue){console.error("Error deleting exam:",ue),Ye({title:"Error",description:"Failed to delete exam. Please try again.",variant:"destructive"})}},Q=ue=>{Qe(ue),x(ue.title),w(ue.subject||""),C(ue.semester||"Semester 1"),N(ue.duration.toString()),$(ue.startDate),k(ue.endDate),fe(ue.minScoreToPass),gt(ue.warningsThreshold),ve(!0)},oe=ue=>{Qe(ue),je(!0)},Je=ue=>{F(B.includes(ue)?B.filter(G=>G!==ue):[...B,ue])},vn=ue=>{const G=e.filter(We=>ue==="All"||We.semester===ue).map(We=>We.id);B.length===G.length?F([]):F(G)},rr=e.filter(ue=>{var fn,Rs,_r;const G=((fn=ue.name)==null?void 0:fn.toLowerCase().includes(c.toLowerCase()))||((Rs=ue.email)==null?void 0:Rs.toLowerCase().includes(c.toLowerCase()))||((_r=ue.regNumber)==null?void 0:_r.toLowerCase().includes(c.toLowerCase())),We=d==="All"||ue.semester===d;return G&&We}),Zc=(()=>{if(d==="All"){const ue=r.map(G=>G.subject);return["All",...Array.from(new Set(ue.filter(Boolean)))]}else{const G=r.filter(We=>We.semester===d).map(We=>We.subject);return["All",...Array.from(new Set(G.filter(Boolean)))]}})();S.useEffect(()=>{Zc.includes(p)||m("All")},[d,r]);const sx=r.filter(ue=>{const G=d==="All"||ue.semester===d,We=p==="All"||ue.subject===p;return G&&We}),tre=d==="All"?e.length:e.filter(ue=>ue.semester===d).length,nre=rr.filter(ue=>ue.status==="active").length,rre=sx.length,sre=sx.reduce((ue,G)=>ue+(Array.isArray(G.submissions)?G.submissions.length:G.attendance||0),0),ire=rr.filter(ue=>ue.result==="passed").length,ore=Zc.slice(1).map(G=>{const We=r.filter(fn=>(d==="All"||fn.semester===d)&&fn.subject===G).length;return{subject:G,count:We}}),are=ue=>{zt(`/exam/monitor/${ue}`)},lre=()=>{var ue;return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 items-start md:items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Manage Exams"}),h.jsx("p",{className:"text-muted-foreground",children:"Create, schedule and monitor exams"})]}),h.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[h.jsx(Le,{placeholder:"Search exams...",className:"md:w-64"}),h.jsxs(kr,{open:L,onOpenChange:P,children:[h.jsx(uS,{asChild:!0,children:h.jsxs(ae,{children:[h.jsx(ng,{className:"h-4 w-4 mr-2"}),"Create Exam"]})}),h.jsxs(hr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[h.jsxs(pr,{children:[h.jsx(mr,{children:"Create New Exam"}),h.jsx(rl,{children:"Create a new exam with sections, questions and assign to students"})]}),h.jsxs(ZP,{value:g,onValueChange:y,className:"mt-4",children:[h.jsxs(u_,{className:"grid w-full grid-cols-3",children:[h.jsx(Ga,{value:"details",children:"Exam Details"}),h.jsx(Ga,{value:"questions",children:"Questions"}),h.jsx(Ga,{value:"students",children:"Assign Students"})]}),h.jsxs(qa,{value:"details",className:"pt-6 space-y-4",children:[h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"examTitle",children:"Exam Title"}),h.jsx(Le,{id:"examTitle",value:v,onChange:G=>x(G.target.value),placeholder:"e.g. Mid-term Mathematics"})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"examSemester",children:"Semester"}),h.jsxs(Hn,{value:_,onValueChange:C,children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select semester"})}),h.jsx(Fn,{children:De.slice(1).map(G=>h.jsx(Ut,{value:G,children:G},G))})]})]})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"examSubject",children:"Subject"}),h.jsxs(Hn,{value:b,onValueChange:w,children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select subject"})}),h.jsx(Fn,{children:de.slice(1).map(G=>h.jsx(Ut,{value:G,children:G},G))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"examDuration",children:"Total Duration (minutes)"}),h.jsx(Le,{id:"examDuration",type:"number",min:"1",value:E,onChange:G=>N(G.target.value)})]})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"examStartDate",children:"Start Date"}),h.jsx(Le,{id:"examStartDate",type:"datetime-local",value:I,onChange:G=>$(G.target.value)})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"examEndDate",children:"End Date"}),h.jsx(Le,{id:"examEndDate",type:"datetime-local",value:O,onChange:G=>k(G.target.value)})]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx(xe,{className:"text-lg font-medium mb-2 block",children:"Exam Sections"}),h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create sections with separate time limits"}),h.jsx("div",{className:"space-y-4",children:H.map((G,We)=>h.jsxs("div",{className:"flex items-center gap-4 p-3 border rounded-md",children:[h.jsx("div",{className:"font-medium flex-1",children:G.name}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xe,{htmlFor:`section-time-${We}`,className:"text-sm whitespace-nowrap",children:"Time limit (min):"}),h.jsx(Le,{id:`section-time-${We}`,type:"number",min:"1",value:G.timeLimit,onChange:fn=>An(We,parseInt(fn.target.value)||1),className:"w-20"})]})]},We))}),h.jsxs(ae,{onClick:_t,className:"mt-3",variant:"outline",children:[h.jsx(ng,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),h.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[h.jsx(ae,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),h.jsx(ae,{onClick:()=>y("questions"),children:"Next: Add Questions"})]})]}),h.jsxs(qa,{value:"questions",className:"pt-6 space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("h2",{className:"text-xl font-semibold",children:["Current Questions (",R.length,")"]}),h.jsxs("div",{children:[h.jsx(xe,{htmlFor:"questionSection",className:"mr-2",children:"Section:"}),h.jsx("select",{id:"questionSection",value:se,onChange:G=>Se(G.target.value),className:"border rounded px-2 py-1 bg-background",children:H.map(G=>h.jsx("option",{value:G.name,children:G.name},G.name))})]})]}),R.length>0?h.jsx("div",{className:"space-y-4",children:R.map((G,We)=>{var fn;return h.jsxs(Me,{children:[h.jsxs(it,{className:"pb-2 flex flex-row items-start justify-between",children:[h.jsxs("div",{children:[h.jsxs(ct,{className:"text-base",children:["Question ",We+1]}),h.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[h.jsx("span",{className:"uppercase",children:G.type}),h.jsx("span",{children:"•"}),h.jsx("span",{children:G.section}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:[G.points," ",G.points===1?"point":"points"]})]})]}),h.jsx(ae,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive/90 hover:bg-destructive/10",onClick:()=>M(R.filter(Rs=>Rs.id!==G.id)),children:h.jsx($a,{className:"h-4 w-4"})})]}),h.jsxs(ot,{children:[h.jsx("p",{className:"font-medium",children:G.text}),G.type==="multiple-choice"&&h.jsx("div",{className:"mt-2 space-y-1",children:(fn=G.options)==null?void 0:fn.map((Rs,_r)=>h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center text-xs ${G.correctAnswer===String(_r)?"bg-primary text-white":"border"}`,children:G.correctAnswer===String(_r)&&"✓"}),h.jsx("span",{children:Rs})]},_r))}),G.type==="short-answer"&&h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["Answer: ",G.correctAnswer]})]})]},G.id)})}):h.jsx(Me,{className:"p-6 text-center text-muted-foreground",children:h.jsx("p",{children:"No questions added yet. Add your first question below."})})]}),h.jsxs(Me,{children:[h.jsx(it,{children:h.jsxs(ct,{children:["Add New Question to ",se]})}),h.jsxs(ot,{className:"space-y-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"questionType",children:"Question Type"}),h.jsxs(Hn,{value:W.type,onValueChange:G=>Ui(G),children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select question type"})}),h.jsxs(Fn,{children:[h.jsx(Ut,{value:"multiple-choice",children:"Multiple Choice"}),h.jsx(Ut,{value:"short-answer",children:"Short Answer"})]})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"questionText",children:"Question Text"}),h.jsx(cS,{id:"questionText",placeholder:"Enter your question here",value:W.text,onChange:G=>q({...W,text:G.target.value}),rows:3})]}),W.type==="multiple-choice"&&h.jsxs("div",{className:"space-y-4",children:[h.jsx(xe,{children:"Options"}),h.jsx("div",{className:"space-y-2",children:(ue=W.options)==null?void 0:ue.map((G,We)=>h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Ww,{value:W.correctAnswer,onValueChange:fn=>q({...W,correctAnswer:fn}),className:"flex-shrink-0",children:h.jsx(yg,{value:String(We),id:`option-${We}`})}),h.jsx(Le,{placeholder:`Option ${We+1}`,value:G,onChange:fn=>Xr(We,fn.target.value),className:"flex-grow"})]},We))})]}),W.type==="short-answer"&&h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"correctAnswer",children:"Correct Answer"}),h.jsx(Le,{id:"correctAnswer",placeholder:"Enter the correct answer",value:W.correctAnswer||"",onChange:G=>q({...W,correctAnswer:G.target.value})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"questionPoints",children:"Points"}),h.jsx(Le,{id:"questionPoints",type:"number",min:"1",value:W.points,onChange:G=>q({...W,points:Number(G.target.value)||1}),className:"w-full"})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"questionTimeLimit",children:"Time Limit (min)"}),h.jsx(Le,{id:"questionTimeLimit",type:"number",min:"1",value:W.timeLimit,onChange:G=>q({...W,timeLimit:Number(G.target.value)||1}),className:"w-full"})]})]}),h.jsxs(ae,{onClick:nr,className:"mt-2",children:[h.jsx(ng,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),h.jsxs("div",{className:"flex justify-between gap-2 pt-4",children:[h.jsx(ae,{variant:"outline",onClick:()=>y("details"),children:"Back to Details"}),h.jsx(ae,{onClick:()=>y("students"),disabled:R.length===0,children:"Next: Assign Students"})]})]}),h.jsx(qa,{value:"students",className:"pt-6 space-y-6",children:h.jsxs(Me,{children:[h.jsx(it,{children:h.jsx(ct,{children:"Exam Settings"})}),h.jsxs(ot,{className:"space-y-4",children:[h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"maxScore",children:"Maximum Score"}),h.jsx(Le,{id:"maxScore",value:Wi(),disabled:!0,className:"bg-muted"}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Total points from all questions"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"minScore",children:"Minimum Score to Pass"}),h.jsx(Le,{id:"minScore",type:"number",min:"0",max:Wi(),value:K,onChange:G=>fe(Number(G.target.value))}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Students must score at least this many points to pass"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:"warningsThreshold",children:"Warning Threshold"}),h.jsx(Le,{id:"warningsThreshold",type:"number",min:"1",value:_e,onChange:G=>gt(Number(G.target.value))}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Exam will auto-submit after this many warnings"})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx(xe,{className:"text-lg font-medium mb-2 block",children:"Assign Students"}),h.jsxs("div",{className:"flex justify-end mb-4 gap-2",children:[h.jsxs(Hn,{value:d,onValueChange:f,children:[h.jsx(Ln,{className:"w-[130px]",children:h.jsx(Gn,{placeholder:"Filter by semester"})}),h.jsx(Fn,{children:De.map(G=>h.jsx(Ut,{value:G,children:G},G))})]}),h.jsx(ae,{variant:"outline",onClick:()=>vn(d),children:B.length===e.filter(G=>d==="All"||G.semester===d).length?"Deselect All":"Select All"})]}),h.jsx("div",{className:"space-y-3",children:e.filter(G=>G.department===Z&&(d==="All"||G.semester===d)).map(G=>h.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded hover:bg-muted/50",children:[h.jsx(W0,{id:`student-${G.id}`,checked:B.includes(G.id),onCheckedChange:()=>Je(G.id)}),h.jsxs("div",{className:"flex items-center flex-grow gap-3",children:[G.photo?h.jsx("img",{src:G.photo,alt:G.name,className:"h-8 w-8 rounded-full object-cover"}):h.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:h.jsx(wue,{className:"h-4 w-4 text-muted-foreground"})}),h.jsx(xe,{htmlFor:`student-${G.id}`,className:"cursor-pointer flex-grow",children:G.name}),h.jsx("span",{className:"text-xs text-muted-foreground",children:G.semester})]})]},G.id))})]})]}),h.jsxs(Ys,{className:"flex justify-between pt-4 px-6",children:[h.jsx(ae,{variant:"outline",onClick:()=>y("questions"),children:"Back to Questions"}),h.jsx(ae,{onClick:dn,disabled:B.length===0,children:"Create Exam"})]})]})})]})]})]}),h.jsx(kr,{open:ge,onOpenChange:ve,children:h.jsxs(hr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[h.jsxs(pr,{children:[h.jsx(mr,{children:"Edit Exam"}),h.jsx(rl,{children:"Update the exam details"})]}),h.jsxs("div",{className:"space-y-4 py-4",children:[h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"editExamTitle",children:"Exam Title"}),h.jsx(Le,{id:"editExamTitle",value:v,onChange:G=>x(G.target.value),placeholder:"e.g. Mid-term Mathematics"})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"editExamSemester",children:"Semester"}),h.jsxs(Hn,{value:_,onValueChange:C,children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select semester"})}),h.jsx(Fn,{children:De.slice(1).map(G=>h.jsx(Ut,{value:G,children:G},G))})]})]})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"editExamSubject",children:"Subject"}),h.jsxs(Hn,{value:b,onValueChange:w,children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select subject"})}),h.jsx(Fn,{children:de.slice(1).map(G=>h.jsx(Ut,{value:G,children:G},G))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"editExamDuration",children:"Total Duration (minutes)"}),h.jsx(Le,{id:"editExamDuration",type:"number",min:"1",value:E,onChange:G=>N(G.target.value)})]})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"editExamStartDate",children:"Start Date"}),h.jsx(Le,{id:"editExamStartDate",type:"datetime-local",value:I,onChange:G=>$(G.target.value)})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"editExamEndDate",children:"End Date"}),h.jsx(Le,{id:"editExamEndDate",type:"datetime-local",value:O,onChange:G=>k(G.target.value)})]})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"editMinScoreToPass",children:"Minimum Score to Pass (%)"}),h.jsx(Le,{id:"editMinScoreToPass",type:"number",min:"0",max:"100",value:K,onChange:G=>fe(parseInt(G.target.value)||0)})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"editWarningsThreshold",children:"Warnings Threshold"}),h.jsx(Le,{id:"editWarningsThreshold",type:"number",min:"1",value:_e,onChange:G=>gt(parseInt(G.target.value)||3)})]})]})]}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>ve(!1),children:"Cancel"}),h.jsx(ae,{onClick:nn,children:"Update Exam"})]})]})}),h.jsx(Ov,{open:Fe,onOpenChange:je,children:h.jsxs(Cp,{children:[h.jsxs(Np,{children:[h.jsx(Tp,{children:"Are you sure?"}),h.jsxs(Ip,{children:['This will permanently delete the exam "',Te==null?void 0:Te.title,'". This action cannot be undone if the exam has no submissions.']})]}),h.jsxs(Ep,{children:[h.jsx(Op,{children:"Cancel"}),h.jsx(kp,{onClick:Ge,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsx(Wa,{title:"Total Exams",value:r.length,description:`${r.filter(G=>G.status==="active").length} active`,icon:h.jsx($a,{className:"h-8 w-8 text-primary"})}),h.jsx(Wa,{title:"Subjects",value:Zc.length-1,description:"Across all semesters",icon:h.jsx(e6,{className:"h-8 w-8 text-primary"})}),h.jsx(Wa,{title:"Active Students",value:nre,description:`${tre} total students`,icon:h.jsx(dc,{className:"h-8 w-8 text-primary"})})]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"font-semibold text-lg",children:"Upcoming Exams"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(Hn,{value:d,onValueChange:f,children:[h.jsx(Ln,{className:"w-[130px]",children:h.jsx(Gn,{placeholder:"Semester"})}),h.jsx(Fn,{children:De.map(G=>h.jsx(Ut,{value:G,children:G},G))})]}),h.jsxs(Hn,{value:p,onValueChange:m,children:[h.jsx(Ln,{className:"w-[130px]",children:h.jsx(Gn,{placeholder:"Subject"})}),h.jsx(Fn,{children:Zc.map(G=>h.jsx(Ut,{value:G,children:G},G))})]})]})]}),sx.length>0?h.jsx("div",{className:"grid gap-4",children:sx.map(G=>{const We=new Date(G.startDate);return h.jsx(Me,{children:h.jsxs(ot,{className:"p-4 flex flex-col md:flex-row gap-4 items-start md:items-center",children:[h.jsxs("div",{className:"flex-grow",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h3",{className:"font-semibold text-lg",children:G.title}),h.jsx(gr,{className:`${G.status==="completed"?"bg-green-100 text-green-800":G.status==="active"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:G.status})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-1 mt-2",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground",children:"Subject"}),h.jsx("p",{className:"text-sm font-medium",children:G.subject})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground",children:"Semester"}),h.jsx("p",{className:"text-sm font-medium",children:G.semester})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground",children:"Date & Time"}),h.jsxs("p",{className:"text-sm font-medium",children:[We.toLocaleDateString()," at"," ",We.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground",children:"Duration"}),h.jsxs("p",{className:"text-sm font-medium",children:[G.duration," min"]})]})]})]}),h.jsxs("div",{className:"flex gap-2 self-end md:self-auto w-full md:w-auto",children:[h.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>Q(G),children:[h.jsx(Uf,{className:"h-4 w-4 mr-1"}),"Edit"]}),h.jsx(ae,{variant:"outline",size:"sm",onClick:()=>are(G.id),children:"Monitor"}),h.jsxs(ae,{variant:"destructive",size:"sm",onClick:()=>oe(G),children:[h.jsx(r6,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})},G.id)})}):h.jsx(Me,{className:"p-6 text-center text-muted-foreground",children:h.jsx("p",{children:"No exams found for the selected filters."})})]})]})};return h.jsx("div",{className:"space-y-8 p-6",children:t==="students"?h.jsx(R6e,{students:e,searchQuery:c,setSearchQuery:u,isAddStudentDialogOpen:i,setIsAddStudentDialogOpen:o,newStudent:a,setNewStudent:l,SEMESTERS:De,handleAddStudent:Ue,handleEditStudent:Yr,handleDeleteStudent:ma,teacherDepartment:Z}):t==="exams"?lre():h.jsx(A6e,{totalExams:rre,totalAttended:sre,studentsPassed:ire,selectedSemester:d,selectedSubject:p,setSelectedSemester:f,setSelectedSubject:m,SEMESTERS:De,availableSubjects:Zc,subjectData:ore})})}function ut(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Xt(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Tr(t,e){const n=ut(t);return isNaN(e)?Xt(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function So(t,e){const n=ut(t);if(isNaN(e))return Xt(t,NaN);if(!e)return n;const r=n.getDate(),s=Xt(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const n2=6048e5,o5e=864e5,a5e=6e4,l5e=36e5,c5e=1e3;let u5e={};function Ld(){return u5e}function ti(t,e){var a,l,c,u;const n=Ld(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=ut(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function ll(t){return ti(t,{weekStartsOn:1})}function YX(t){const e=ut(t),n=e.getFullYear(),r=Xt(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=ll(r),i=Xt(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=ll(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Kh(t){const e=ut(t);return e.setHours(0,0,0,0),e}function Xh(t){const e=ut(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Wo(t,e){const n=Kh(t),r=Kh(e),s=+n-Xh(n),i=+r-Xh(r);return Math.round((s-i)/o5e)}function d5e(t){const e=YX(t),n=Xt(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ll(n)}function JI(t,e){const n=e*7;return Tr(t,n)}function f5e(t,e){return So(t,e*12)}function h5e(t){let e;return t.forEach(function(n){const r=ut(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function p5e(t){let e;return t.forEach(n=>{const r=ut(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Vr(t,e){const n=Kh(t),r=Kh(e);return+n==+r}function r2(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function m5e(t){if(!r2(t)&&typeof t!="number")return!1;const e=ut(t);return!isNaN(Number(e))}function Wy(t,e){const n=ut(t),r=ut(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function g5e(t,e,n){const r=ti(t,n),s=ti(e,n),i=+r-Xh(r),o=+s-Xh(s);return Math.round((i-o)/n2)}function s2(t){const e=ut(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Is(t){const e=ut(t);return e.setDate(1),e.setHours(0,0,0,0),e}function QX(t){const e=ut(t),n=Xt(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function i2(t,e){var a,l,c,u;const n=Ld(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=ut(t),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function JX(t){return i2(t,{weekStartsOn:1})}const y5e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},v5e=(t,e,n)=>{let r;const s=y5e[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hN(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const x5e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},b5e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},w5e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},S5e={date:hN({formats:x5e,defaultWidth:"full"}),time:hN({formats:b5e,defaultWidth:"full"}),dateTime:hN({formats:w5e,defaultWidth:"full"})},_5e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},C5e=(t,e,n,r)=>_5e[t];function km(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const N5e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},E5e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},T5e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},I5e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},k5e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},O5e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$5e=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},A5e={ordinalNumber:$5e,era:km({values:N5e,defaultWidth:"wide"}),quarter:km({values:E5e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:km({values:T5e,defaultWidth:"wide"}),day:km({values:I5e,defaultWidth:"wide"}),dayPeriod:km({values:k5e,defaultWidth:"wide",formattingValues:O5e,defaultFormattingWidth:"wide"})};function Om(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?R5e(a,d=>d.test(o)):P5e(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function P5e(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function R5e(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function D5e(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const j5e=/^(\d+)(th|st|nd|rd)?/i,M5e=/\d+/i,L5e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},F5e={any:[/^b/i,/^(a|c)/i]},B5e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},U5e={any:[/1/i,/2/i,/3/i,/4/i]},W5e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},z5e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},V5e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},H5e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},G5e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},q5e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},K5e={ordinalNumber:D5e({matchPattern:j5e,parsePattern:M5e,valueCallback:t=>parseInt(t,10)}),era:Om({matchPatterns:L5e,defaultMatchWidth:"wide",parsePatterns:F5e,defaultParseWidth:"any"}),quarter:Om({matchPatterns:B5e,defaultMatchWidth:"wide",parsePatterns:U5e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Om({matchPatterns:W5e,defaultMatchWidth:"wide",parsePatterns:z5e,defaultParseWidth:"any"}),day:Om({matchPatterns:V5e,defaultMatchWidth:"wide",parsePatterns:H5e,defaultParseWidth:"any"}),dayPeriod:Om({matchPatterns:G5e,defaultMatchWidth:"any",parsePatterns:q5e,defaultParseWidth:"any"})},o2={code:"en-US",formatDistance:v5e,formatLong:S5e,formatRelative:C5e,localize:A5e,match:K5e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function X5e(t){const e=ut(t);return Wo(e,QX(e))+1}function a2(t){const e=ut(t),n=+ll(e)-+d5e(e);return Math.round(n/n2)+1}function l2(t,e){var u,d,f,p;const n=ut(t),r=n.getFullYear(),s=Ld(),i=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Xt(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=ti(o,e),l=Xt(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=ti(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function Y5e(t,e){var a,l,c,u;const n=Ld(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=l2(t,e),i=Xt(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),ti(i,e)}function c2(t,e){const n=ut(t),r=+ti(n,e)-+Y5e(n,e);return Math.round(r/n2)+1}function Pt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Il={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Pt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Pt(n+1,2)},d(t,e){return Pt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Pt(t.getHours()%12||12,e.length)},H(t,e){return Pt(t.getHours(),e.length)},m(t,e){return Pt(t.getMinutes(),e.length)},s(t,e){return Pt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Pt(s,e.length)}},nf={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},q4={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Il.y(t,e)},Y:function(t,e,n,r){const s=l2(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Pt(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Pt(i,e.length)},R:function(t,e){const n=YX(t);return Pt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Pt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Pt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Pt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Il.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Pt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=c2(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Pt(s,e.length)},I:function(t,e,n){const r=a2(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Pt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Il.d(t,e)},D:function(t,e,n){const r=X5e(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Pt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Pt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Pt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Pt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=nf.noon:r===0?s=nf.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=nf.evening:r>=12?s=nf.afternoon:r>=4?s=nf.morning:s=nf.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Il.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Il.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Pt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Pt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Il.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Il.s(t,e)},S:function(t,e){return Il.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return X4(r);case"XXXX":case"XX":return hu(r);case"XXXXX":case"XXX":default:return hu(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return X4(r);case"xxxx":case"xx":return hu(r);case"xxxxx":case"xxx":default:return hu(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+K4(r,":");case"OOOO":default:return"GMT"+hu(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+K4(r,":");case"zzzz":default:return"GMT"+hu(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Pt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Pt(r,e.length)}};function K4(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Pt(i,2)}function X4(t,e){return t%60===0?(t>0?"-":"+")+Pt(Math.abs(t)/60,2):hu(t,e)}function hu(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Pt(Math.trunc(r/60),2),i=Pt(r%60,2);return n+s+e+i}const Y4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ZX=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Q5e=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Y4(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Y4(r,e)).replace("{{time}}",ZX(s,e))},ZI={p:ZX,P:Q5e},J5e=/^D+$/,Z5e=/^Y+$/,eHe=["D","DD","YY","YYYY"];function eY(t){return J5e.test(t)}function tY(t){return Z5e.test(t)}function ek(t,e,n){const r=tHe(t,e,n);if(console.warn(r),eHe.includes(t))throw new RangeError(r)}function tHe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const nHe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rHe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sHe=/^'([^]*?)'?$/,iHe=/''/g,oHe=/[a-zA-Z]/;function ni(t,e,n){var u,d,f,p,m,g,y,v;const r=Ld(),s=(n==null?void 0:n.locale)??r.locale??o2,i=(n==null?void 0:n.firstWeekContainsDate)??((d=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(y=r.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,a=ut(t);if(!m5e(a))throw new RangeError("Invalid time value");let l=e.match(rHe).map(x=>{const b=x[0];if(b==="p"||b==="P"){const w=ZI[b];return w(x,s.formatLong)}return x}).join("").match(nHe).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:aHe(x)};if(q4[b])return{isToken:!0,value:x};if(b.match(oHe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(x=>{if(!x.isToken)return x.value;const b=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&tY(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&eY(b))&&ek(b,e,String(t));const w=q4[b[0]];return w(a,b,s.localize,c)}).join("")}function aHe(t){const e=t.match(sHe);return e?e[1].replace(iHe,"'"):t}function lHe(t){const e=ut(t),n=e.getFullYear(),r=e.getMonth(),s=Xt(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function cHe(){return Object.assign({},Ld())}function uHe(t){let n=ut(t).getDay();return n===0&&(n=7),n}function dHe(t){return Math.trunc(+ut(t)/1e3)}function fHe(t){const e=ut(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function hHe(t,e){return g5e(fHe(t),Is(t),e)+1}function tk(t,e){const n=ut(t),r=ut(e);return n.getTime()>r.getTime()}function nY(t,e){const n=ut(t),r=ut(e);return+n<+r}function pHe(t,e){const n=e instanceof Date?Xt(e,0):new e(0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}const mHe=10;class rY{constructor(){Ce(this,"subPriority",0)}validate(e,n){return!0}}class gHe extends rY{constructor(e,n,r,s,i){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class yHe extends rY{constructor(){super(...arguments);Ce(this,"priority",mHe);Ce(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:Xt(n,pHe(n,Date))}}class kt{run(e,n,r,s){const i=this.parse(e,n,r,s);return i?{setter:new gHe(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,n,r){return!0}}class vHe extends kt{constructor(){super(...arguments);Ce(this,"priority",140);Ce(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const Rn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Fo={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Dn(t,e){return t&&{value:e(t.value),rest:t.rest}}function wn(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Bo(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*l5e+i*a5e+o*c5e),rest:e.slice(n[0].length)}}function sY(t){return wn(Rn.anyDigitsSigned,t)}function $n(t,e){switch(t){case 1:return wn(Rn.singleDigit,e);case 2:return wn(Rn.twoDigits,e);case 3:return wn(Rn.threeDigits,e);case 4:return wn(Rn.fourDigits,e);default:return wn(new RegExp("^\\d{1,"+t+"}"),e)}}function zw(t,e){switch(t){case 1:return wn(Rn.singleDigitSigned,e);case 2:return wn(Rn.twoDigitsSigned,e);case 3:return wn(Rn.threeDigitsSigned,e);case 4:return wn(Rn.fourDigitsSigned,e);default:return wn(new RegExp("^-?\\d{1,"+t+"}"),e)}}function u2(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function iY(t,e){const n=e>0,r=n?e:1-e;let s;if(r<=50)s=t||100;else{const i=r+50,o=Math.trunc(i/100)*100,a=t>=i%100;s=t+o-(a?100:0)}return n?s:1-s}function oY(t){return t%400===0||t%4===0&&t%100!==0}class xHe extends kt{constructor(){super(...arguments);Ce(this,"priority",130);Ce(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Dn($n(4,n),i);case"yo":return Dn(s.ordinalNumber(n,{unit:"year"}),i);default:return Dn($n(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const i=n.getFullYear();if(s.isTwoDigitYear){const a=iY(s.year,i);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class bHe extends kt{constructor(){super(...arguments);Ce(this,"priority",130);Ce(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Dn($n(4,n),i);case"Yo":return Dn(s.ordinalNumber(n,{unit:"year"}),i);default:return Dn($n(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,i){const o=l2(n,i);if(s.isTwoDigitYear){const l=iY(s.year,o);return n.setFullYear(l,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),ti(n,i)}const a=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(a,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),ti(n,i)}}class wHe extends kt{constructor(){super(...arguments);Ce(this,"priority",130);Ce(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return zw(r==="R"?4:r.length,n)}set(n,r,s){const i=Xt(n,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),ll(i)}}class SHe extends kt{constructor(){super(...arguments);Ce(this,"priority",130);Ce(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return zw(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class _He extends kt{constructor(){super(...arguments);Ce(this,"priority",120);Ce(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return $n(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class CHe extends kt{constructor(){super(...arguments);Ce(this,"priority",120);Ce(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return $n(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class NHe extends kt{constructor(){super(...arguments);Ce(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ce(this,"priority",110)}parse(n,r,s){const i=o=>o-1;switch(r){case"M":return Dn(wn(Rn.month,n),i);case"MM":return Dn($n(2,n),i);case"Mo":return Dn(s.ordinalNumber(n,{unit:"month"}),i);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class EHe extends kt{constructor(){super(...arguments);Ce(this,"priority",110);Ce(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const i=o=>o-1;switch(r){case"L":return Dn(wn(Rn.month,n),i);case"LL":return Dn($n(2,n),i);case"Lo":return Dn(s.ordinalNumber(n,{unit:"month"}),i);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function THe(t,e,n){const r=ut(t),s=c2(r,n)-e;return r.setDate(r.getDate()-s*7),r}class IHe extends kt{constructor(){super(...arguments);Ce(this,"priority",100);Ce(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return wn(Rn.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return $n(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,i){return ti(THe(n,s,i),i)}}function kHe(t,e){const n=ut(t),r=a2(n)-e;return n.setDate(n.getDate()-r*7),n}class OHe extends kt{constructor(){super(...arguments);Ce(this,"priority",100);Ce(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return wn(Rn.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return $n(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return ll(kHe(n,s))}}const $He=[31,28,31,30,31,30,31,31,30,31,30,31],AHe=[31,29,31,30,31,30,31,31,30,31,30,31];class PHe extends kt{constructor(){super(...arguments);Ce(this,"priority",90);Ce(this,"subPriority",1);Ce(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return wn(Rn.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return $n(r.length,n)}}validate(n,r){const s=n.getFullYear(),i=oY(s),o=n.getMonth();return i?r>=1&&r<=AHe[o]:r>=1&&r<=$He[o]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class RHe extends kt{constructor(){super(...arguments);Ce(this,"priority",90);Ce(this,"subpriority",1);Ce(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return wn(Rn.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return $n(r.length,n)}}validate(n,r){const s=n.getFullYear();return oY(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function d2(t,e,n){var d,f,p,m;const r=Ld(),s=(n==null?void 0:n.weekStartsOn)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,i=ut(t),o=i.getDay(),l=(e%7+7)%7,c=7-s,u=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Tr(i,u)}class DHe extends kt{constructor(){super(...arguments);Ce(this,"priority",90);Ce(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=d2(n,s,i),n.setHours(0,0,0,0),n}}class jHe extends kt{constructor(){super(...arguments);Ce(this,"priority",90);Ce(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Dn($n(r.length,n),o);case"eo":return Dn(s.ordinalNumber(n,{unit:"day"}),o);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=d2(n,s,i),n.setHours(0,0,0,0),n}}class MHe extends kt{constructor(){super(...arguments);Ce(this,"priority",90);Ce(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Dn($n(r.length,n),o);case"co":return Dn(s.ordinalNumber(n,{unit:"day"}),o);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=d2(n,s,i),n.setHours(0,0,0,0),n}}function LHe(t,e){const n=ut(t),r=uHe(n),s=e-r;return Tr(n,s)}class FHe extends kt{constructor(){super(...arguments);Ce(this,"priority",90);Ce(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const i=o=>o===0?7:o;switch(r){case"i":case"ii":return $n(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return Dn(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiii":return Dn(s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Dn(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Dn(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=LHe(n,s),n.setHours(0,0,0,0),n}}class BHe extends kt{constructor(){super(...arguments);Ce(this,"priority",80);Ce(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(u2(s),0,0,0),n}}class UHe extends kt{constructor(){super(...arguments);Ce(this,"priority",80);Ce(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(u2(s),0,0,0),n}}class WHe extends kt{constructor(){super(...arguments);Ce(this,"priority",80);Ce(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(u2(s),0,0,0),n}}class zHe extends kt{constructor(){super(...arguments);Ce(this,"priority",70);Ce(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return wn(Rn.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return $n(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const i=n.getHours()>=12;return i&&s<12?n.setHours(s+12,0,0,0):!i&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class VHe extends kt{constructor(){super(...arguments);Ce(this,"priority",70);Ce(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return wn(Rn.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return $n(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class HHe extends kt{constructor(){super(...arguments);Ce(this,"priority",70);Ce(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return wn(Rn.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return $n(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class GHe extends kt{constructor(){super(...arguments);Ce(this,"priority",70);Ce(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return wn(Rn.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return $n(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const i=s<=24?s%24:s;return n.setHours(i,0,0,0),n}}class qHe extends kt{constructor(){super(...arguments);Ce(this,"priority",60);Ce(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return wn(Rn.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return $n(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class KHe extends kt{constructor(){super(...arguments);Ce(this,"priority",50);Ce(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return wn(Rn.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return $n(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class XHe extends kt{constructor(){super(...arguments);Ce(this,"priority",30);Ce(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=i=>Math.trunc(i*Math.pow(10,-r.length+3));return Dn($n(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class YHe extends kt{constructor(){super(...arguments);Ce(this,"priority",10);Ce(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Bo(Fo.basicOptionalMinutes,n);case"XX":return Bo(Fo.basic,n);case"XXXX":return Bo(Fo.basicOptionalSeconds,n);case"XXXXX":return Bo(Fo.extendedOptionalSeconds,n);case"XXX":default:return Bo(Fo.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Xt(n,n.getTime()-Xh(n)-s)}}class QHe extends kt{constructor(){super(...arguments);Ce(this,"priority",10);Ce(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Bo(Fo.basicOptionalMinutes,n);case"xx":return Bo(Fo.basic,n);case"xxxx":return Bo(Fo.basicOptionalSeconds,n);case"xxxxx":return Bo(Fo.extendedOptionalSeconds,n);case"xxx":default:return Bo(Fo.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Xt(n,n.getTime()-Xh(n)-s)}}class JHe extends kt{constructor(){super(...arguments);Ce(this,"priority",40);Ce(this,"incompatibleTokens","*")}parse(n){return sY(n)}set(n,r,s){return[Xt(n,s*1e3),{timestampIsSet:!0}]}}class ZHe extends kt{constructor(){super(...arguments);Ce(this,"priority",20);Ce(this,"incompatibleTokens","*")}parse(n){return sY(n)}set(n,r,s){return[Xt(n,s),{timestampIsSet:!0}]}}const eGe={G:new vHe,y:new xHe,Y:new bHe,R:new wHe,u:new SHe,Q:new _He,q:new CHe,M:new NHe,L:new EHe,w:new IHe,I:new OHe,d:new PHe,D:new RHe,E:new DHe,e:new jHe,c:new MHe,i:new FHe,a:new BHe,b:new UHe,B:new WHe,h:new zHe,H:new VHe,K:new HHe,k:new GHe,m:new qHe,s:new KHe,S:new XHe,X:new YHe,x:new QHe,t:new JHe,T:new ZHe},tGe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nGe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rGe=/^'([^]*?)'?$/,sGe=/''/g,iGe=/\S/,oGe=/[a-zA-Z]/;function Q4(t,e,n,r){var g,y,v,x;const s=cHe(),i=s.locale??o2,o=s.firstWeekContainsDate??((y=(g=s.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,a=s.weekStartsOn??((x=(v=s.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,l={firstWeekContainsDate:o,weekStartsOn:a,locale:i},c=[new yHe],u=e.match(nGe).map(b=>{const w=b[0];if(w in ZI){const _=ZI[w];return _(b,i.formatLong)}return b}).join("").match(tGe),d=[];for(let b of u){tY(b)&&ek(b,e,t),eY(b)&&ek(b,e,t);const w=b[0],_=eGe[w];if(_){const{incompatibleTokens:C}=_;if(Array.isArray(C)){const N=d.find(I=>C.includes(I.token)||I.token===w);if(N)throw new RangeError(`The format string mustn't contain \`${N.fullToken}\` and \`${b}\` at the same time`)}else if(_.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);d.push({token:w,fullToken:b});const E=_.run(t,b,i.match,l);if(!E)return Xt(n,NaN);c.push(E.setter),t=E.rest}else{if(w.match(oGe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");if(b==="''"?b="'":w==="'"&&(b=aGe(b)),t.indexOf(b)===0)t=t.slice(b.length);else return Xt(n,NaN)}}if(t.length>0&&iGe.test(t))return Xt(n,NaN);const f=c.map(b=>b.priority).sort((b,w)=>w-b).filter((b,w,_)=>_.indexOf(b)===w).map(b=>c.filter(w=>w.priority===b).sort((w,_)=>_.subPriority-w.subPriority)).map(b=>b[0]);let p=ut(n);if(isNaN(p.getTime()))return Xt(n,NaN);const m={};for(const b of f){if(!b.validate(p,l))return Xt(n,NaN);const w=b.set(p,m,l);Array.isArray(w)?(p=w[0],Object.assign(m,w[1])):p=w}return Xt(n,p)}function aGe(t){return t.match(rGe)[1].replace(sGe,"'")}function f2(t,e){const n=ut(t),r=ut(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function lGe(t,e){const n=ut(t),r=ut(e);return n.getFullYear()===r.getFullYear()}function pN(t,e){return Tr(t,-e)}function mN(t,e){const n=ut(t),r=n.getFullYear(),s=n.getDate(),i=Xt(t,0);i.setFullYear(r,e,15),i.setHours(0,0,0,0);const o=lHe(i);return n.setMonth(e,Math.min(s,o)),n}function J4(t,e){const n=ut(t);return isNaN(+n)?Xt(t,NaN):(n.setFullYear(e),n)}var Ke=function(){return Ke=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ke.apply(this,arguments)};function cGe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function aY(t,e,n){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Vv(t){return t.mode==="multiple"}function Hv(t){return t.mode==="range"}function d_(t){return t.mode==="single"}var uGe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function dGe(t,e){return ni(t,"LLLL y",e)}function fGe(t,e){return ni(t,"d",e)}function hGe(t,e){return ni(t,"LLLL",e)}function pGe(t){return"".concat(t)}function mGe(t,e){return ni(t,"cccccc",e)}function gGe(t,e){return ni(t,"yyyy",e)}var yGe=Object.freeze({__proto__:null,formatCaption:dGe,formatDay:fGe,formatMonthCaption:hGe,formatWeekNumber:pGe,formatWeekdayName:mGe,formatYearCaption:gGe}),vGe=function(t,e,n){return ni(t,"do MMMM (EEEE)",n)},xGe=function(){return"Month: "},bGe=function(){return"Go to next month"},wGe=function(){return"Go to previous month"},SGe=function(t,e){return ni(t,"cccc",e)},_Ge=function(t){return"Week n. ".concat(t)},CGe=function(){return"Year: "},NGe=Object.freeze({__proto__:null,labelDay:vGe,labelMonthDropdown:xGe,labelNext:bGe,labelPrevious:wGe,labelWeekNumber:_Ge,labelWeekday:SGe,labelYearDropdown:CGe});function EGe(){var t="buttons",e=uGe,n=o2,r={},s={},i=1,o={},a=new Date;return{captionLayout:t,classNames:e,formatters:yGe,labels:NGe,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:o,today:a,mode:"default"}}function TGe(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,s=t.toMonth,i=t.fromDate,o=t.toDate;return r?i=Is(r):e&&(i=new Date(e,0,1)),s?o=s2(s):n&&(o=new Date(n,11,31)),{fromDate:i?Kh(i):void 0,toDate:o?Kh(o):void 0}}var lY=S.createContext(void 0);function IGe(t){var e,n=t.initialProps,r=EGe(),s=TGe(n),i=s.fromDate,o=s.toDate,a=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;a!=="buttons"&&(!i||!o)&&(a="buttons");var l;(d_(n)||Vv(n)||Hv(n))&&(l=n.onSelect);var c=Ke(Ke(Ke({},r),n),{captionLayout:a,classNames:Ke(Ke({},r.classNames),n.classNames),components:Ke({},n.components),formatters:Ke(Ke({},r.formatters),n.formatters),fromDate:i,labels:Ke(Ke({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Ke(Ke({},r.modifiers),n.modifiers),modifiersClassNames:Ke(Ke({},r.modifiersClassNames),n.modifiersClassNames),onSelect:l,styles:Ke(Ke({},r.styles),n.styles),toDate:o});return h.jsx(lY.Provider,{value:c,children:t.children})}function tn(){var t=S.useContext(lY);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function cY(t){var e=tn(),n=e.locale,r=e.classNames,s=e.styles,i=e.formatters.formatCaption;return h.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:n})})}function kGe(t){return h.jsx("svg",Ke({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:h.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function uY(t){var e,n,r=t.onChange,s=t.value,i=t.children,o=t.caption,a=t.className,l=t.style,c=tn(),u=(n=(e=c.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:kGe;return h.jsxs("div",{className:a,style:l,children:[h.jsx("span",{className:c.classNames.vhidden,children:t["aria-label"]}),h.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:s,onChange:r,children:i}),h.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[o,h.jsx(u,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function OGe(t){var e,n=tn(),r=n.fromDate,s=n.toDate,i=n.styles,o=n.locale,a=n.formatters.formatMonthCaption,l=n.classNames,c=n.components,u=n.labels.labelMonthDropdown;if(!r)return h.jsx(h.Fragment,{});if(!s)return h.jsx(h.Fragment,{});var d=[];if(lGe(r,s))for(var f=Is(r),p=r.getMonth();p<=s.getMonth();p++)d.push(mN(f,p));else for(var f=Is(new Date),p=0;p<=11;p++)d.push(mN(f,p));var m=function(y){var v=Number(y.target.value),x=mN(Is(t.displayMonth),v);t.onChange(x)},g=(e=c==null?void 0:c.Dropdown)!==null&&e!==void 0?e:uY;return h.jsx(g,{name:"months","aria-label":u(),className:l.dropdown_month,style:i.dropdown_month,onChange:m,value:t.displayMonth.getMonth(),caption:a(t.displayMonth,{locale:o}),children:d.map(function(y){return h.jsx("option",{value:y.getMonth(),children:a(y,{locale:o})},y.getMonth())})})}function $Ge(t){var e,n=t.displayMonth,r=tn(),s=r.fromDate,i=r.toDate,o=r.locale,a=r.styles,l=r.classNames,c=r.components,u=r.formatters.formatYearCaption,d=r.labels.labelYearDropdown,f=[];if(!s)return h.jsx(h.Fragment,{});if(!i)return h.jsx(h.Fragment,{});for(var p=s.getFullYear(),m=i.getFullYear(),g=p;g<=m;g++)f.push(J4(QX(new Date),g));var y=function(x){var b=J4(Is(n),Number(x.target.value));t.onChange(b)},v=(e=c==null?void 0:c.Dropdown)!==null&&e!==void 0?e:uY;return h.jsx(v,{name:"years","aria-label":d(),className:l.dropdown_year,style:a.dropdown_year,onChange:y,value:n.getFullYear(),caption:u(n,{locale:o}),children:f.map(function(x){return h.jsx("option",{value:x.getFullYear(),children:u(x,{locale:o})},x.getFullYear())})})}function AGe(t,e){var n=S.useState(t),r=n[0],s=n[1],i=e===void 0?r:e;return[i,s]}function PGe(t){var e=t.month,n=t.defaultMonth,r=t.today,s=e||n||r||new Date,i=t.toDate,o=t.fromDate,a=t.numberOfMonths,l=a===void 0?1:a;if(i&&Wy(i,s)<0){var c=-1*(l-1);s=So(i,c)}return o&&Wy(s,o)<0&&(s=o),Is(s)}function RGe(){var t=tn(),e=PGe(t),n=AGe(e,t.month),r=n[0],s=n[1],i=function(o){var a;if(!t.disableNavigation){var l=Is(o);s(l),(a=t.onMonthChange)===null||a===void 0||a.call(t,l)}};return[r,i]}function DGe(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,s=Is(t),i=Is(So(s,r)),o=Wy(i,s),a=[],l=0;l<o;l++){var c=So(s,l);a.push(c)}return n&&(a=a.reverse()),a}function jGe(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=r?i:1,a=Is(t);if(!n)return So(a,o);var l=Wy(n,t);if(!(l<i))return So(a,o)}}function MGe(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=r?i:1,a=Is(t);if(!n)return So(a,-o);var l=Wy(a,n);if(!(l<=0))return So(a,-o)}}var dY=S.createContext(void 0);function LGe(t){var e=tn(),n=RGe(),r=n[0],s=n[1],i=DGe(r,e),o=jGe(r,e),a=MGe(r,e),l=function(d){return i.some(function(f){return f2(d,f)})},c=function(d,f){l(d)||(f&&nY(d,f)?s(So(d,1+e.numberOfMonths*-1)):s(d))},u={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:c,previousMonth:a,nextMonth:o,isDateDisplayed:l};return h.jsx(dY.Provider,{value:u,children:t.children})}function Gv(){var t=S.useContext(dY);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Z4(t){var e,n=tn(),r=n.classNames,s=n.styles,i=n.components,o=Gv().goToMonth,a=function(u){o(So(u,t.displayIndex?-t.displayIndex:0))},l=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:cY,c=h.jsx(l,{id:t.id,displayMonth:t.displayMonth});return h.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[h.jsx("div",{className:r.vhidden,children:c}),h.jsx(OGe,{onChange:a,displayMonth:t.displayMonth}),h.jsx($Ge,{onChange:a,displayMonth:t.displayMonth})]})}function FGe(t){return h.jsx("svg",Ke({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:h.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function BGe(t){return h.jsx("svg",Ke({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:h.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Vw=S.forwardRef(function(t,e){var n=tn(),r=n.classNames,s=n.styles,i=[r.button_reset,r.button];t.className&&i.push(t.className);var o=i.join(" "),a=Ke(Ke({},s.button_reset),s.button);return t.style&&Object.assign(a,t.style),h.jsx("button",Ke({},t,{ref:e,type:"button",className:o,style:a}))});function UGe(t){var e,n,r=tn(),s=r.dir,i=r.locale,o=r.classNames,a=r.styles,l=r.labels,c=l.labelPrevious,u=l.labelNext,d=r.components;if(!t.nextMonth&&!t.previousMonth)return h.jsx(h.Fragment,{});var f=c(t.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),m=u(t.nextMonth,{locale:i}),g=[o.nav_button,o.nav_button_next].join(" "),y=(e=d==null?void 0:d.IconRight)!==null&&e!==void 0?e:BGe,v=(n=d==null?void 0:d.IconLeft)!==null&&n!==void 0?n:FGe;return h.jsxs("div",{className:o.nav,style:a.nav,children:[!t.hidePrevious&&h.jsx(Vw,{name:"previous-month","aria-label":f,className:p,style:a.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?h.jsx(y,{className:o.nav_icon,style:a.nav_icon}):h.jsx(v,{className:o.nav_icon,style:a.nav_icon})}),!t.hideNext&&h.jsx(Vw,{name:"next-month","aria-label":m,className:g,style:a.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?h.jsx(v,{className:o.nav_icon,style:a.nav_icon}):h.jsx(y,{className:o.nav_icon,style:a.nav_icon})})]})}function eB(t){var e=tn().numberOfMonths,n=Gv(),r=n.previousMonth,s=n.nextMonth,i=n.goToMonth,o=n.displayMonths,a=o.findIndex(function(m){return f2(t.displayMonth,m)}),l=a===0,c=a===o.length-1,u=e>1&&(l||!c),d=e>1&&(c||!l),f=function(){r&&i(r)},p=function(){s&&i(s)};return h.jsx(UGe,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:d,nextMonth:s,previousMonth:r,onPreviousClick:f,onNextClick:p})}function WGe(t){var e,n=tn(),r=n.classNames,s=n.disableNavigation,i=n.styles,o=n.captionLayout,a=n.components,l=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:cY,c;return s?c=h.jsx(l,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?c=h.jsx(Z4,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?c=h.jsxs(h.Fragment,{children:[h.jsx(Z4,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),h.jsx(eB,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):c=h.jsxs(h.Fragment,{children:[h.jsx(l,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),h.jsx(eB,{displayMonth:t.displayMonth,id:t.id})]}),h.jsx("div",{className:r.caption,style:i.caption,children:c})}function zGe(t){var e=tn(),n=e.footer,r=e.styles,s=e.classNames.tfoot;return n?h.jsx("tfoot",{className:s,style:r.tfoot,children:h.jsx("tr",{children:h.jsx("td",{colSpan:8,children:n})})}):h.jsx(h.Fragment,{})}function VGe(t,e,n){for(var r=n?ll(new Date):ti(new Date,{locale:t,weekStartsOn:e}),s=[],i=0;i<7;i++){var o=Tr(r,i);s.push(o)}return s}function HGe(){var t=tn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,s=t.locale,i=t.weekStartsOn,o=t.ISOWeek,a=t.formatters.formatWeekdayName,l=t.labels.labelWeekday,c=VGe(s,i,o);return h.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&h.jsx("td",{style:n.head_cell,className:e.head_cell}),c.map(function(u,d){return h.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":l(u,{locale:s}),children:a(u,{locale:s})},d)})]})}function GGe(){var t,e=tn(),n=e.classNames,r=e.styles,s=e.components,i=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:HGe;return h.jsx("thead",{style:r.head,className:n.head,children:h.jsx(i,{})})}function qGe(t){var e=tn(),n=e.locale,r=e.formatters.formatDay;return h.jsx(h.Fragment,{children:r(t.date,{locale:n})})}var h2=S.createContext(void 0);function KGe(t){if(!Vv(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return h.jsx(h2.Provider,{value:e,children:t.children})}return h.jsx(XGe,{initialProps:t.initialProps,children:t.children})}function XGe(t){var e=t.initialProps,n=t.children,r=e.selected,s=e.min,i=e.max,o=function(c,u,d){var f,p;(f=e.onDayClick)===null||f===void 0||f.call(e,c,u,d);var m=!!(u.selected&&s&&(r==null?void 0:r.length)===s);if(!m){var g=!!(!u.selected&&i&&(r==null?void 0:r.length)===i);if(!g){var y=r?aY([],r):[];if(u.selected){var v=y.findIndex(function(x){return Vr(c,x)});y.splice(v,1)}else y.push(c);(p=e.onSelect)===null||p===void 0||p.call(e,y,c,u,d)}}},a={disabled:[]};r&&a.disabled.push(function(c){var u=i&&r.length>i-1,d=r.some(function(f){return Vr(f,c)});return!!(u&&!d)});var l={selected:r,onDayClick:o,modifiers:a};return h.jsx(h2.Provider,{value:l,children:n})}function p2(){var t=S.useContext(h2);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function YGe(t,e){var n=e||{},r=n.from,s=n.to;return r&&s?Vr(s,t)&&Vr(r,t)?void 0:Vr(s,t)?{from:s,to:void 0}:Vr(r,t)?void 0:tk(r,t)?{from:t,to:s}:{from:r,to:t}:s?tk(t,s)?{from:s,to:t}:{from:t,to:s}:r?nY(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var m2=S.createContext(void 0);function QGe(t){if(!Hv(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return h.jsx(m2.Provider,{value:e,children:t.children})}return h.jsx(JGe,{initialProps:t.initialProps,children:t.children})}function JGe(t){var e=t.initialProps,n=t.children,r=e.selected,s=r||{},i=s.from,o=s.to,a=e.min,l=e.max,c=function(p,m,g){var y,v;(y=e.onDayClick)===null||y===void 0||y.call(e,p,m,g);var x=YGe(p,r);(v=e.onSelect)===null||v===void 0||v.call(e,x,p,m,g)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],o?(u.range_end=[o],Vr(i,o)||(u.range_middle=[{after:i,before:o}])):u.range_end=[i]):o&&(u.range_start=[o],u.range_end=[o]),a&&(i&&!o&&u.disabled.push({after:pN(i,a-1),before:Tr(i,a-1)}),i&&o&&u.disabled.push({after:i,before:Tr(i,a-1)}),!i&&o&&u.disabled.push({after:pN(o,a-1),before:Tr(o,a-1)})),l){if(i&&!o&&(u.disabled.push({before:Tr(i,-l+1)}),u.disabled.push({after:Tr(i,l-1)})),i&&o){var d=Wo(o,i)+1,f=l-d;u.disabled.push({before:pN(i,f)}),u.disabled.push({after:Tr(o,f)})}!i&&o&&(u.disabled.push({before:Tr(o,-l+1)}),u.disabled.push({after:Tr(o,l-1)}))}return h.jsx(m2.Provider,{value:{selected:r,onDayClick:c,modifiers:u},children:n})}function g2(){var t=S.useContext(m2);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function kb(t){return Array.isArray(t)?aY([],t):t!==void 0?[t]:[]}function ZGe(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],s=n[1];e[r]=kb(s)}),e}var _o;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(_o||(_o={}));var e8e=_o.Selected,ba=_o.Disabled,t8e=_o.Hidden,n8e=_o.Today,gN=_o.RangeEnd,yN=_o.RangeMiddle,vN=_o.RangeStart,r8e=_o.Outside;function s8e(t,e,n){var r,s=(r={},r[e8e]=kb(t.selected),r[ba]=kb(t.disabled),r[t8e]=kb(t.hidden),r[n8e]=[t.today],r[gN]=[],r[yN]=[],r[vN]=[],r[r8e]=[],r);return t.fromDate&&s[ba].push({before:t.fromDate}),t.toDate&&s[ba].push({after:t.toDate}),Vv(t)?s[ba]=s[ba].concat(e.modifiers[ba]):Hv(t)&&(s[ba]=s[ba].concat(n.modifiers[ba]),s[vN]=n.modifiers[vN],s[yN]=n.modifiers[yN],s[gN]=n.modifiers[gN]),s}var fY=S.createContext(void 0);function i8e(t){var e=tn(),n=p2(),r=g2(),s=s8e(e,n,r),i=ZGe(e.modifiers),o=Ke(Ke({},s),i);return h.jsx(fY.Provider,{value:o,children:t.children})}function hY(){var t=S.useContext(fY);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function o8e(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function a8e(t){return!!(t&&typeof t=="object"&&"from"in t)}function l8e(t){return!!(t&&typeof t=="object"&&"after"in t)}function c8e(t){return!!(t&&typeof t=="object"&&"before"in t)}function u8e(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function d8e(t,e){var n,r=e.from,s=e.to;if(r&&s){var i=Wo(s,r)<0;i&&(n=[s,r],r=n[0],s=n[1]);var o=Wo(t,r)>=0&&Wo(s,t)>=0;return o}return s?Vr(s,t):r?Vr(r,t):!1}function f8e(t){return r2(t)}function h8e(t){return Array.isArray(t)&&t.every(r2)}function p8e(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(f8e(n))return Vr(t,n);if(h8e(n))return n.includes(t);if(a8e(n))return d8e(t,n);if(u8e(n))return n.dayOfWeek.includes(t.getDay());if(o8e(n)){var r=Wo(n.before,t),s=Wo(n.after,t),i=r>0,o=s<0,a=tk(n.before,n.after);return a?o&&i:i||o}return l8e(n)?Wo(t,n.after)>0:c8e(n)?Wo(n.before,t)>0:typeof n=="function"?n(t):!1})}function y2(t,e,n){var r=Object.keys(e).reduce(function(i,o){var a=e[o];return p8e(t,a)&&i.push(o),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),n&&!f2(t,n)&&(s.outside=!0),s}function m8e(t,e){for(var n=Is(t[0]),r=s2(t[t.length-1]),s,i,o=n;o<=r;){var a=y2(o,e),l=!a.disabled&&!a.hidden;if(!l){o=Tr(o,1);continue}if(a.selected)return o;a.today&&!i&&(i=o),s||(s=o),o=Tr(o,1)}return i||s}var g8e=365;function pY(t,e){var n=e.moveBy,r=e.direction,s=e.context,i=e.modifiers,o=e.retry,a=o===void 0?{count:0,lastFocused:t}:o,l=s.weekStartsOn,c=s.fromDate,u=s.toDate,d=s.locale,f={day:Tr,week:JI,month:So,year:f5e,startOfWeek:function(y){return s.ISOWeek?ll(y):ti(y,{locale:d,weekStartsOn:l})},endOfWeek:function(y){return s.ISOWeek?JX(y):i2(y,{locale:d,weekStartsOn:l})}},p=f[n](t,r==="after"?1:-1);r==="before"&&c?p=h5e([c,p]):r==="after"&&u&&(p=p5e([u,p]));var m=!0;if(i){var g=y2(p,i);m=!g.disabled&&!g.hidden}return m?p:a.count>g8e?a.lastFocused:pY(p,{moveBy:n,direction:r,context:s,modifiers:i,retry:Ke(Ke({},a),{count:a.count+1})})}var mY=S.createContext(void 0);function y8e(t){var e=Gv(),n=hY(),r=S.useState(),s=r[0],i=r[1],o=S.useState(),a=o[0],l=o[1],c=m8e(e.displayMonths,n),u=s??(a&&e.isDateDisplayed(a))?a:c,d=function(){l(s),i(void 0)},f=function(y){i(y)},p=tn(),m=function(y,v){if(s){var x=pY(s,{moveBy:y,direction:v,context:p,modifiers:n});Vr(s,x)||(e.goToDate(x,s),f(x))}},g={focusedDay:s,focusTarget:u,blur:d,focus:f,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return h.jsx(mY.Provider,{value:g,children:t.children})}function v2(){var t=S.useContext(mY);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function v8e(t,e){var n=hY(),r=y2(t,n,e);return r}var x2=S.createContext(void 0);function x8e(t){if(!d_(t.initialProps)){var e={selected:void 0};return h.jsx(x2.Provider,{value:e,children:t.children})}return h.jsx(b8e,{initialProps:t.initialProps,children:t.children})}function b8e(t){var e=t.initialProps,n=t.children,r=function(i,o,a){var l,c,u;if((l=e.onDayClick)===null||l===void 0||l.call(e,i,o,a),o.selected&&!e.required){(c=e.onSelect)===null||c===void 0||c.call(e,void 0,i,o,a);return}(u=e.onSelect)===null||u===void 0||u.call(e,i,i,o,a)},s={selected:e.selected,onDayClick:r};return h.jsx(x2.Provider,{value:s,children:n})}function gY(){var t=S.useContext(x2);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function w8e(t,e){var n=tn(),r=gY(),s=p2(),i=g2(),o=v2(),a=o.focusDayAfter,l=o.focusDayBefore,c=o.focusWeekAfter,u=o.focusWeekBefore,d=o.blur,f=o.focus,p=o.focusMonthBefore,m=o.focusMonthAfter,g=o.focusYearBefore,y=o.focusYearAfter,v=o.focusStartOfWeek,x=o.focusEndOfWeek,b=function(L){var P,W,q,H;d_(n)?(P=r.onDayClick)===null||P===void 0||P.call(r,t,e,L):Vv(n)?(W=s.onDayClick)===null||W===void 0||W.call(s,t,e,L):Hv(n)?(q=i.onDayClick)===null||q===void 0||q.call(i,t,e,L):(H=n.onDayClick)===null||H===void 0||H.call(n,t,e,L)},w=function(L){var P;f(t),(P=n.onDayFocus)===null||P===void 0||P.call(n,t,e,L)},_=function(L){var P;d(),(P=n.onDayBlur)===null||P===void 0||P.call(n,t,e,L)},C=function(L){var P;(P=n.onDayMouseEnter)===null||P===void 0||P.call(n,t,e,L)},E=function(L){var P;(P=n.onDayMouseLeave)===null||P===void 0||P.call(n,t,e,L)},N=function(L){var P;(P=n.onDayPointerEnter)===null||P===void 0||P.call(n,t,e,L)},I=function(L){var P;(P=n.onDayPointerLeave)===null||P===void 0||P.call(n,t,e,L)},$=function(L){var P;(P=n.onDayTouchCancel)===null||P===void 0||P.call(n,t,e,L)},O=function(L){var P;(P=n.onDayTouchEnd)===null||P===void 0||P.call(n,t,e,L)},k=function(L){var P;(P=n.onDayTouchMove)===null||P===void 0||P.call(n,t,e,L)},R=function(L){var P;(P=n.onDayTouchStart)===null||P===void 0||P.call(n,t,e,L)},M=function(L){var P;(P=n.onDayKeyUp)===null||P===void 0||P.call(n,t,e,L)},B=function(L){var P;switch(L.key){case"ArrowLeft":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?a():l();break;case"ArrowRight":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?l():a();break;case"ArrowDown":L.preventDefault(),L.stopPropagation(),c();break;case"ArrowUp":L.preventDefault(),L.stopPropagation(),u();break;case"PageUp":L.preventDefault(),L.stopPropagation(),L.shiftKey?g():p();break;case"PageDown":L.preventDefault(),L.stopPropagation(),L.shiftKey?y():m();break;case"Home":L.preventDefault(),L.stopPropagation(),v();break;case"End":L.preventDefault(),L.stopPropagation(),x();break}(P=n.onDayKeyDown)===null||P===void 0||P.call(n,t,e,L)},F={onClick:b,onFocus:w,onBlur:_,onKeyDown:B,onKeyUp:M,onMouseEnter:C,onMouseLeave:E,onPointerEnter:N,onPointerLeave:I,onTouchCancel:$,onTouchEnd:O,onTouchMove:k,onTouchStart:R};return F}function S8e(){var t=tn(),e=gY(),n=p2(),r=g2(),s=d_(t)?e.selected:Vv(t)?n.selected:Hv(t)?r.selected:void 0;return s}function _8e(t){return Object.values(_o).includes(t)}function C8e(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var s=t.modifiersClassNames[r];if(s)n.push(s);else if(_8e(r)){var i=t.classNames["day_".concat(r)];i&&n.push(i)}}),n}function N8e(t,e){var n=Ke({},t.styles.day);return Object.keys(e).forEach(function(r){var s;n=Ke(Ke({},n),(s=t.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function E8e(t,e,n){var r,s,i,o=tn(),a=v2(),l=v8e(t,e),c=w8e(t,l),u=S8e(),d=!!(o.onDayClick||o.mode!=="default");S.useEffect(function(){var C;l.outside||a.focusedDay&&d&&Vr(a.focusedDay,t)&&((C=n.current)===null||C===void 0||C.focus())},[a.focusedDay,t,n,d,l.outside]);var f=C8e(o,l).join(" "),p=N8e(o,l),m=!!(l.outside&&!o.showOutsideDays||l.hidden),g=(i=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:qGe,y=h.jsx(g,{date:t,displayMonth:e,activeModifiers:l}),v={style:p,className:f,children:y,role:"gridcell"},x=a.focusTarget&&Vr(a.focusTarget,t)&&!l.outside,b=a.focusedDay&&Vr(a.focusedDay,t),w=Ke(Ke(Ke({},v),(r={disabled:l.disabled,role:"gridcell"},r["aria-selected"]=l.selected,r.tabIndex=b||x?0:-1,r)),c),_={isButton:d,isHidden:m,activeModifiers:l,selectedDays:u,buttonProps:w,divProps:v};return _}function T8e(t){var e=S.useRef(null),n=E8e(t.date,t.displayMonth,e);return n.isHidden?h.jsx("div",{role:"gridcell"}):n.isButton?h.jsx(Vw,Ke({name:"day",ref:e},n.buttonProps)):h.jsx("div",Ke({},n.divProps))}function I8e(t){var e=t.number,n=t.dates,r=tn(),s=r.onWeekNumberClick,i=r.styles,o=r.classNames,a=r.locale,l=r.labels.labelWeekNumber,c=r.formatters.formatWeekNumber,u=c(Number(e),{locale:a});if(!s)return h.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:u});var d=l(Number(e),{locale:a}),f=function(p){s(e,n,p)};return h.jsx(Vw,{name:"week-number","aria-label":d,className:o.weeknumber,style:i.weeknumber,onClick:f,children:u})}function k8e(t){var e,n,r=tn(),s=r.styles,i=r.classNames,o=r.showWeekNumber,a=r.components,l=(e=a==null?void 0:a.Day)!==null&&e!==void 0?e:T8e,c=(n=a==null?void 0:a.WeekNumber)!==null&&n!==void 0?n:I8e,u;return o&&(u=h.jsx("td",{className:i.cell,style:s.cell,children:h.jsx(c,{number:t.weekNumber,dates:t.dates})})),h.jsxs("tr",{className:i.row,style:s.row,children:[u,t.dates.map(function(d){return h.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:h.jsx(l,{displayMonth:t.displayMonth,date:d})},dHe(d))})]})}function tB(t,e,n){for(var r=n!=null&&n.ISOWeek?JX(e):i2(e,n),s=n!=null&&n.ISOWeek?ll(t):ti(t,n),i=Wo(r,s),o=[],a=0;a<=i;a++)o.push(Tr(s,a));var l=o.reduce(function(c,u){var d=n!=null&&n.ISOWeek?a2(u):c2(u,n),f=c.find(function(p){return p.weekNumber===d});return f?(f.dates.push(u),c):(c.push({weekNumber:d,dates:[u]}),c)},[]);return l}function O8e(t,e){var n=tB(Is(t),s2(t),e);if(e!=null&&e.useFixedWeeks){var r=hHe(t,e);if(r<6){var s=n[n.length-1],i=s.dates[s.dates.length-1],o=JI(i,6-r),a=tB(JI(i,1),o,e);n.push.apply(n,a)}}return n}function $8e(t){var e,n,r,s=tn(),i=s.locale,o=s.classNames,a=s.styles,l=s.hideHead,c=s.fixedWeeks,u=s.components,d=s.weekStartsOn,f=s.firstWeekContainsDate,p=s.ISOWeek,m=O8e(t.displayMonth,{useFixedWeeks:!!c,ISOWeek:p,locale:i,weekStartsOn:d,firstWeekContainsDate:f}),g=(e=u==null?void 0:u.Head)!==null&&e!==void 0?e:GGe,y=(n=u==null?void 0:u.Row)!==null&&n!==void 0?n:k8e,v=(r=u==null?void 0:u.Footer)!==null&&r!==void 0?r:zGe;return h.jsxs("table",{id:t.id,className:o.table,style:a.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!l&&h.jsx(g,{}),h.jsx("tbody",{className:o.tbody,style:a.tbody,children:m.map(function(x){return h.jsx(y,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),h.jsx(v,{displayMonth:t.displayMonth})]})}function A8e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var P8e=A8e()?S.useLayoutEffect:S.useEffect,xN=!1,R8e=0;function nB(){return"react-day-picker-".concat(++R8e)}function D8e(t){var e,n=t??(xN?nB():null),r=S.useState(n),s=r[0],i=r[1];return P8e(function(){s===null&&i(nB())},[]),S.useEffect(function(){xN===!1&&(xN=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function j8e(t){var e,n,r=tn(),s=r.dir,i=r.classNames,o=r.styles,a=r.components,l=Gv().displayMonths,c=D8e(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),u=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,d=[i.month],f=o.month,p=t.displayIndex===0,m=t.displayIndex===l.length-1,g=!p&&!m;s==="rtl"&&(e=[p,m],m=e[0],p=e[1]),p&&(d.push(i.caption_start),f=Ke(Ke({},f),o.caption_start)),m&&(d.push(i.caption_end),f=Ke(Ke({},f),o.caption_end)),g&&(d.push(i.caption_between),f=Ke(Ke({},f),o.caption_between));var y=(n=a==null?void 0:a.Caption)!==null&&n!==void 0?n:WGe;return h.jsxs("div",{className:d.join(" "),style:f,children:[h.jsx(y,{id:c,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),h.jsx($8e,{id:u,"aria-labelledby":c,displayMonth:t.displayMonth})]},t.displayIndex)}function M8e(t){var e=tn(),n=e.classNames,r=e.styles;return h.jsx("div",{className:n.months,style:r.months,children:t.children})}function L8e(t){var e,n,r=t.initialProps,s=tn(),i=v2(),o=Gv(),a=S.useState(!1),l=a[0],c=a[1];S.useEffect(function(){s.initialFocus&&i.focusTarget&&(l||(i.focus(i.focusTarget),c(!0)))},[s.initialFocus,l,i.focus,i.focusTarget,i]);var u=[s.classNames.root,s.className];s.numberOfMonths>1&&u.push(s.classNames.multiple_months),s.showWeekNumber&&u.push(s.classNames.with_weeknumber);var d=Ke(Ke({},s.styles.root),s.style),f=Object.keys(r).filter(function(m){return m.startsWith("data-")}).reduce(function(m,g){var y;return Ke(Ke({},m),(y={},y[g]=r[g],y))},{}),p=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:M8e;return h.jsx("div",Ke({className:u.join(" "),style:d,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},f,{children:h.jsx(p,{children:o.displayMonths.map(function(m,g){return h.jsx(j8e,{displayIndex:g,displayMonth:m},g)})})}))}function F8e(t){var e=t.children,n=cGe(t,["children"]);return h.jsx(IGe,{initialProps:n,children:h.jsx(LGe,{children:h.jsx(x8e,{initialProps:n,children:h.jsx(KGe,{initialProps:n,children:h.jsx(QGe,{initialProps:n,children:h.jsx(i8e,{children:h.jsx(y8e,{children:e})})})})})})})}function B8e(t){return h.jsx(F8e,Ke({},t,{children:h.jsx(L8e,{initialProps:t})}))}function yY({className:t,classNames:e,showOutsideDays:n=!0,...r}){return h.jsx(B8e,{showOutsideDays:n,className:ne("p-3 pointer-events-auto",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ne(Vg({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ne(Vg({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>h.jsx(mue,{className:"h-4 w-4"}),IconRight:({...s})=>h.jsx(gue,{className:"h-4 w-4"})},...r})}yY.displayName="Calendar";function U8e(){const[t,e]=S.useState(new Date),[n,r]=S.useState([]),[s,i]=S.useState([]);ii(),S.useEffect(()=>{const a=localStorage.getItem("examUser");if(!a)return;const l=JSON.parse(a),c=$e(Ae,"exams"),u=Ua(c,d=>{if(d.exists()){const f=[],p=[];d.forEach(m=>{const g=m.val();if(g.createdBy===l.id||g.department===l.department){const y={id:m.key,...g};if(f.push(y),y.date)try{const v=Q4(y.date,"yyyy-MM-dd",new Date);p.push(v)}catch{console.error("Invalid date format:",y.date)}}}),r(f),i(p)}});return()=>u()},[]);const o=n.filter(a=>{if(!t||!a.date)return!1;try{const l=Q4(a.date,"yyyy-MM-dd",new Date);return Vr(l,t)}catch{return!1}});return h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Schedule"}),h.jsx("p",{className:"text-muted-foreground",children:"View and manage your exam schedule"})]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs(Me,{className:"md:col-span-1",children:[h.jsx(it,{children:h.jsx(ct,{children:"Calendar"})}),h.jsxs(ot,{children:[h.jsx(yY,{mode:"single",selected:t,onSelect:e,modifiersClassNames:{today:"bg-accent text-accent-foreground"},modifiers:{examDay:s},modifiersStyles:{examDay:{fontWeight:"bold"}},className:"rounded-md border",components:{Day:({date:a,className:l,...c})=>{const u=s.some(d=>d&&Vr(d,a));return h.jsx("div",{...c,className:ne(l,u&&"bg-red-100 text-red-800 hover:bg-red-200 hover:text-red-900 font-semibold"),children:ni(a,"d")})}}}),h.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[h.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),h.jsx("span",{children:"Exam Day"})]})]})]}),h.jsxs(Me,{className:"md:col-span-2",children:[h.jsx(it,{children:h.jsx(ct,{children:t?`Exams for ${ni(t,"MMMM d, yyyy")}`:"Select a date to view exams"})}),h.jsx(ot,{children:o.length>0?h.jsx("div",{className:"space-y-4",children:o.map(a=>h.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:h.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-2",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-lg",children:a.title}),h.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[h.jsx(gr,{variant:"secondary",children:a.subject}),h.jsx(gr,{variant:"outline",children:a.semester}),h.jsx(gr,{variant:a.status==="active"?"default":a.status==="completed"?"secondary":"outline",children:a.status})]}),h.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Time: ",a.time]})]}),h.jsx(ae,{variant:"outline",size:"sm",className:"mt-2 md:mt-0",children:"View Details"})]})},a.id))}):h.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No exams scheduled for this date"})})]})]})]})}function W8e(){const[t,e]=S.useState([]),[n,r]=S.useState(!1),[s,i]=S.useState(!1),[o,a]=S.useState(null),[l,c]=S.useState([]),[u,d]=S.useState({title:"",description:"",semester:"",category:"academic"}),[f,p]=S.useState(""),[m,g]=S.useState("");S.useEffect(()=>{const N=localStorage.getItem("examUser");if(!N)return;const I=JSON.parse(N);(async()=>{try{const R=$e(Ae,`users/${I.id}`),M=await Ct(R);if(M.exists()){const B=M.val(),F=B.department||"",L=B.name||I.name||"";p(F),g(L),F&&await y(F)}}catch(R){console.error("Error fetching teacher data:",R)}})();const O=$e(Ae,"notices"),k=Ua(O,R=>{if(R.exists()){const M=[];R.forEach(B=>{const F=B.val();(F.department===f||F.postedBy===I.id)&&M.push({id:B.key||"",...F})}),M.sort((B,F)=>new Date(F.createdAt).getTime()-new Date(B.createdAt).getTime()),e(M)}else e([])});return()=>k()},[]);const y=async N=>{try{console.log("Fetching semesters for department:",N);const I=await XX(N);if(I&&I.semesters&&I.semesters.length>0)console.log("Semesters fetched from academic service:",I.semesters),c(I.semesters),u.semester||d($=>({...$,semester:I.semesters[0]}));else{console.log("No semesters found in academic service, using fallback");const $=["1st Semester","2nd Semester","3rd Semester","4th Semester"];c($),d(O=>({...O,semester:$[0]}))}}catch(I){console.error("Error in fetchSemestersFromAcademicService:",I);const $=["1st Semester","2nd Semester","3rd Semester","4th Semester"];c($),d(O=>({...O,semester:$[0]}))}};S.useEffect(()=>{f&&y(f)},[f]);const v=()=>{if(!u.title||!u.description||!u.semester){Er.error("Missing information",{description:"Please fill in all required fields"});return}const N=localStorage.getItem("examUser");if(!N){Er.error("Authentication error",{description:"Please login again"});return}const I=JSON.parse(N);try{const $=$e(Ae,"notices"),O=cA($),k={title:u.title,description:u.description,semester:u.semester,category:u.category,postedBy:I.id,postedByName:m,department:f,createdAt:new Date().toISOString()};At(O,k),Er.success("Notice added",{description:"Your notice has been published successfully"}),d({title:"",description:"",semester:u.semester,category:"academic"}),r(!1)}catch($){console.error("Error adding notice:",$),Er.error("Error",{description:"Failed to add notice. Please try again."})}},x=N=>{a(N),d({title:N.title,description:N.description,semester:N.semester,category:N.category}),r(!0)},b=()=>{if(!o||!u.title||!u.description||!u.semester){Er.error("Missing information",{description:"Please fill in all required fields"});return}try{const N=$e(Ae,`notices/${o.id}`),I={...o,title:u.title,description:u.description,semester:u.semester,category:u.category,updatedAt:new Date().toISOString()};At(N,I),Er.success("Notice updated",{description:"Your notice has been updated successfully"}),a(null),d({title:"",description:"",semester:u.semester,category:"academic"}),r(!1)}catch(N){console.error("Error updating notice:",N),Er.error("Error",{description:"Failed to update notice. Please try again."})}},w=N=>{a(N),i(!0)},_=()=>{if(o)try{const N=$e(Ae,`notices/${o.id}`);uA(N),Er.success("Notice deleted",{description:"The notice has been deleted successfully"}),a(null),i(!1)}catch(N){console.error("Error deleting notice:",N),Er.error("Error",{description:"Failed to delete notice. Please try again."})}},C=N=>{switch(N){case"exam":return h.jsx($a,{className:"h-4 w-4"});case"event":return h.jsx(pp,{className:"h-4 w-4"});default:return h.jsx(uc,{className:"h-4 w-4"})}},E=N=>{switch(N){case"exam":return"bg-red-100 text-red-800";case"event":return"bg-blue-100 text-blue-800";default:return"bg-green-100 text-green-800"}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Notice Board"}),h.jsx("p",{className:"text-muted-foreground",children:"Post important announcements for students"})]}),h.jsxs(ae,{onClick:()=>{a(null),d({title:"",description:"",semester:l.length>0?l[0]:"",category:"academic"}),r(!0)},children:[h.jsx(uc,{className:"h-4 w-4 mr-2"}),"Post New Notice"]})]}),h.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.length>0?t.map(N=>h.jsxs(Me,{children:[h.jsx(it,{className:"pb-2",children:h.jsxs("div",{className:"flex justify-between",children:[h.jsxs("div",{children:[h.jsx(ct,{children:N.title}),h.jsxs(qn,{className:"flex items-center gap-1 mt-1",children:[h.jsx(gr,{variant:"outline",children:N.semester}),h.jsx(gr,{className:E(N.category),variant:"secondary",children:h.jsxs("span",{className:"flex items-center gap-1",children:[C(N.category),N.category.charAt(0).toUpperCase()+N.category.slice(1)]})})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>x(N),children:h.jsx(Uf,{className:"h-4 w-4"})}),h.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>w(N),children:h.jsx(r6,{className:"h-4 w-4 text-destructive"})})]})]})}),h.jsx(ot,{children:h.jsx("p",{className:"whitespace-pre-wrap",children:N.description})}),h.jsxs(Ys,{className:"text-sm text-muted-foreground pt-0 flex justify-between",children:[h.jsxs("span",{children:["Posted by: ",N.postedByName]}),h.jsx("span",{children:N.createdAt&&ni(new Date(N.createdAt),"MMM d, yyyy")})]})]},N.id)):h.jsx(Me,{children:h.jsxs(ot,{className:"py-8 text-center text-muted-foreground",children:[h.jsx(uc,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),h.jsx("p",{children:"No notices posted yet"}),h.jsx(ae,{variant:"outline",className:"mt-4",onClick:()=>r(!0),children:"Post Your First Notice"})]})})}),h.jsx(kr,{open:n,onOpenChange:r,children:h.jsxs(hr,{className:"sm:max-w-md",children:[h.jsx(pr,{children:h.jsx(mr,{children:o?"Edit Notice":"Post New Notice"})}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"title",children:"Title"}),h.jsx(Le,{id:"title",value:u.title,onChange:N=>d({...u,title:N.target.value}),placeholder:"Notice title"})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"semester",children:"Semester"}),h.jsxs(Hn,{value:u.semester,onValueChange:N=>d({...u,semester:N}),children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select semester"})}),h.jsx(Fn,{children:l.map(N=>h.jsx(Ut,{value:N,children:N},N))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"category",children:"Category"}),h.jsxs(Hn,{value:u.category,onValueChange:N=>d({...u,category:N}),children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select category"})}),h.jsxs(Fn,{children:[h.jsx(Ut,{value:"academic",children:"Academic"}),h.jsx(Ut,{value:"exam",children:"Exam"}),h.jsx(Ut,{value:"event",children:"Event"})]})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"description",children:"Description"}),h.jsx(cS,{id:"description",value:u.description,onChange:N=>d({...u,description:N.target.value}),placeholder:"Notice content",rows:5})]})]}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),h.jsx(ae,{onClick:o?b:v,children:o?"Update Notice":"Post Notice"})]})]})}),h.jsx(kr,{open:s,onOpenChange:i,children:h.jsxs(hr,{className:"sm:max-w-md",children:[h.jsx(pr,{children:h.jsx(mr,{children:"Delete Notice"})}),h.jsx("div",{className:"py-4",children:h.jsx("p",{children:"Are you sure you want to delete this notice? This action cannot be undone."})}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),h.jsx(ae,{variant:"destructive",onClick:_,children:"Delete"})]})]})})]})}function z8e({studentId:t}){const[e,n]=S.useState([]),[r,s]=S.useState({totalExams:0,completedExams:0,passedExams:0,averageScore:0}),[i,o]=S.useState([]),[a,l]=S.useState([]),[c,u]=S.useState(""),[d,f]=S.useState("");return S.useEffect(()=>{const p=async()=>{const g=await mX(t);if(g.success){n(g.results);const y=g.results.length,v=g.results.filter(_=>_.percentage>=40).length,x=g.results.reduce((_,C)=>_+C.percentage,0)/(y||1);s({totalExams:y,completedExams:y,passedExams:v,averageScore:Math.round(x)});const b={};g.results.forEach(_=>{b[_.examSubject]||(b[_.examSubject]={total:0,count:0}),b[_.examSubject].total+=_.percentage,b[_.examSubject].count+=1});const w=Object.entries(b).map(([_,C])=>({subject:_,averageScore:Math.round(C.total/C.count)}));o(w)}},m=$e(Ae,`users/${t}`);Ua(m,g=>{if(g.exists()){const y=g.val();f(y.semester||""),u(y.department||"")}}),p()},[t]),S.useEffect(()=>{if(!c||!d)return;const p=$e(Ae,"notices"),m=_H(p,SH("createdAt"),Lye(3)),g=Ua(m,y=>{if(y.exists()){const v=[];y.forEach(x=>{const b=x.val();b.department===c&&(b.semester===d||b.semester==="All Semesters")&&v.push({id:x.key||"",...b})}),v.sort((x,b)=>new Date(b.createdAt).getTime()-new Date(x.createdAt).getTime()),l(v.slice(0,3))}});return()=>g()},[c,d]),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[h.jsxs(Me,{children:[h.jsx(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:h.jsx(ct,{className:"text-sm font-medium",children:"Total Exams"})}),h.jsxs(ot,{children:[h.jsx("div",{className:"text-2xl font-bold",children:r.totalExams}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Assigned Exams"})]})]}),h.jsxs(Me,{children:[h.jsx(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:h.jsx(ct,{className:"text-sm font-medium",children:"Completed"})}),h.jsxs(ot,{children:[h.jsx("div",{className:"text-2xl font-bold",children:r.completedExams}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Exams taken"})]})]}),h.jsxs(Me,{children:[h.jsx(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:h.jsx(ct,{className:"text-sm font-medium",children:"Passed"})}),h.jsxs(ot,{children:[h.jsx("div",{className:"text-2xl font-bold",children:r.passedExams}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Exams passed"})]})]}),h.jsxs(Me,{children:[h.jsx(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:h.jsx(ct,{className:"text-sm font-medium",children:"Average Score"})}),h.jsxs(ot,{children:[h.jsxs("div",{className:"text-2xl font-bold",children:[r.averageScore,"%"]}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Overall performance"})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs(Me,{className:"md:col-span-2",children:[h.jsxs(it,{children:[h.jsx(ct,{children:"Subject Performance"}),h.jsx(qn,{children:"Your average scores by subject"})]}),h.jsx(ot,{className:"px-2",children:h.jsx("div",{className:"h-[400px] w-full",children:h.jsx(Uw,{config:{score:{theme:{light:"hsl(var(--primary))",dark:"hsl(var(--primary))"}}},children:h.jsx(cP,{width:"100%",height:"100%",children:h.jsxs(uX,{data:i,margin:{top:10,right:30,left:0,bottom:20},children:[h.jsx(GP,{strokeDasharray:"3 3"}),h.jsx(Wv,{dataKey:"subject",tick:{fontSize:12},height:60,tickMargin:10}),h.jsx(zv,{width:40}),h.jsx(v6e,{}),h.jsx(Kc,{dataKey:"averageScore",fill:"hsl(var(--primary))",name:"Average Score %",radius:[4,4,0,0]})]})})})})})]}),h.jsxs(Me,{className:"h-full",children:[h.jsxs(it,{children:[h.jsx(ct,{children:"Recent Notices"}),h.jsx(qn,{children:"Latest updates from your department"})]}),h.jsx(ot,{children:h.jsx("div",{className:"space-y-4",children:a.length>0?a.map(p=>h.jsxs("div",{className:"border-b pb-3 last:border-0",children:[h.jsx("h4",{className:"font-medium text-sm",children:p.title}),h.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-1",children:p.description}),h.jsxs("div",{className:"flex justify-between items-center mt-2",children:[h.jsx("span",{className:"text-xs font-medium",children:p.category}),h.jsx("span",{className:"text-xs text-muted-foreground",children:p.createdAt&&ni(new Date(p.createdAt),"MMM d")})]})]},p.id)):h.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[h.jsx(uc,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),h.jsx("p",{className:"text-sm",children:"No recent notices"})]})})})]})]})]})}var V8e={compareTwoStrings:vY,findBestMatch:H8e};function vY(t,e){if(t=t.replace(/\s+/g,""),e=e.replace(/\s+/g,""),t===e)return 1;if(t.length<2||e.length<2)return 0;let n=new Map;for(let s=0;s<t.length-1;s++){const i=t.substring(s,s+2),o=n.has(i)?n.get(i)+1:1;n.set(i,o)}let r=0;for(let s=0;s<e.length-1;s++){const i=e.substring(s,s+2),o=n.has(i)?n.get(i):0;o>0&&(n.set(i,o-1),r++)}return 2*r/(t.length+e.length-2)}function H8e(t,e){if(!G8e(t,e))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const n=[];let r=0;for(let i=0;i<e.length;i++){const o=e[i],a=vY(t,o);n.push({target:o,rating:a}),a>n[r].rating&&(r=i)}const s=n[r];return{ratings:n,bestMatch:s,bestMatchIndex:r}}function G8e(t,e){return!(typeof t!="string"||!Array.isArray(e)||!e.length||e.find(function(n){return typeof n!="string"}))}const rB=Tt(V8e);function q8e(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var b2="ScrollArea",[xY,tyt]=No(b2),[K8e,ji]=xY(b2),bY=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,l]=S.useState(null),[c,u]=S.useState(null),[d,f]=S.useState(null),[p,m]=S.useState(null),[g,y]=S.useState(null),[v,x]=S.useState(0),[b,w]=S.useState(0),[_,C]=S.useState(!1),[E,N]=S.useState(!1),I=lt(e,O=>l(O)),$=Sp(s);return h.jsx(K8e,{scope:n,type:r,dir:$,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:f,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:_,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:E,onScrollbarYEnabledChange:N,onCornerWidthChange:x,onCornerHeightChange:w,children:h.jsx(Re.div,{dir:$,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});bY.displayName=b2;var wY="ScrollAreaViewport",SY=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,asChild:s,nonce:i,...o}=t,a=ji(wY,n),l=S.useRef(null),c=lt(e,l,a.onViewportChange);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:i}),h.jsx(Re.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:sqe({asChild:s,children:r},u=>h.jsx("div",{"data-radix-scroll-area-content":"",ref:a.onContentChange,style:{minWidth:a.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});SY.displayName=wY;var ha="ScrollAreaScrollbar",w2=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ji(ha,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return S.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?h.jsx(X8e,{...r,ref:e,forceMount:n}):s.type==="scroll"?h.jsx(Y8e,{...r,ref:e,forceMount:n}):s.type==="auto"?h.jsx(_Y,{...r,ref:e,forceMount:n}):s.type==="always"?h.jsx(S2,{...r,ref:e}):null});w2.displayName=ha;var X8e=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ji(ha,t.__scopeScrollArea),[i,o]=S.useState(!1);return S.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),h.jsx(qr,{present:n||i,children:h.jsx(_Y,{"data-state":i?"visible":"hidden",...r,ref:e})})}),Y8e=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ji(ha,t.__scopeScrollArea),i=t.orientation==="horizontal",o=h_(()=>l("SCROLL_END"),100),[a,l]=q8e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return S.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),S.useEffect(()=>{const c=s.viewport,u=i?"scrollLeft":"scrollTop";if(c){let d=c[u];const f=()=>{const p=c[u];d!==p&&(l("SCROLL"),o()),d=p};return c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[s.viewport,i,l,o]),h.jsx(qr,{present:n||a!=="hidden",children:h.jsx(S2,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ne(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Ne(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),_Y=S.forwardRef((t,e)=>{const n=ji(ha,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=S.useState(!1),a=t.orientation==="horizontal",l=h_(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:u)}},10);return Yh(n.viewport,l),Yh(n.content,l),h.jsx(qr,{present:r||i,children:h.jsx(S2,{"data-state":i?"visible":"hidden",...s,ref:e})})}),S2=S.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=ji(ha,t.__scopeScrollArea),i=S.useRef(null),o=S.useRef(0),[a,l]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=IY(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function d(f,p){return nqe(f,o.current,a,p)}return n==="horizontal"?h.jsx(Q8e,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,p=sB(f,a,s.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=d(f,s.dir))}}):n==="vertical"?h.jsx(J8e,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,p=sB(f,a);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=d(f))}}):null}),Q8e=S.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=ji(ha,t.__scopeScrollArea),[o,a]=S.useState(),l=S.useRef(null),c=lt(e,l,i.onScrollbarXChange);return S.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),h.jsx(NY,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":f_(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(i.viewport){const f=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(f),OY(f,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Gw(o.paddingLeft),paddingEnd:Gw(o.paddingRight)}})}})}),J8e=S.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=ji(ha,t.__scopeScrollArea),[o,a]=S.useState(),l=S.useRef(null),c=lt(e,l,i.onScrollbarYChange);return S.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),h.jsx(NY,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":f_(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(i.viewport){const f=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(f),OY(f,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Gw(o.paddingTop),paddingEnd:Gw(o.paddingBottom)}})}})}),[Z8e,CY]=xY(ha),NY=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...f}=t,p=ji(ha,n),[m,g]=S.useState(null),y=lt(e,I=>g(I)),v=S.useRef(null),x=S.useRef(""),b=p.viewport,w=r.content-r.viewport,_=cn(u),C=cn(l),E=h_(d,10);function N(I){if(v.current){const $=I.clientX-v.current.left,O=I.clientY-v.current.top;c({x:$,y:O})}}return S.useEffect(()=>{const I=$=>{const O=$.target;(m==null?void 0:m.contains(O))&&_($,w)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[b,m,w,_]),S.useEffect(C,[r,C]),Yh(m,E),Yh(p.content,E),h.jsx(Z8e,{scope:n,scrollbar:m,hasThumb:s,onThumbChange:cn(i),onThumbPointerUp:cn(o),onThumbPositionChange:C,onThumbPointerDown:cn(a),children:h.jsx(Re.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:Ne(t.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),v.current=m.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),N(I))}),onPointerMove:Ne(t.onPointerMove,N),onPointerUp:Ne(t.onPointerUp,I=>{const $=I.target;$.hasPointerCapture(I.pointerId)&&$.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=x.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),Hw="ScrollAreaThumb",EY=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=CY(Hw,t.__scopeScrollArea);return h.jsx(qr,{present:n||s.hasThumb,children:h.jsx(eqe,{ref:e,...r})})}),eqe=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=ji(Hw,n),o=CY(Hw,n),{onThumbPositionChange:a}=o,l=lt(e,d=>o.onThumbChange(d)),c=S.useRef(),u=h_(()=>{c.current&&(c.current(),c.current=void 0)},100);return S.useEffect(()=>{const d=i.viewport;if(d){const f=()=>{if(u(),!c.current){const p=rqe(d,a);c.current=p,a()}};return a(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[i.viewport,u,a]),h.jsx(Re.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ne(t.onPointerDownCapture,d=>{const p=d.target.getBoundingClientRect(),m=d.clientX-p.left,g=d.clientY-p.top;o.onThumbPointerDown({x:m,y:g})}),onPointerUp:Ne(t.onPointerUp,o.onThumbPointerUp)})});EY.displayName=Hw;var _2="ScrollAreaCorner",TY=S.forwardRef((t,e)=>{const n=ji(_2,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?h.jsx(tqe,{...t,ref:e}):null});TY.displayName=_2;var tqe=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=ji(_2,n),[i,o]=S.useState(0),[a,l]=S.useState(0),c=!!(i&&a);return Yh(s.scrollbarX,()=>{var d;const u=((d=s.scrollbarX)==null?void 0:d.offsetHeight)||0;s.onCornerHeightChange(u),l(u)}),Yh(s.scrollbarY,()=>{var d;const u=((d=s.scrollbarY)==null?void 0:d.offsetWidth)||0;s.onCornerWidthChange(u),o(u)}),c?h.jsx(Re.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Gw(t){return t?parseInt(t,10):0}function IY(t,e){const n=t/e;return isNaN(n)?0:n}function f_(t){const e=IY(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function nqe(t,e,n,r="ltr"){const s=f_(n),i=s/2,o=e||i,a=s-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return kY([l,c],d)(t)}function sB(t,e,n="ltr"){const r=f_(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,l=n==="ltr"?[0,o]:[o*-1,0],c=gT(t,l);return kY([0,o],[0,a])(c)}function kY(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function OY(t,e){return t>0&&t<e}var rqe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function h_(t,e){const n=cn(t),r=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),S.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Yh(t,e){const n=cn(e);jn(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}function sqe(t,e){const{asChild:n,children:r}=t;if(!n)return typeof e=="function"?e(r):e;const s=S.Children.only(r);return S.cloneElement(s,{children:typeof e=="function"?e(s.props.children):e})}var $Y=bY,iqe=SY,oqe=TY;const AY=S.forwardRef(({className:t,children:e,...n},r)=>h.jsxs($Y,{ref:r,className:ne("relative overflow-hidden",t),...n,children:[h.jsx(iqe,{className:"h-full w-full rounded-[inherit]",children:e}),h.jsx(PY,{}),h.jsx(oqe,{})]}));AY.displayName=$Y.displayName;const PY=S.forwardRef(({className:t,orientation:e="vertical",...n},r)=>h.jsx(w2,{ref:r,orientation:e,className:ne("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:h.jsx(EY,{className:"relative flex-1 rounded-full bg-border"})}));PY.displayName=w2.displayName;function aqe({studentId:t}){const[e,n]=S.useState([]),[r,s]=S.useState(null),[i,o]=S.useState(!1);S.useEffect(()=>{(async()=>{const c=await mX(t);c.success&&n(c.results)})()},[t]);const a=(l,c)=>{if(!l||!c)return"N/A";const u=Math.round((new Date(c).getTime()-new Date(l).getTime())/6e4);if(u<60)return`${u} min${u!==1?"s":""}`;const d=Math.floor(u/60),f=u%60;return`${d} hr${d!==1?"s":""} ${f} min${f!==1?"s":""}`};return h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"border rounded-lg overflow-hidden bg-card",children:h.jsxs(qP,{children:[h.jsx(KP,{children:h.jsxs(Qf,{children:[h.jsx(vs,{children:"Exam"}),h.jsx(vs,{className:"hidden md:table-cell",children:"Subject"}),h.jsx(vs,{className:"text-right",children:"Score"}),h.jsx(vs,{className:"hidden md:table-cell text-right",children:"Time Taken"}),h.jsx(vs,{className:"text-right",children:"Action"})]})}),h.jsx(XP,{children:e.length>0?e.map(l=>h.jsxs(Qf,{className:"hover:bg-muted/50",children:[h.jsx(es,{className:"font-medium",children:h.jsxs("div",{children:[h.jsx("p",{children:l.examTitle}),h.jsx("p",{className:"text-xs text-muted-foreground md:hidden",children:l.examSubject})]})}),h.jsx(es,{className:"hidden md:table-cell",children:l.examSubject}),h.jsx(es,{className:"text-right",children:h.jsxs(gr,{variant:l.percentage>=40?"default":"destructive",className:"font-medium",children:[l.percentage,"%"]})}),h.jsx(es,{className:"hidden md:table-cell text-right text-sm",children:a(l.startTime,l.endTime)}),h.jsx(es,{className:"text-right",children:h.jsxs(ae,{variant:"outline",size:"sm",className:"ml-auto",onClick:()=>{s(l),o(!0)},children:[h.jsx(f$,{className:"h-4 w-4 mr-2"}),"View"]})})]},l.examId)):h.jsx(Qf,{children:h.jsx(es,{colSpan:5,className:"text-center h-24 text-muted-foreground",children:"No exam results available."})})})]})}),h.jsx(kr,{open:i,onOpenChange:o,children:h.jsxs(hr,{className:"max-w-3xl",children:[h.jsxs(pr,{children:[h.jsx(mr,{className:"text-xl",children:r==null?void 0:r.examTitle}),h.jsxs(rl,{children:["Review your submission for ",r==null?void 0:r.examSubject]})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[h.jsxs(Me,{className:"bg-card/50",children:[h.jsx(it,{className:"pb-2",children:h.jsx(ct,{className:"text-sm",children:"Score"})}),h.jsxs(ot,{children:[h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:`text-2xl font-bold ${(r==null?void 0:r.percentage)>=40?"text-primary":"text-destructive"}`,children:[r==null?void 0:r.percentage,"%"]}),h.jsx("div",{className:"ml-auto",children:(r==null?void 0:r.percentage)>=40?h.jsx(c$,{className:"h-5 w-5 text-green-500"}):h.jsx(h$,{className:"h-5 w-5 text-destructive"})})]}),h.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[r==null?void 0:r.score,"/",r==null?void 0:r.maxScore," points"]})]})]}),h.jsxs(Me,{className:"bg-card/50",children:[h.jsx(it,{className:"pb-2",children:h.jsx(ct,{className:"text-sm",children:"Time Taken"})}),h.jsxs(ot,{children:[h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:"text-2xl font-bold",children:[r!=null&&r.endTime&&(r!=null&&r.startTime)?Math.round((new Date(r.endTime).getTime()-new Date(r.startTime).getTime())/6e4):0," mins"]}),h.jsx(d$,{className:"h-5 w-5 ml-auto text-muted-foreground"})]}),h.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:(r==null?void 0:r.startTime)&&ni(new Date(r.startTime),"MMM d, yyyy")})]})]}),h.jsxs(Me,{className:"bg-card/50",children:[h.jsx(it,{className:"pb-2",children:h.jsx(ct,{className:"text-sm",children:"Warnings"})}),h.jsxs(ot,{children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"text-2xl font-bold",children:(r==null?void 0:r.warningCount)||0}),h.jsx(Lu,{className:`h-5 w-5 ml-auto ${(r==null?void 0:r.warningCount)>0?"text-amber-500":"text-muted-foreground"}`})]}),h.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Total warnings received"})]})]})]}),h.jsxs(AY,{className:"border rounded-lg p-4 mb-2 h-[350px]",children:[h.jsx("h3",{className:"font-medium mb-4",children:"Your Answers"}),h.jsx("div",{className:"space-y-4",children:(r==null?void 0:r.answers)&&Object.entries(r.answers).map(([l,c],u)=>{const d=r._questions&&r._questions.find(v=>v.id===l),f=c,p=(v,x,b)=>b?Number(v)===Number(x):rB.compareTwoStrings(String(v).trim().toLowerCase(),String(x).trim().toLowerCase())>=.8,m=!!(d!=null&&d.options),g=p(f,(d==null?void 0:d.correctAnswer)||"",m),y=m?null:rB.compareTwoStrings(String(f).trim().toLowerCase(),String((d==null?void 0:d.correctAnswer)||"").trim().toLowerCase());return h.jsxs(Me,{className:"overflow-hidden",children:[h.jsx(it,{className:"bg-muted/40 py-3",children:h.jsxs(ct,{className:"text-sm font-medium flex justify-between",children:[h.jsxs("span",{children:["Question ",u+1]}),h.jsx(gr,{variant:g?"default":"destructive",children:g?"Correct":"Incorrect"})]})}),h.jsx(ot,{className:"py-3",children:h.jsx("div",{className:"space-y-2",children:d?h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text-sm font-medium",children:d.text}),m?h.jsx("div",{className:"ml-2 mt-2 space-y-1",children:d.options.map((v,x)=>{const b=Number(f),w=Number(d.correctAnswer),_=x===b,C=x===w;return h.jsxs("div",{className:`flex items-center text-sm p-1 px-2 rounded-md ${_?"bg-white":""}`,children:[h.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs mr-2 border
                                  ${_&&C?"bg-green-500 border-green-500 text-white":_?"bg-destructive border-destructive text-white":C?"bg-green-500 border-green-500 text-white":"border-muted-foreground text-muted-foreground"}`,children:String.fromCharCode(65+x)}),h.jsxs("span",{className:`${C?"text-green-500":""} ${_&&!C?"text-destructive":""}`,children:[v,_&&" (Your answer)",C&&!_&&" (Correct answer)"]})]},x)})}):h.jsxs("div",{className:"mt-2",children:[h.jsx("p",{className:"text-sm font-medium",children:"Your Answer:"}),h.jsx("p",{className:"text-sm",children:f}),h.jsx("p",{className:"text-sm font-medium mt-2",children:"Correct Answer:"}),h.jsx("p",{className:"text-sm",children:d.correctAnswer}),h.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Similarity Score: ",(y*100).toFixed(1),"%"]})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text-muted-foreground italic",children:"Question details not available"}),h.jsxs("div",{className:"mt-2",children:[h.jsx("p",{className:"text-sm font-medium",children:"Your Answer:"}),h.jsx("p",{className:"text-sm",children:f})]})]})})})]},l)})})]})]})})]})}function lqe(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:p,...m}=d,g=(f==null?void 0:f[t][l])||a,y=S.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:y,children:p})}function u(d,f){const p=(f==null?void 0:f[t][l])||a,m=S.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,cqe(s,...e)]}function cqe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var C2="Progress",N2=100,[uqe,nyt]=lqe(C2),[dqe,fqe]=uqe(C2),RY=S.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=hqe,...o}=t;(s||s===0)&&!iB(s)&&console.error(pqe(`${s}`,"Progress"));const a=iB(s)?s:N2;r!==null&&!oB(r,a)&&console.error(mqe(`${r}`,"Progress"));const l=oB(r,a)?r:null,c=qw(l)?i(l,a):void 0;return h.jsx(dqe,{scope:n,value:l,max:a,children:h.jsx(Re.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":qw(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":MY(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});RY.displayName=C2;var DY="ProgressIndicator",jY=S.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=fqe(DY,n);return h.jsx(Re.div,{"data-state":MY(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});jY.displayName=DY;function hqe(t,e){return`${Math.round(t/e*100)}%`}function MY(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function qw(t){return typeof t=="number"}function iB(t){return qw(t)&&!isNaN(t)&&t>0}function oB(t,e){return qw(t)&&!isNaN(t)&&t<=e&&t>=0}function pqe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${N2}\`.`}function mqe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${N2} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var LY=RY,gqe=jY;const Kw=S.forwardRef(({className:t,value:e,...n},r)=>h.jsx(LY,{ref:r,className:ne("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:h.jsx(gqe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Kw.displayName=LY.displayName;function yqe({studentId:t}){const[e,n]=S.useState([]),[r,s]=S.useState(!0),{toast:i}=ii(),o=aa(),[a,l]=S.useState({});S.useEffect(()=>{const m=async()=>{const y=await pX(t);n(y),s(!1)};m();const g=setInterval(m,6e4);return()=>clearInterval(g)},[t]);const c=m=>{i({title:"Starting exam",description:"Preparing your exam environment..."}),o(`/exam/take/${m}`)},u=async m=>{const g=$e(Ae,`users/${m}`),y=await Ct(g);return y.exists()?y.val().name:"Not specified"};S.useEffect(()=>{const m=async()=>{const g={};for(const y of e)if(y.createdBy&&!g[y.createdBy]){const v=await u(y.createdBy);g[y.createdBy]=v}l(g)};e.length>0&&m()},[e]);const d=e.filter(m=>m.status==="scheduled"),f=e.filter(m=>m.status==="active"),p=e.filter(m=>m.status==="completed");return r?h.jsxs("div",{className:"py-10 text-center",children:[h.jsx("div",{className:"h-8 w-8 mx-auto rounded-full border-4 border-primary border-t-transparent animate-spin"}),h.jsx("p",{className:"text-muted-foreground mt-2",children:"Loading your exams..."})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsx(Wa,{title:"Available Exams",value:f.length,description:"Exams ready to take",icon:h.jsx($a,{className:"h-4 w-4"})}),h.jsx(Wa,{title:"Upcoming Exams",value:d.length,description:"Scheduled in your calendar",icon:h.jsx(d$,{className:"h-4 w-4"})}),h.jsx(Wa,{title:"Completed Exams",value:p.length,description:"Finished assessments",icon:h.jsx(zg,{className:"h-4 w-4"})})]}),f.length>0&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Available Exams"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(m=>{const g=new Date(m.startDate),y=a[m.createdBy]||"Not specified";return h.jsxs(Me,{className:"overflow-hidden hover:shadow-md transition-all",children:[h.jsx(it,{className:"pb-2",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx(ct,{children:m.title}),h.jsx(qn,{children:m.subject})]}),h.jsx(gr,{className:"bg-exam-success",children:"Available"})]})}),h.jsx(ot,{children:h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"font-medium",children:"Date & Time:"})," "," ",g.toLocaleDateString()," at"," ",g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"font-medium",children:"Duration:"})," ",m.duration," minutes"]}),h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"font-medium",children:"Teacher:"})," ",y||"Not specified"]})]})}),h.jsx(Ys,{className:"border-t pt-4",children:h.jsx(ae,{className:"w-full",onClick:()=>c(m.id),children:"Start Exam"})})]},m.id)})})]}),d.length>0&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Upcoming Exams"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(m=>{const g=new Date(m.startDate);return h.jsxs(Me,{className:"overflow-hidden hover:shadow-md transition-all",children:[h.jsx(it,{className:"pb-2",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx(ct,{children:m.title}),h.jsx(qn,{children:m.subject})]}),h.jsx(gr,{variant:"outline",className:"border-exam-primary text-exam-primary",children:"Upcoming"})]})}),h.jsx(ot,{children:h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"font-medium",children:"Date & Time:"})," "," ",g.toLocaleDateString()," at"," ",g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"font-medium",children:"Duration:"})," ",m.duration," minutes"]}),h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"font-medium",children:"Teacher:"})," ",m.createdBy||"Not specified"]})]})}),h.jsx(Ys,{className:"border-t pt-4",children:h.jsx(ae,{disabled:!0,variant:"outline",className:"w-full",children:"Not Yet Available"})})]},m.id)})})]}),p.length>0&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Completed Exams"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(m=>{var g,y,v;return h.jsxs(Me,{className:"overflow-hidden hover:shadow-md transition-all",children:[h.jsx(it,{className:"pb-2",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx(ct,{children:m.title}),h.jsx(qn,{children:m.subject})]}),h.jsx(gr,{variant:"outline",className:"border-muted-foreground text-muted-foreground",children:"Completed"})]})}),h.jsx(ot,{children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"font-medium",children:"Date Taken:"})," "," ",m.submissions&&((g=m.submissions[t])!=null&&g.startTime)?new Date(m.submissions[t].startTime).toLocaleDateString():"Unknown date"]}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{className:"font-medium",children:"Score:"}),h.jsx("span",{children:m.submissions&&((y=m.submissions[t])!=null&&y.percentage)?`${m.submissions[t].percentage}%`:m.score!==void 0?`${m.score}%`:"N/A"})]}),h.jsx(Kw,{value:m.submissions?((v=m.submissions[t])==null?void 0:v.percentage)||m.score||0:m.score||0,className:"h-2"})]})]})}),h.jsx(Ys,{className:"border-t pt-4",children:h.jsx(ae,{variant:"outline",className:"w-full",onClick:()=>o("/dashboard/results"),children:"View Results"})})]},m.id)})})]}),e.length===0&&h.jsx("div",{className:"text-center py-10",children:h.jsx("p",{className:"text-muted-foreground",children:"No exams assigned to you yet."})})]})}function vqe(){const[t,e]=S.useState("dashboard");ii(),aa();const n=hp();S.useEffect(()=>{n.pathname==="/dashboard/results"?e("results"):n.pathname==="/dashboard/myexams"?e("myexams"):e("dashboard")},[n]);const r=localStorage.getItem("examUser"),s=r?JSON.parse(r):null;if(!s)return null;const i=()=>{switch(t){case"results":return h.jsx(aqe,{studentId:s.id});case"myexams":return h.jsx(yqe,{studentId:s.id});default:return h.jsx(z8e,{studentId:s.id})}};return h.jsx("div",{className:"space-y-6",children:i()})}function xqe(){const[t,e]=S.useState([]),[n,r]=S.useState([]),[s,i]=S.useState(""),[o,a]=S.useState(""),[l,c]=S.useState("all"),[u,d]=S.useState("");S.useEffect(()=>{const m=localStorage.getItem("examUser");if(!m)return;const g=JSON.parse(m),y=$e(Ae,`users/${g.id}`);Ua(y,b=>{if(b.exists()){const w=b.val();i(w.semester||""),a(w.department||"")}});const v=$e(Ae,"notices"),x=Ua(v,b=>{if(b.exists()&&s&&o){const w=[];b.forEach(_=>{const C=_.val();C.department===o&&(C.semester===s||C.semester==="All Semesters")&&w.push({id:_.key||"",...C})}),w.sort((_,C)=>new Date(C.createdAt).getTime()-new Date(_.createdAt).getTime()),e(w),r(w)}else e([]),r([])});return()=>x()},[s,o]),S.useEffect(()=>{let m=[...t];if(l!=="all"&&(m=m.filter(g=>g.category===l)),u){const g=u.toLowerCase();m=m.filter(y=>y.title.toLowerCase().includes(g)||y.description.toLowerCase().includes(g))}r(m)},[l,u,t]);const f=m=>{switch(m){case"exam":return h.jsx($a,{className:"h-4 w-4"});case"event":return h.jsx(pp,{className:"h-4 w-4"});default:return h.jsx(uc,{className:"h-4 w-4"})}},p=m=>{switch(m){case"exam":return"bg-red-100 text-red-800";case"event":return"bg-blue-100 text-blue-800";default:return"bg-green-100 text-green-800"}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Notice Board"}),h.jsx("p",{className:"text-muted-foreground",children:"Important announcements from your department"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[h.jsx("div",{className:"w-full sm:w-64",children:h.jsx(Le,{placeholder:"Search notices...",value:u,onChange:m=>d(m.target.value)})}),h.jsx("div",{className:"w-full sm:w-48",children:h.jsxs(Hn,{value:l,onValueChange:c,children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Filter by category"})}),h.jsxs(Fn,{children:[h.jsx(Ut,{value:"all",children:"All Categories"}),h.jsx(Ut,{value:"academic",children:"Academic"}),h.jsx(Ut,{value:"exam",children:"Exam"}),h.jsx(Ut,{value:"event",children:"Event"})]})]})})]}),h.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.length>0?n.map(m=>h.jsxs(Me,{children:[h.jsx(it,{className:"pb-2",children:h.jsx("div",{className:"flex justify-between",children:h.jsxs("div",{children:[h.jsx(ct,{children:m.title}),h.jsxs(qn,{className:"flex items-center gap-1 mt-1",children:[h.jsx(gr,{variant:"outline",children:m.semester}),h.jsx(gr,{className:p(m.category),variant:"secondary",children:h.jsxs("span",{className:"flex items-center gap-1",children:[f(m.category),m.category.charAt(0).toUpperCase()+m.category.slice(1)]})})]})]})})}),h.jsx(ot,{children:h.jsx("p",{className:"whitespace-pre-wrap",children:m.description})}),h.jsxs(Ys,{className:"text-sm text-muted-foreground pt-0 flex justify-between",children:[h.jsxs("span",{children:["Posted by: ",m.postedByName]}),h.jsx("span",{children:m.createdAt&&ni(new Date(m.createdAt),"MMM d, yyyy")})]})]},m.id)):h.jsx(Me,{children:h.jsxs(ot,{className:"py-8 text-center text-muted-foreground",children:[h.jsx(uc,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),h.jsx("p",{children:"No notices available for your semester"})]})})})]})}const bN=()=>{const[t,e]=S.useState(null),[n,r]=S.useState(!0),s=aa(),{section:i}=qV();S.useEffect(()=>{(async()=>{const l=localStorage.getItem("examUser");if(l)try{const u=JSON.parse(l);if(u&&u.role){e(u.role),r(!1);return}}catch(u){console.error("Error parsing stored user:",u)}const c=await Rd();if(!c){s("/");return}e(c),r(!1)})()},[s]);const o=()=>{switch(t){case"admin":return h.jsx(S6e,{section:i});case"teacher":return i==="schedule"?h.jsx(U8e,{}):i==="notices"?h.jsx(W8e,{}):i==="exams"?h.jsx(G4,{section:i}):h.jsx(G4,{section:i});case"student":return i==="notices"?h.jsx(xqe,{}):h.jsx(vqe,{});default:return h.jsx("div",{className:"text-center py-10",children:h.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})})}};return n?h.jsxs("div",{className:"flex justify-center items-center h-screen",children:[h.jsx("div",{className:"h-8 w-8 rounded-full border-4 border-primary border-t-transparent animate-spin"}),h.jsx("p",{className:"ml-2 text-muted-foreground",children:"Loading dashboard..."})]}):h.jsx(D8,{children:o()})};function bqe({department:t,onUpdate:e}){var l,c;const[n,r]=S.useState(!1),[s,i]=S.useState(""),{toast:o}=ii(),a=async()=>{if(!s){o({title:"Missing information",description:"Please enter a semester name",variant:"destructive"});return}try{const u=[...t.semesters||[],s];await At($e(Ae,`departments/${t.id}/semesters`),u),o({title:"Semester added",description:"The semester has been added successfully."}),i(""),r(!1),e()}catch{o({title:"Error",description:"Failed to add semester. Please try again.",variant:"destructive"})}};return h.jsxs(Me,{children:[h.jsx(it,{children:h.jsxs(ct,{className:"flex items-center gap-2",children:[h.jsx(bue,{className:"h-5 w-5"}),t.name]})}),h.jsx(ot,{children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsxs("h4",{className:"font-medium flex items-center gap-2 mb-2",children:[h.jsx(pp,{className:"h-4 w-4"}),"Semesters"]}),h.jsx("div",{className:"space-y-1",children:(l=t.semesters)==null?void 0:l.map(u=>h.jsx("div",{className:"text-sm px-2 py-1 bg-secondary rounded-md text-white",children:u},u))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"font-medium flex items-center gap-2 mb-2",children:[h.jsx(dc,{className:"h-4 w-4"}),"Assigned Teachers"]}),h.jsxs("div",{className:"text-sm text-muted-foreground",children:[((c=t.teachers)==null?void 0:c.length)||0," teachers assigned"]})]})]})}),h.jsx(Ys,{children:h.jsx(ae,{variant:"outline",className:"w-full",onClick:()=>r(!0),children:"Add Semester"})}),h.jsx(kr,{open:n,onOpenChange:r,children:h.jsxs(hr,{children:[h.jsx(pr,{children:h.jsx(mr,{children:"Add New Semester"})}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"semester",children:"Semester Name"}),h.jsx(Le,{id:"semester",value:s,onChange:u=>i(u.target.value),placeholder:"e.g., Semester 1"})]})}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),h.jsx(ae,{onClick:a,children:"Add Semester"})]})]})})]})}function wqe(){const[t,e]=S.useState([]),[n,r]=S.useState(!1),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState({name:""}),[u,d]=S.useState(null),[f,p]=S.useState(""),[m,g]=S.useState({name:"",code:"",semester:""}),[y,v]=S.useState(!1),[x,b]=S.useState({type:"",id:"",semesterId:"",subjectId:""}),{toast:w}=ii();S.useEffect(()=>{_()},[]);const _=async()=>{const O=$e(Ae,"departments"),k=await Ct(O);if(k.exists()){const R=Object.entries(k.val()).map(([M,B])=>({id:M,...B}));e(R)}},C=async()=>{if(!l.name){w({title:"Missing information",description:"Please fill in the department name",variant:"destructive"});return}try{const O=$e(Ae,"departments"),k=cA(O);await At(k,{name:l.name,semesters:[],teachers:[],subjects:{}}),w({title:"Department added",description:"The department has been added successfully."}),c({name:""}),r(!1),_()}catch{w({title:"Error",description:"Failed to add department. Please try again.",variant:"destructive"})}},E=async()=>{if(!f||!u){w({title:"Missing information",description:"Please fill in all required fields",variant:"destructive"});return}try{const O=$e(Ae,`departments/${u.id}/semesters`),k=await Ct(O),R=k.exists()?k.val():[];if(R.includes(f)){w({title:"Semester exists",description:"This semester already exists in the department.",variant:"destructive"});return}await At(O,[...R,f]),w({title:"Semester added",description:`${f} has been added to ${u.name} department.`}),p(""),i(!1),_()}catch{w({title:"Error",description:"Failed to add semester. Please try again.",variant:"destructive"})}},N=async()=>{if(!m.name||!m.code||!m.semester||!u){w({title:"Missing information",description:"Please fill in all required fields",variant:"destructive"});return}try{const O=$e(Ae,`departments/${u.id}/subjects`),k=await Ct(O),R=k.exists()?k.val():{};R[m.semester]||(R[m.semester]=[]);const M={id:Date.now().toString(),name:m.name,code:m.code,semester:m.semester};R[m.semester].push(M),await At(O,R),w({title:"Subject added",description:`${m.name} has been added to ${u.name} department.`}),g({name:"",code:"",semester:""}),a(!1),_()}catch(O){w({title:"Error",description:"Failed to add subject. Please try again.",variant:"destructive"}),console.error(O)}},I=(O,k,R="",M="")=>{b({type:O,id:k,semesterId:R,subjectId:M}),v(!0)},$=async()=>{try{const{type:O,id:k,semesterId:R,subjectId:M}=x;if(O==="department")await uA($e(Ae,`departments/${k}`)),w({title:"Department deleted",description:"The department has been deleted successfully."});else if(O==="semester"){const B=t.find(L=>L.id===k);if(!B)return;const F=B.semesters.filter(L=>L!==R);if(await At($e(Ae,`departments/${k}/semesters`),F),B.subjects&&B.subjects[R]){const L={...B.subjects};delete L[R],await At($e(Ae,`departments/${k}/subjects`),L)}w({title:"Semester deleted",description:"The semester has been deleted successfully."})}else if(O==="subject"){const B=t.find(L=>L.id===k);if(!B||!B.subjects||!B.subjects[R])return;const F=B.subjects[R].filter(L=>L.id!==M);await At($e(Ae,`departments/${k}/subjects/${R}`),F),w({title:"Subject deleted",description:"The subject has been deleted successfully."})}_(),v(!1)}catch(O){w({title:"Error",description:"Failed to delete item. Please try again.",variant:"destructive"}),console.error(O)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 items-start md:items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Departments"}),h.jsx("p",{className:"text-muted-foreground",children:"Manage academic departments, semesters and subjects"})]}),h.jsxs(kr,{open:n,onOpenChange:r,children:[h.jsxs(ae,{onClick:()=>r(!0),children:[h.jsx(pC,{className:"h-4 w-4 mr-2"}),"Add Department"]}),h.jsxs(hr,{children:[h.jsx(pr,{children:h.jsx(mr,{children:"Add New Department"})}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"name",children:"Department Name"}),h.jsx(Le,{id:"name",value:l.name,onChange:O=>c({...l,name:O.target.value})})]})}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),h.jsx(ae,{onClick:C,children:"Add Department"})]})]})]})]}),h.jsx(Ov,{open:y,onOpenChange:v,children:h.jsxs(Cp,{children:[h.jsxs(Np,{children:[h.jsx(Tp,{children:"Are you sure?"}),h.jsxs(Ip,{children:[x.type==="department"&&"This will delete the department and all its semesters and subjects.",x.type==="semester"&&"This will delete the semester and all its subjects.",x.type==="subject"&&"This will delete the subject."," This action cannot be undone."]})]}),h.jsxs(Ep,{children:[h.jsx(Op,{children:"Cancel"}),h.jsx(kp,{onClick:$,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),h.jsxs(ZP,{defaultValue:"departments",className:"w-full",children:[h.jsxs(u_,{className:"mb-4",children:[h.jsx(Ga,{value:"departments",children:"Departments"}),h.jsx(Ga,{value:"semester",children:"Semesters"}),h.jsx(Ga,{value:"subjects",children:"Subjects"})]}),h.jsx(qa,{value:"departments",className:"space-y-4",children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(O=>h.jsxs("div",{className:"relative",children:[h.jsx(bqe,{department:O,onUpdate:_}),h.jsx(ae,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>I("department",O.id),children:h.jsx(xb,{className:"h-4 w-4"})})]},O.id))})}),h.jsxs(qa,{value:"semester",className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Manage Semesters"}),h.jsxs(kr,{open:s,onOpenChange:i,children:[h.jsxs(ae,{onClick:()=>i(!0),children:[h.jsx(pC,{className:"h-4 w-4 mr-2"}),"Add Semester"]}),h.jsxs(hr,{children:[h.jsx(pr,{children:h.jsx(mr,{children:"Add New Semester"})}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"department",children:"Department"}),h.jsxs(Hn,{onValueChange:O=>{const k=t.find(R=>R.id===O);d(k||null)},children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select Department"})}),h.jsx(Fn,{children:t.map(O=>h.jsx(Ut,{value:O.id,children:O.name},O.id))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"semester",children:"Semester Name"}),h.jsx(Le,{id:"semester",value:f,onChange:O=>p(O.target.value),placeholder:"e.g. Semester 1"})]})]}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),h.jsx(ae,{onClick:E,children:"Add Semester"})]})]})]})]}),h.jsx("div",{className:"space-y-4",children:t.map(O=>h.jsxs("div",{className:"border rounded-lg p-4",children:[h.jsx("h4",{className:"text-md font-semibold mb-2",children:O.name}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:O.semesters&&O.semesters.length>0?O.semesters.map((k,R)=>h.jsxs("div",{className:"bg-muted rounded-md p-3 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(pp,{className:"h-4 w-4 mr-2 text-muted-foreground"}),h.jsx("span",{children:k})]}),h.jsx(ae,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>I("semester",O.id,k),children:h.jsx(xb,{className:"h-4 w-4 text-destructive"})})]},R)):h.jsx("p",{className:"text-muted-foreground col-span-full",children:"No semesters added yet."})})]},O.id))})]}),h.jsxs(qa,{value:"subjects",className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Manage Subjects"}),h.jsxs(kr,{open:o,onOpenChange:a,children:[h.jsxs(ae,{onClick:()=>a(!0),children:[h.jsx(pC,{className:"h-4 w-4 mr-2"}),"Add Subject"]}),h.jsxs(hr,{children:[h.jsx(pr,{children:h.jsx(mr,{children:"Add New Subject"})}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"subject-department",children:"Department"}),h.jsxs(Hn,{onValueChange:O=>{const k=t.find(R=>R.id===O);d(k||null),g({...m,semester:""})},children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select Department"})}),h.jsx(Fn,{children:t.map(O=>h.jsx(Ut,{value:O.id,children:O.name},O.id))})]})]}),u&&h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"subject-semester",children:"Semester"}),h.jsxs(Hn,{value:m.semester,onValueChange:O=>g({...m,semester:O}),children:[h.jsx(Ln,{children:h.jsx(Gn,{placeholder:"Select Semester"})}),h.jsx(Fn,{children:u.semesters&&u.semesters.map((O,k)=>h.jsx(Ut,{value:O,children:O},k))})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"subject-name",children:"Subject Name"}),h.jsx(Le,{id:"subject-name",value:m.name,onChange:O=>g({...m,name:O.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(xe,{htmlFor:"subject-code",children:"Subject Code"}),h.jsx(Le,{id:"subject-code",value:m.code,onChange:O=>g({...m,code:O.target.value})})]})]}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),h.jsx(ae,{onClick:N,children:"Add Subject"})]})]})]})]}),h.jsx("div",{className:"space-y-4",children:t.map(O=>h.jsxs("div",{className:"border rounded-lg p-4",children:[h.jsx("h4",{className:"text-md font-semibold mb-2",children:O.name}),O.subjects?Object.entries(O.subjects).map(([k,R])=>h.jsxs("div",{className:"mb-4",children:[h.jsx("h5",{className:"text-sm font-medium text-muted-foreground mb-2",children:k}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:R.map(M=>h.jsxs("div",{className:"bg-muted rounded-md p-3 flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(l$,{className:"h-4 w-4 mr-2 text-muted-foreground"}),h.jsx("span",{className:"font-medium",children:M.name})]}),h.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Code: ",M.code]})]}),h.jsx(ae,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>I("subject",O.id,k,M.id),children:h.jsx(xb,{className:"h-4 w-4 text-destructive"})})]},M.id))})]},k)):h.jsx("p",{className:"text-muted-foreground",children:"No subjects added yet."}),O.subjects&&Object.keys(O.subjects).length===0&&h.jsx("p",{className:"text-muted-foreground",children:"No subjects added yet."})]},O.id))})]})]})]})}const Sqe=()=>h.jsx(D8,{children:h.jsx(wqe,{})});function _qe({examId:t}){const[e,n]=S.useState(null),[r,s]=S.useState([]),[i,o]=S.useState(!0),[a,l]=S.useState(null),[c,u]=S.useState(""),[d,f]=S.useState(null),[p,m]=S.useState(!1),[g,y]=S.useState(!1),[v,x]=S.useState([]),[b,w]=S.useState([]),[_,C]=S.useState({});S.useEffect(()=>{(async()=>{if(!t){l("No exam ID provided"),o(!1);return}try{const R=await YP(t);if(!R.success||!R.exam){l("Failed to fetch exam"),o(!1);return}n(R.exam);const M=await E6e(t),B=$e(Ae,"users"),F=await Ct(B),L=[],P={};if(F.exists()&&F.forEach(W=>{const q=W.val();q&&q.role==="student"&&(P[W.key]={name:q.name||"Unknown Student",photo:q.photo||""})}),R.exam.assignedStudents)for(const W of R.exam.assignedStudents){const q=M.success?M.submissions.find(Y=>Y.studentId===W):null,H=P[W]||{name:`Student ${W.slice(-4)}`,photo:""};if(q){const Y=new Date(q.startTime),se=new Date(q.endTime),Se=q.timeTaken||Math.round((se.getTime()-Y.getTime())/6e4);L.push({id:W,name:H.name,photo:H.photo,score:q.score||0,maxScore:q.maxScore||0,percentage:q.percentage||0,startTime:Y.toLocaleString(),endTime:se.toLocaleString(),answers:q.answers,warningCount:q.warningCount||0,warnings:q.warnings||[],status:"completed",timeTaken:Se,evaluationComplete:q.evaluationComplete!==void 0?q.evaluationComplete:!0,needsEvaluation:q.needsEvaluation!==void 0?q.needsEvaluation:!1})}else L.push({id:W,name:H.name,photo:H.photo,status:"not-started"})}s(L),o(!1)}catch(R){console.error("Error fetching exam data:",R),l("An error occurred while fetching exam data"),o(!1)}})()},[t]);const E=r.filter(k=>k.name.toLowerCase().includes(c.toLowerCase())),N=k=>{f(k),k.warnings&&k.warnings.length>0?(x(k.warnings),m(!0)):(x([]),m(!0))},I=k=>{if(!e||!e.questions||!k.answers)return;f(k);const R=e.questions.filter(F=>F.type==="short-answer");if(R.length===0){Er.info("No short answer questions to evaluate");return}const M=R.map(F=>{var P;const L=((P=k.answers)==null?void 0:P[F.id])||"";return{questionId:F.id,questionText:F.text,studentAnswer:L,correctAnswer:F.correctAnswer||"",points:F.points||0,score:0}}),B={};M.forEach(F=>{B[F.questionId]=F.score}),w(M),C(B),y(!0)},$=(k,R,M)=>{const B=Math.min(Math.max(0,R),M);C(F=>({...F,[k]:B}))},O=async()=>{if(!(!d||!t))try{let k=0,R=0;b.forEach(F=>{R+=_[F.questionId]||0}),e.questions.filter(F=>F.type!=="short-answer").forEach(F=>{var L;((L=d.answers)==null?void 0:L[F.id])===F.correctAnswer&&(k+=F.points)}),k+=R,(await k6e(t,d.id,{score:k,evaluationComplete:!0,needsEvaluation:!1})).success?(Er.success("Evaluation saved successfully"),s(F=>F.map(L=>L.id===d.id?{...L,score:k,percentage:Math.round(k/(L.maxScore||1)*100),evaluationComplete:!0,needsEvaluation:!1}:L)),y(!1)):Er.error("Failed to save evaluation")}catch(k){console.error("Error saving evaluation:",k),Er.error("An error occurred while saving the evaluation")}};return i?h.jsxs("div",{className:"flex justify-center items-center h-[500px]",children:[h.jsx("div",{className:"h-8 w-8 rounded-full border-4 border-primary border-t-transparent animate-spin"}),h.jsx("p",{className:"ml-2 text-muted-foreground",children:"Loading exam data..."})]}):a?h.jsx(Me,{className:"mx-auto max-w-3xl",children:h.jsxs(it,{children:[h.jsx(ct,{className:"text-destructive",children:"Error"}),h.jsx(qn,{children:a})]})}):e?h.jsxs("div",{className:"container mx-auto py-8",children:[h.jsx("div",{className:"mb-6",children:h.jsxs(QV,{to:"/dashboard/exams",className:"inline-flex items-center gap-2 text-sm font-medium text-primary hover:text-primary/80 transition-colors",children:[h.jsx("div",{className:"p-2 rounded-full bg-muted hover:bg-muted/60 transition-colors",children:h.jsx(ZV,{className:"h-4 w-4"})}),"Back to Home"]})}),h.jsx(Me,{className:"mb-8",children:h.jsx(it,{children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(ct,{className:"text-2xl font-bold",children:e.title}),h.jsx(qn,{className:"mt-2",children:h.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Subject:"})," ",e.subject]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",e.date]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Time:"})," ",e.time]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Duration:"})," ",e.duration," minutes"]})]})})]}),h.jsx(gr,{className:e.status==="completed"?"bg-green-100 text-green-800":e.status==="active"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800",children:e.status})]})})}),h.jsx("div",{className:"mb-6",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:h.jsx(Aue,{className:"h-5 w-5 text-muted-foreground"})}),h.jsx(Le,{placeholder:"Search students...",value:c,onChange:k=>u(k.target.value),className:"pl-10"})]})}),h.jsxs(ZP,{defaultValue:"results",children:[h.jsxs(u_,{className:"mb-4",children:[h.jsx(Ga,{value:"results",children:"Exam Results"}),h.jsx(Ga,{value:"stats",children:"Statistics"})]}),h.jsx(qa,{value:"results",children:h.jsxs(Me,{children:[h.jsxs(it,{children:[h.jsx(ct,{children:"Student Results"}),h.jsxs(qn,{children:[r.length," students assigned • ",r.filter(k=>k.status==="completed").length," completed",r.filter(k=>k.needsEvaluation).length>0&&h.jsxs("span",{className:"ml-2 text-amber-600",children:["• ",r.filter(k=>k.needsEvaluation).length," need evaluation"]})]})]}),h.jsx(ot,{children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b",children:[h.jsx("th",{className:"text-left py-3 px-4",children:"Student"}),h.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),h.jsx("th",{className:"text-center py-3 px-4",children:"Score"}),h.jsx("th",{className:"text-center py-3 px-4",children:"Percentage"}),h.jsx("th",{className:"text-center py-3 px-4",children:"Time Taken"}),h.jsx("th",{className:"text-center py-3 px-4",children:"Warnings"}),h.jsx("th",{className:"text-center py-3 px-4",children:"Actions"})]})}),h.jsx("tbody",{children:E.length>0?E.map(k=>h.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[h.jsx("td",{className:"py-3 px-4",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(PA,{className:"h-8 w-8",children:k.photo?h.jsx(RA,{src:k.photo,alt:k.name}):h.jsx(DA,{className:"bg-primary/10 text-primary",children:k.name.substring(0,2).toUpperCase()})}),h.jsx("span",{className:"font-medium",children:k.name})]})}),h.jsx("td",{className:"py-3 px-4",children:h.jsxs(gr,{className:k.status==="completed"?"bg-green-100 text-green-800":k.status==="in-progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:[k.status==="completed"?"Completed":k.status==="in-progress"?"In Progress":"Not Started",k.needsEvaluation&&h.jsx("span",{className:"ml-2 inline-block w-2 h-2 bg-amber-500 rounded-full"})]})}),h.jsxs("td",{className:"text-center py-3 px-4",children:[k.status==="completed"?`${k.score}/${k.maxScore}`:"-",k.needsEvaluation&&h.jsx("span",{className:"text-xs text-amber-600 block",children:"Needs review"})]}),h.jsx("td",{className:"text-center py-3 px-4",children:k.status==="completed"?h.jsxs("span",{className:`font-medium ${(k.percentage||0)>=70?"text-green-600":(k.percentage||0)>=40?"text-yellow-600":"text-red-600"}`,children:[k.percentage,"%"]}):"-"}),h.jsx("td",{className:"text-center py-3 px-4",children:k.status==="completed"?h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Due,{className:"h-4 w-4 mr-1 text-primary"}),k.timeTaken," min"]}):"-"}),h.jsx("td",{className:"text-center py-3 px-4",children:k.status==="completed"?h.jsx("span",{className:`font-medium ${(k.warningCount||0)>0?"text-amber-600":"text-green-600"}`,children:k.warningCount||0}):"-"}),h.jsx("td",{className:"text-center py-3 px-4",children:h.jsxs("div",{className:"flex justify-center space-x-2",children:[k.status==="completed"&&(k.warningCount||0)>0&&h.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>N(k),className:"flex items-center gap-1",children:[h.jsx(Lu,{className:"h-4 w-4"}),"View"]}),k.status==="completed"&&k.needsEvaluation&&h.jsxs(ae,{variant:"outline",size:"sm",onClick:()=>I(k),className:"flex items-center gap-1 bg-amber-50 hover:bg-amber-100",children:[h.jsx(Uf,{className:"h-4 w-4"}),"Evaluate"]})]})})]},k.id)):h.jsx("tr",{children:h.jsx("td",{colSpan:7,className:"text-center py-10 text-muted-foreground",children:"No students found matching your search."})})})]})})})]})}),h.jsx(qa,{value:"stats",children:h.jsxs(Me,{children:[h.jsxs(it,{children:[h.jsx(ct,{children:"Exam Statistics"}),h.jsx(qn,{children:"Overall performance metrics"})]}),h.jsx(ot,{children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"bg-muted/30 p-4 rounded-md",children:[h.jsx("h3",{className:"text-lg font-medium mb-2",children:"Participation"}),h.jsxs("p",{className:"text-3xl font-bold",children:[Math.round(r.filter(k=>k.status==="completed").length/r.length*100),"%"]}),h.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[r.filter(k=>k.status==="completed").length," of ",r.length," students"]})]}),h.jsxs("div",{className:"bg-muted/30 p-4 rounded-md",children:[h.jsx("h3",{className:"text-lg font-medium mb-2",children:"Average Score"}),h.jsxs("p",{className:"text-3xl font-bold",children:[r.filter(k=>k.status==="completed").length>0?Math.round(r.filter(k=>k.status==="completed").reduce((k,R)=>k+(R.percentage||0),0)/r.filter(k=>k.status==="completed").length):0,"%"]}),h.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[r.filter(k=>k.percentage&&k.percentage>=40).length," passing students"]})]}),h.jsxs("div",{className:"bg-muted/30 p-4 rounded-md",children:[h.jsx("h3",{className:"text-lg font-medium mb-2",children:"Average Time"}),h.jsxs("p",{className:"text-3xl font-bold",children:[r.filter(k=>k.status==="completed").length>0?Math.round(r.filter(k=>k.status==="completed").reduce((k,R)=>k+(R.timeTaken||0),0)/r.filter(k=>k.status==="completed").length*10)/10:0," min"]}),h.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Out of ",e.duration," min allowed"]})]})]})})]})})]}),h.jsx(kr,{open:p,onOpenChange:m,children:h.jsxs(hr,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[h.jsxs(pr,{children:[h.jsxs(mr,{className:"flex items-center gap-2",children:[h.jsx(Lu,{className:"h-5 w-5 text-amber-500"}),"Warnings for ",d==null?void 0:d.name]}),h.jsxs(rl,{children:[v.length," warnings detected during the exam"]})]}),v.length>0?h.jsx("div",{className:"space-y-6 mt-4",children:v.map((k,R)=>h.jsxs(Me,{className:"border border-amber-200",children:[h.jsx(it,{className:"bg-amber-50 py-2",children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Lu,{className:"h-4 w-4 text-amber-500"}),h.jsx(ct,{className:"text-base",children:k.type})]}),h.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(k.timestamp).toLocaleString()})]})}),h.jsx(ot,{className:"pt-4",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("img",{src:k.imageUrl,alt:`Warning: ${k.type}`,className:"rounded-md max-h-64 object-contain mb-2"}),h.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Warning ",R+1," of ",v.length]})]})})]},R))}):h.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[h.jsx(t6,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),h.jsx("p",{className:"text-lg font-semibold",children:"No warning images available"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"This student has warnings recorded, but no images were captured."})]})]})}),h.jsx(kr,{open:g,onOpenChange:y,children:h.jsxs(hr,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[h.jsxs(pr,{children:[h.jsxs(mr,{className:"flex items-center gap-2",children:[h.jsx(Uf,{className:"h-5 w-5 text-amber-500"}),"Evaluate Short Answers - ",d==null?void 0:d.name]}),h.jsx(rl,{children:"Review short answer questions and assign scores manually"})]}),b.length>0?h.jsxs("div",{className:"space-y-6 mt-4",children:[b.map((k,R)=>h.jsxs(Me,{children:[h.jsxs(it,{className:"pb-2",children:[h.jsxs(ct,{className:"text-base",children:["Question ",R+1,": ",k.questionText]}),h.jsx(qn,{children:h.jsx("div",{className:"flex items-center",children:h.jsxs("span",{className:"font-medium",children:["Points: ",k.points]})})})]}),h.jsxs(ot,{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx(xe,{className:"text-sm text-muted-foreground",children:"Correct Answer (Teacher's Reference)"}),h.jsx("div",{className:"p-3 bg-muted/20 rounded-md mt-1",children:k.correctAnswer||h.jsx("span",{className:"text-muted-foreground italic",children:"No reference answer provided"})})]}),h.jsxs("div",{children:[h.jsx(xe,{className:"text-sm text-muted-foreground",children:"Student's Answer"}),h.jsx("div",{className:"p-3 bg-muted/20 rounded-md mt-1",children:k.studentAnswer||h.jsx("span",{className:"text-muted-foreground italic",children:"No answer provided"})})]}),h.jsxs("div",{children:[h.jsxs(xe,{htmlFor:`score-${k.questionId}`,children:["Score (out of ",k.points,")"]}),h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsx(Le,{id:`score-${k.questionId}`,type:"number",min:0,max:k.points,value:_[k.questionId]||0,onChange:M=>$(k.questionId,parseInt(M.target.value),k.points),className:"w-20"}),h.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",k.points]})]})]})]})]},R)),h.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[h.jsx(ae,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),h.jsxs(ae,{onClick:O,children:[h.jsx(zg,{className:"h-4 w-4 mr-2"}),"Save Evaluation"]})]})]}):h.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[h.jsx(Uf,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),h.jsx("p",{className:"text-lg font-semibold",children:"No short answer questions found"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"This exam doesn't have any short answer questions to evaluate."})]})]})})]}):h.jsx(Me,{className:"mx-auto max-w-3xl",children:h.jsxs(it,{children:[h.jsx(ct,{children:"Exam not found"}),h.jsx(qn,{children:"The exam you're looking for doesn't exist or has been deleted."})]})})}const Cqe=Od("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),of=S.forwardRef(({className:t,variant:e,...n},r)=>h.jsx("div",{ref:r,role:"alert",className:ne(Cqe({variant:e}),t),...n}));of.displayName="Alert";const af=S.forwardRef(({className:t,...e},n)=>h.jsx("h5",{ref:n,className:ne("mb-1 font-medium leading-none tracking-tight",t),...e}));af.displayName="AlertTitle";const lf=S.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ne("text-sm [&_p]:leading-relaxed",t),...e}));lf.displayName="AlertDescription";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nqe=1e-7,Eqe=1e-4;class Tqe{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class FY{refCount(e){return ms("refCount")}incRef(e){return ms("incRef")}timerAvailable(){return!0}time(e){return ms("time")}read(e){return ms("read")}readSync(e){return ms("readSync")}readToGPU(e,n){return ms("readToGPU")}numDataIds(){return ms("numDataIds")}disposeData(e,n){return ms("disposeData")}write(e,n,r){return ms("write")}move(e,n,r,s,i){return ms("move")}createTensorFromGPUData(e,n,r){return ms("createTensorFromGPUData")}memory(){return ms("memory")}floatPrecision(){return ms("floatPrecision")}epsilon(){return this.floatPrecision()===32?Nqe:Eqe}dispose(){return ms("dispose")}}function ms(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xw(t,e,n){return Math.max(t,Math.min(e,n))}function E2(t){return t%2===0?t:t+1}function $m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Iqe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function D(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function oi(t,e,n=""){D(gn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Hp(t){D(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ce(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function kqe(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function gn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Qh(t){return t%1===0}function nk(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Jf(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function aB(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function Oqe(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function tr(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),D(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),D(t.every(r=>Qh(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Xc(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:tr(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Pc(t,e){return Zn(t,e)}function Zn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function $qe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Aqe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function Pqe(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Yw(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Rqe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function p_(t){return typeof t=="string"||t instanceof String}function Dqe(t){return typeof t=="boolean"}function jqe(t){return typeof t=="number"}function qv(t){return Array.isArray(t)?qv(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":jqe(t)?"float32":p_(t)?"string":Dqe(t)?"bool":"float32"}function rk(t){return!!(t&&t.constructor&&t.call&&t.apply)}function sk(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function yr(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function BY(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)s[l]=BY(t+l*a,o,n,r)}return s}function ik(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return BY(0,t,e,n)}function UY(t,e){const n=Rc(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Rc(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function ai(t){t.forEach(e=>{D(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ok(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function T2(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function pd(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lB="tfjsflags";class Mqe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Lqe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(X().getBool("IS_TEST")||X().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];X().getBool("IS_TEST")||X().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(pd(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);lB in e&&e[lB].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=Bqe(s,i)})}}function Lqe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Fqe(e,r[0],r[1]),r.join("="))),e}function Fqe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Bqe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function X(){return WY}let WY=null;function Uqe(t){WY=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let wN;function zY(){if(wN==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");wN=t}return wN}function Wqe(){const t=zY();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function I2(t,e){const n=Wqe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const VY="Abs",HY="Acos",GY="Acosh",k2="Add",qY="AddN",KY="All",XY="Any",YY="ArgMax",QY="ArgMin",JY="Asin",ZY="Asinh",eQ="Atan",tQ="Atanh",nQ="Atan2",rQ="AvgPool",zqe="AvgPoolGrad",sQ="AvgPool3D",Vqe="AvgPool3DGrad",iQ="BatchMatMul",oQ="BatchToSpaceND",aQ="Bincount",lQ="BitwiseAnd",cQ="BroadcastArgs",O2="Cast",uQ="Ceil",dQ="ClipByValue",fQ="Complex",hQ="ComplexAbs",pQ="Concat",mQ="Conv2D",gQ="Conv2DBackpropFilter",yQ="Conv2DBackpropInput",vQ="Conv3D",Hqe="Conv3DBackpropFilterV2",xQ="Conv3DBackpropInputV2",bQ="Cos",wQ="Cosh",SQ="Cumprod",_Q="Cumsum",CQ="CropAndResize",NQ="DenseBincount",EQ="DepthToSpace",TQ="DepthwiseConv2dNative",IQ="DepthwiseConv2dNativeBackpropFilter",kQ="DepthwiseConv2dNativeBackpropInput",OQ="Diag",$Q="Dilation2D",AQ="RealDiv",PQ="Einsum",RQ="Elu",Gqe="EluGrad",DQ="Erf",jQ="Equal",MQ="Exp",LQ="ExpandDims",FQ="Expm1",BQ="FFT",UQ="Fill",WQ="FlipLeftRight",zQ="Floor",VQ="FloorDiv",HQ="FusedBatchNorm",GQ="GatherV2",qQ="GatherNd",KQ="Greater",XQ="GreaterEqual",$2="Identity",YQ="IFFT",QQ="Imag",JQ="IsFinite",ZQ="IsInf",eJ="IsNan",tJ="LeakyRelu",nJ="Less",rJ="LessEqual",sJ="LinSpace",iJ="Log",oJ="Log1p",aJ="LogicalAnd",lJ="LogicalNot",cJ="LogicalOr",uJ="LRN",qqe="LRNGrad",dJ="Max",fJ="Maximum",hJ="MaxPool",Kqe="MaxPoolGrad",pJ="MaxPool3D",Xqe="MaxPool3DGrad",mJ="MaxPoolWithArgmax",gJ="Mean",yJ="Min",vJ="Minimum",xJ="MirrorPad",bJ="Mod",wJ="Multinomial",SJ="Multiply",_J="Neg",CJ="NotEqual",NJ="NonMaxSuppressionV3",EJ="NonMaxSuppressionV4",TJ="NonMaxSuppressionV5",IJ="OnesLike",kJ="OneHot",OJ="Pack",$J="PadV2",AJ="Pow",PJ="Prelu",RJ="Prod",DJ="RaggedGather",jJ="RaggedRange",MJ="RaggedTensorToTensor",LJ="Range",FJ="Real",BJ="Reciprocal",UJ="Relu",WJ="Reshape",zJ="ResizeNearestNeighbor",Yqe="ResizeNearestNeighborGrad",VJ="ResizeBilinear",Qqe="ResizeBilinearGrad",HJ="Relu6",GJ="Reverse",qJ="Round",KJ="Rsqrt",XJ="ScatterNd",YJ="TensorScatterUpdate",QJ="SearchSorted",JJ="Select",ZJ="Selu",eZ="Slice",tZ="Sin",nZ="Sinh",rZ="Sign",sZ="Sigmoid",iZ="Softplus",oZ="Sqrt",aZ="Sum",lZ="SpaceToBatchND",cZ="SplitV",uZ="Softmax",dZ="SparseFillEmptyRows",fZ="SparseReshape",hZ="SparseSegmentMean",pZ="SparseSegmentSum",mZ="SparseToDense",gZ="SquaredDifference",Jqe="Square",yZ="StaticRegexReplace",vZ="StridedSlice",xZ="StringNGrams",bZ="StringSplit",wZ="StringToHashBucketFast",SZ="Sub",_Z="Tan",CZ="Tanh",A2="Tile",NZ="TopK",EZ="Transform",Ob="Transpose",TZ="Unique",IZ="Unpack",kZ="UnsortedSegmentSum",OZ="ZerosLike",$Z="Step",ak="FromPixels",AZ="RotateWithOffset",lk="_FusedMatMul",ck="FusedConv2D",uk="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function so(...t){X().getBool("IS_TEST")||X().getBool("PROD")||console.warn(...t)}function Zqe(...t){X().getBool("IS_TEST")||X().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qw=I2("kernelRegistry",()=>new Map),eKe=I2("gradRegistry",()=>new Map);function dk(t,e){const n=PZ(t,e);return Qw.get(n)}function cB(t){return eKe.get(t)}function uB(t){const e=Qw.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function tKe(t){const{kernelName:e,backendName:n}=t,r=PZ(e,n);Qw.has(r)&&so(`The kernel '${e}' for backend '${n}' is already registered`),Qw.set(r,t)}function PZ(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZ(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var DZ=Zt,Si=null;try{Si=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Zt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Zt.prototype.__isLong__;Object.defineProperty(Zt.prototype,"__isLong__",{value:!0});function As(t){return(t&&t.__isLong__)===!0}Zt.isLong=As;var dB={},fB={};function Fd(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=fB[t],r)?r:(n=en(t,(t|0)<0?-1:0,!0),s&&(fB[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=dB[t],r)?r:(n=en(t,t<0?-1:0,!1),s&&(dB[t]=n),n))}Zt.fromInt=Fd;function _i(t,e){if(isNaN(t))return e?ku:Ci;if(e){if(t<0)return ku;if(t>=jZ)return FZ}else{if(t<=-pB)return _s;if(t+1>=pB)return LZ}return t<0?_i(-t,e).neg():en(t%Jh|0,t/Jh|0,e)}Zt.fromNumber=_i;function en(t,e,n){return new Zt(t,e,n)}Zt.fromBits=en;var Jw=Math.pow;function P2(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ci;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return P2(t.substring(1),e,n).neg();for(var s=_i(Jw(n,8)),i=Ci,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=_i(Jw(n,a));i=i.mul(c).add(_i(l))}else i=i.mul(s),i=i.add(_i(l))}return i.unsigned=e,i}Zt.fromString=P2;function Io(t,e){return typeof t=="number"?_i(t,e):typeof t=="string"?P2(t,e):en(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Zt.fromValue=Io;var hB=65536,nKe=1<<24,Jh=hB*hB,jZ=Jh*Jh,pB=jZ/2,mB=Fd(nKe),Ci=Fd(0);Zt.ZERO=Ci;var ku=Fd(0,!0);Zt.UZERO=ku;var Af=Fd(1);Zt.ONE=Af;var MZ=Fd(1,!0);Zt.UONE=MZ;var fk=Fd(-1);Zt.NEG_ONE=fk;var LZ=en(-1,2147483647,!1);Zt.MAX_VALUE=LZ;var FZ=en(-1,-1,!0);Zt.MAX_UNSIGNED_VALUE=FZ;var _s=en(0,-2147483648,!1);Zt.MIN_VALUE=_s;var be=Zt.prototype;be.toInt=function(){return this.unsigned?this.low>>>0:this.low};be.toNumber=function(){return this.unsigned?(this.high>>>0)*Jh+(this.low>>>0):this.high*Jh+(this.low>>>0)};be.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(_s)){var n=_i(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=_i(Jw(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),c=o.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};be.getHighBits=function(){return this.high};be.getHighBitsUnsigned=function(){return this.high>>>0};be.getLowBits=function(){return this.low};be.getLowBitsUnsigned=function(){return this.low>>>0};be.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_s)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};be.isZero=function(){return this.high===0&&this.low===0};be.eqz=be.isZero;be.isNegative=function(){return!this.unsigned&&this.high<0};be.isPositive=function(){return this.unsigned||this.high>=0};be.isOdd=function(){return(this.low&1)===1};be.isEven=function(){return(this.low&1)===0};be.equals=function(e){return As(e)||(e=Io(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};be.eq=be.equals;be.notEquals=function(e){return!this.eq(e)};be.neq=be.notEquals;be.ne=be.notEquals;be.lessThan=function(e){return this.comp(e)<0};be.lt=be.lessThan;be.lessThanOrEqual=function(e){return this.comp(e)<=0};be.lte=be.lessThanOrEqual;be.le=be.lessThanOrEqual;be.greaterThan=function(e){return this.comp(e)>0};be.gt=be.greaterThan;be.greaterThanOrEqual=function(e){return this.comp(e)>=0};be.gte=be.greaterThanOrEqual;be.ge=be.greaterThanOrEqual;be.compare=function(e){if(As(e)||(e=Io(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};be.comp=be.compare;be.negate=function(){return!this.unsigned&&this.eq(_s)?_s:this.not().add(Af)};be.neg=be.negate;be.add=function(e){As(e)||(e=Io(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,f=0,p=0;return p+=i+c,f+=p>>>16,p&=65535,f+=s+l,d+=f>>>16,f&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=n+o,u&=65535,en(f<<16|p,u<<16|d,this.unsigned)};be.subtract=function(e){return As(e)||(e=Io(e)),this.add(e.neg())};be.sub=be.subtract;be.multiply=function(e){if(this.isZero())return Ci;if(As(e)||(e=Io(e)),Si){var n=Si.mul(this.low,this.high,e.low,e.high);return en(n,Si.get_high(),this.unsigned)}if(e.isZero())return Ci;if(this.eq(_s))return e.isOdd()?_s:Ci;if(e.eq(_s))return this.isOdd()?_s:Ci;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(mB)&&e.lt(mB))return _i(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,f=0,p=0,m=0;return m+=o*u,p+=m>>>16,m&=65535,p+=i*u,f+=p>>>16,p&=65535,p+=o*c,f+=p>>>16,p&=65535,f+=s*u,d+=f>>>16,f&=65535,f+=i*c,d+=f>>>16,f&=65535,f+=o*l,d+=f>>>16,f&=65535,d+=r*u+s*c+i*l+o*a,d&=65535,en(p<<16|m,d<<16|f,this.unsigned)};be.mul=be.multiply;be.divide=function(e){if(As(e)||(e=Io(e)),e.isZero())throw Error("division by zero");if(Si){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Si.div_u:Si.div_s)(this.low,this.high,e.low,e.high);return en(n,Si.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ku:Ci;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return ku;if(e.gt(this.shru(1)))return MZ;i=ku}else{if(this.eq(_s)){if(e.eq(Af)||e.eq(fk))return _s;if(e.eq(_s))return Af;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Ci)?e.isNegative()?Af:fk:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(_s))return this.unsigned?ku:Ci;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Ci}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Jw(2,a-48),c=_i(r),u=c.mul(e);u.isNegative()||u.gt(s);)r-=l,c=_i(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Af),i=i.add(c),s=s.sub(u)}return i};be.div=be.divide;be.modulo=function(e){if(As(e)||(e=Io(e)),Si){var n=(this.unsigned?Si.rem_u:Si.rem_s)(this.low,this.high,e.low,e.high);return en(n,Si.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};be.mod=be.modulo;be.rem=be.modulo;be.not=function(){return en(~this.low,~this.high,this.unsigned)};be.and=function(e){return As(e)||(e=Io(e)),en(this.low&e.low,this.high&e.high,this.unsigned)};be.or=function(e){return As(e)||(e=Io(e)),en(this.low|e.low,this.high|e.high,this.unsigned)};be.xor=function(e){return As(e)||(e=Io(e)),en(this.low^e.low,this.high^e.high,this.unsigned)};be.shiftLeft=function(e){return As(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?en(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):en(0,this.low<<e-32,this.unsigned)};be.shl=be.shiftLeft;be.shiftRight=function(e){return As(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?en(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):en(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};be.shr=be.shiftRight;be.shiftRightUnsigned=function(e){if(As(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return en(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?en(n,0,this.unsigned):en(n>>>e-32,0,this.unsigned)};be.shru=be.shiftRightUnsigned;be.shr_u=be.shiftRightUnsigned;be.toSigned=function(){return this.unsigned?en(this.low,this.high,!1):this};be.toUnsigned=function(){return this.unsigned?this:en(this.low,this.high,!0)};be.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};be.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};be.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Zt.fromBytes=function(e,n,r){return r?Zt.fromBytesLE(e,n):Zt.fromBytesBE(e,n)};Zt.fromBytesLE=function(e,n){return new Zt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Zt.fromBytesBE=function(e,n){return new Zt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const BZ=Tt(DZ),rKe=kU({__proto__:null,default:BZ},[DZ]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gu=BZ||rKe;function m_(t){return gu.fromString(t,!0,16)}const UZ=m_("c3a5c85c97cb3127"),pu=m_("b492b66fbe98f273"),Ur=m_("9ae16a3b2f90404f");function hk(t){return t.xor(t.shru(47))}function WZ(t,e,n){const r=t.slice(e,e+n);return gu.fromBytes(Array.from(r),!0,!0)}function Vt(t,e){return WZ(t,e,8)}function gB(t,e){return WZ(t,e,4)}function Kn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function xc(t,e,n=m_("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function sKe(t,e,n,r,s,i){s=s.add(t),i=Kn(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(Kn(s,44)),[s.add(r),i.add(o)]}function Xx(t,e,n,r){return sKe(Vt(t,e),Vt(t,e+8),Vt(t,e+16),Vt(t,e+24),n,r)}function iKe(t,e=t.length){if(e>=8){const n=Ur.add(e*2),r=Vt(t,0).add(Ur),s=Vt(t,e-8),i=Kn(s,37).mul(n).add(r),o=Kn(r,25).add(s).mul(n);return xc(i,o,n)}if(e>=4){const n=Ur.add(e*2),r=gB(t,0);return xc(r.shl(3).add(e),gB(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return hk(Ur.mul(i).xor(UZ.mul(o))).mul(Ur)}return Ur}function oKe(t,e=t.length){const n=Ur.add(e*2),r=Vt(t,0).mul(pu),s=Vt(t,8),i=Vt(t,e-8).mul(n),o=Vt(t,e-16).mul(Ur);return xc(Kn(r.add(s),43).add(Kn(i,30)).add(o),r.add(Kn(s.add(Ur),18)).add(i),n)}function aKe(t,e=t.length){const n=Ur.add(e*2),r=Vt(t,0).mul(Ur),s=Vt(t,8),i=Vt(t,e-8).mul(n),o=Vt(t,e-16).mul(Ur),a=Kn(r.add(s),43).add(Kn(i,30)).add(o),l=xc(a,r.add(Kn(s.add(Ur),18)).add(i),n),c=Vt(t,16).mul(n),u=Vt(t,24),d=a.add(Vt(t,e-32)).mul(n),f=l.add(Vt(t,e-24)).mul(n);return xc(Kn(c.add(u),43).add(Kn(d,30)).add(f),c.add(Kn(u.add(r),18)).add(d),n)}function lKe(t,e=t.length){const n=gu.fromNumber(81,!0);if(e<=32)return e<=16?iKe(t,e):oKe(t,e);if(e<=64)return aKe(t,e);let r=n,s=n.mul(pu).add(113),i=hk(s.mul(Ur).add(113)).mul(Ur),o=[gu.UZERO,gu.UZERO],a=[gu.UZERO,gu.UZERO];r=r.mul(Ur).add(Vt(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=Kn(r.add(s).add(o[0]).add(Vt(t,l+8)),37).mul(pu),s=Kn(s.add(o[1]).add(Vt(t,l+48)),42).mul(pu),r=r.xor(a[1]),s=s.add(o[0]).add(Vt(t,l+40)),i=Kn(i.add(a[0]),33).mul(pu),o=Xx(t,l,o[1].mul(pu),r.add(a[0])),a=Xx(t,l+32,i.add(a[1]),s.add(Vt(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const d=pu.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Kn(r.add(s).add(o[0]).add(Vt(t,l+8)),37).mul(d),s=Kn(s.add(o[1]).add(Vt(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(Vt(t,l+40))),i=Kn(i.add(a[0]),33).mul(d),o=Xx(t,l,o[1].mul(d),r.add(a[0])),a=Xx(t,l+32,i.add(a[1]),s.add(Vt(t,l+16))),[i,r]=[r,i],xc(xc(o[0],a[0],d).add(hk(s).mul(UZ)).add(i),xc(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gp(t,e){return e==="string"?zu(t):g_([t],e)}function cKe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function g_(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=md(t)),X().getBool("DEBUG")&&$qe(t,e),cKe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Ji(){return X().platform.now()}function zu(t,e="utf-8"){return e=e||"utf-8",X().platform.encode(t,e)}function Zh(t,e="utf-8"){return e=e||"utf-8",X().platform.decode(t,e)}function Ai(t){return X().platform.isTypedArray!=null?X().platform.isTypedArray(t):RZ(t)}function md(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||pd(t)||t==null||Ai(t)&&n)e.push(t);else if(Array.isArray(t)||Ai(t))for(let r=0;r<t.length;++r)md(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)md(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uKe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new fKe)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=Ji();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const c of s)c.dataSync();o=Promise.resolve({kernelMs:Ji()-a})}if(X().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(d=>{dKe(d,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function dKe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class fKe{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?Jf(`${s}ms`,9):s.error,l=Jf(e,25),c=n.rank,u=n.size,d=Jf(n.shape.toString(),14);let f="";for(const p in i){const m=i[p];if(m!=null){const g=m.shape||n.shape,y=g.length;f+=`${p}: ${y}D ${y>0?g:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hKe(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const f=u[d];let p=!1;for(let m=0;m<e.length;m++)if(r[f.id]){c.outputs.forEach(g=>r[g.id]=!0),p=!0,s[c.id]=!0;break}if(p)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(const f in u)i[u[f].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&o[c.id]){const u={};for(const f in c.inputs){const p=c.inputs[f];r[p.id]&&(u[f]=p)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function pKe(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=i.inputs[l];if(!gn(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yB=20,Am=3,SN=7;function mKe(t,e,n,r){const s=yr(e),i=gKe(t,e,n,s),o=e.length,a=$b(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function gKe(t,e,n,r){const s=ce(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?Vm(t):t;if(a>1)for(let c=0;c<s/i;c++){const u=c*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],zm(l[u+d],0,n).length)}return o}function zm(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(SN))} + ${parseFloat(t[1].toFixed(SN))}j`:p_(t)?r=`'${t}'`:n==="bool"?r=zZ(t):r=parseFloat(t.toFixed(SN)).toString(),Jf(r,e)}function zZ(t){return t===0?"false":"true"}function $b(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const g=Vm(t);return[zm(g[0],0,n)]}return n==="bool"?[zZ(t[0])]:[t[0].toString()]}if(l===1){if(a>yB){const y=Am*o;let v=Array.from(t.slice(0,y)),x=Array.from(t.slice((a-Am)*o,a*o));return n==="complex64"&&(v=Vm(v),x=Vm(x)),["["+v.map((b,w)=>zm(b,s[w],n)).join(", ")+", ..., "+x.map((b,w)=>zm(b,s[a-Am+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?Vm(t):Array.from(t)).map((y,v)=>zm(y,s[v],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*o,f=[];if(a>yB){for(let g=0;g<Am;g++){const y=g*d,v=y+d;f.push(...$b(t.slice(y,v),c,n,u,s,!1))}f.push("...");for(let g=a-Am;g<a;g++){const y=g*d,v=y+d;f.push(...$b(t.slice(y,v),c,n,u,s,g===a-1))}}else for(let g=0;g<a;g++){const y=g*d,v=y+d;f.push(...$b(t.slice(y,v),c,n,u,s,g===a-1))}const p=l===2?",":"";f[0]="["+(a>0?f[0]+p:"");for(let g=1;g<f.length-1;g++)f[g]=" "+f[g]+p;let m=`,
`;for(let g=2;g<l;g++)m+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(i?"":m),f}function Vm(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ep{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ce(e),r!=null){const s=r.length;D(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Zn(n,this.size),this.strides=yr(e)}set(e,...n){n.length===0&&(n=[0]),D(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return eo().makeTensor(this.values,this.shape,this.dtype)}}let eo=null,cf=null;function yKe(t){eo=t}function vKe(t){cf=t}class kn{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ce(e),this.strides=yr(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return cf.buffer(this.shape,this.dtype,e)}bufferSync(){return cf.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return ik(this.shape,e,this.dtype==="complex64")}arraySync(){return ik(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=eo().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Zh(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),eo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=eo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Zh(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await eo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),eo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return cf.print(this,e)}clone(){return this.throwIfDisposed(),cf.clone(this)}toString(e=!1){const n=this.dataSync();return mKe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),cf.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),eo().makeVariable(this,e,n,r)}}Object.defineProperty(kn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function VZ(){return I2("Tensor",()=>kn)}VZ();class Zw extends kn{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!gn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);eo().disposeTensor(this),this.dataId=e.dataId,eo().incRef(this,null)}dispose(){eo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Zw,Symbol.hasInstance,{value:t=>t instanceof kn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var vB;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(vB||(vB={}));var pk;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(pk||(pk={}));var mk;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(mk||(mk={}));var gk;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(gk||(gk={}));var yk;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(yk||(yk={}));const xKe={float32:gk,int32:pk,bool:mk,complex64:yk};function ia(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return xKe[t][e]}function R2(t){return ia(t,"int32")}function HZ(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function GZ(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nn(t,e){if(t.dtype===e.dtype)return[t,e];const n=ia(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function bKe(t,e){D(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function qZ(t){const e=[];return KZ(t,e,new Set),e}function KZ(t,e,n){if(t==null)return;if(t instanceof kn){e.push(t);return}if(!wKe(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),KZ(i,e,n))}}function wKe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _N(t){return t.kernelName!=null}class xB{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class tp{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new xB}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(so(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new uKe(this.backendInstance),!0}setupRegisteredKernels(){uB(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){uB(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof FY)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,so(`Initialization of backend ${e} failed`),so(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return so(`Initialization of backend ${e} failed`),so(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return tp.nextTensorId++}nextVariableId(){return tp.nextVariableId++}clone(e){const n=z.runKernel($2,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return z.runKernel(O2,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(dk(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=_N(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(_N(e)){const{kernelName:m,inputs:g,attrs:y}=e;this.backendName==null&&this.backend;const v=dk(m,this.backendName);D(v!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),a=()=>{const x=this.backend.numDataIds();l=v.kernelFunc({inputs:g,attrs:y,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,x,b);const w=b.map(_=>_.rank!=null?_:this.makeTensorFromTensorInfo(_));if(s){const _=this.getTensorsForGradient(m,g,w);r=this.saveTensorsForBackwardMode(_)}return w}}else{const{forwardFunc:m}=e,g=y=>{s&&(r=y.map(v=>this.keep(this.clone(v))))};a=()=>{const y=this.backend.numDataIds();l=this.tidy(()=>m(this.backend,g));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,y,v),v}}const{inputs:u,attrs:d}=e,f=_N(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(p=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),n=p.outputs)}),s&&this.addTapeNode(c,u,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(m=>u[m]!=null?u[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=cB(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(D(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=i.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&p_(e[0])&&(i=e.map(l=>zu(l)));const o=s.write(i,n,r),a=new kn(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),c=Rqe(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new kn(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new Zw(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Yw(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Zw||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Yw(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=cB(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const f=r[d],p=Rc(f.size,f.dtype);return this.makeTensor(p,f.shape,f.dtype)}return u}),s(c.length>1?c:c[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=qZ(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(D(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));D(i instanceof kn,()=>"The result y returned by f() must be a tensor.");const o=hKe(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??SKe(i.shape),pKe(a,o,c=>this.tidy(c),_Ke);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return D(rk(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{D(n.every(a=>a instanceof kn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),D(r.value instanceof kn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),D(rk(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];D(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),D(u.every(f=>f instanceof kn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((f,p)=>{d[p]=()=>f}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Ji(),r=await this.backend.time(e);return r.wallMs=Ji()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new xB;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}tp.nextTensorId=0;tp.nextVariableId=0;function SKe(t){const e=UY(ce(t),"float32");return z.makeTensor(e,t,"float32")}function XZ(){const t=zY();if(t._tfengine==null){const e=new Mqe(t);t._tfengine=new tp(e)}return Uqe(t._tfengine.ENV),yKe(()=>t._tfengine),t._tfengine}const z=XZ();function _Ke(t,e){const n={a:t,b:e};return z.runKernel(k2,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CKe(){return typeof navigator<"u"&&navigator!=null}function YZ(t){if(t||CKe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function QZ(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ds=X();ds.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ds.registerFlag("IS_BROWSER",()=>QZ());ds.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ds.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ds.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ds.registerFlag("PROD",()=>!1);ds.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ds.getBool("DEBUG"));ds.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ds.registerFlag("IS_TEST",()=>!1);ds.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ds.getBool("DEBUG"));ds.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ds.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ds.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yc(t,e){let n=t;if(Ai(t))return e==="string"?[]:[t.length];if(HZ(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(GZ(t))return[t.buffer.size/(e==null?4:Yw(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Ai(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&X().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&JZ(t,r,[]),r}function JZ(t,e,n){if(n=n||[],!Array.isArray(t)&&!Ai(t)){D(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}D(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),D(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)JZ(t[s],r,n.concat(s))}function bB(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function A(t,e,n,r="numeric"){if(t instanceof VZ())return bB(r,t.dtype,e,n),t;let s=qv(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),bB(r,s,e,n),t==null||!Ai(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=Yc(t,s);!Ai(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?g_(t,s):md(t,[],!0);return z.makeTensor(a,i,s)}function e1(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>A(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZZ="__op";function U(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+ZZ;const s=(...i)=>{z.startScope(n);try{const o=r(...i);return pd(o)&&console.error("Cannot return a Promise inside of tidy."),z.endScope(o),o}catch(o){throw z.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NKe(t,e){const n=A(t,"real","complex"),r=A(e,"imag","complex");oi(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return z.runKernel(fQ,s)}const Dc=U({complex_:NKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qc(t,e,n,r){if(r==null)r=qv(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(GZ(t)||HZ(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return z.backend.createTensorFromGPUData(t,e||n,r)}if(!Ai(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){ai(e);const s=ce(e),i=ce(n);D(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==ce(e.slice(o)):!0;D(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Ai(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?g_(t,r):md(t,[],!0),z.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jo(t,e,n){const r=Yc(t,n);return Qc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gd={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class ko{static join(e){return new ko(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Ai(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,f=a,m=Math.min(n,c.end)-c.start,g=new Uint8Array(c.buffer,d,m-d);if(o.set(g,f),a+=g.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=EKe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function EKe(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kl(){return z}function pt(t,e){return z.tidy(t,e)}function cs(t){qZ(t).forEach(n=>n.dispose())}function zo(t){return z.keep(t)}function TKe(){return z.backendName}function IKe(t,e,n=1){return z.registerBackend(t,e,n)}function kKe(){return z.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jc=4;async function OKe(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const f=await l.bytes(),p=f.reduce((y,v)=>y+v.length,0)+jc*f.length,m=new Uint8Array(p);let g=0;for(let y=0;y<f.length;y++){const v=f[y],x=new Uint8Array(new Uint32Array([v.length]).buffer);m.set(x,g),g+=jc,m.set(v,g),g+=v.length}d(m)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const i=await Promise.all(r);return{data:PKe(i),specs:n}}function eee(t,e){const n=new ko(t),r={};let s=0;for(const i of e){const o=$Ke(i,(a,l)=>n.slice(s+a,s+l));r[i.name]=tee(i,n.slice(s,s+o)),s+=o}return r}function $Ke(t,e){const n=ce(t.shape);let r;if("quantization"in t){const s=t.quantization;r=gd[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=jc+new Uint32Array(e(s,s+jc))[0];return s}else r=gd[t.dtype];return n*r}async function AKe(t,e){const n=ce(t.shape);let r;if("quantization"in t){const s=t.quantization;r=gd[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=jc+new Uint32Array(await e(s,s+jc))[0];return s}else r=gd[t.dtype];return n*r}function tee(t,e){const n=t.name,r=t.dtype,s=t.shape,i=ce(s);let o,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=gd[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=f*l.scale+l.min}}else if(l.dtype==="float16")o=BKe()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=Math.round(f*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){const l=ce(t.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(a,a+jc))[0];a+=jc;const d=new Uint8Array(e.slice(a,a+u));o.push(d),a+=u}}else{const l=gd[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let m=0;m<c.length;m++)c[m]=o[m*2],u[m]=o[m*2+1];const d=Jo(c,s,"float32"),f=Jo(u,s,"float32"),p=Dc(d,f);return d.dispose(),f.dispose(),p}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}return Jo(o,s,r)}async function wB(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function nee(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const o=await AKe(i,async(c,u)=>(s=await wB(r,s,u),s.slice(c,u)));s=await wB(r,s,o);const a=s.slice(0,o);s=s.slice(o);const l=tee(i,a);if(n[i.name]=l,TKe()==="webgpu"){const c=kKe();"uploadToGPU"in c&&ce(l.shape)>=X().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function PKe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const D2=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function SB(t){return D2?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function RKe(t){if(D2)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function DKe(t){if(D2){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function jKe(t){return ko.join(t)}function _B(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function ree(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function see(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function j2(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),see(t,n,r)}function Kv(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:SB(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:SB(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new ko(t.weightData).byteLength}}function vk(t){const e=[];for(const n of t)e.push(...n.weights);return e}function MKe(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function LKe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function FKe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function BKe(){const t=MKe(),e=LKe(),n=FKe();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];i[o]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return hn.instance==null&&(hn.instance=new hn),hn.instance}static registerSaveRouter(e){hn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){hn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return hn.getHandlers(e,"save")}static getLoadHandlers(e,n){return hn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?hn.getInstance().loadRouters:hn.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}const UKe=t=>hn.registerSaveRouter(t),WKe=t=>hn.registerLoadRouter(t),zKe=t=>hn.getSaveHandlers(t),VKe=(t,e)=>hn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xk="tensorflowjs",bk=1,Ou="models_store",Zl="model_info_store";function iee(){if(!X().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function wk(t){const e=t.result;e.createObjectStore(Ou,{keyPath:"modelPath"}),e.createObjectStore(Zl,{keyPath:"modelPath"})}class yd{constructor(e){if(this.indexedDB=iee(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(xk,bk);i.onupgradeneeded=()=>wk(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(Ou,"readonly"),c=a.objectStore(Ou).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),s(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=ko.join(n.weightData);const a=Kv(n),l=o.transaction(Zl,"readwrite");let c=l.objectStore(Zl),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return s(f)}let d;u.onsuccess=()=>{d=o.transaction(Ou,"readwrite");const f=d.objectStore(Ou);let p;try{p=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(m){return s(m)}p.onsuccess=()=>r({modelArtifactsInfo:a}),p.onerror=m=>{c=l.objectStore(Zl);const g=c.delete(this.modelPath);g.onsuccess=()=>(o.close(),s(p.error)),g.onerror=y=>(o.close(),s(p.error))}},u.onerror=f=>(o.close(),s(u.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}yd.URL_SCHEME="indexeddb://";const oee=t=>X().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(yd.URL_SCHEME)?HKe(t.slice(yd.URL_SCHEME.length)):null;hn.registerSaveRouter(oee);hn.registerLoadRouter(oee);function HKe(t){return new yd(t)}function GKe(t){return t.startsWith(yd.URL_SCHEME)?t.slice(yd.URL_SCHEME.length):t}class qKe{constructor(){this.indexedDB=iee()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(xk,bk);r.onupgradeneeded=()=>wk(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(Zl,"readonly"),a=i.objectStore(Zl).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=GKe(e),new Promise((n,r)=>{const s=this.indexedDB.open(xk,bk);s.onupgradeneeded=()=>wk(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(Zl,"readwrite"),a=o.objectStore(Zl),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=i.transaction(Ou,"readwrite");const p=c.objectStore(Ou).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=m=>r(l.error)};u.onsuccess=d,u.onerror=f=>(d(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),o.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ia="/",uf="tensorflowjs_models",aee="info",KKe="model_topology",XKe="weight_specs",YKe="weight_data",QKe="model_metadata";function lee(t){return{info:[uf,t,aee].join(Ia),topology:[uf,t,KKe].join(Ia),weightSpecs:[uf,t,XKe].join(Ia),weightData:[uf,t,YKe].join(Ia),modelMetadata:[uf,t,QKe].join(Ia)}}function cee(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function JKe(t){const e=t.split(Ia);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ia)}function ZKe(t){return t.startsWith(vd.URL_SCHEME)?t.slice(vd.URL_SCHEME.length):t}class vd{constructor(e){if(!X().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=lee(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=Kv(e),i=ko.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,RKe(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw cee(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=DKe(o),n}}vd.URL_SCHEME="localstorage://";const uee=t=>X().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(vd.URL_SCHEME)?e9e(t.slice(vd.URL_SCHEME.length)):null;hn.registerSaveRouter(uee);hn.registerLoadRouter(uee);function e9e(t){return new vd(t)}class t9e{constructor(){D(X().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),D(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=uf+Ia,r=Ia+aee;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=JKe(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=ZKe(e);const n=lee(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return cee(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zf="://";class Mr{constructor(){this.managers={}}static getInstance(){return Mr.instance==null&&(Mr.instance=new Mr),Mr.instance}static registerManager(e,n){D(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Zf)&&(e=e.slice(0,e.indexOf(Zf))),D(e.length>0,()=>"scheme must not be an empty string.");const r=Mr.getInstance();D(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Mr.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Mr.getInstance().managers)}}function Ab(t){if(t.indexOf(Zf)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Mr.getSchemes().join(",")}`);return{scheme:t.split(Zf)[0],path:t.split(Zf)[1]}}async function dee(t,e,n=!1){D(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=hn.getLoadHandlers(t);D(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),D(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=hn.getSaveHandlers(e);D(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),D(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],a=Ab(t).scheme,l=Ab(t).path,c=a===Ab(t).scheme,u=await s.load();n&&c&&await Mr.getManager(a).removeModel(l);const d=await o.save(u);return n&&!c&&await Mr.getManager(a).removeModel(l),d.modelArtifactsInfo}async function n9e(){const t=Mr.getSchemes(),e={};for(const n of t){const r=await Mr.getManager(n).listModels();for(const s in r){const i=n+Zf+s;e[i]=r[s]}}return e}async function r9e(t){const e=Ab(t);return Mr.getManager(e.scheme).removeModel(e.path)}async function s9e(t,e){return dee(t,e,!1)}async function i9e(t,e){return dee(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o9e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!X().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return RZ(e)}}if(X().get("IS_BROWSER")){X().setPlatform("browser",new o9e);try{Mr.registerManager(vd.URL_SCHEME,new t9e)}catch{}try{Mr.registerManager(yd.URL_SCHEME,new qKe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a9e={importFetch:()=>require("node-fetch")};let CN;class l9e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return X().global.fetch!=null?X().global.fetch(e,n):(CN==null&&(CN=a9e.importFetch()),CN(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}X().get("IS_NODE")&&!X().get("IS_BROWSER")&&X().setPlatform("node",new l9e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yn(t,e="float32",n){return e=e||"float32",ai(t),new ep(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9e(t,e){const n=A(t,"x","cast");if(!Aqe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return z.runKernel(O2,r,s)}const On=U({cast_:c9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u9e(t){const n={x:A(t,"x","clone","string_or_numeric")};return z.runKernel($2,n)}const bc=U({clone_:u9e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fee(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */XZ();const d9e={buffer:yn,cast:On,clone:bc,print:fee};vKe(d9e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f9e(t,e){let n=A(t,"a","add"),r=A(e,"b","add");[n,r]=Nn(n,r);const s={a:n,b:r};return z.runKernel(k2,s)}const Be=U({add_:f9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h9e(t,e){let n=A(t,"a","floorDiv"),r=A(e,"b","floorDiv");[n,r]=Nn(n,r);const s={a:n,b:r};return z.runKernel(VQ,s)}const hee=U({floorDiv_:h9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p9e(t,e){let n=A(t,"a","div"),r=A(e,"b","div");if([n,r]=Nn(n,r),n.dtype==="int32"&&r.dtype==="int32")return hee(n,r);const s={a:n,b:r},i={};return z.runKernel(AQ,s,i)}const It=U({div_:p9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9e(t,e){let n=A(t,"a","mul"),r=A(e,"b","mul");[n,r]=Nn(n,r);const s={a:n,b:r};return z.runKernel(SJ,s)}const me=U({mul_:m9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g9e(t){const e=A(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return z.runKernel(hQ,n)}else{const n={x:e};return z.runKernel(VY,n)}}const Bs=U({abs_:g9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9e(t){const n={x:A(t,"x","acos")};return z.runKernel(HY,n)}const v9e=U({acos_:y9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x9e(t){const n={x:A(t,"x","acosh")};return z.runKernel(GY,n)}const b9e=U({acosh_:x9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9e(t){D(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),D(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>A(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!gn(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return z.runKernel(qY,r)}const S9e=U({addN_:w9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _9e(t,e=null,n=!1){const s={x:A(t,"x","all","bool")},i={axis:e,keepDims:n};return z.runKernel(KY,s,i)}const C9e=U({all_:_9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9e(t,e=null,n=!1){const s={x:A(t,"x","any","bool")},i={axis:e,keepDims:n};return z.runKernel(XY,s,i)}const E9e=U({any_:N9e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9e(t,e=0){const r={x:A(t,"x","argMax")},s={axis:e};return z.runKernel(YY,r,s)}const I9e=U({argMax_:T9e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k9e(t,e=0){const r={x:A(t,"x","argMin")},s={axis:e};return z.runKernel(QY,r,s)}const O9e=U({argMin_:k9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $9e(t){const n={x:A(t,"x","asin")};return z.runKernel(JY,n)}const A9e=U({asin_:$9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P9e(t){const n={x:A(t,"x","asinh")};return z.runKernel(ZY,n)}const R9e=U({asinh_:P9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9e(t){const n={x:A(t,"x","atan")};return z.runKernel(eQ,n)}const j9e=U({atan_:D9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M9e(t,e){let n=A(t,"a","atan2"),r=A(e,"b","atan2");[n,r]=Nn(n,r);const s={a:n,b:r};return z.runKernel(nQ,s)}const L9e=U({atan2_:M9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F9e(t){const n={x:A(t,"x","atanh")};return z.runKernel(tQ,n)}const B9e=U({atanh_:F9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pee(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=qp(s);return li(t,a,n,i,r,null,null,l)}function Bd(t,e,n,r,s,i,o="channelsLast"){const[a,l]=zy(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return li(t,c,n,r,s,i,!1,o)}function Xv(t,e,n,r,s,i,o="NDHWC"){const[a,l,c]=Sk(e);let u,d;if(o==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Yv(t,u,n,r,s,!1,d,i)}function li(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,p,,m]=e,[g,y]=zy(n),[v,x]=zy(r),b=eh(f,v),w=eh(p,x),{padInfo:_,outHeight:C,outWidth:E}=z9e(s,c,u,g,y,b,w,i,a),N=o?m*d:m;let I;return a==="channelsFirst"?I=[l,N,C,E]:a==="channelsLast"&&(I=[l,C,E,N]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:C,outWidth:E,outChannels:N,padInfo:_,strideHeight:g,strideWidth:y,filterHeight:f,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:w,dilationHeight:v,dilationWidth:x,inShape:t,outShape:I,filterShape:e}}function Yv(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,c,u,d,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d,f]=t;else if(o==="channelsFirst")[l,f,c,u,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,m,g,,y]=e,[v,x,b]=Sk(n),[w,_,C]=Sk(r),E=eh(p,w),N=eh(m,_),I=eh(g,C),{padInfo:$,outDepth:O,outHeight:k,outWidth:R}=V9e(s,c,u,d,v,x,b,E,N,I,a),M=i?y*f:y;let B;return o==="channelsFirst"?B=[l,M,O,k,R]:o==="channelsLast"&&(B=[l,O,k,R,M]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:f,outDepth:O,outHeight:k,outWidth:R,outChannels:M,padInfo:$,strideDepth:v,strideHeight:x,strideWidth:b,filterDepth:p,filterHeight:m,filterWidth:g,effectiveFilterDepth:E,effectiveFilterHeight:N,effectiveFilterWidth:I,dilationDepth:w,dilationHeight:_,dilationWidth:C,inShape:t,outShape:B,filterShape:e}}function U9e(t,e,n,r,s){r==null&&(r=M2(t,e,n));const i=t[0],o=t[1],a=Vy((i-e+2*r)/n+1,s),l=Vy((o-e+2*r)/n+1,s);return[a,l]}function W9e(t,e,n,r,s,i){s==null&&(s=M2(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=Vy((t[a]-e[a]+2*s)/r[a]+1,i));return o}function M2(t,e,n,r=1){const s=eh(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function zy(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Sk(t){return typeof t=="number"?[t,t,t]:t}function eh(t,e){return e<=1?t:t+(t-1)*(e-1)}function z9e(t,e,n,r,s,i,o,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=U9e([e,n],i,r,t,a);u=p[0],d=p[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/s);const f=Math.max(0,(u-1)*r+i-e),p=Math.max(0,(d-1)*s+o-n),m=Math.floor(f/2),g=f-m,y=Math.floor(p/2),v=p-y;c={top:m,bottom:g,left:y,right:v,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],p=l==="channelsLast"?t[1][1]:t[2][1],m=l==="channelsLast"?t[2][0]:t[3][0],g=l==="channelsLast"?t[2][1]:t[3][1];c={top:f,bottom:p,left:m,right:g,type:f===0&&p===0&&m===0&&g===0?"VALID":"EXPLICIT"},u=Vy((e-i+f+p)/r+1,a),d=Vy((n-o+m+g)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function V9e(t,e,n,r,s,i,o,a,l,c,u){let d,f,p,m;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=W9e([e,n,r,1],[a,l,c],1,[s,i,o],t,u);f=y[0],p=y[1],m=y[2]}else if(t==="same"){f=Math.ceil(e/s),p=Math.ceil(n/i),m=Math.ceil(r/o);const g=(f-1)*s+a-e,y=(p-1)*i+l-n,v=(m-1)*o+c-r,x=Math.floor(g/2),b=g-x,w=Math.floor(y/2),_=y-w,C=Math.floor(v/2),E=v-C;d={top:w,bottom:_,left:C,right:E,front:x,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:p,outWidth:m}}function Vy(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Hy(t){const[e,n,r]=zy(t);return e===1&&n===1&&r===1}function Ps(t,e){return Hy(t)||Hy(e)}function xd(t){return zy(t).every(e=>e>0)}function qp(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Mi(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")D(Qh(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{D(Qh(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H9e(t,e){const r={x:A(t,"x","reshape","string_or_numeric")},s={shape:e};return z.runKernel(WJ,r,s)}const te=U({reshape_:H9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G9e(t,e,n,r,s){const i=A(t,"x","avgPool","float32"),o=1;D(Ps(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=te(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Mi("avgPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let d=z.runKernel(rQ,c,u);return d=On(d,i.dtype),l?te(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const mee=U({avgPool_:G9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q9e(t,e,n,r,s,i="NDHWC"){const o=A(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),D(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),D(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),D(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Mi("avgPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let d=z.runKernel(sQ,c,u);return d=On(d,a.dtype),l?te(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const K9e=U({avgPool3d_:q9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X9e(t,e=0){D(t.length>=1,()=>"Pass at least one tensor to concat");const n=e1(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return bc(n[0]);const r=n,s={axis:e};return z.runKernel(pQ,r,s)}const vr=U({concat_:X9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y9e(t,e,n=!1,r=!1){let s=A(t,"a","matMul"),i=A(e,"b","matMul");[s,i]=Nn(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return z.runKernel(iQ,o,a)}const Rt=U({matMul_:Y9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q9e(t){const n={x:A(t,"x","sigmoid","float32")};return z.runKernel(sZ,n)}const Vu=U({sigmoid_:Q9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9e(t,e,n){const r=A(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return z.runKernel(eZ,s,i)}const tt=U({slice_:J9e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z9e(t){const n={x:A(t,"x","tanh","float32")};return z.runKernel(CZ,n)}const _k=U({tanh_:Z9e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7e(t,e,n,r,s,i){const o=A(t,"forgetBias","basicLSTMCell"),a=A(e,"lstmKernel","basicLSTMCell"),l=A(n,"lstmBias","basicLSTMCell"),c=A(r,"data","basicLSTMCell"),u=A(s,"c","basicLSTMCell"),d=A(i,"h","basicLSTMCell"),f=vr([c,d],1),p=Rt(f,a),m=Be(p,l),g=m.shape[0],y=m.shape[1]/4,v=[g,y],x=tt(m,[0,0],v),b=tt(m,[0,y],v),w=tt(m,[0,y*2],v),_=tt(m,[0,y*3],v),C=Be(me(Vu(x),_k(b)),me(u,Vu(Be(o,w)))),E=me(_k(C),Vu(_));return[C,E]}const t7e=U({basicLSTMCell_:e7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7e(t,e,n){const r=A(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);D(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),D(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),D(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return z.runKernel(oQ,i,o)}const gee=U({batchToSpaceND_:n7e});function r7e(t){let e;return t.rank===0||t.rank===1?e=te(t,[1,1,1,t.size]):t.rank===2?e=te(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7e(t,e,n,r,s,i){i==null&&(i=.001);const o=A(t,"x","batchNorm"),a=A(e,"mean","batchNorm"),l=A(n,"variance","batchNorm");let c;s!=null&&(c=A(s,"scale","batchNorm"));let u;r!=null&&(u=A(r,"offset","batchNorm")),D(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:r7e(o),scale:c,offset:u,mean:a,variance:l},p={varianceEpsilon:i},m=z.runKernel(HQ,f,p);return te(m,o.shape)}const y_=U({batchNorm_:s7e});function i7e(t,e,n,r,s,i){const o=A(t,"x","batchNorm"),a=A(e,"mean","batchNorm"),l=A(n,"variance","batchNorm");let c;s!=null&&(c=A(s,"scale","batchNorm"));let u;return r!=null&&(u=A(r,"offset","batchNorm")),D(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),D(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),D(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&D(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&D(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),y_(o,a,l,u,c,i)}const o7e=U({batchNorm2d_:i7e});function a7e(t,e,n,r,s,i){const o=A(t,"x","batchNorm"),a=A(e,"mean","batchNorm"),l=A(n,"variance","batchNorm");let c;s!=null&&(c=A(s,"scale","batchNorm"));let u;return r!=null&&(u=A(r,"offset","batchNorm")),D(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),D(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),D(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&D(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&D(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),y_(o,a,l,u,c,i)}const l7e=U({batchNorm3d_:a7e});function c7e(t,e,n,r,s,i){const o=A(t,"x","batchNorm"),a=A(e,"mean","batchNorm"),l=A(n,"variance","batchNorm");let c;s!=null&&(c=A(s,"scale","batchNorm"));let u;return r!=null&&(u=A(r,"offset","batchNorm")),D(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),D(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),D(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&D(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&D(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),y_(o,a,l,u,c,i)}const u7e=U({batchNorm4d_:c7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d7e(t,e,n){const r=A(t,"x","bincount"),s=A(e,"weights","bincount");D(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),D(n>=0,()=>`size must be non-negative, but got ${n}.`),D(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return z.runKernel(aQ,i,o)}const yee=U({bincount_:d7e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f7e(t,e){const n=A(t,"x","bitwiseAnd"),r=A(e,"y","bitwiseAnd");if(!gn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return z.runKernel(lQ,s)}const h7e=U({bitwiseAnd_:f7e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p7e(t,e){const n=A(t,"s0","broadcastArgs","int32"),r=A(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return z.runKernel(cQ,s)}const m7e=U({broadcastArgs_:p7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g7e(t,e){let n=A(t,"broadcastTo","x");const r=n.shape;if(ai(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=te(n,c)}const s=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return bc(n);const a={x:n},l={reps:i};return z.runKernel(A2,a,l)}const vg=U({broadcastTo_:g7e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y7e(t){const n={x:A(t,"x","ceil","float32")};return z.runKernel(uQ,n)}const v7e=U({ceil_:y7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qv(t,e,n){ai(t),n=n||qv(e);const r={shape:t,value:e,dtype:n};return z.runKernel(UQ,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x7e(t,e,n){const r=A(t,"x","clipByValue");if(D(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Qv(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return z.runKernel(dQ,s,i)}const b7e=U({clipByValue_:x7e});function w7e(t){return vr(t,0)}const S7e=U({concat1d_:w7e});function _7e(t,e){return vr(t,e)}const L2=U({concat2d_:_7e});function C7e(t,e){return vr(t,e)}const N7e=U({concat3d_:C7e});function E7e(t,e){return vr(t,e)}const T7e=U({concat4d_:E7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I7e(t,e,n,r,s="NHWC",i=[1,1],o){const a=A(t,"x","conv2d","float32"),l=A(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),D(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Mi("conv2d",r,o);const d=s==="NHWC"?c.shape[3]:c.shape[1];D(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),D(Ps(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),D(xd(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),D(xd(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:c,filter:l},p={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},m=z.runKernel(mQ,f,p);return u?te(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const v_=U({conv2d_:I7e});function k7e(t,e,n,r,s="NWC",i=1,o){const a=A(t,"x","conv1d"),l=A(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=te(a,[1,a.shape[0],a.shape[1]])),D(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),D(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Mi("conv1d",r,o),D(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),D(Ps(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),D(xd(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),D(xd(n),()=>"Error in conv1D: Stride should be larger than 0."),D(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=te(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=te(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=v_(f,d,[1,n],r,"NHWC",[1,i],o);return u?te(y,[y.shape[2],y.shape[3]]):te(y,[y.shape[0],y.shape[2],y.shape[3]])}const O7e=U({conv1d_:k7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $7e(t,e,n,r,s,i="NHWC",o){D(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),D(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),D(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),D(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?l.shape[3]:l.shape[1];D(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),D(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Mi("conv2dDerInput",s,o);const f={dy:l,filter:n},p={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},m=z.runKernel(yQ,f,p);return c?te(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const vee=U({conv2DBackpropInput_:$7e});function A7e(t,e,n,r,s,i){const o=A(t,"x","conv2dTranspose"),a=A(e,"filter","conv2dTranspose");return vee(n,o,a,r,s,"NHWC",i)}const P7e=U({conv2dTranspose_:A7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R7e(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=A(t,"x","conv3d"),a=A(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),D(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),D(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),D(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),D(Ps(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),D(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),D(xd(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),D(xd(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:r,dataFormat:s,dilations:i},f=z.runKernel(vQ,u,d);return c?te(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const D7e=U({conv3d_:R7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j7e(t,e,n,r,s){D(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=te(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],c=o.shape[4];D(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),D(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),D(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),D(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),D(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},d={pad:s,strides:r,inputShape:i},f=z.runKernel(xQ,u,d);return a?te(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const M7e=U({conv3DBackpropInput_:j7e});function L7e(t,e,n,r,s){const i=A(t,"x","conv3dTranspose"),o=A(e,"filter","conv3dTranspose");return M7e(n,i,o,r,s)}const F7e=U({conv3dTranspose_:L7e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B7e(t){const n={x:A(t,"x","cos","float32")};return z.runKernel(bQ,n)}const U7e=U({cos_:B7e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7e(t){const n={x:A(t,"x","cosh","float32")};return z.runKernel(wQ,n)}const z7e=U({cosh_:W7e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7e(t,e=0,n=!1,r=!1){const i={x:A(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return z.runKernel(SQ,i,o)}const H7e=U({cumprod_:V7e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G7e(t,e=0,n=!1,r=!1){const i={x:A(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return z.runKernel(_Q,i,o)}const q7e=U({cumsum_:G7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K7e(t,e,n,r=!1){const s=A(t,"x","denseBincount"),i=A(e,"weights","denseBincount");D(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),D(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),D(n>=0,()=>`size must be non-negative, but got ${n}.`),D(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return z.runKernel(NQ,o,a)}const X7e=U({denseBincount_:K7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y7e(t,e,n="NHWC"){const r=A(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];D(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),D(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),D(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),D(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return z.runKernel(EQ,a,l)}const Q7e=U({depthToSpace_:Y7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J7e(t,e,n,r,s="NHWC",i=[1,1],o){const a=A(t,"x","depthwiseConv2d","float32"),l=A(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),D(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=s==="NHWC"?c.shape[3]:c.shape[1];D(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Mi("depthwiseConv2d",r,o);const f={x:c,filter:l},p={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},m=z.runKernel(TQ,f,p);return u?te(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const F2=U({depthwiseConv2d_:J7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7e(t){const n={x:A(t,"x","diag")};return z.runKernel(OQ,n)}const eXe=U({diag_:Z7e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tXe(t,e,n,r,s=[1,1],i="NHWC"){const o=A(t,"x","dilation2d"),a=A(e,"filter","dilation2d");D(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),D(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),D(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,c=!1;o.rank===3&&(l=te(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),D(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:n,pad:r,dilations:s},f=z.runKernel($Q,u,d);return c?te(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const nXe=U({dilation2d_:tXe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function xee(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function wt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rXe(t,e){let n=A(t,"a","equal","string_or_numeric"),r=A(e,"b","equal","string_or_numeric");[n,r]=Nn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(jQ,s)}const bee=U({equal_:rXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sXe(t,e,n){const r=A(e,"a","where"),s=A(n,"b","where"),i=A(t,"condition","where","bool"),o=wt(wt(i.shape,r.shape),s.shape),a=vg(i,o),l=vg(r,o),c=vg(s,o),u={condition:a,t:l,e:c};return z.runKernel(JJ,u)}const wc=U({where_:sXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iXe(t){const n={x:A(t,"x","zerosLike")};return z.runKernel(OZ,n)}const Zs=U({zerosLike_:iXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oXe(t,e){let n=A(t,"a","div"),r=A(e,"b","div");[n,r]=Nn(n,r);const s=It(n,r),i=Zs(s),o=bee(r,i);return wc(o,i,s)}const aXe=U({divNoNan_:oXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lXe(t,e){const n=A(t,"t1","dot"),r=A(e,"t2","dot");D((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(D(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=te(n,[1,-1]),a=te(r,[-1,1]),l=Rt(o,a);return te(l,[])}else if(n.rank===1&&r.rank===2){const o=te(n,[1,-1]),a=te(r,[r.shape[0],r.shape[1]]),l=Rt(o,a);return te(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=te(r,[-1,1]),a=Rt(n,o);return te(a,[a.size])}else{const o=te(r,[r.shape[0],r.shape[1]]);return Rt(n,o)}}const cXe=U({dot_:lXe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uXe(t,...e){const n=e.map((s,i)=>A(s,`tensors${i}`,"einsum")),r={equation:t};return z.runKernel(PQ,n,r)}const df=U({einsum_:uXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dXe(t){const n={x:A(t,"x","elu","float32")};return z.runKernel(RQ,n)}const wee=U({elu_:dXe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fXe(t,e){const n=A(t,"x","ensureShape","string_or_numeric");if(!kqe(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const hXe=U({ensureShape_:fXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pXe(t){let e=A(t,"x","erf");D(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=On(e,"float32"));const n={x:e};return z.runKernel(DQ,n)}const mXe=U({erf_:pXe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function See(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function pa(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function ci(t,e){const n=e.map(r=>1);return See(t,n,e)}function Oo(t,e,n){D(B2(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Li(t,e){if(B2(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function U2(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Fi(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gXe(t,e=null,n=!1){const s={x:A(t,"x","max")},i={reductionIndices:e,keepDims:n};return z.runKernel(dJ,s,i)}const th=U({max_:gXe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yXe(t,e=null,n=!1){const s={x:A(t,"x","min")},i={axis:e,keepDims:n};return z.runKernel(yJ,s,i)}const Ck=U({min_:yXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vXe(t,e){let n=A(t,"base","pow"),r=A(e,"exp","pow");[n,r]=Nn(n,r);const s={a:n,b:r};return z.runKernel(AJ,s)}const Gy=U({pow_:vXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xt(t,e){if((Ai(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ai(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Qc(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xXe(t){const n={x:A(t,"x","sqrt","float32")};return z.runKernel(oZ,n)}const cl=U({sqrt_:xXe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bXe(t){const e=A(t,"x","square"),n={};return z.runKernel("Square",{x:e},n)}const yo=U({square_:bXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wXe(t,e=null,n=!1){let r=A(t,"x","sum");r.dtype==="bool"&&(r=On(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return z.runKernel(aZ,s,i)}const Yt=U({sum_:wXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SXe(t,e="euclidean",n=null,r=!1){t=A(t,"x","norm");const s=_ee(t,e,n);let i=s.shape;if(r){const o=tr(n,t.shape);i=ci(s.shape,o)}return te(s,i)}function _ee(t,e,n=null){if(t.rank===0)return Bs(t);if(t.rank!==1&&n===null)return _ee(te(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Yt(Bs(t),n);if(e===1/0)return th(Bs(t),n);if(e===-1/0)return Ck(Bs(t),n);if(e==="euclidean"||e===2)return cl(Yt(Gy(Bs(t),xt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return th(Yt(Bs(t),n[0]),n[1]-1);if(e===1/0)return th(Yt(Bs(t),n[1]),n[0]);if(e===-1/0)return Ck(Yt(Bs(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return cl(Yt(yo(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const x_=U({norm_:SXe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Xe(t,e=null,n=!1){return x_(t,"euclidean",e,n)}const CXe=U({euclideanNorm_:_Xe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NXe(t){const n={x:A(t,"x","exp")};return z.runKernel(MQ,n)}const bd=U({exp_:NXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EXe(t,e=0){const n=A(t,"x","expandDims","string_or_numeric");D(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return z.runKernel(LQ,r,s)}const Na=U({expandDims_:EXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TXe(t){const n={x:A(t,"x","expm1")};return z.runKernel(FQ,n)}const IXe=U({expm1_:TXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kXe(t,e){const n=A(t,"x","tile","string_or_numeric");D(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return z.runKernel(A2,r,s)}const xg=U({tile_:kXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OXe(t,e,n,r="float32"){e==null&&(e=t);const s=yn([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=te(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return xg(Na(o,0),[n[0],1,1]);if(n.length===2)return xg(Na(Na(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return xg(Na(Na(Na(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Cee=U({eye_:OXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Xe(t){const n={x:A(t,"x","floor","float32")};return z.runKernel(zQ,n)}const Nee=U({floor_:$Xe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AXe(t,e,n=0,r=0){const s=A(t,"x","gather"),i=A(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return z.runKernel(GQ,o,a)}const Eee=U({gather_:AXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PXe(t,e){let n=A(t,"a","greater","string_or_numeric"),r=A(e,"b","greater","string_or_numeric");[n,r]=Nn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(KQ,s)}const b_=U({greater_:PXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RXe(t,e){let n=A(t,"a","greaterEqual","string_or_numeric"),r=A(e,"b","greaterEqual","string_or_numeric");[n,r]=Nn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(XQ,s)}const Tee=U({greaterEqual_:RXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DXe(t){const n={input:A(t,"input","imag")};return z.runKernel(QQ,n)}const w_=U({imag_:DXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jXe(t){const n={x:A(t,"x","isFinite")};return z.runKernel(JQ,n)}const MXe=U({isFinite_:jXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LXe(t){const n={x:A(t,"x","isInf")};return z.runKernel(ZQ,n)}const FXe=U({isInf_:LXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BXe(t){const n={x:A(t,"x","isNaN")};return z.runKernel(eJ,n)}const UXe=U({isNaN_:BXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WXe(t,e=.2){const r={x:A(t,"x","leakyRelu")},s={alpha:e};return z.runKernel(tJ,r,s)}const Iee=U({leakyRelu_:WXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zXe(t,e){let n=A(t,"a","less","string_or_numeric"),r=A(e,"b","less","string_or_numeric");[n,r]=Nn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(nJ,s)}const Nk=U({less_:zXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VXe(t,e){let n=A(t,"a","lessEqual","string_or_numeric"),r=A(e,"b","lessEqual","string_or_numeric");[n,r]=Nn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(rJ,s)}const W2=U({lessEqual_:VXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HXe(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return z.runKernel(sJ,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GXe(t,e=5,n=1,r=1,s=.5){const i=A(t,"x","localResponseNormalization");D(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),D(Qh(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=te(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:s},u=z.runKernel(uJ,l,c);return a?te(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const qXe=U({localResponseNormalization_:GXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KXe(t){const n={x:A(t,"x","log","float32")};return z.runKernel(iJ,n)}const qy=U({log_:KXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XXe(t){const n={x:A(t,"x","log1p")};return z.runKernel(oJ,n)}const kee=U({log1p_:XXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YXe(t,e){D(rk(t),()=>"The f passed in variableGrads(f) must be a function"),D(e==null||Array.isArray(e)&&e.every(c=>c instanceof Zw),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in z.registeredVariables)e.push(z.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),D(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=z.gradients(t,e,null,i);D(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),D(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function ul(t){return z.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QXe(t){const n={x:A(t,"x","neg")};return z.runKernel(_J,n)}const Zo=U({neg_:QXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JXe(t){const n={x:A(t,"x","softplus")};return z.runKernel(iZ,n)}const Oee=U({softplus_:JXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZXe(t){const e=A(t,"x","logSigmoid");return ul(r=>({value:Zo(Oee(Zo(r))),gradFunc:o=>me(o,Vu(Zo(r)))}))(e)}const eYe=U({logSigmoid_:ZXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tYe(t,e){let n=A(t,"a","sub"),r=A(e,"b","sub");[n,r]=Nn(n,r);const s={a:n,b:r};return z.runKernel(SZ,s)}const et=U({sub_:tYe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nYe(t,e=-1){const n=A(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return ul((s,i)=>{const a=th(s,e,!0),l=et(s,a),c=et(On(l,"float32"),qy(Yt(bd(l),e,!0)));return i([c]),{value:c,gradFunc:(d,f)=>{const[p]=f,m=!0,g=bd(p);return et(d,me(Yt(d,e,m),g))}}})(n)}const rYe=U({logSoftmax_:nYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sYe(t,e=null,n=!1){const r=A(t,"x","logSumExp"),s=tr(e,r.shape),i=th(r,s,!0),o=et(r,i),a=bd(o),l=Yt(a,s),c=qy(l),u=Be(te(i,c.shape),c);if(n){const d=ci(u.shape,s);return te(u,d)}return u}const $ee=U({logSumExp_:sYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iYe(t,e){const n=A(t,"a","logicalAnd","bool"),r=A(e,"b","logicalAnd","bool");wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(aJ,s)}const n1=U({logicalAnd_:iYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oYe(t){const n={x:A(t,"x","logicalNot","bool")};return z.runKernel(lJ,n)}const Aee=U({logicalNot_:oYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aYe(t,e){const n=A(t,"a","logicalOr","bool"),r=A(e,"b","logicalOr","bool");wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(cJ,s)}const Pee=U({logicalOr_:aYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lYe(t,e){const n=A(t,"a","logicalXor","bool"),r=A(e,"b","logicalXor","bool");return wt(n.shape,r.shape),n1(Pee(t,e),Aee(n1(t,e)))}const cYe=U({logicalXor_:lYe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yx=2147483648;function uYe(t,e,n="left"){const r=A(t,"sortedSequence","searchSorted"),s=A(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=s.shape[s.shape.length-1],a=te(r,[-1,i]),l=te(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ce(l.shape)>=Yx)throw new Error(`values tensor size must less than ${Yx}`);if(a.shape[1]>=Yx)throw new Error(`trailing dim_size must less than ${Yx} for int32 output type, was ${a.shape[1]}`);const c={sortedSequence:a,values:l},u={side:n};return z.runKernel(QJ,c,u)}const z2=U({searchSorted_:uYe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dYe(t,e){return z2(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fYe(t,e,n,r,s){const i=A(t,"x","maxPool"),o=1;let a=i,l=!1;i.rank===3&&(l=!0,a=te(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),D(Ps(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Mi("maxPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s},d=z.runKernel(hJ,c,u);return l?te(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Ree=U({maxPool_:fYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hYe(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=A(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),D(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),D(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Mi("maxPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},d=z.runKernel(pJ,c,u);return l?te(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const pYe=U({maxPool3d_:hYe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mYe(t,e,n,r,s=!1){const o={x:A(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=z.runKernel(mJ,o,a);return{result:l[0],indexes:l[1]}}const gYe=U({maxPoolWithArgmax_:mYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yYe(t,e){let n=A(t,"a","maximum"),r=A(e,"b","maximum");[n,r]=Nn(n,r),n.dtype==="bool"&&(n=On(n,"int32"),r=On(r,"int32")),wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(fJ,s)}const Dee=U({maximum_:yYe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vYe(t,e=null,n=!1){const s={x:A(t,"x","mean")},i={axis:e,keepDims:n};return z.runKernel(gJ,s,i)}const r1=U({mean_:vYe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wd(t,e="float32"){if(ai(t),e==="complex64"){const r=wd(t,"float32"),s=wd(t,"float32");return Dc(r,s)}const n=Rc(ce(t),e);return z.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $u(t,e="float32"){if(ai(t),e==="complex64"){const r=$u(t,"float32"),s=wd(t,"float32");return Dc(r,s)}const n=UY(ce(t),e);return z.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xYe(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=A(t,"x","meshgrid",t instanceof kn?t.dtype:"float32");if(e===void 0)return[r];let s=A(e,"y","meshgrid",e instanceof kn?e.dtype:"float32");const i=ce(r.shape),o=ce(s.shape);return n==="xy"?(r=te(r,[1,-1]),s=te(s,[-1,1]),[Rt($u([o,1],r.dtype),r),Rt(s,$u([1,i],s.dtype))]):(r=te(r,[-1,1]),s=te(s,[1,-1]),[Rt(r,$u([1,o],r.dtype)),Rt($u([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bYe(t,e){let n=A(t,"a","minimum"),r=A(e,"b","minimum");[n,r]=Nn(n,r),n.dtype==="bool"&&(n=On(n,"int32"),r=On(r,"int32")),wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(vJ,s)}const s1=U({minimum_:bYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wYe(t,e,n){D(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=A(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");D(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)D(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),D(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return z.runKernel(xJ,o,i)}const SYe=U({mirrorPad_:wYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ye(t,e){let n=A(t,"a","mod"),r=A(e,"b","mod");[n,r]=Nn(n,r);const s={a:n,b:r};return z.runKernel(bJ,s)}const CYe=U({mod_:_Ye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NYe(t,e=null,n=!1){t=A(t,"x","moments");const r=tr(e,t.shape),s=r1(t,r,n);let i=s.shape;n||(i=ci(s.shape,r));const o=yo(et(On(t,"float32"),te(s,i))),a=r1(o,r,n);return{mean:s,variance:a}}const EYe=U({moments_:NYe});function TYe(t,e,n,r){const s=A(e,"data","multiRNNCell"),i=e1(n,"c","multiRNNCell"),o=e1(r,"h","multiRNNCell");let a=s;const l=[];for(let d=0;d<t.length;d++){const f=t[d](a,i[d],o[d]);l.push(f[0]),l.push(f[1]),a=f[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}const IYe=U({multiRNNCell_:TYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kYe(t,e,n,r=!1){const s=A(t,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const l={logits:o===1?te(s,[1,-1]):s},c={numSamples:e,seed:n,normalized:r},u=z.runKernel(wJ,l,c);return o===1?te(u,[u.size]):u}const OYe=U({multinomial_:kYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ye(t,e){let n=A(t,"a","notEqual","string_or_numeric"),r=A(e,"b","notEqual","string_or_numeric");[n,r]=Nn(n,r),wt(n.shape,r.shape);const s={a:n,b:r};return z.runKernel(CJ,s)}const jee=U({notEqual_:$Ye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AYe(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:A(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return z.runKernel(kJ,o,a)}const PYe=U({oneHot_:AYe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RYe(t){const n={x:A(t,"x","onesLike")};return z.runKernel(IJ,n)}const DYe=U({onesLike_:RYe});function jYe(t,e){const n=A(t,"v1","outerProduct"),r=A(e,"v2","outerProduct");D(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=te(n,[-1,1]),i=te(r,[1,-1]);return Rt(s,i)}const MYe=U({outerProduct_:jYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LYe(t,e,n=0){const r=A(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return z.runKernel($J,i,s)}const Jv=U({pad_:LYe});function FYe(t,e,n=0){return D(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Jv(t,[e],n)}const BYe=U({pad1d_:FYe});function UYe(t,e,n=0){return D(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Jv(t,e,n)}const WYe=U({pad2d_:UYe});function zYe(t,e,n=0){return D(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Jv(t,e,n)}const VYe=U({pad3d_:zYe});function HYe(t,e,n=0){return D(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Jv(t,e,n)}const GYe=U({pad4d_:HYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qYe(t,e,n){const r=A(t,"x","spaceToBatchND");D(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),D(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),D(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return z.runKernel(lZ,s,i)}const Mee=U({spaceToBatchND_:qYe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KYe(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=A(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D(Ps(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=Bd(l.shape,e,i,s,r),d=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=YYe([u.filterHeight,u.filterWidth],d):f=[[0,0],[0,0]];const p=d[0]===1&&d[1]===1,[m,g]=XYe([u.inHeight,u.inWidth],d,f),y=p?r:"valid",v=p?l:Mee(l,d,m),b=(n==="avg"?()=>mee(v,e,i,y,o):()=>Ree(v,e,i,y,o))(),w=p?b:gee(b,d,g);return c?te(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function XYe(t,e,n){const r=n.map(u=>u[0]),s=n.map(u=>u[1]),i=t.concat(r,s),o=e.map((u,d)=>(u-i[d]%u)%u),a=s.map((u,d)=>u+o[d]),l=e.map((u,d)=>[r[d],a[d]]),c=e.map((u,d)=>[0,o[d]]);return[l,c]}function YYe(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const QYe=U({pool_:KYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JYe(t,e){const n=A(t,"x","prelu"),r=A(e,"alpha","prelu"),s={x:n,alpha:r};return z.runKernel(PJ,s)}const Lee=U({prelu_:JYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZYe(t,e=null,n=!1){let r=A(t,"x","prod");r.dtype==="bool"&&(r=On(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return z.runKernel(RJ,s,i)}const eQe=U({prod_:ZYe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tQe(t,e,n,r){const s=t.map((u,d)=>A(u,`tensors${d}`,"raggedGather","int32")),i=A(e,"paramsDenseValues","raggedGather"),o=A(n,"indices","raggedGather","int32"),a={paramsNestedSplits:s,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},c=z.runKernel(DJ,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const nQe=U({raggedGather_:tQe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQe(t,e,n){const r=A(t,"starts","raggedRange"),s=A(e,"limits","raggedRange",r.dtype),i=A(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:s,deltas:i},a=z.runKernel(jJ,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const sQe=U({raggedRange_:rQe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iQe(t,e,n,r,s){const i=A(t,"shape","raggedTensorToTensor","int32"),o=A(e,"values","raggedTensorToTensor"),a=A(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,f)=>A(d,`tensors${f}`,"raggedTensorToTensor","int32")),c={shape:i,values:o,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:s};return z.runKernel(MJ,c,u)}const oQe=U({raggedTensorToTensor_:iQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aQe(t,e,n){ai(t);const r=ce(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return z.makeTensor(s,t,n)}const lQe=U({rand_:aQe});var V2={exports:{}};V2.exports;(function(t){(function(e,n,r){function s(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new s(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&i(d,u),f.state=function(){return i(u,{})}),f}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:this.alea=o})(io,t)})(V2);var cQe=V2.exports,H2={exports:{}};H2.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xor128=o})(io,t)})(H2);var uQe=H2.exports,G2={exports:{}};G2.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xorwow=o})(io,t)})(G2);var dQe=G2.exports,q2={exports:{}};q2.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.x,d=l.i,f,p;return f=u[d],f^=f>>>7,p=f^f<<24,f=u[d+1&7],p^=f^f>>>10,f=u[d+3&7],p^=f^f>>>3,f=u[d+4&7],p^=f^f<<7,f=u[d+7&7],f=f^f<<13,p^=f^f<<9,u[d]=p,l.i=d+1&7,p};function c(u,d){var f,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[f&7]=p[f&7]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],u.x=p,u.i=0,f=256;f>0;--f)u.next()}c(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(u.x&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xorshift7=o})(io,t)})(q2);var fQe=q2.exports,K2={exports:{}};K2.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,p,m;return l.w=u=u+1640531527|0,m=d[f+34&127],p=d[f=f+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=d[f]=m^p,l.i=f,m+(u^u>>>16)|0};function c(u,d){var f,p,m,g,y,v=[],x=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,x=Math.max(x,d.length)),m=0,g=-32;g<x;++g)d&&(p^=d.charCodeAt((g+32)%d.length)),g===0&&(y=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,g>=0&&(y=y+1640531527|0,f=v[g&127]^=p+y,m=f==0?m+1:0);for(m>=128&&(v[(d&&d.length||0)&127]=-1),m=127,g=4*128;g>0;--g)p=v[m+34&127],f=v[m=m+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,v[m]=p^f;u.w=y,u.X=v,u.i=m}c(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(u.X&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xor4096=o})(io,t)})(K2);var hQe=K2.exports,X2={exports:{}};X2.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var d=l.b,f=l.c,p=l.d,m=l.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^m,m=m-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-p|0,l.d=p<<16^f>>>16^m,l.a=m-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.tychei=o})(io,t)})(X2);var pQe=X2.exports,Fee={exports:{}};const mQe={},gQe=Object.freeze(Object.defineProperty({__proto__:null,default:mQe},Symbol.toStringTag,{value:"Module"})),yQe=dre(gQe);(function(t){(function(e,n,r){var s=256,i=6,o=52,a="random",l=r.pow(s,i),c=r.pow(2,o),u=c*2,d=s-1,f;function p(w,_,C){var E=[];_=_==!0?{entropy:!0}:_||{};var N=v(y(_.entropy?[w,b(n)]:w??x(),3),E),I=new m(E),$=function(){for(var O=I.g(i),k=l,R=0;O<c;)O=(O+R)*s,k*=s,R=I.g(1);for(;O>=u;)O/=2,k/=2,R>>>=1;return(O+R)/k};return $.int32=function(){return I.g(4)|0},$.quick=function(){return I.g(4)/4294967296},$.double=$,v(b(I.S),n),(_.pass||C||function(O,k,R,M){return M&&(M.S&&g(M,I),O.state=function(){return g(I,{})}),R?(r[a]=O,k):O})($,N,"global"in _?_.global:this==r,_.state)}function m(w){var _,C=w.length,E=this,N=0,I=E.i=E.j=0,$=E.S=[];for(C||(w=[C++]);N<s;)$[N]=N++;for(N=0;N<s;N++)$[N]=$[I=d&I+w[N%C]+(_=$[N])],$[I]=_;(E.g=function(O){for(var k,R=0,M=E.i,B=E.j,F=E.S;O--;)k=F[M=d&M+1],R=R*s+F[d&(F[M]=F[B=d&B+k])+(F[B]=k)];return E.i=M,E.j=B,R})(s)}function g(w,_){return _.i=w.i,_.j=w.j,_.S=w.S.slice(),_}function y(w,_){var C=[],E=typeof w,N;if(_&&E=="object")for(N in w)try{C.push(y(w[N],_-1))}catch{}return C.length?C:E=="string"?w:w+"\0"}function v(w,_){for(var C=w+"",E,N=0;N<C.length;)_[d&N]=d&(E^=_[d&N]*19)+C.charCodeAt(N++);return b(_)}function x(){try{var w;return f&&(w=f.randomBytes)?w=w(s):(w=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(w)),b(w)}catch{var _=e.navigator,C=_&&_.plugins;return[+new Date,e,C,e.screen,b(n)]}}function b(w){return String.fromCharCode.apply(0,w)}if(v(r.random(),n),t.exports){t.exports=p;try{f=yQe}catch{}}else r["seed"+a]=p})(typeof self<"u"?self:io,[],Math)})(Fee);var vQe=Fee.exports,xQe=cQe,bQe=uQe,wQe=dQe,SQe=fQe,_Qe=hQe,CQe=pQe,Ud=vQe;Ud.alea=xQe;Ud.xor128=bQe;Ud.xorwow=wQe;Ud.xorshift7=SQe;Ud.xor4096=_Qe;Ud.tychei=CQe;var Y2=Ud;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q2{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=Y2.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class NQe{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=Y2.alea(i.toString()),this.randn=new Q2(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,o;for(;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class EQe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Y2.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQe(t,e,n=1,r="float32",s){if(ai(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new NQe(e,n,r,s),o=yn(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const IQe=U({randomGamma_:TQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQe(t,e=0,n=1,r,s){if(ai(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new Q2(e,n,r,!1,s),o=yn(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const Bee=U({randomNormal_:kQe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return Bee(t,0,1,e,n)}const $Qe=U({randomStandardNormal_:OQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQe(t,e=0,n=1,r="float32",s){ai(t);const i=yn(t,r),o=new EQe(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const J2=U({randomUniform_:AQe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PQe(t,e,n,r){return J2(t,e,n,"int32",r)}const RQe=U({randomUniformInt_:PQe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ky(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return z.runKernel(LJ,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DQe(t){const n={input:A(t,"input","real")};return z.runKernel(FJ,n)}const Xy=U({real_:DQe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQe(t){const n={x:A(t,"x","reciprocal")};return z.runKernel(BJ,n)}const MQe=U({reciprocal_:jQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQe(t){const n={x:A(t,"x","relu")};return z.runKernel(UJ,n)}const S_=U({relu_:LQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FQe(t){const n={x:A(t,"x","relu6")};return z.runKernel(HJ,n)}const Uee=U({relu6_:FQe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BQe(t,e){const r={x:A(t,"x","reverse")},s={dims:e};return z.runKernel(GJ,r,s)}const Sd=U({reverse_:BQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UQe(t){const e=A(t,"x","reverse");return D(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Sd(e,0)}const WQe=U({reverse1d_:UQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zQe(t,e){const n=A(t,"x","reverse");return D(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Sd(n,e)}const VQe=U({reverse2d_:zQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQe(t,e){const n=A(t,"x","reverse");return D(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Sd(n,e)}const GQe=U({reverse3d_:HQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qQe(t,e){const n=A(t,"x","reverse");return D(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Sd(n,e)}const KQe=U({reverse4d_:qQe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XQe(t){const n={x:A(t,"x","round")};return z.runKernel(qJ,n)}const Wee=U({round_:XQe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YQe(t){const n={x:A(t,"x","rsqrt","float32")};return z.runKernel(KJ,n)}const QQe=U({rsqrt_:YQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JQe(t){const n={x:A(t,"x","selu")};return z.runKernel(ZJ,n)}const ZQe=U({selu_:JQe});function eJe(t,e,n,r,s,i=[1,1],o="NHWC"){const a=A(t,"x","separableConv2d"),l=A(e,"depthwiseFilter","separableConv2d"),c=A(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");D(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),D(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),D(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),D(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),D(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=l.shape[2],p=l.shape[3];D(c.shape[2]===f*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*p}, but got ${c.shape[2]}.`);const m=F2(u,l,r,s,o,i),y=v_(m,c,1,"valid",o);return d?te(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const tJe=U({separableConv2d_:eJe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nJe(t,e){const n=A(t,"x","setdiff1d"),r=A(e,"y","setdiff1d");D(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),D(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),D(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),o=new Set(i);let a=0;for(let u=0;u<s.length;u++)o.has(s[u])||a++;const l=new ep([a],n.dtype),c=new ep([a],"int32");for(let u=0,d=0;u<s.length;u++)o.has(s[u])||(l.values[d]=s[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}const rJe=nJe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sJe(t){const n={x:A(t,"x","sign")};return z.runKernel(rZ,n)}const iJe=U({sign_:sJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oJe(t){const n={x:A(t,"x","sin","float32")};return z.runKernel(tZ,n)}const aJe=U({sin_:oJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lJe(t){const n={x:A(t,"x","sinh")};return z.runKernel(nZ,n)}const cJe=U({sinh_:lJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJe(t,e,n){const r=A(t,"x","slice1d");return D(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),tt(r,[e],[n])}const dJe=U({slice1d_:uJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fJe(t,e,n){const r=A(t,"x","slice2d");return D(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),tt(r,e,n)}const hJe=U({slice2d_:fJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pJe(t,e,n){const r=A(t,"x","slice3d");return D(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),tt(r,e,n)}const mJe=U({slice3d_:pJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJe(t,e,n){const r=A(t,"x","slice4d");return D(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),tt(r,e,n)}const yJe=U({slice4d_:gJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vJe(t,e=-1){const n=A(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return z.runKernel(uZ,r,s)}const xJe=U({softmax_:vJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bJe(t){D(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return z.runKernel(BQ,e)}const Z2=U({fft_:bJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wJe(t){D(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return z.runKernel(YQ,e)}const i1=U({ifft_:wJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SJe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=te(t,[n,e]);r=i1(s)}else{const s=[n,2*(e-1)],i=te(Xy(t),[n,e]),o=te(w_(t),[n,e]),a=Sd(tt(i,[0,1],[n,e-2]),1),l=me(Sd(tt(o,[0,1],[n,e-2]),1),xt(-1)),c=vr([i,a],1),u=vr([o,l],1),d=te(Dc(c,u),[s[0],s[1]]);r=i1(d)}if(r=Xy(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=te(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const zee=U({irfft_:SJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Je(t,e,n=0){const s={x:A(t,"x","split")},i={numOrSizeSplits:e,axis:n};return z.runKernel(cZ,s,i)}const Yy=U({split_:_Je});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CJe(t,e){D(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const m=t.shape.map(y=>0),g=t.shape.map(y=>y);g[t.shape.length-1]=e,s=tt(t,m,g),n=e}else if(e!=null&&e>n){const m=t.shape.map(g=>g);m[t.shape.length-1]=e-n,s=vr([t,wd(m)],t.shape.length-1),n=e}else s=t;const i=Zs(s),o=te(Dc(s,i),[r,n]),a=Z2(o),l=Math.floor(n/2)+1,c=Xy(a),u=w_(a),d=Yy(c,[l,n-l],c.shape.length-1),f=Yy(u,[l,n-l],u.shape.length-1),p=s.shape.slice();return p[s.shape.length-1]=l,te(Dc(d[0],f[0]),p)}const eR=U({rfft_:CJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NJe(t,e){let n=A(t,"a","squaredDifference"),r=A(e,"b","squaredDifference");[n,r]=Nn(n,r),wt(n.shape,r.shape);const s={a:n,b:r},i={};return z.runKernel(gZ,s,i)}const Vee=U({squaredDifference_:NJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EJe(t,e){const n=A(t,"x","squeeze","string_or_numeric");return te(n,Xc(n.shape,e).newShape)}const Hu=U({squeeze_:EJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TJe(t,e=0){const n=e1(t,"tensors","stack","string_or_numeric");D(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&D(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return z.runKernel(OJ,r,s)}const dl=U({stack_:TJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IJe(t,e=0){const r={x:A(t,"x","step")},s={alpha:e};return z.runKernel($Z,r,s)}const Hee=U({step_:IJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kJe(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const u={x:A(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return z.runKernel(vZ,u,d)}const OJe=U({stridedSlice_:kJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Je(t){const n={x:A(t,"x","tan","float32")};return z.runKernel(_Z,n)}const AJe=U({tan_:$Je});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function as(t,e){Hp(t);const n=Yc(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Qc(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gu(t,e,n){if(Hp(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Yc(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Qc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gee(t,e,n){if(Hp(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Yc(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Qc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PJe(t,e,n){if(Hp(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Yc(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Qc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RJe(t,e,n){if(Hp(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Yc(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Qc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DJe(t,e,n){if(Hp(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Yc(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Qc(t,e,r,n)}function qee(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function tR(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}qee(n,e,t)}function __(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=s;d<i;++d)o*=n[d];const a=s<1?1:s,l=ce(e.shape)/a,c=[...yr(n.slice(0,s)),1],u=ce(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jJe(t,e,n){const r=A(t,"tensor","tensorScatterupdate"),s=A(e,"indices","tensorScatterupdate","int32"),i=A(n,"updates","tensorScatterupdate");if(tR(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const o={tensor:r,indices:s,updates:i},a={};return z.runKernel(YJ,o,a)}const MJe=U({tensorScatterUpdate_:jJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LJe(t,e=1,n=!0){const r=A(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=z.runKernel(NZ,i,o);return{values:a,indices:l}}const FJe=U({topk_:LJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BJe(t,e=0,n=1,r,s){if(ai(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new Q2(e,n,r,!0,s),o=yn(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const UJe=U({truncatedNormal_:BJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WJe(t,e=0){const n=A(t,"x","unique","string_or_numeric");D(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=z.runKernel(TZ,r,s);return{values:i,indices:o}}const zJe=U({unique_:WJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJe(t,e,n){const r=A(t,"x","unsortedSegmentSum"),s=A(e,"segmentIds","unsortedSegmentSum","int32");D(Qh(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return z.runKernel(kZ,i,o)}const HJe=U({unsortedSegmentSum_:VJe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GJe(t,e=0){const n=A(t,"x","unstack","string_or_numeric");D(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return z.runKernel(IZ,r,s)}const Wd=U({unstack_:GJe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qJe(t,e){return z2(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KJe(t,e=!0,n,r){return z.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kee(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=yn(t,"int32"),s=yn([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function XJe(t){const e=A(t,"condition","whereAsync","bool"),n=await e.data(),r=Kee(e.shape,n);return t!==e&&e.dispose(),r}const Xee=XJe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function YJe(t,e,n){const r=A(t,"tensor","boolMask"),s=A(e,"mask","boolMask","bool"),i=n??0,o=s.rank,a=r.shape;D(o>0,()=>"mask cannot be scalar"),oi(a.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let g=i;g<i+o;g++)l*=a[g];const c=a.slice(0,i).concat([l],a.slice(i+o)),u=te(r,c),d=te(s,[-1]),f=await Xee(d),p=Hu(f,[1]),m=Eee(u,p,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),p.dispose(),u.dispose(),d.dispose(),f.dispose(),m}const QJe=YJe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JJe(t,e,n){const r=A(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),D(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{D(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?pt(()=>{let o=Xy(r),a=w_(r);return o=z.runKernel(Ob,{x:o},i),a=z.runKernel(Ob,{x:a},i),n&&(a=Zo(a)),Dc(o,a)}):z.runKernel(Ob,s,i)}const Ek=U({transpose_:JJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJe(t,e,n,r,s=!0){const i=A(t,"v","movingAverage"),o=A(e,"x","movingAverage"),a=A(n,"decay","movingAverage");bKe(i,o),D(gn(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=xt(1),c=et(l,a);let u=me(et(o,i),c);if(s){D(r!=null,()=>"When using zeroDebias: true, step is required.");const d=A(r,"step","movingAverage");u=It(u,et(l,Gy(a,d)))}return Be(i,u)}const eZe=U({movingAverage_:ZJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tZe(t,e,n){ai(n);const r=A(t,"indices","scatterND","int32"),s=A(e,"updates","scatterND");tR(s,r,n);const i={indices:r,updates:s},o={shape:n};return z.runKernel(XJ,i,o)}const nZe=U({scatterND_:tZe});function rZe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sZe(t,e,n,r=0){ai(n);const s=A(t,"sparseIndices","sparseToDense","int32"),i=A(e,"sparseValues","sparseToDense","string_or_numeric"),o=A(r,"defaultValue","sparseToDense",i.dtype);rZe(s,i,n,o);const a={sparseIndices:s,sparseValues:i,defaultValue:o},l={outputShape:n};return z.runKernel(mZ,a,l)}const iZe=U({sparseToDense_:sZe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oZe(t,e){const n=A(e,"indices","gatherND","int32"),s={params:A(t,"x","gatherND","string_or_numeric"),indices:n};return z.runKernel(qQ,s)}const aZe=U({gatherND_:oZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lZe(t,e){if(e==null)return t.shape.slice();if(gn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cZe(t,e,n,r){const s=A(t,"x","dropout");if(D(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),D(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof kn?s.clone():s;const i=lZe(s,n),o=1-e,a=It(Nee(Be(J2(i,0,1,"float32",r),o)),o);return me(s,a)}const uZe=U({dropout_:cZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yee(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function nR(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(o)}return as(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function dZe(t,e,n=1){const r=A(t,"predictions","inTopK"),s=A(e,"targets","inTopK");D(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),D(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),oi(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];D(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),a=await s.data(),[l,c]=[o.length/i,i],u=Pc("bool",l);for(let d=0;d<l;d++){const f=d*c,p=o.subarray(f,f+c),m=[];for(let g=0;g<p.length;g++)m.push({value:p[g],index:g});m.sort((g,y)=>y.value-g.value),u[d]=0;for(let g=0;g<n;g++)if(m[g].index===a[d]){u[d]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),Jo(u,s.shape,"bool")}const fZe=dZe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hZe(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=te(e,[1,e.shape[0],e.shape[1],e.shape[2]])),D(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),D(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),D(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];D(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),D(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Mi("conv2dDerFilter",s,o);const d={x:a,dy:l},f={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return z.runKernel(gQ,d,f)}const pZe=U({conv2DBackpropFilter_:hZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return me(t,Hee(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function N_(t,e){let n=e;const r=xee(t.shape,e.shape);return r.length>0&&(n=Yt(n,r)),te(n,t.shape)}function E_(t,e,n,r){if(e==="linear")return t;if(e==="relu")return S_(t);if(e==="elu")return wee(t);if(e==="relu6")return Uee(t);if(e==="prelu")return Lee(t,n);if(e==="leakyrelu")return Iee(t,r);if(e==="sigmoid")return Vu(t);throw new Error(`Unknown fused activation ${e}.`)}const T_=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mZe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",T_(z.state.gradientDepth,l)===!1){D(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=v_(t,e,n,r,s,i,o);return a!=null&&(C=Be(C,a)),E_(C,l,c,u)}const d=A(t,"x","conv2d","float32"),f=A(e,"filter","conv2d","float32");let p=d,m=!1;d.rank===3&&(m=!0,p=te(d,[1,d.shape[0],d.shape[1],d.shape[2]])),D(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),D(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Mi("fused conv2d",r,o);const g=s==="NHWC"?p.shape[3]:p.shape[1];D(f.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${f.shape[2]}.`),D(Ps(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const y=li(p.shape,f.shape,n,i,r,o);let v;a!=null&&(v=A(a,"bias","fused conv2d"),[v]=Nn(v,d),s==="NHWC"?wt(y.outShape,v.shape):(D(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),D(v.shape.length===0||v.shape[0]===y.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let x;if(c!=null){const C=c.shape;if(D(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)D(C[0]===1||C[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${y.outChannels}).`);else if(C.length===3)try{wt(C,y.outShape)}catch{const N=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(N)}x=A(c,"prelu weights","fused conv2d")}const b=(C,E)=>{D(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[N,I,$,O]=E,k=C_(C,$,l);D(Hy(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const R=vee(I.shape,k,N,n,r),M=pZe(I,k,N.shape,n,r),B=[R,M];if(O!=null){const F=N_(O,k);B.push(F)}return B},w={x:p,filter:f,bias:v,preluActivationWeights:x},_={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?ul((E,N,I)=>{let $=z.runKernel(ck,w,_);return I([N,E,$]),m&&($=te($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:b}})(p,f):ul((E,N,I,$)=>{let O=z.runKernel(ck,w,_);return $([N,E,O,I]),m&&(O=te(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:b}})(p,f,v)}const gZe=U({fusedConv2d_:mZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yZe(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return z.runKernel(IQ,c,u)}const vZe=U({depthwiseConv2dNativeBackpropFilter_:yZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZe(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},d=z.runKernel(kQ,c,u);return l?te(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const bZe=U({depthwiseConv2dNativeBackpropInput_:xZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wZe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(T_(z.state.gradientDepth,l)===!1){let _=F2(t,e,n,r,s,i,o);return a!=null&&(_=Be(_,a)),E_(_,l,c,u)}const d=A(t,"x","depthwiseConv2d","float32"),f=A(e,"filter","depthwiseConv2d","float32");let p=d,m=!1;d.rank===3&&(m=!0,p=te(d,[1,d.shape[0],d.shape[1],d.shape[2]])),D(p.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),D(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),D(p.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),i==null&&(i=[1,1]),D(Ps(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Mi("fused depthwiseConv2d",r,o);const g=li(p.shape,f.shape,n,i,r,o,!0);let y;a!=null&&(y=A(a,"bias","fused conv2d"),[y]=Nn(y,d),wt(g.outShape,y.shape));let v;c!=null&&(v=A(c,"prelu weights","fused depthwiseConv2d"));const x=(_,C)=>{D(Hy(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[E,N,I,$]=C,O=C_(_,I,l),k=bZe(N.shape,O,E,n,r,i,o),R=vZe(N,O,E.shape,n,r,i,o);if($!=null){const M=N_(y,O);return[k,R,M]}return[k,R]},b={x:p,filter:f,bias:y,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?ul((C,E,N)=>{let I=z.runKernel(uk,b,w);return N([E,C,I]),m&&(I=te(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:x}})(p,f):ul((C,E,N,I)=>{let $=z.runKernel(uk,b,w);return I([E,C,$,N]),m&&($=te($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:x}})(p,f,y)}const SZe=U({fusedDepthwiseConv2d_:wZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ze({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(T_(z.state.gradientDepth,i)===!1){let O=Rt(t,e,n,r);return s!=null&&(O=Be(O,s)),E_(O,i,o,a)}let l=A(t,"a","fused matMul"),c=A(e,"b","fused matMul");[l,c]=Nn(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?c.shape[c.rank-2]:c.shape[c.rank-1],m=l.shape.slice(0,-2),g=c.shape.slice(0,-2),y=ce(m),v=ce(g);D(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=wt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,p]),w=n?te(l,[y,u,f]):te(l,[y,f,u]),_=r?te(c,[v,p,d]):te(c,[v,d,p]);let C;s!=null&&(C=A(s,"bias","fused matMul"),[C]=Nn(C,l),wt(b,C.shape));let E;o!=null&&(E=A(o,"prelu weights","fused matMul"));const N=(O,k)=>{const[R,M,B,F]=k,L=C_(te(O,B.shape),B,i);let P,W;if(!n&&!r?(P=Rt(L,M,!1,!0),W=Rt(R,L,!0,!1)):!n&&r?(P=Rt(L,M,!1,!1),W=Rt(L,R,!0,!1)):n&&!r?(P=Rt(M,L,!1,!0),W=Rt(R,L,!1,!1)):(P=Rt(M,L,!0,!0),W=Rt(L,R,!0,!0)),s!=null){const q=N_(F,L);return[P,W,q]}else return[P,W]},I={a:w,b:_,bias:C,preluActivationWeights:E},$={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?ul((k,R,M)=>{const B=z.runKernel(lk,I,$);return M([k,R,B]),{value:te(B,b),gradFunc:N}})(w,_):ul((k,R,M,B)=>{const F=z.runKernel(lk,I,$);return B([k,R,F,M]),{value:te(F,b),gradFunc:N}})(w,_,C)}const CZe=U({fusedMatMul_:_Ze});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NZe=Object.freeze(Object.defineProperty({__proto__:null,conv2d:gZe,depthwiseConv2d:SZe,matMul:CZe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EZe(t){return nR(t,.54,.46)}const TZe=U({hammingWindow_:EZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IZe(t){return nR(t,.5,.5)}const Qee=U({hannWindow_:IZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kZe(t,e,n,r=!1,s=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(tt(t,i,e)),i+=n;if(r)for(;i<t.size;){const a=i+e-t.size,l=vr([tt(t,i,e-a),Qv([a],s)]);o.push(l),i+=n}return o.length===0?Gu([],[0,e]):te(vr(o),[o.length,e])}const Jee=U({frame_:kZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OZe(t,e,n,r,s=Qee){r==null&&(r=Yee(e));const i=Jee(t,e,n),o=me(i,s(e));return eR(o,r)}const $Ze=U({stft_:OZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZe(t,e,n,r,s="bilinear",i=0){const o=A(t,"image","cropAndResize"),a=A(e,"boxes","cropAndResize","float32"),l=A(n,"boxInd","cropAndResize","int32"),c=a.shape[0];D(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),D(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),D(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),D(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),D(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),D(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:o,boxes:a,boxInd:l},d={method:s,extrapolationValue:i,cropSize:r};return z.runKernel(CQ,u,d)}const PZe=U({cropAndResize_:AZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZe(t){const e=A(t,"image","flipLeftRight","float32");D(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return z.runKernel(WQ,n,{})}const DZe=U({flipLeftRight_:RZe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZe(t){const e=A(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];D(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),D(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,xg(e,s)}const MZe=U({grayscaleToRGB_:jZe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LZe(t){const e=A(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];D(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),D(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=On(e,"float32"),o=as([.2989,.587,.114]);let a;switch(e.rank){case 2:a=df("ij,j->i",i,o);break;case 3:a=df("ijk,k->ij",i,o);break;case 4:a=df("ijkl,l->ijk",i,o);break;case 5:a=df("ijklm,m->ijkl",i,o);break;case 6:a=df("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Na(a,-1),On(a,s)}const FZe=U({rgbToGrayscale_:LZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BZe(t,e,n=0,r=.5){const s=A(t,"image","rotateWithOffset","float32");D(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return z.runKernel(AZ,i,o)}const UZe=U({rotateWithOffset_:BZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kp(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),D(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),D(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),D(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),D(e.rank===1,()=>"scores must be a 1D tensor"),D(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),D(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=A(t,"boxes","nonMaxSuppression","float32"),o=A(e,"scores","nonMaxSuppression","float32"),a=Kp(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return z.runKernel(NJ,{boxes:i,scores:o},l)}const zZe=U({nonMaxSuppression_:WZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VZe(t,e,n){const r=HZe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function HZe(t,e,n){return qZe(t,e,n||GZe)}function GZe(t,e){return t>e?1:t<e?-1:0}function qZe(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(t,e,n,r,s){return rR(t,e,n,r,s,0)}function ete(t,e,n,r,s,i){return rR(t,e,n,r,s,0,!1,i,!0)}function tte(t,e,n,r,s,i){return rR(t,e,n,r,s,i,!0)}function rR(t,e,n,r,s,i,o=!1,a=!1,l=!1){const c=[];for(let y=0;y<e.length;y++)e[y]>s&&c.push({score:e[y],boxIndex:y,suppressBeginIndex:0});c.sort(CB);const u=i>0?-.5/i:0,d=[],f=[];for(;d.length<n&&c.length>0;){const y=c.pop(),{score:v,boxIndex:x,suppressBeginIndex:b}=y;if(v<s)break;let w=!1;for(let _=d.length-1;_>=b;--_){const C=KZe(t,x,d[_]);if(C>=r){w=!0;break}if(y.score=y.score*XZe(r,u,C),y.score<=s)break}y.suppressBeginIndex=d.length,w||(y.score===v?(d.push(x),f.push(y.score)):y.score>s&&VZe(c,y,CB))}const p=d.length,m=n-p;a&&m>0&&(d.push(...new Array(m).fill(0)),f.push(...new Array(m).fill(0)));const g={selectedIndices:d};return o&&(g.selectedScores=f),l&&(g.validOutputs=p),g}function KZe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),f=Math.max(s[1],s[3]),p=(a-i)*(l-o),m=(d-c)*(f-u);if(p<=0||m<=0)return 0;const g=Math.max(i,c),y=Math.max(o,u),v=Math.min(a,d),x=Math.min(l,f),b=Math.max(v-g,0)*Math.max(x-y,0);return b/(p+m-b)}function XZe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function CB(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function YZe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=A(t,"boxes","nonMaxSuppressionAsync"),o=A(e,"scores","nonMaxSuppressionAsync"),a=Kp(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=Zee(c,u,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),as(d,"int32")}const QZe=YZe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JZe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=A(t,"boxes","nonMaxSuppression"),a=A(e,"scores","nonMaxSuppression"),l=Kp(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},d=z.runKernel(TJ,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const ZZe=U({nonMaxSuppressionWithScore_:JZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function eet(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=A(t,"boxes","nonMaxSuppressionAsync"),a=A(e,"scores","nonMaxSuppressionAsync"),l=Kp(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:f,selectedScores:p}=tte(u,d,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:as(f,"int32"),selectedScores:as(p)}}const tet=eet;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function net(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=A(t,"boxes","nonMaxSuppression"),a=A(e,"scores","nonMaxSuppression"),l=Kp(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,f={boxes:o,scores:a},p={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:i},m=z.runKernel(EJ,f,p);return{selectedIndices:m[0],validOutputs:m[1]}}const ret=U({nonMaxSuppressionPadded_:net});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function set(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=A(t,"boxes","nonMaxSuppressionAsync"),a=A(e,"scores","nonMaxSuppressionAsync"),l=Kp(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[f,p]=await Promise.all([o.data(),a.data()]),{selectedIndices:m,validOutputs:g}=ete(f,p,c,u,d,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:as(m,"int32"),validOutputs:xt(g,"int32")}}const iet=set;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oet(t,e,n=!1,r=!1){const s=A(t,"images","resizeBilinear");D(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),D(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),D(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=te(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=z.runKernel(VJ,a,l);return o?te(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const aet=U({resizeBilinear_:oet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cet(t,e,n=!1,r=!1){const s=A(t,"images","resizeNearestNeighbor");D(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),D(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),D(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),D(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=te(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=z.runKernel(zJ,a,l);return o?te(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const uet=U({resizeNearestNeighbor_:cet});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function det(t,e="binary",n=!1,r=.5){const s=A(t,"image","threshold"),i=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let c=me(as([r]),255),u,d,f,p;if(D(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),D(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),D(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),D(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,d,f]=Yy(s,[1,1,1],-1);const y=me(u,i),v=me(d,o),x=me(f,a);p=Be(Be(y,v),x)}else p=t;if(e==="otsu"){const y=yee(On(Wee(p),"int32"),Jo([]),256);c=fet(y,l)}const m=n?W2(p,c):b_(p,c);return On(me(m,255),"int32")}function fet(t,e){let n=as([-1]),r=as([0]),s=as([0]),i,o,a,l,c,u;for(let d=0;d<t.size-1;d++){i=tt(t,0,d+1),o=tt(t,d+1),c=It(Yt(i),e),u=It(Yt(o),e);const f=Yt(me(i,Ky(0,i.size)));a=It(f,Yt(i));const p=Qv(o.shape,i.size),m=Be(Ky(0,o.size),p),g=me(o,m);l=It(Yt(g),Yt(o));const y=et(a,l),v=et(a,l),x=me(c,u);s=me(me(x,y),v);const b=b_(s,r);r=wc(b,s,r),n=wc(b,as([d]),n)}return n}const het=U({threshold_:det});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pet(t,e,n="nearest",r="constant",s=0,i){const o=A(t,"image","transform","float32"),a=A(e,"transforms","transform","float32");D(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),D(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),D(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return z.runKernel(EZ,l,c)}const met=U({transform_:pet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function get(t,e,n){const r=A(t,"a","bandPart");D(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(D(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),D(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=A(e<0?i:e,"numLower","bandPart")):(D(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=wc(Nk(e,0),i,s1(e,i))),typeof n=="number"?(D(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),D(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=A(n<0?o:n,"numUpper","bandPart")):(D(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=wc(Nk(n,0),o,s1(n,o)));const c=te(Ky(0,i,1,"int32"),[-1,1]),u=Ky(0,o,1,"int32"),d=et(c,u),f=n1(W2(d,a),Tee(d,Zo(l))),p=wd([i,o],r.dtype);return te(dl(Wd(te(r,[-1,i,o])).map(m=>wc(f,m,p))),s)}const yet=U({bandPart_:get});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vet(t){let e;if(Array.isArray(t)){e=!1,D(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)D(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=Yy(t,t.shape[0],0).map(s=>Hu(s,[0]));D(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(z.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=me(Yt(me(n[o],i)),n[o]);i=et(i,a)}return It(i,x_(i,"euclidean"))}));return e?dl(n,0):n}const xet=U({gramSchmidt_:vet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bet(t,e=!1){if(D(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return NB(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Wd(te(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[c,u]=NB(l,e);s.push(c),i.push(u)});const o=te(dl(s,0),t.shape),a=te(dl(i,0),t.shape);return[o,a]}}function NB(t,e=!1){return z.tidy(()=>{D(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=Cee(n),i=bc(t);const o=Gu([[1]],[1,1]);let a=bc(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=i,d=a,f=s;[a,i,s]=z.tidy(()=>{const p=tt(i,[c,c],[n-c,1]),m=x_(p),g=tt(i,[c,c],[1,1]),y=wc(b_(g,0),Gu([[-1]]),Gu([[1]])),v=et(g,me(y,m)),x=It(p,v);x.shape[0]===1?a=bc(o):a=vr([o,tt(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const b=Zo(It(Rt(y,v),m)),w=tt(i,[c,0],[n-c,r]),_=me(b,a),C=Ek(a);if(c===0)i=et(w,Rt(_,Rt(C,w)));else{const I=et(w,Rt(_,Rt(C,w)));i=vr([tt(i,[0,0],[c,r]),I],0)}const E=Ek(_),N=tt(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=et(N,Rt(Rt(N,a),E));else{const I=et(N,Rt(Rt(N,a),E));s=vr([tt(s,[0,0],[n,c]),I],1)}return[a,i,s]}),cs([u,d,f])}return!e&&n>r&&(s=tt(s,[0,0],[n,r]),i=tt(i,[0,0],[r,r])),[s,i]})}const wet=U({qr_:bet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ns;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ns||(ns={}));function _et(t,e,n=ns.SUM_BY_NONZERO_WEIGHTS){const r=A(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=A(e,"weights","computeWeightedLoss"));const i=s==null?r:me(r,s);if(n===ns.NONE)return i;if(n===ns.SUM)return Yt(i);if(n===ns.MEAN){if(s==null)return r1(i);{const o=r.size/s.size,a=It(Yt(i),Yt(s));return o>1?It(a,xt(o)):a}}if(n===ns.SUM_BY_NONZERO_WEIGHTS){if(s==null)return It(Yt(i),xt(r.size));{const o=me(s,$u(r.shape)),a=On(Yt(jee(o,xt(0))),"float32");return It(Yt(i),a)}}throw Error(`Unknown reduction: ${n}`)}const wl=U({computeWeightedLoss_:_et});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cet(t,e,n,r=ns.SUM_BY_NONZERO_WEIGHTS){const s=A(t,"labels","absoluteDifference"),i=A(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=A(n,"weights","absoluteDifference")),oi(s.shape,i.shape,"Error in absoluteDifference: ");const a=Bs(et(s,i));return wl(a,o,r)}const Net=U({absoluteDifference_:Cet});function Eet(t,e,n,r,s=ns.SUM_BY_NONZERO_WEIGHTS){const i=A(t,"labels","cosineDistance"),o=A(e,"predictions","cosineDistance");let a=null;r!=null&&(a=A(r,"weights","cosineDistance")),oi(i.shape,o.shape,"Error in cosineDistance: ");const l=xt(1),c=et(l,Yt(me(i,o),n,!0));return wl(c,a,s)}const Tet=U({cosineDistance_:Eet});function Iet(t,e,n,r=ns.SUM_BY_NONZERO_WEIGHTS){let s=A(t,"labels","hingeLoss");const i=A(e,"predictions","hingeLoss");let o=null;n!=null&&(o=A(n,"weights","hingeLoss")),oi(s.shape,i.shape,"Error in hingeLoss: ");const a=xt(1);s=et(me(xt(2),s),a);const l=S_(et(a,me(s,i)));return wl(l,o,r)}const ket=U({hingeLoss_:Iet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oet(t,e,n,r=1,s=ns.SUM_BY_NONZERO_WEIGHTS){const i=A(t,"labels","huberLoss"),o=A(e,"predictions","huberLoss");let a=null;n!=null&&(a=A(n,"weights","huberLoss")),oi(i.shape,o.shape,"Error in huberLoss: ");const l=xt(r),c=Bs(et(o,i)),u=s1(c,l),d=et(c,u),f=Be(me(xt(.5),yo(u)),me(l,d));return wl(f,a,s)}const $et=U({huberLoss_:Oet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aet(t,e,n,r=1e-7,s=ns.SUM_BY_NONZERO_WEIGHTS){const i=A(t,"labels","logLoss"),o=A(e,"predictions","logLoss");let a=null;n!=null&&(a=A(n,"weights","logLoss")),oi(i.shape,o.shape,"Error in logLoss: ");const l=xt(1),c=xt(r),u=Zo(me(i,qy(Be(o,c)))),d=me(et(l,i),qy(Be(et(l,o),c))),f=et(u,d);return wl(f,a,s)}const Pet=U({logLoss_:Aet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ret(t,e,n,r=ns.SUM_BY_NONZERO_WEIGHTS){const s=A(t,"labels","meanSquaredError"),i=A(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=A(n,"weights","meanSquaredError")),oi(s.shape,i.shape,"Error in meanSquaredError: ");const a=Vee(s,i);return wl(a,o,r)}const Det=U({meanSquaredError_:Ret});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jet(t,e){const n=A(t,"labels","sigmoidCrossEntropyWithLogits"),r=A(e,"logits","sigmoidCrossEntropyWithLogits");oi(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=S_(r),i=me(r,n),o=kee(bd(Zo(Bs(r))));return Be(et(s,i),o)}function Met(t,e,n,r=0,s=ns.SUM_BY_NONZERO_WEIGHTS){let i=A(t,"multiClassLabels","sigmoidCrossEntropy");const o=A(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=A(n,"weights","sigmoidCrossEntropy")),oi(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=xt(r),u=xt(1),d=xt(.5);i=Be(me(i,et(u,c)),me(d,c))}const l=jet(i,o);return wl(l,a,s)}const Let=U({sigmoidCrossEntropy_:Met});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fet(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return ul((s,i,o)=>{const l=$ee(i,[n],!0),c=et(On(i,"float32"),l);o([s,c]);const u=Zo(me(c,s));return{value:Yt(u,[n]),gradFunc:(p,m)=>{const[g,y]=m,v=ci(p.shape,[n]);return[me(te(p,v),et(On(g,"float32"),bd(y))),me(te(p,v),et(bd(y),On(g,"float32")))]}}})(t,e)}function Bet(t,e,n,r=0,s=ns.SUM_BY_NONZERO_WEIGHTS){let i=A(t,"onehotLabels","softmaxCrossEntropy");const o=A(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=A(n,"weights","softmaxCrossEntropy")),oi(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const c=xt(r),u=xt(1),d=xt(i.shape[1]);i=Be(me(i,et(u,c)),It(c,d))}const l=Fet(i,o);return wl(l,a,s)}const Uet=U({softmaxCrossEntropy_:Bet});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wet(t,e,n,r){const s=A(t,"indices","sparseFillEmptyRows","int32"),i=A(e,"values","sparseFillEmptyRows"),o=A(n,"denseShape","sparseFillEmptyRows","int32"),a=A(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:s,values:i,denseShape:o,defaultValue:a},c=z.runKernel(dZ,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const zet=U({sparseFillEmptyRows_:Wet});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vet(t,e,n){const r=A(t,"inputIndices","sparseReshape","int32"),s=A(e,"inputShape","sparseReshape","int32"),i=A(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:s,newShape:i},a=z.runKernel(fZ,o);return{outputIndices:a[0],outputShape:a[1]}}const Het=U({sparseReshape_:Vet});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Get(t,e,n){const r=A(t,"data","sparseSegmentMean"),s=A(e,"indices","sparseSegmentMean","int32"),i=A(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return z.runKernel(hZ,o)}const qet=U({sparseSegmentMean_:Get});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ket(t,e,n){const r=A(t,"data","sparseSegmentSum"),s=A(e,"indices","sparseSegmentSum","int32"),i=A(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return z.runKernel(pZ,o)}const Xet=U({sparseSegmentSum_:Ket});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yet(t,e,n,r,s,i,o,a){const l=A(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=A(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:o,preserveShortSequences:a},d={data:l,dataSplits:c},f=z.runKernel(xZ,d,u);return{nGrams:f[0],nGramsSplits:f[1]}}const Qet=U({stringNGrams_:Yet});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jet(t,e,n=!0){const r=A(t,"input","stringSplit","string"),s=A(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},o={input:r,delimiter:s},a=z.runKernel(bZ,o,i);return{indices:a[0],values:a[1],shape:a[2]}}const Zet=U({stringSplit_:Jet});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ett(t,e){const n=A(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return z.runKernel(wZ,s,r)}const ttt=U({stringToHashBucketFast_:ett});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ntt(t,e,n,r=!0){const s=A(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return z.runKernel(yZ,{x:s},i)}const rtt=U({staticRegexReplace_:ntt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const stt={fft:Z2,ifft:i1,rfft:eR,irfft:zee},itt={hammingWindow:TZe,hannWindow:Qee,frame:Jee,stft:$Ze},Tk={flipLeftRight:DZe,grayscaleToRGB:MZe,resizeNearestNeighbor:uet,resizeBilinear:aet,rgbToGrayscale:FZe,rotateWithOffset:UZe,cropAndResize:PZe,nonMaxSuppression:zZe,nonMaxSuppressionAsync:QZe,nonMaxSuppressionWithScore:ZZe,nonMaxSuppressionWithScoreAsync:tet,nonMaxSuppressionPadded:ret,nonMaxSuppressionPaddedAsync:iet,threshold:het,transform:met},ott={bandPart:yet,gramSchmidt:xet,qr:wet},att={absoluteDifference:Net,computeWeightedLoss:wl,cosineDistance:Tet,hingeLoss:ket,huberLoss:$et,logLoss:Pet,meanSquaredError:Det,sigmoidCrossEntropy:Let,softmaxCrossEntropy:Uet},ltt={sparseFillEmptyRows:zet,sparseReshape:Het,sparseSegmentMean:qet,sparseSegmentSum:Xet},ctt={stringNGrams:Qet,stringSplit:Zet,stringToHashBucketFast:ttt,staticRegexReplace:rtt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const utt=new Map,dtt=new Map;class ftt{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class yu{constructor(){this.classNameMap={}}static getMap(){return yu.instance==null&&(yu.instance=new yu),yu.instance}static register(e){yu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function htt(t,e,n){D(t.className!=null,()=>"Class being registered does not have the static className property defined."),D(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),D(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return yu.register(t),utt.set(s,t),dtt.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zd extends ftt{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return cs(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return YXe(e,n)}dispose(){this.iterations_!=null&&cs(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:xt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(zd,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ptt extends zd{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=z.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=z.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:pt(()=>Zs(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:pt(()=>Zs(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;pt(()=>{const u=Be(me(l,this.rho),me(yo(a),1-this.rho)),d=me(It(cl(Be(c,this.epsilon)),cl(Be(l,this.epsilon))),a),f=Be(me(c,this.rho),me(yo(d),1-this.rho));l.assign(u),c.assign(f);const p=Be(me(d,-this.learningRate),i);i.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(cs(this.accumulatedGrads.map(e=>e.variable)),cs(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mtt extends zd{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=z.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:pt(()=>Qv(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;pt(()=>{const l=Be(a,yo(o));a.assign(l);const c=Be(me(It(o,cl(Be(l,z.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&cs(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gtt extends zd{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],pt(()=>{this.accBeta1=xt(n).variable(),this.accBeta2=xt(r).variable()}),s==null&&(this.epsilon=z.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);pt(()=>{const r=et(1,this.accBeta1),s=et(1,this.accBeta2);n.forEach((i,o)=>{const a=z.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:pt(()=>Zs(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:pt(()=>Zs(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,f=Be(me(u,this.beta1),me(c,1-this.beta1)),p=Be(me(d,this.beta2),me(yo(c),1-this.beta2)),m=It(f,r),g=It(p,s);u.assign(f),d.assign(p);const y=Be(me(It(m,Be(cl(g),this.epsilon)),-this.learningRate),a);a.assign(y)}),this.accBeta1.assign(me(this.accBeta1,this.beta1)),this.accBeta2.assign(me(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&cs(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&cs(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),pt(()=>{this.accBeta1.assign(Gy(this.beta1,this.iterations_+1)),this.accBeta2.assign(Gy(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ytt extends zd{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],pt(()=>{this.iteration=xt(0).variable(),this.accBeta1=xt(n).variable()}),s==null&&(this.epsilon=z.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);pt(()=>{const r=et(1,this.accBeta1),s=It(-this.learningRate,Be(me(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=z.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Zs(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:Zs(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,f=Be(me(u,this.beta1),me(c,1-this.beta1)),p=me(d,this.beta2),m=Bs(c),g=Dee(p,m);u.assign(f),d.assign(g);const y=Be(me(It(s,r),It(f,Be(g,this.epsilon))),a);a.assign(y)}),this.iteration.assign(Be(this.iteration,1)),this.accBeta1.assign(me(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&cs(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&cs(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nte extends zd{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=z.registeredVariables[r];pt(()=>{const a=Be(me(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=zo(xt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vtt extends nte{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=xt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=z.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:pt(()=>Zs(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&pt(()=>{let l;const c=Be(me(this.m,o),a);this.useNesterov?l=Be(me(this.c,Be(a,me(c,this.m))),i):l=Be(me(this.c,c),i),o.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&cs(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xtt extends zd{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=z.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=z.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:pt(()=>Zs(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:pt(()=>Zs(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:pt(()=>Zs(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;pt(()=>{const u=Be(me(l,this.decay),me(yo(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,f=Be(me(d,this.decay),me(a,1-this.decay)),p=It(me(a,this.learningRate),cl(et(u,Be(yo(f),this.epsilon)))),m=Be(me(c,this.momentum),p);l.assign(u),d.assign(f),c.assign(m);const g=et(i,m);i.assign(g)}else{const d=Be(me(l,this.decay),me(yo(a),1-this.decay)),f=Be(me(c,this.momentum),It(me(a,this.learningRate),cl(Be(d,this.epsilon))));l.assign(d),c.assign(f);const p=et(i,f);i.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&cs(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&cs(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&cs(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const btt=[ptt,mtt,gtt,ytt,vtt,xtt,nte];function wtt(){for(const t of btt)htt(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Stt="model",_tt=".json",Ctt=".weights.bin";function EB(t){return new Promise(e=>setTimeout(e)).then(t)}class _d{constructor(e){if(!X().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(_d.URL_SCHEME)&&(e=e.slice(_d.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Stt),this.modelJsonFileName=e+_tt,this.weightDataFileName=e+Ctt}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=ko.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=ree(e,s),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await EB(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await EB(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Kv(e)}}}}_d.URL_SCHEME="downloads://";class Ntt{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const l=j2(i,c=>this.loadWeights(c));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(i).then(o=>[n,o])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=o=>{const a=o.target.result;r(a)},i.onerror=o=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>_B(i.name)),s={};for(const i of e)i.paths.forEach(o=>{const a=_B(o);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);s[o]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const Ett=t=>X().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(_d.URL_SCHEME)?Ttt(t.slice(_d.URL_SCHEME.length)):null;hn.registerSaveRouter(Ett);function Ttt(t="model"){return new _d(t)}function Itt(t){return new Ntt(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TB(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let s=0;const i=l=>(l.then(c=>{const u=n+ ++s/t.length*(r-n);return e(u),c}),l);function o(l){D(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){D(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),D(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),D(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function rte(t,e){e==null&&(e={});const n=e.fetchFunc==null?X().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await TB(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await TB(a,e.onProgress,.5,1)}function ktt(t,e){var n;const r=e.fetchFunc==null?X().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await i.read();if(l){s++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,s/t.length);continue}o.enqueue(c);return}o.close()}})}async function Ott(t,e="",n,r){return ste(o=>rte(o,{requestInit:r}))(t,e,n)}function ste(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((p,m)=>{let g=0;p.weights.forEach(y=>{const v="quantization"in y?y.quantization.dtype:y.dtype,x=gd[v]*ce(y.shape),b=()=>{s[m]=!0,i[m]==null&&(i[m]=[]),i[m].push({manifestEntry:y,groupOffset:g,sizeBytes:x})};r!=null?r.forEach((w,_)=>{w===y.name&&(b(),o[_]=!0)}):b(),a.push(y.name),g+=x})}),!o.every(p=>p)){const p=r.filter((m,g)=>!o[g]);throw new Error(`Could not find weights in manifest with names: ${p.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=s.reduce((p,m,g)=>(m&&p.push(g),p),[]),c=[];l.forEach(p=>{e[p].paths.forEach(m=>{const g=n+(n.endsWith("/")?"":"/")+m;c.push(g)})});const u=await t(c),d={};let f=0;return l.forEach(p=>{const m=e[p].paths.length,g=new ko(u.slice(f,f+m));i[p].forEach(v=>{const x=g.slice(v.groupOffset,v.groupOffset+v.sizeBytes),b=eee(x,[v.manifestEntry]);for(const w in b)d[w]=b[w]}),f+=m}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $tt="application/octet-stream",Att="application/json";class sR{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(D(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=X().platform.fetch,D(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&D(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=ree(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:Att}),"model.json"),e.weightData!=null){const o=ko.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:$tt}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Kv(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return j2(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=vk(e.weightsManifest),s=()=>ktt(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=Ptt(n),i=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):o.push(i+c+s);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=vk(e),s=await rte(n,this.loadOptions);return[r,s]}}sR.URL_SCHEME_REGEX=/^https?:\/\//;function Ptt(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function Ik(t){return t.match(sR.URL_SCHEME_REGEX)!=null}const ite=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>Ik(r)):n=Ik(t),n)return iR(t,e)}return null};hn.registerSaveRouter(ite);hn.registerLoadRouter(ite);function iR(t,e){return new sR(t,e)}function Rtt(t,e){return iR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NN{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class ote{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Dtt{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function jtt(t,e,n,r){const s=arguments;return new Dtt(ate(...s))}function ate(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new NN(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new NN({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new NN({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function Mtt(t){return new ote(t)}function Ltt(t){return new ote(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lte=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:ko,browserFiles:Itt,browserHTTPRequest:Rtt,concatenateArrayBuffers:jKe,copyModel:s9e,decodeWeights:eee,decodeWeightsStream:nee,encodeWeights:OKe,fromMemory:jtt,fromMemorySync:ate,getLoadHandlers:VKe,getModelArtifactsForJSON:j2,getModelArtifactsForJSONSync:see,getModelArtifactsInfoForJSON:Kv,getSaveHandlers:zKe,getWeightSpecs:vk,http:iR,isHTTPScheme:Ik,listModels:n9e,loadWeights:Ott,moveModel:i9e,registerLoadRouter:WKe,registerSaveRouter:UKe,removeModel:r9e,weightsLoaderFactory:ste,withSaveHandler:Mtt,withSaveHandlerSync:Ltt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let su;function Ftt(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(dk(ak,z.backendName)!=null){const m={pixels:t},g={numChannels:e};return z.runKernel(ak,m,g)}const[c,u]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(o)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)d=t.data;else if(i||s||a){if(su==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")su=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else su=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});su.canvas.width=c,su.canvas.height=u,su.drawImage(t,0,0,c,u),d=su.getImageData(0,0,c,u).data}let f;if(e===4)f=new Int32Array(d);else{const m=c*u;f=new Int32Array(m*e);for(let g=0;g<m;g++)for(let y=0;y<e;++y)f[g*e+y]=d[g*4+y]}return Gee(f,[u,c,e],"int32")}const Btt=U({fromPixels_:Ftt});function cte(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ce(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let d=0;d<s.length-1;++d)o*=s[d];const a=t.shape,l=s.slice();l.pop();let c=1;for(let d=i;d<n;++d)c*=a[d],l.push(a[d]);const u=[...yr(t.shape).map(d=>d/c),1].slice(0,i);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kk=-2,Utt=-1;function ute(t,e,n){const r=t.shape.length;D(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),D(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)D(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function Wtt(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function dte(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function fte(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function hte(t,e,n){return n<=t?n:n-(e-1)}function pte(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function ztt(t,e,n,r,s,i,o,a,l){const c=t.length;let u=new Array(c),d=new Array(c),f=new Array(c);if(e.length&&n>0){const p=e[0],m=n+1;u=mte(o,p,m,r,t),d=gte(a,p,m,s,t),f=fte(i,p,m,t)}else for(let p=0;p<c;p++)u[p]=vte(o,r,i,t,p,l),d[p]=xte(a,s,i,t,p,l),f[p]=yte(i,p,l);return{begin:u,end:d,strides:f}}function mte(t,e,n,r,s){const i=[...s],o=pte(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=hte(e,n,a);let c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function gte(t,e,n,r,s){const i=[...s],o=pte(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=hte(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=Xw(0,i[a],s[a])}return i}function yte(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function vte(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=Xw(0,o,l-1),o}function xte(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=Xw(0,o,l):o=Xw(-1,o,l-1),o}function oR(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function aR(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function bte(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{D(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(D(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function wte(t,e,n,r,s,i,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let b=0;b<d.dims;b++)u&&1<<b&a&&d.numAddAxisAfterEllipsis++,1<<b&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Vtt(d,f);let p=!0,m=!0,g=!0;const y=[],v=[];for(let b=0;b<t.length;++b){if(f.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const w=!!(f.shrinkAxisMask&1<<b),_=t[b];if(_===-1){y.push(w?1:-1);continue}const C=[f.beginMask&1<<b,f.endMask&1<<b],E=[f.strides[b]>0?0:-1,f.strides[b]>0?_:_-1];if(w&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&f.strides[b]===1;const N=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(w){const k=f.begin[b]<0?_+f.begin[b]:f.begin[b];if(f.begin[b]=k,f.end[b]=f.begin[b]+1,k<0||k>=_)throw Error(`slice index ${f.begin[b]} of dimension ${b} out of bounds.`)}else f.begin[b]=IB(f.begin[b],0,f.strides[b],_,C,E),f.end[b]=IB(f.end[b],1,f.strides[b],_,C,E);const O=f.strides[b]===1&&f.begin[b]===0&&f.end[b]===_;p=p&&O,m=m&&(b===0&&f.strides[b]===1||O)}else p=p&&f.strides[b]===1&&N,m=m&&(b===0&&f.strides[b]===1||N);let I,$=!1;if(f.beginValid&&f.endValid?(I=f.end[b]-f.begin[b],$=!0):w?(I=1,$=!0):N&&_>=0&&(f.strides[b]<0?I=-_:I=_,$=!0),$){let O;I===0||I<0!=f.strides[b]<0?O=0:O=Math.trunc(I/f.strides[b])+(I%f.strides[b]!==0?1:0),y.push(O)}else y.push(-1)}for(let b=0;b<f.finalShapeGatherIndices.length;++b){const w=f.finalShapeGatherIndices[b];w>=0?v.push(y[w]):w===kk&&v.push(1)}return{finalShapeSparse:v.filter((b,w)=>f.finalShapeGatherIndices[w]!==kk),finalShape:v,isIdentity:p,sliceDim0:m,isSimpleSlice:g,begin:f.begin,end:f.end,strides:f.strides}}function Vtt(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(kk),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Utt),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function IB(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const Htt=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:ute,computeFlatOffset:aR,computeOutShape:dte,getNormalizedAxes:ztt,isSliceContinous:oR,maskToAxes:Wtt,parseSliceParams:bte,sliceInfo:wte,startForAxis:vte,startIndicesWithElidedDims:mte,stopForAxis:xte,stopIndicesWithElidedDims:gte,stridesForAxis:yte,stridesWithElidedDims:fte},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gtt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function qtt(){return new Promise(t=>Gtt(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ste(t,e){const n=t[0].length;t.forEach((s,i)=>{D(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),D(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)D(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Cd(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var to;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(to||(to={}));function _te(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function Cte(t){const e={FIRST_DIM_SIZE:to.FIRST_DIM_SIZE,VALUE_ROWIDS:to.VALUE_ROWIDS,ROW_LENGTHS:to.ROW_LENGTHS,ROW_SPLITS:to.ROW_SPLITS,ROW_LIMITS:to.ROW_LIMITS,ROW_STARTS:to.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function Nte(t){return t.length===0?0:t[0]===to.FIRST_DIM_SIZE?t.length-1:t.length}function Ete(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lR=30;function I_(t){return t<=lR?t:sk(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cR(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function uR(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function dR(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function Ite(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function kte(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ote=1.7580993408473768,$te=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ate=.3275911,Pte=.254829592,Rte=-.284496736,Dte=1.421413741,jte=-1.453152027,Mte=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ok(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Ktt(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Xtt(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function Ytt(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function Qtt(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function Jtt(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function Ztt(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function ent(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EN="->",tnt=/->/g,kB=",",OB="...";function Lte(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(tnt,"").length)/EN.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${EN}").`);const[r,s]=t.split(EN);D(r.indexOf(OB)===-1,()=>`The ellipsis notation ("${OB}") is not supported yet.`);const i=r.split(kB),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<s.length;++f){const p=s[f];if(!i.some(m=>m.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);a.indexOf(p)===-1&&a.push(p)}for(let f=0;f<r.length;++f){const p=r[f];a.indexOf(p)===-1&&p!==kB&&a.push(p)}const l=new Array(i.length);for(let f=0;f<o;++f){if(new Set(i[f].split("")).size!==i[f].length)throw new Error(`Found duplicate axes in input component ${i[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let p=0;p<i[f].length;++p)l[f].push(a.indexOf(i[f][p]))}const c=a.length,u=s.length,d=[];for(let f=u;f<c;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function Fte(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function Bte(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:D(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function Ute(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=nnt(e,a);for(const c of l)i.indexOf(c)===-1&&(r[o].push(c),i.push(c))}return{path:n,steps:r}}function Wte(t){return t.every((e,n)=>e===n)}function nnt(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function zte(t,e,n=0){let r=[];if(typeof e=="number")D(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);D(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}D(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vte(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function Hte(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function Gte(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Kte(t,e){return`size ${t} must be non-negative, not ${e}`}function Xte(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Yte(t,e){const n=ce(t),r=ce(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function Qte(t,e){const n=ce(t),r=ce(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $k(){return"segment ids must be >= 0"}function Jte(){return"segment ids are not increasing"}function Zte(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function ene(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tne(t,e){let n=!1,r;for(t<=lR?(r=t,n=!0):r=sk(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=sk(t,r+1);return r}function nne(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function rne(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<s;d++)a.push(e.shape[d]);for(let d=n+1;d<i;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const rnt=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:rne,computeOutShape:nne,segOpComputeOptimalWindowSize:tne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function np(t){try{return t.map(e=>Zh(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function sne(t){return t.map(e=>zu(e))}const snt=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Pte,ERF_A2:Rte,ERF_A3:Dte,ERF_A4:jte,ERF_A5:Mte,ERF_P:Ate,PARALLELIZE_THRESHOLD:lR,get RowPartitionType(){return to},SELU_SCALE:$te,SELU_SCALEALPHA:Ote,applyActivation:E_,assertAndGetBroadcastShape:wt,assertAxesAreInnerMostDims:Oo,assertParamsConsistent:Ste,assignToTypedArray:Jtt,axesAreInnerMostDims:B2,calculateShapes:__,checkEinsumDimSizes:Bte,checkPadOnDimRoundingMode:Mi,combineLocations:See,combineRaggedTensorToTensorShapes:_te,complexWithEvenIndex:Xtt,complexWithOddIndex:Ytt,computeConv2DInfo:li,computeConv3DInfo:Yv,computeDefaultPad:M2,computeDilation2DInfo:pee,computeOptimalWindowSize:I_,computeOutAndReduceShapes:pa,computeOutShape:Cd,computePool2DInfo:Bd,computePool3DInfo:Xv,convertConv2DDataFormat:qp,decodeEinsumEquation:Lte,eitherStridesOrDilationsAreOne:Ps,expandShapeToKeepDim:ci,exponent:ent,exponents:Ztt,fromStringArrayToUint8:sne,fromUint8ToStringArray:np,getAxesPermutation:Li,getBroadcastDims:t1,getComplexWithIndex:Qtt,getEinsumComputePath:Ute,getEinsumPermutation:Fte,getFusedBiasGradient:N_,getFusedDyActivation:C_,getImageCenter:Tte,getInnerMostAxes:Fi,getPermuted:uR,getRaggedRank:Nte,getReductionAxes:xee,getReshaped:cR,getReshapedPermuted:dR,getRowPartitionTypesHelper:Cte,getSliceBeginCoords:Ite,getSliceSize:kte,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Vte,getSparseFillEmptyRowsNegativeIndexErrorMessage:Hte,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:Gte,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Xte,getSparseReshapeInputOutputMismatchErrorMessage:Qte,getSparseReshapeInputOutputMultipleErrorMessage:Yte,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:qte,getSparseReshapeNegativeOutputDimErrorMessage:Kte,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:ene,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:$k,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Jte,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Zte,getUndoAxesPermutation:U2,isIdentityPermutation:Wte,log:Zqe,mergeRealAndImagArrays:Ok,prepareAndValidate:cte,prepareSplitSize:zte,segment_util:rnt,shouldFuse:T_,slice_util:Htt,splitRealAndImagArrays:Ktt,stridesOrDilationsArePositive:xd,tupleValuesAreOne:Hy,upcastType:ia,validateDefaultValueShape:Ete,validateInput:tR,validateUpdateShape:qee,warn:so},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */wtt();/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const int=X();int.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var gs;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(gs||(gs={}));var $B;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})($B||($B={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ont={};function ine(t){return ont[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return ur(e.inputNames[c],n,r,s);if(i.type==="tensors"){const f=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((m,g)=>{var y;return((y=f[g])===null||y===void 0?void 0:y.op)!=="NoOp"}).map(m=>ur(m,n,r,s))}const u=ur(e.inputNames[c],n,r,s),d=u.dataSync();return i.type==="number"?d[0]:ik(u.shape,d)}const o=e.attrParams[t];return o&&o.value}function ur(t,e,n,r){const[s,i]=ys(t,n);if(r!=null){const a=r.getHashTableHandleByName(s);if(a!=null)return a}const o=n.currentContextIds.find(a=>!!e[o1(s,a)]);return o!==void 0?e[o1(s,o)][i]:void 0}function AB(t,e,n){return e[o1(t,n.currentContextId)]}function Ea(t,e){const[n,r,s]=ys(t,e);return[o1(n,e&&e.currentContextId),r,s]}function o1(t,e){return e?`${t}-${e}`:t}function ys(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],o=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);s=[i,a,o]}return n&&e.parseNodeNameCache.set(t,s),s}function Pb(t,e,n){let r=T("pad",t,e,n);if(r==="explicit"){r=T("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function Ta(t){return t.kept?t:bc(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ant=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],lnt=Object.freeze(Object.defineProperty({__proto__:null,json:ant},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cnt=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],unt=Object.freeze(Object.defineProperty({__proto__:null,json:cnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dnt=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],fnt=Object.freeze(Object.defineProperty({__proto__:null,json:dnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hnt=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],pnt=Object.freeze(Object.defineProperty({__proto__:null,json:hnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mnt=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],gnt=Object.freeze(Object.defineProperty({__proto__:null,json:mnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ynt=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],vnt=Object.freeze(Object.defineProperty({__proto__:null,json:ynt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xnt=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],bnt=Object.freeze(Object.defineProperty({__proto__:null,json:xnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wnt=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Snt=Object.freeze(Object.defineProperty({__proto__:null,json:wnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _nt=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Cnt=Object.freeze(Object.defineProperty({__proto__:null,json:_nt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nnt=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Ent=Object.freeze(Object.defineProperty({__proto__:null,json:Nnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tnt=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Int=Object.freeze(Object.defineProperty({__proto__:null,json:Tnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const knt=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Ont=Object.freeze(Object.defineProperty({__proto__:null,json:knt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $nt=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Ant=Object.freeze(Object.defineProperty({__proto__:null,json:$nt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pnt=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Rnt=Object.freeze(Object.defineProperty({__proto__:null,json:Pnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dnt=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],jnt=Object.freeze(Object.defineProperty({__proto__:null,json:Dnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mnt=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Lnt=Object.freeze(Object.defineProperty({__proto__:null,json:Mnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fnt=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Bnt=Object.freeze(Object.defineProperty({__proto__:null,json:Fnt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Unt=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Wnt=Object.freeze(Object.defineProperty({__proto__:null,json:Unt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const znt=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Vnt=Object.freeze(Object.defineProperty({__proto__:null,json:znt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PB{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[lnt,unt,fnt,pnt,gnt,vnt,bnt,Snt,Cnt,Ent,Int,Ont,Ant,Rnt,jnt,Lnt,Bnt,Wnt,Vnt],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],o=[],a=r.reduce((g,y)=>(g[y.name]=this.mapNode(y),y.op.startsWith("Placeholder")?s.push(g[y.name]):y.op==="Const"?i.push(g[y.name]):(y.input==null||y.input.length===0)&&o.push(g[y.name]),g),{});let l=[];const c=[];let u={},d={};n!=null&&(u=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const f=Object.keys(a);f.forEach(g=>{const y=a[g];y.inputNames.forEach((v,x)=>{const[b,,w]=Ea(v),_=a[b];if(_.outputs!=null){const C=_.outputs.indexOf(w);if(C!==-1){const E=`${b}:${C}`;y.inputNames[x]=E}}y.inputs.push(_),_.children.push(y)})}),Object.keys(d).length===0?f.forEach(g=>{const y=a[g];y.children.length===0&&c.push(y)}):Object.keys(d).forEach(g=>{const[y]=Ea(g),v=a[y];v!=null&&(v.signatureKey=d[g],c.push(v))}),Object.keys(u).length>0?Object.keys(u).forEach(g=>{const[y]=Ea(g),v=a[y];v&&(v.signatureKey=u[g],l.push(v))}):l=s;let p={};e.library!=null&&e.library.function!=null&&(p=e.library.function.reduce((g,y)=>(g[y.signature.name]=this.mapFunction(y),g),{}));const m={nodes:a,inputs:l,outputs:c,weights:i,placeholders:s,signature:n,functions:p};return o.length>0&&(m.initNodes=o),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=ine(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const o=i.type;let a;switch(i.type){case"string":a=Ak(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ak(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=Fk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Fk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=Rk(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=Rk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=Lk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Lk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=Pk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Pk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=Uk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Uk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=Mk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Mk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=Bk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Bk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=Dk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Dk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=jk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=jk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=RB(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=RB(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:a,type:o},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((d,f)=>(d[f.name]=this.mapNode(f),f.op==="Const"&&s.push(d[f.name]),d),{}));const o=[],a=[];e.signature.inputArg.forEach(d=>{const[f]=Ea(d.name),p={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:fR(d.type),type:"dtype"}},children:[]};p.signatureKey=d.name,o.push(p),i[f]=p}),Object.keys(i).forEach(d=>{const f=i[d];f.inputNames.forEach((p,m)=>{const[g,,y]=Ea(p),v=i[g];if(v.outputs!=null){const x=v.outputs.indexOf(y);if(x!==-1){const b=`${g}:${x}`;f.inputNames[m]=b}}f.inputs.push(v),v.children.push(f)})});const c=e.ret;e.signature.outputArg.forEach(d=>{const[f,p]=Ea(c[d.name]),m=i[f];m!=null&&(m.defaultOutput=p,a.push(m))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:a,weights:s,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function Hnt(t){const e=X().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function one(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):Hnt(t);return e?n:n.toLowerCase()}function Ak(t,e,n,r=!1){const s=t[e];return s!=null?one(s.s,r):n}function Pk(t,e,n){const r=t[e];return r?r.b:n}function Rk(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function fR(t){switch(typeof t=="string"&&(t=gs[t]),t){case gs.DT_FLOAT:case gs.DT_HALF:return"float32";case gs.DT_INT32:case gs.DT_INT64:case gs.DT_INT8:case gs.DT_UINT8:return"int32";case gs.DT_BOOL:return"bool";case gs.DT_DOUBLE:return"float32";case gs.DT_STRING:return"string";case gs.DT_COMPLEX64:case gs.DT_COMPLEX128:return"complex64";default:return null}}function RB(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function Dk(t,e,n){const r=t[e];return r&&r.type?fR(r.type):n}function jk(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>fR(s)):n}function ane(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function Mk(t,e,n){const r=t[e];return r&&r.shape?ane(r.shape):n}function Lk(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function Fk(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>one(i,r)):n}function Bk(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>ane(s)):n}function Uk(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gnt{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return ur(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return ur(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Rk(this.node.rawAttrs,e,n);if(r.s!=null)return Ak(this.node.rawAttrs,e,n);if(r.b!=null)return Pk(this.node.rawAttrs,e,n);if(r.shape!=null)return Mk(this.node.rawAttrs,e,n);if(r.type!=null)return Dk(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Lk(this.node.rawAttrs,e,n);if(r.list.s!=null)return Fk(this.node.rawAttrs,e,n);if(r.list.shape!=null)return Bk(this.node.rawAttrs,e,n);if(r.list.b!=null)return Uk(this.node.rawAttrs,e,n);if(r.list.type!=null)return jk(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wr=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:ZZ,abs:Bs,acos:v9e,acosh:b9e,add:Be,addN:S9e,all:C9e,any:E9e,argMax:I9e,argMin:O9e,asin:A9e,asinh:R9e,atan:j9e,atan2:L9e,atanh:B9e,avgPool:mee,avgPool3d:K9e,basicLSTMCell:t7e,batchNorm:y_,batchNorm2d:o7e,batchNorm3d:l7e,batchNorm4d:u7e,batchToSpaceND:gee,bincount:yee,bitwiseAnd:h7e,booleanMaskAsync:QJe,broadcastArgs:m7e,broadcastTo:vg,buffer:yn,cast:On,ceil:v7e,clipByValue:b7e,clone:bc,complex:Dc,concat:vr,concat1d:S7e,concat2d:L2,concat3d:N7e,concat4d:T7e,conv1d:O7e,conv2d:v_,conv2dTranspose:P7e,conv3d:D7e,conv3dTranspose:F7e,cos:U7e,cosh:z7e,cosineWindow:nR,cumprod:H7e,cumsum:q7e,denseBincount:X7e,depthToSpace:Q7e,depthwiseConv2d:F2,diag:eXe,dilation2d:nXe,div:It,divNoNan:aXe,dot:cXe,dropout:uZe,einsum:df,elu:wee,enclosingPowerOfTwo:Yee,ensureShape:hXe,equal:bee,erf:mXe,euclideanNorm:CXe,exp:bd,expandDims:Na,expm1:IXe,eye:Cee,fft:Z2,fill:Qv,floor:Nee,floorDiv:hee,fused:NZe,gather:Eee,gatherND:aZe,greater:b_,greaterEqual:Tee,ifft:i1,imag:w_,image:Tk,inTopKAsync:fZe,irfft:zee,isFinite:MXe,isInf:FXe,isNaN:UXe,leakyRelu:Iee,less:Nk,lessEqual:W2,linalg:ott,linspace:HXe,localResponseNormalization:qXe,log:qy,log1p:kee,logSigmoid:eYe,logSoftmax:rYe,logSumExp:$ee,logicalAnd:n1,logicalNot:Aee,logicalOr:Pee,logicalXor:cYe,losses:att,lowerBound:dYe,matMul:Rt,max:th,maxPool:Ree,maxPool3d:pYe,maxPoolWithArgmax:gYe,maximum:Dee,mean:r1,meshgrid:xYe,min:Ck,minimum:s1,mirrorPad:SYe,mod:CYe,moments:EYe,movingAverage:eZe,mul:me,multiRNNCell:IYe,multinomial:OYe,neg:Zo,norm:x_,notEqual:jee,oneHot:PYe,ones:$u,onesLike:DYe,op:U,outerProduct:MYe,pad:Jv,pad1d:BYe,pad2d:WYe,pad3d:VYe,pad4d:GYe,pool:QYe,pow:Gy,prelu:Lee,print:fee,prod:eQe,raggedGather:nQe,raggedRange:sQe,raggedTensorToTensor:oQe,rand:lQe,randomGamma:IQe,randomNormal:Bee,randomStandardNormal:$Qe,randomUniform:J2,randomUniformInt:RQe,range:Ky,real:Xy,reciprocal:MQe,relu:S_,relu6:Uee,reshape:te,reverse:Sd,reverse1d:WQe,reverse2d:VQe,reverse3d:GQe,reverse4d:KQe,rfft:eR,round:Wee,rsqrt:QQe,scalar:xt,scatterND:nZe,searchSorted:z2,selu:ZQe,separableConv2d:tJe,setdiff1dAsync:rJe,sigmoid:Vu,sign:iJe,signal:itt,sin:aJe,sinh:cJe,slice:tt,slice1d:dJe,slice2d:hJe,slice3d:mJe,slice4d:yJe,softmax:xJe,softplus:Oee,spaceToBatchND:Mee,sparse:ltt,sparseToDense:iZe,spectral:stt,split:Yy,sqrt:cl,square:yo,squaredDifference:Vee,squeeze:Hu,stack:dl,step:Hee,stridedSlice:OJe,string:ctt,sub:et,sum:Yt,tan:AJe,tanh:_k,tensor:Jo,tensor1d:as,tensor2d:Gu,tensor3d:Gee,tensor4d:PJe,tensor5d:RJe,tensor6d:DJe,tensorScatterUpdate:MJe,tile:xg,topk:FJe,transpose:Ek,truncatedNormal:UJe,unique:zJe,unsortedSegmentSum:HJe,unstack:Wd,upperBound:qJe,variable:KJe,where:wc,whereAsync:Xee,zeros:wd,zerosLike:Zs},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qnt=(t,e,n,r=wr)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(T("a",t,e,n),T("b",t,e,n))];case"AddN":return[r.addN(T("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(T("a",t,e,n),T("b",t,e,n))];case"Mul":return[r.mul(T("a",t,e,n),T("b",t,e,n))];case"RealDiv":case"Div":return[r.div(T("a",t,e,n),T("b",t,e,n))];case"DivNoNan":return[r.divNoNan(T("a",t,e,n),T("b",t,e,n))];case"FloorDiv":return[r.floorDiv(T("a",t,e,n),T("b",t,e,n))];case"Sub":return[r.sub(T("a",t,e,n),T("b",t,e,n))];case"Minimum":return[r.minimum(T("a",t,e,n),T("b",t,e,n))];case"Maximum":return[r.maximum(T("a",t,e,n),T("b",t,e,n))];case"Pow":return[r.pow(T("a",t,e,n),T("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Knt=(t,e,n,r=wr)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(T("x",t,e,n))];case"Acos":return[r.acos(T("x",t,e,n))];case"Acosh":return[r.acosh(T("x",t,e,n))];case"Asin":return[r.asin(T("x",t,e,n))];case"Asinh":return[r.asinh(T("x",t,e,n))];case"Atan":return[r.atan(T("x",t,e,n))];case"Atan2":return[r.atan2(T("x",t,e,n),T("y",t,e,n))];case"Atanh":return[r.atanh(T("x",t,e,n))];case"Ceil":return[r.ceil(T("x",t,e,n))];case"Complex":return[r.complex(T("real",t,e,n),T("imag",t,e,n))];case"Cos":return[r.cos(T("x",t,e,n))];case"Cosh":return[r.cosh(T("x",t,e,n))];case"Elu":return[r.elu(T("x",t,e,n))];case"Erf":return[r.erf(T("x",t,e,n))];case"Exp":return[r.exp(T("x",t,e,n))];case"Expm1":return[r.expm1(T("x",t,e,n))];case"Floor":return[r.floor(T("x",t,e,n))];case"Log":return[r.log(T("x",t,e,n))];case"Log1p":return[r.log1p(T("x",t,e,n))];case"Imag":return[r.imag(T("x",t,e,n))];case"Neg":return[r.neg(T("x",t,e,n))];case"Reciprocal":return[r.reciprocal(T("x",t,e,n))];case"Real":return[r.real(T("x",t,e,n))];case"Relu":return[r.relu(T("x",t,e,n))];case"Round":return[r.round(T("x",t,e,n))];case"Selu":return[r.selu(T("x",t,e,n))];case"Sigmoid":return[r.sigmoid(T("x",t,e,n))];case"Sin":return[r.sin(T("x",t,e,n))];case"Sign":return[r.sign(T("x",t,e,n))];case"Sinh":return[r.sinh(T("x",t,e,n))];case"Softplus":return[r.softplus(T("x",t,e,n))];case"Sqrt":return[r.sqrt(T("x",t,e,n))];case"Square":return[r.square(T("x",t,e,n))];case"Tanh":return[r.tanh(T("x",t,e,n))];case"Tan":return[r.tan(T("x",t,e,n))];case"ClipByValue":return[r.clipByValue(T("x",t,e,n),T("clipValueMin",t,e,n),T("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(T("x",t,e,n))];case"Rsqrt":return[r.rsqrt(ur(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(T("x",t,e,n),T("alpha",t,e,n))];case"Prelu":return[r.prelu(T("x",t,e,n),T("alpha",t,e,n))];case"IsNan":return[r.isNaN(ur(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(ur(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(ur(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gi(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){D(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];D(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function DB(t){return!(typeof t=="number"||t.some(e=>e<0))}function Pm(t,e,n){let r=Wk(t,n);const s=!DB(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=Wk(i.shape,r)}),!DB(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Wk(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xnt{constructor(e,n,r,s,i,o,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=xt(0),zo(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),gi(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,zo(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return Jo([],[0].concat(this.elementShape));const r=this.readMany(e);return gi(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),dl(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Jo([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return gi(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),vr(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Wd(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];pt(()=>{n=te(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:s[l-1],0],d=[1,e[l],i];o[l]=te(tt(n,u,d),this.elementShape)}return o});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nd{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);gi(n,i.shape,"TensorList shape mismatch: "),zo(i)}),this.idTensor=xt(0),this.maxNumElements=s,zo(this.idTensor)}copy(){return new Nd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);gi(e,this.elementShape,"TensorList shape mismatch: ");const s=Pm(this.elementShape,this.tensors,e);return pt(()=>{const i=this.tensors.map(o=>te(o,s));return dl(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Pm(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,gi(s.shape,e,"TensorList shape mismatch: "),te(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(gi(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");zo(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Nd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);gi(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=Pm(this.elementShape,this.tensors,n);return te(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);gi(this.elementShape,n.shape,"TensorList shape mismatch: "),zo(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);gi(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=Pm(this.elementShape,this.tensors,r);return e.length===0?Jo([],[0].concat(s)):pt(()=>{const i=e.map(o=>te(this.tensors[o],s));return dl(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);gi(this.elementShape,n,"TensorList shape mismatch: ");const r=Pm(this.elementShape,this.tensors,n);return this.size()===0?Jo([],[0].concat(r)):pt(()=>{const s=this.tensors.map(i=>te(i,r));return vr(s,0)})}}function Ynt(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);gi(s,e,"TensorList shape mismatch: ");const i=Wd(t);return new Nd(i,e,r)}function Qnt(t,e,n,r){return new Nd([],t,e,r)}function Jnt(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new Nd([],n,t.dtype,r),o=Wd(t,0);return e.forEach((a,l)=>{i.setItem(a,o[l])}),i}function Znt(t,e,n){let r=0;const s=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=Wk(i,n),a=r===0?0:t.size/r,l=pt(()=>{const u=[];t=te(t,[1,r,a]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:s[d-1],0],m=[1,e[d],a];u[d]=te(tt(t,p,m),o)}return t.dispose(),u}),c=new Nd([],n,t.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ert=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=T("thenBranch",t,e,n),s=T("elseBranch",t,e,n),i=T("cond",t,e,n),o=T("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=T("body",t,e,n),s=T("cond",t,e,n),i=T("args",t,e,n),o=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(u=>u.id);let l=await o[0].data();o.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){const u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const d=c.map(p=>p.id);u.forEach(p=>{!p.kept&&a.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()});const f=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await f[0].data(),f.forEach(p=>{!p.kept&&a.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()})}return c}case"LoopCond":{const r=T("pred",t,e,n);return[Ta(r)]}case"Switch":{const r=T("pred",t,e,n);let s=T("data",t,e,n);return s.kept||(s=Ta(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>ur(s,e,n)!==void 0);if(r){const s=ur(r,e,n);return[Ta(s)]}return}case"Enter":{const r=T("frameName",t,e,n),s=T("tensor",t,e,n);return n.enterFrame(r),[Ta(s)]}case"Exit":{const r=T("tensor",t,e,n);return n.exitFrame(),[Ta(r)]}case"NextIteration":{const r=T("tensor",t,e,n);return n.nextIteration(),[Ta(r)]}case"TensorArrayV3":{const r=T("size",t,e,n),s=T("dtype",t,e,n),i=T("elementShape",t,e,n),o=T("dynamicSize",t,e,n),a=T("clearAfterRead",t,e,n),l=T("identicalElementShapes",t,e,n),c=T("name",t,e,n),u=new Xnt(c,s,r,i,l,o,a);return n.addTensorArray(u),[u.idTensor,xt(1)]}case"TensorArrayWriteV3":{const r=T("tensorArrayId",t,e,n),s=T("index",t,e,n),i=T("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(s,i),[o.idTensor]}case"TensorArrayReadV3":{const r=T("tensorArrayId",t,e,n),s=T("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=T("tensorArrayId",t,e,n),s=T("indices",t,e,n),i=T("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=T("tensorArrayId",t,e,n),s=T("indices",t,e,n),i=T("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(s,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=T("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=T("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=T("tensorArrayId",t,e,n),s=T("tensor",t,e,n),i=T("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,s),[o.idTensor]}case"TensorArraySizeV3":{const r=T("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[xt(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=T("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=T("tensorListId",t,e,n),s=T("index",t,e,n),i=T("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(s,i),[o.idTensor]}case"TensorListGetItem":{const r=T("tensorListId",t,e,n),s=T("index",t,e,n),i=T("elementShape",t,e,n),o=T("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=T("indices",t,e,n),s=T("tensor",t,e,n),i=T("elementShape",t,e,n),o=T("numElements",t,e,n),a=Jnt(s,r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=T("elementShape",t,e,n),s=T("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=T(i,t,e,n),a=t.op==="TensorListReserve"?-1:o,l=Qnt(r,s,o,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=T("tensorListId",t,e,n),s=T("indices",t,e,n),i=T("elementShape",t,e,n),o=T("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,o,i)]}case"TensorListStack":{const r=T("tensorListId",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n),o=T("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,o)]}case"TensorListFromTensor":{const r=T("tensor",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n),o=Ynt(r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=T("tensorListId",t,e,n),s=n.getTensorList(r.id),i=T("dtype",t,e,n),o=T("elementShape",t,e,n);return[s.concat(i,o)]}case"TensorListPushBack":{const r=T("tensorListId",t,e,n),s=T("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=T("tensorListId",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=T("tensor",t,e,n),s=T("elementShape",t,e,n),i=T("lengths",t,e,n),o=Znt(r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=T("tensorListId",t,e,n),s=n.getTensorList(r.id);return[xt(s.size(),"int32")]}case"TensorListResize":{const r=T("tensorListId",t,e,n),s=T("size",t,e,n),o=n.getTensorList(r.id).resize(s);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jB(t,e,n){const[r,s]=T("fusedOps",t,e,n),i=r==="biasadd",o=!i,a=s==="prelu",l=r==="fusedbatchnorm",c=T("numArgs",t,e,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=T("strides",t,e,n),d=Pb(t,e,n),f=T("dataFormat",t,e,n).toUpperCase(),p=T("dilations",t,e,n);let[m,g]=T("args",t,e,n);o&&(g=m,m=void 0);const y=T("leakyreluAlpha",t,e,n);return{stride:u,pad:d,dataFormat:f,dilations:p,biasArg:m,preluArg:g,activationFunc:s,leakyreluAlpha:y}}const trt=(t,e,n,r=wr)=>{switch(t.op){case"Conv1D":{const s=T("stride",t,e,n),i=T("pad",t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilation",t,e,n);return[r.conv1d(T("x",t,e,n),T("filter",t,e,n),s,i,o,a)]}case"Conv2D":{const s=T("strides",t,e,n),i=Pb(t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv2d(T("x",t,e,n),T("filter",t,e,n),[s[1],s[2]],i,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=jB(t,e,n);return[r.fused.conv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=jB(t,e,n);return[r.fused.depthwiseConv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=T("outputShape",t,e,n),i=T("strides",t,e,n),o=Pb(t,e,n);return[r.conv2dTranspose(T("x",t,e,n),T("filter",t,e,n),s,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=T("strides",t,e,n),i=Pb(t,e,n),o=T("dilations",t,e,n),a=T("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(T("input",t,e,n),T("filter",t,e,n),[s[1],s[2]],i,a,[o[1],o[2]])]}case"Conv3D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv3d(T("x",t,e,n),T("filter",t,e,n),[s[1],s[2],s[3]],i,o,[a[1],a[2],a[3]])]}case"AvgPool":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.avgPool(T("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.maxPool(T("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n),a=T("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(T("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i,a);return[l,c]}case"AvgPool3D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.avgPool3d(T("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("kernelSize",t,e,n);return[r.maxPool3d(T("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=T("strides",t,e,n),i=T("pad",t,e,n),o=T("dilations",t,e,n),a=s[1],l=s[2],c=o[1],u=o[2];return[r.dilation2d(T("x",t,e,n),T("filter",t,e,n),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nrt=(t,e,n,r=wr)=>{switch(t.op){case"Fill":{const s=T("shape",t,e,n),i=T("dtype",t,e,n),o=T("value",t,e,n);return[r.fill(s,o,i)]}case"LinSpace":{const s=T("start",t,e,n),i=T("stop",t,e,n),o=T("num",t,e,n);return[r.linspace(s,i,o)]}case"Multinomial":{const s=T("logits",t,e,n),i=T("numSamples",t,e,n),o=T("seed",t,e,n);return[r.multinomial(s,i,o)]}case"OneHot":{const s=T("indices",t,e,n),i=T("depth",t,e,n),o=T("onValue",t,e,n),a=T("offValue",t,e,n),l=T("dtype",t,e,n);return[r.oneHot(s,i,o,a,l)]}case"Ones":return[r.ones(T("shape",t,e,n),T("dtype",t,e,n))];case"OnesLike":return[r.onesLike(T("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(T("shape",t,e,n),T("dtype",t,e,n),T("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("seed",t,e,n))];case"Range":{const s=T("start",t,e,n),i=T("stop",t,e,n),o=T("step",t,e,n);return[r.range(s,i,o,T("dtype",t,e,n))]}case"TruncatedNormal":{const s=T("shape",t,e,n),i=T("mean",t,e,n),o=T("stdDev",t,e,n),a=T("seed",t,e,n);return[r.truncatedNormal(s,i,o,T("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(T("shape",t,e,n),T("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TN(t,e,n){const r=T("boxes",t,e,n),s=T("scores",t,e,n),i=T("maxOutputSize",t,e,n),o=T("iouThreshold",t,e,n),a=T("scoreThreshold",t,e,n),l=T("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}}const rrt=async(t,e,n,r,s=wr)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=TN(t,e,n),d=await s.image.nonMaxSuppressionWithScoreAsync(i,o,a,l,c,u);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=TN(t,e,n),u=T("padToMaxOutputSize",t,e,n),d=await s.image.nonMaxSuppressionPaddedAsync(i,o,a,l,c,u);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=TN(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,o,a,l,c)]}case"Where":{const i=s.cast(T("condition",t,e,n),"bool"),o=[await s.whereAsync(i)];return i.dispose(),o}case"ListDiff":return s.setdiff1dAsync(T("x",t,e,n),T("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const srt=(t,e,n,r=wr)=>{switch(t.op){case"LowerBound":{const s=T("sortedSequence",t,e,n),i=T("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=T("x",t,e,n),i=T("k",t,e,n),o=T("sorted",t,e,n),a=r.topk(s,i,o);return[a.values,a.indices]}case"UpperBound":{const s=T("sortedSequence",t,e,n),i=T("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=T("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=T("x",t,e,n),i=T("axis",t,e,n),o=r.unique(s,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const irt=(t,e,n,r=wr)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=T("default",t,e,n);return[ur(t.name,e,n)||s];case"Placeholder":return[ur(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=T("x",t,e,n);return[Ta(u)]}case"IdentityN":return T("x",t,e,n).map(u=>Ta(u));case"Snapshot":const i=T("x",t,e,n);return[Ta(i)];case"Shape":return[r.tensor1d(T("x",t,e,n).shape,"int32")];case"ShapeN":return T("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(T("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(T("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=T("x",t,e,n),a=T("data",t,e,n),l=T("message",t,e,n),c=T("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ort{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=xt(0),this.tensorMap=new Map,zo(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return xt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),pt(()=>{const s=Wd(n),i=r.length,o=s.length;D(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let a=0;a<i;a++){const l=r[a],c=s[a];zo(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return pt(()=>{const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=this.findWithDefault(o,n);s.push(a)}return dl(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const art=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=T("keyDType",t,e,n),o=T("valueDType",t,e,n),a=new ort(i,o);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=T("tableHandle",t,e,n,r),i=T("keys",t,e,n),o=T("values",t,e,n);return[await r.getHashTableById(s.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const s=T("tableHandle",t,e,n,r),i=T("keys",t,e,n),o=T("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=T("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrt=(t,e,n,r=wr)=>{switch(t.op){case"ResizeBilinear":{const s=T("images",t,e,n),i=T("size",t,e,n),o=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],o,a)]}case"ResizeNearestNeighbor":{const s=T("images",t,e,n),i=T("size",t,e,n),o=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],o,a)]}case"CropAndResize":{const s=T("image",t,e,n),i=T("boxes",t,e,n),o=T("boxInd",t,e,n),a=T("cropSize",t,e,n),l=T("method",t,e,n),c=T("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,o,a,l,c)]}case"ImageProjectiveTransformV3":{const s=T("images",t,e,n),i=T("transforms",t,e,n),o=T("outputShape",t,e,n),a=T("fillValue",t,e,n),l=T("interpolation",t,e,n),c=T("fillMode",t,e,n);return[r.image.transform(s,i,l.toLowerCase(),c.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const crt=(t,e,n,r=wr)=>{switch(t.op){case"Equal":return[r.equal(T("a",t,e,n),T("b",t,e,n))];case"NotEqual":return[r.notEqual(T("a",t,e,n),T("b",t,e,n))];case"Greater":return[r.greater(T("a",t,e,n),T("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(T("a",t,e,n),T("b",t,e,n))];case"Less":return[r.less(T("a",t,e,n),T("b",t,e,n))];case"LessEqual":return[r.lessEqual(T("a",t,e,n),T("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(T("a",t,e,n),T("b",t,e,n))];case"LogicalNot":return[r.logicalNot(T("a",t,e,n))];case"LogicalOr":return[r.logicalOr(T("a",t,e,n),T("b",t,e,n))];case"Select":case"SelectV2":return[r.where(T("condition",t,e,n),T("a",t,e,n),T("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const urt=(t,e,n,r=wr)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(T("a",t,e,n),T("b",t,e,n),T("transposeA",t,e,n),T("transposeB",t,e,n))];case"Einsum":return[r.einsum(T("equation",t,e,n),...T("tensors",t,e,n))];case"Transpose":return[r.transpose(T("x",t,e,n),T("perm",t,e,n))];case"_FusedMatMul":const[s,i]=T("fusedOps",t,e,n),o=s==="biasadd",a=i==="prelu",l=T("numArgs",t,e,n),c=T("leakyreluAlpha",t,e,n);if(o){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=T("args",t,e,n);return[r.fused.matMul({a:T("a",t,e,n),b:T("b",t,e,n),transposeA:T("transposeA",t,e,n),transposeB:T("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(T("a",t,e,n),T("numLower",t,e,n),T("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const drt=(t,e,n,r=wr)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(T("x",t,e,n),T("axis",t,e,n),T("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(T("x",t,e,n),T("radius",t,e,n),T("bias",t,e,n),T("alpha",t,e,n),T("beta",t,e,n))];case"Softmax":return[r.softmax(T("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const frt=(t,e,n,r=wr)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(T("paramsNestedSplits",t,e,n),T("paramsDenseValues",t,e,n),T("indices",t,e,n),T("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(T("starts",t,e,n),T("limits",t,e,n),T("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(T("shape",t,e,n),T("values",t,e,n),T("defaultValue",t,e,n),T("rowPartitionTensors",t,e,n),T("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hrt=(t,e,n,r=wr)=>{switch(t.op){case"Max":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.max(T("x",t,e,n),a,l)]}case"Mean":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.mean(T("x",t,e,n),a,l)]}case"Min":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.min(T("x",t,e,n),a,l)]}case"Sum":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.sum(T("x",t,e,n),a,l)]}case"All":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.all(T("x",t,e,n),a,l)]}case"Any":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.any(T("x",t,e,n),a,l)]}case"ArgMax":{const a=T("axis",t,e,n);return[r.argMax(T("x",t,e,n),a)]}case"ArgMin":{const a=T("axis",t,e,n);return[r.argMin(T("x",t,e,n),a)]}case"Prod":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.prod(T("x",t,e,n),a,l)]}case"Cumprod":{const a=T("axis",t,e,n),l=T("exclusive",t,e,n),c=T("reverse",t,e,n);return[r.cumprod(T("x",t,e,n),a,l,c)]}case"Cumsum":{const a=T("axis",t,e,n),l=T("exclusive",t,e,n),c=T("reverse",t,e,n);return[r.cumsum(T("x",t,e,n),a,l,c)]}case"Bincount":const s=T("x",t,e,n),i=T("weights",t,e,n),o=T("size",t,e,n);return[r.bincount(s,i,o)];case"DenseBincount":{const a=T("x",t,e,n),l=T("weights",t,e,n),c=T("size",t,e,n),u=T("binaryOutput",t,e,n);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const prt=(t,e,n,r=wr)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=T("n",t,e,n),i=T("axis",t,e,n);let o=T("tensors",t,e,n);return o=o.slice(0,s),[r.concat(o,i)]}case"Gather":{const s=T("x",t,e,n),i=T("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=T("axis",t,e,n),i=T("batchDims",t,e,n),o=T("x",t,e,n),a=T("indices",t,e,n);return[r.gather(o,r.cast(a,"int32"),s,i)]}case"Reverse":{const s=T("dims",t,e,n),i=[];for(let a=0;a<s.length;a++)s[a]&&i.push(a);const o=T("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const s=T("axis",t,e,n),i=T("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=T("begin",t,e,n),i=T("size",t,e,n);return[r.slice(T("x",t,e,n),s,i)]}case"StridedSlice":{const s=T("begin",t,e,n),i=T("end",t,e,n),o=T("strides",t,e,n),a=T("beginMask",t,e,n),l=T("endMask",t,e,n),c=T("ellipsisMask",t,e,n),u=T("newAxisMask",t,e,n),d=T("shrinkAxisMask",t,e,n),f=T("x",t,e,n);return[r.stridedSlice(f,s,i,o,a,l,c,u,d)]}case"Pack":return pt(()=>{const s=T("axis",t,e,n),i=T("tensors",t,e,n),o=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{const u=gn(c.shape,o);if(!u&&!gn(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,o)});return[r.stack(l,s)]});case"Unpack":{const s=T("axis",t,e,n),i=T("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=T("reps",t,e,n);return[r.tile(T("x",t,e,n),s)]}case"Split":case"SplitV":{const s=T("axis",t,e,n),i=T("numOrSizeSplits",t,e,n),o=T("x",t,e,n);return r.split(o,i,s)}case"ScatterNd":{const s=T("indices",t,e,n),i=T("values",t,e,n),o=T("shape",t,e,n);return[r.scatterND(s,i,o)]}case"GatherNd":{const s=T("x",t,e,n),i=T("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=T("sparseIndices",t,e,n),i=T("outputShape",t,e,n),o=T("sparseValues",t,e,n),a=T("defaultValue",t,e,n);return[r.sparseToDense(s,o,i,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}case"TensorScatterUpdate":{const s=T("indices",t,e,n),i=T("values",t,e,n),o=T("tensor",t,e,n);return[r.tensorScatterUpdate(o,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mrt=(t,e,n,r=wr)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(T("indices",t,e,n),T("values",t,e,n),T("denseShape",t,e,n),T("defaultValue",t,e,n));return[s,i,o,a]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(T("inputIndices",t,e,n),T("inputShape",t,e,n),T("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const grt=(t,e,n,r=wr)=>{switch(t.op){case"FFT":return[r.fft(T("x",t,e,n))];case"IFFT":return[r.ifft(T("x",t,e,n))];case"RFFT":return[r.rfft(T("x",t,e,n))];case"IRFFT":return[r.irfft(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yrt=(t,e,n,r=wr)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(T("input",t,e,n),T("pattern",t,e,n),T("rewrite",t,e,n),T("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(T("data",t,e,n),T("dataSplits",t,e,n),T("separator",t,e,n),T("nGramWidths",t,e,n),T("leftPad",t,e,n),T("rightPad",t,e,n),T("padWidth",t,e,n),T("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:o}=r.string.stringSplit(T("input",t,e,n),T("delimiter",t,e,n),T("skipEmpty",t,e,n));return[s,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(T("input",t,e,n),T("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vrt=(t,e,n,r=wr)=>{switch(t.op){case"Cast":return[r.cast(T("x",t,e,n),T("dtype",t,e,n))];case"ExpandDims":{const s=T("axis",t,e,n);return[r.expandDims(T("x",t,e,n),s)]}case"Squeeze":{const s=T("axis",t,e,n);return[r.squeeze(T("x",t,e,n),s)]}case"Reshape":return[r.reshape(T("x",t,e,n),T("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(T("x",t,e,n),T("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(T("x",t,e,n),T("padding",t,e,n),T("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(T("x",t,e,n),T("padding",t,e,n),T("constantValue",t,e,n))];case"SpaceToBatchND":{const s=T("blockShape",t,e,n),i=T("paddings",t,e,n);return[r.spaceToBatchND(T("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=T("blockShape",t,e,n),i=T("crops",t,e,n);return[r.batchToSpaceND(T("x",t,e,n),s,i)]}case"DepthToSpace":{const s=T("blockSize",t,e,n),i=T("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(T("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(T("x",t,e,n),T("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(T("s0",t,e,n),T("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MB(t,e,n,r,s=pt){const i=((o,a,l)=>{switch(o.category){case"arithmetic":return s(()=>qnt(o,a,l));case"basic_math":return s(()=>Knt(o,a,l));case"control":return ert(o,a,l);case"convolution":return s(()=>trt(o,a,l));case"creation":return s(()=>nrt(o,a,l));case"dynamic":return rrt(o,a,l);case"evaluation":return s(()=>srt(o,a,l));case"image":return s(()=>lrt(o,a,l));case"graph":return s(()=>irt(o,a,l));case"logical":return s(()=>crt(o,a,l));case"matrices":return s(()=>urt(o,a,l));case"normalization":return s(()=>drt(o,a,l));case"ragged":return s(()=>frt(o,a,l));case"reduction":return s(()=>hrt(o,a,l));case"slice_join":return s(()=>prt(o,a,l));case"sparse":return s(()=>mrt(o,a,l));case"spectral":return s(()=>grt(o,a,l));case"string":return s(()=>yrt(o,a,l));case"transformation":return s(()=>vrt(o,a,l));case"hash_table":return art(o,a,l,r);case"custom":const c=ine(o.op);if(c&&c.customExecutor)return c.customExecutor(new Gnt(o,a,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return pd(i)?i.then(o=>[].concat(o)):[].concat(i)}class LB{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FB(t,e,n,r){const s=new Set,i=[];let o=null,a=null;const l=new Set,c=new Set(Object.keys(t).map(f=>ys(f)[0]));r=r||[];const u=new Set(r.map(f=>ys(f.name)[0])),d=[...e];for(;d.length>0;){const f=d.pop();if((vu(f)||Ert(f)||Trt(f))&&o==null&&(o=f,a=o.children.map(p=>p.name).filter(p=>s.has(p))),s.add(f.name),n[f.name]==null&&!c.has(f.name)&&!u.has(f.name)){if(f.inputs.length===0){i.push(f.name);continue}f.inputs.forEach(p=>{l.has(p.name)||(l.add(p.name),d.push(p))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:o,syncInputs:a}}function xrt(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(y=>ys(y)[0]).map(y=>t.nodes[y]),i=t.initNodes||[],o=y=>n.has(typeof y=="string"?y:y.name);function a(y){return[...new Map(y.map(v=>[v.name,v])).values()]}const l=a([...s,...t.weights,...i]).filter(o),c=a([...l,...Object.values(t.nodes)]).filter(o),u=new Map(c.map(y=>[y.name,y])),d={};for(const y of c){d[y.name]=d[y.name]||0;for(const v of y.children)o(v)||(d[v.name]=Number.POSITIVE_INFINITY),d[v.name]=(d[v.name]||0)+1}const f=Object.entries(d).filter(([,y])=>y===0).map(([y])=>y),p=[...f];for(;f.length>0;){const y=f.pop(),v=u.get(y);for(const x of v.children.filter(o))--d[x.name]===0&&(p.push(x.name),f.push(x.name))}const m=p.map(y=>u.get(y)),g=brt(m,l);return wrt(g,l),g}function brt(t,e){const n=new Map(t.map(o=>[o.name,o])),r=e.map(o=>o.name),s=new Set(r);for(;r.length>0;){const o=r.pop(),a=n.get(o);for(const l of a.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(o=>s.has(o.name))}class Qx extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function wrt(t,e){const n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),s=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),o=a=>i.has(typeof a=="string"?a:a.name);for(const a of t){for(const l of a.children.filter(o)){if(!n.has(l.name))throw new Qx(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new Qx(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!s(a))for(const l of a.inputs){if(!n.has(l.name))throw new Qx(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new Qx(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function Srt(t){const e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>vu(a)?n:l),s=a=>{const l=r[e.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(s).reduce((c,u)=>Math.max(c,u),r[l])),o=new Map;for(let a=0;a<t.length;++a){const l=i[a];if(l===n)continue;const c=t[a],u=t[l];o.has(u.name)||o.set(u.name,[]),o.get(u.name).push(c)}return o}const _rt=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Crt=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Nrt=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function vu(t){return _rt.has(t.op)}function Ert(t){return Crt.has(t.op)}function Trt(t){return Nrt.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a1{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new a1(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=FB(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const c=n.map(d=>d.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${s}]`)}const a=xrt(this.graph,r),l=Srt(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return zo(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(f=>this.graph.nodes[ys(f)[0]]),i=n.map(f=>ys(f)[0]),o=new Set(i);let a=i.map(f=>this.graph.nodes[f]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(s,a);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=X().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const u={},d={};return pt(()=>{const f=new LB(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),p=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(v=>{const[x,b]=ys(v,f),w=[];w[b]=e[v],p[x]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[x]=this.cloneTensorList(w))});const m=this.getFrozenTensorIds(p),{orderedNodes:g,nodeLiveUntilMap:y}=c;for(const v of g){if(p[v.name])continue;const x=MB(v,p,f,this._resourceManager);if(pd(x))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);p[v.name]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[v.name]=this.cloneTensorList(x)),this.checkTensorForDisposalWithNodeLiveUntilInfo(v,p,f,m,o,y.get(v.name))}return this.parent==null&&f.dispose(m),n.map(v=>ur(v,p,f))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,o,a){if(!(vu(n)||o.has(e))){for(const l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(const l of n.inputs){if(vu(l))continue;const c=AB(l.name,r,s);if(c!=null)for(const u of c){if(!u||u.kept||i.has(u.id))continue;const d=a[u.id];d===1?(u.dispose(),delete a[u.id]):d!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,o){function a(l){return vu(l)||i.has(l.name)}if(!(vu(e)||o==null))for(const l of o){if(a(l))continue;const c=AB(l.name,n,r);for(const u of c)!u||u.kept||s.has(u.id)||u.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=X().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const o=new LB(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,o,n,r),l=n.map(f=>ur(f,a,o)),c=l.map(f=>f.id),u=Object.keys(e).map(f=>e[f].id),d=new Set([...c,...u,...this.weightIds]);return Object.values(a).forEach(f=>{f.forEach(p=>{p&&!p.isDisposed&&!d.has(p.id)&&p.dispose()})}),this.parent==null&&o.dispose(d),l}async executeFunctionAsync(e,n,r){const s=e.reduce((i,o,a)=>(i[this.inputs[a].name]=o,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),o=i.map(w=>this.graph.nodes[ys(w)[0]]),a=r.map(w=>ys(w)[0]),l=new Set(a);let c=a.map(w=>this.graph.nodes[w]);c.length===0&&(c=this._outputs);const{usedNodes:u,missingInputs:d,dynamicNode:f,syncInputs:p}=FB(e,c,this.weightMap,this._initNodes),m=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:n.currentContext})),g=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[_,C]=ys(w),E=[];E[C]=e[w],g[_]=E});const y={},v=this.getFrozenTensorIds(g),x={};for(;m.length>0;){const w=this.processStack(o,m,n,g,x,v,l,y,u);await Promise.all(w)}f==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=c.filter(w=>!vu(w)&&!ur(w.name,g,n)).map(w=>w.name);if(b.length>0){let w="";throw f!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${w}`)}return g}processStack(e,n,r,s,i,o,a,l,c){const u=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let f="";if(d.node.op==="Enter"&&T("isConstant",d.node,s,r)&&([f]=Ea(d.node.name,r)),s[d.node.name]==null){const p=MB(d.node,s,r,this._resourceManager);f||([f]=Ea(d.node.name,r));const m=r.currentContext;pd(p)?u.push(p.then(g=>(s[f]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(g)),r.currentContext=m,this.checkTensorForDisposal(f,d.node,s,r,o,a,l),this.processChildNodes(d.node,n,r,s,i,c),g))):(s[f]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(p)),this.checkTensorForDisposal(f,d.node,s,r,o,a,l),this.processChildNodes(d.node,n,r,s,i,c))}else this.processChildNodes(d.node,n,r,s,i,c)}return u}processChildNodes(e,n,r,s,i,o){e.children.forEach(a=>{const[l]=Ea(a.name,r);i[l]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!ur(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!ur(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=ys(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((l,c)=>o[c]===-1||o[c]===l);D(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&D(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];o!=null?s[o.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=ys(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=ys(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Irt{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const krt="?tfjs-format=file",Ort="model.json";class $rt{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=lte){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Irt}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return pd(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await nee(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new a1(PB.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=PB.Instance.transformGraph(e.modelInitializer);this.initializer=new a1(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof kn?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof kn)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const o in i){const a=i[o];a.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,o)=>{var a,l,c;const u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[o])===null||c===void 0?void 0:c.resourceId;return u!=null?i[o]=this.resourceIdToCapturedInput[u]:i[o]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],o=n[i];this.resourceIdToCapturedInput[o.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&cs(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function BB(t,e={},n=lte){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=Art(t));const r=new $rt(t,e,n);return await r.load(),r}function Art(t){return t.endsWith("/")||(t=t+"/"),`${t}${Ort}${krt}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ff(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,[])).next())})}function hf(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Prt=function(t){t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose()},zk=function(t){return{startEndTensor:t,startPoint:tt(t,[0,0],[-1,2]),endPoint:tt(t,[0,2],[-1,2])}},Rrt=function(t,e){var n=me(t.startPoint,e),r=me(t.endPoint,e),s=L2([n,r],1);return zk(s)};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Drt={strides:[8,16],anchors:[2,6]},UB=6;function jrt(t,e,n){for(var r=[],s=0;s<n.strides.length;s++)for(var i=n.strides[s],o=Math.floor((e+i-1)/i),a=Math.floor((t+i-1)/i),l=n.anchors[s],c=0;c<o;c++)for(var u=i*(c+.5),d=0;d<a;d++)for(var f=i*(d+.5),p=0;p<l;p++)r.push([f,u]);return r}function Mrt(t,e,n){var r=tt(t,[0,1],[-1,2]),s=Be(r,e),i=tt(t,[0,3],[-1,2]),o=It(i,n),a=It(s,n),l=It(o,2),c=et(a,l),u=Be(a,l),d=me(c,n),f=me(u,n),p=1;return L2([d,f],p)}function Lrt(t){return t instanceof kn?[t.shape[0],t.shape[1]]:[t.height,t.width]}function WB(t,e){var n,r,s;if(t.topLeft instanceof kn&&t.bottomRight instanceof kn){var i=pt(function(){return[vr([tt(et(e-1,t.topLeft),0,1),tt(t.topLeft,1,1)]),vr([et(e-1,tt(t.bottomRight,0,1)),tt(t.bottomRight,1,1)])]}),o=i[0],a=i[1];n=o,r=a,t.landmarks!=null&&(s=pt(function(){var g=et(as([e-1,0]),t.landmarks),y=as([1,-1]),v=me(g,y);return v}))}else{var l=t.topLeft,c=l[0],u=l[1],d=t.bottomRight,f=d[0],p=d[1];n=[e-1-c,u],r=[e-1-f,p],t.landmarks!=null&&(s=t.landmarks.map(function(g){return[e-1-g[0],g[1]]}))}var m={topLeft:n,bottomRight:r};return s!=null&&(m.landmarks=s),t.probability!=null&&(m.probability=t.probability instanceof kn?t.probability.clone():t.probability),m}function zB(t,e){return pt(function(){var n;return t.hasOwnProperty("box")?n=t.box:n=t,Hu(Rrt(n,e).startEndTensor)})}var Frt=function(){function t(e,n,r,s,i,o){this.blazeFaceModel=e,this.width=n,this.height=r,this.maxFaces=s,this.anchorsData=jrt(n,r,Drt),this.anchors=Gu(this.anchorsData),this.inputSizeData=[n,r],this.inputSize=as([n,r]),this.iouThreshold=i,this.scoreThreshold=o}return t.prototype.getBoundingBoxes=function(e,n,r){return r===void 0&&(r=!0),ff(this,void 0,void 0,function(){var s,i,o,a,l,c,u,d,f,p,m,g,y,v,x=this;return hf(this,function(b){switch(b.label){case 0:return s=pt(function(){var w=Tk.resizeBilinear(e,[x.width,x.height]),_=me(et(It(w,255),.5),2),C=x.blazeFaceModel.predict(_),E=Hu(C),N=Mrt(E,x.anchors,x.inputSize),I=tt(E,[0,0],[-1,1]),$=Hu(Vu(I));return[E,N,$]}),i=s[0],o=s[1],a=s[2],l=console.warn,console.warn=function(){},c=Tk.nonMaxSuppression(o,a,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=l,[4,c.array()];case 1:return u=b.sent(),c.dispose(),d=u.map(function(w){return tt(o,[w,0],[1,-1])}),n?[3,3]:[4,Promise.all(d.map(function(w){return ff(x,void 0,void 0,function(){var _;return hf(this,function(C){switch(C.label){case 0:return[4,w.array()];case 1:return _=C.sent(),w.dispose(),[2,_]}})})}))];case 2:d=b.sent(),b.label=3;case 3:for(f=e.shape[1],p=e.shape[2],n?m=It([p,f],this.inputSize):m=[p/this.inputSizeData[0],f/this.inputSizeData[1]],g=[],y=function(w){var _=d[w],C=pt(function(){var E=_ instanceof kn?zk(_):zk(Gu(_));if(!r)return E;var N=u[w],I;n?I=tt(x.anchors,[N,0],[1,2]):I=x.anchorsData[N];var $=te(Hu(tt(i,[N,UB-1],[1,-1])),[UB,-1]),O=tt(a,[N],[1]);return{box:E,landmarks:$,probability:O,anchor:I}});g.push(C)},v=0;v<d.length;v++)y(v);return o.dispose(),a.dispose(),i.dispose(),[2,{boxes:g,scaleFactor:m}]}})})},t.prototype.estimateFaces=function(e,n,r,s){return n===void 0&&(n=!1),r===void 0&&(r=!1),s===void 0&&(s=!0),ff(this,void 0,void 0,function(){var i,o,a,l,c,u,d=this;return hf(this,function(f){switch(f.label){case 0:return i=Lrt(e),o=i[1],a=pt(function(){return e instanceof kn||(e=Btt(e)),Na(On(e,"float32"),0)}),[4,this.getBoundingBoxes(a,n,s)];case 1:return l=f.sent(),c=l.boxes,u=l.scaleFactor,a.dispose(),n?[2,c.map(function(p){var m=zB(p,u),g={topLeft:tt(m,[0],[2]),bottomRight:tt(m,[2],[2])};if(s){var y=p,v=y.landmarks,x=y.probability,b=y.anchor,w=me(Be(v,b),u);g.landmarks=w,g.probability=x}return r&&(g=WB(g,o)),g})]:[2,Promise.all(c.map(function(p){return ff(d,void 0,void 0,function(){var m,g,x,y,v,x,b,w,_,C,E,N,I=this;return hf(this,function($){switch($.label){case 0:return m=zB(p,u),s?[3,2]:[4,m.array()];case 1:return x=$.sent(),g={topLeft:x.slice(0,2),bottomRight:x.slice(2)},[3,4];case 2:return[4,Promise.all([p.landmarks,m,p.probability].map(function(O){return ff(I,void 0,void 0,function(){return hf(this,function(k){return[2,O.array()]})})}))];case 3:y=$.sent(),v=y[0],x=y[1],b=y[2],w=p.anchor,_=u,C=_[0],E=_[1],N=v.map(function(O){return[(O[0]+w[0])*C,(O[1]+w[1])*E]}),g={topLeft:x.slice(0,2),bottomRight:x.slice(2),landmarks:N,probability:b},Prt(p.box),p.landmarks.dispose(),p.probability.dispose(),$.label=4;case 4:return m.dispose(),r&&(g=WB(g,o)),[2,g]}})})}))]}})})},t.prototype.dispose=function(){this.blazeFaceModel.dispose(),this.anchors.dispose(),this.inputSize.dispose()},t}();/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Brt="https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1";function Urt(t){var e={},n=e.maxFaces,r=n===void 0?10:n,s=e.inputWidth,i=s===void 0?128:s,o=e.inputHeight,a=o===void 0?128:o,l=e.iouThreshold,c=l===void 0?.3:l,u=e.scoreThreshold,d=u===void 0?.75:u,f=e.modelUrl;return ff(this,void 0,void 0,function(){var p,m;return hf(this,function(g){switch(g.label){case 0:return f==null?[3,2]:[4,BB(f)];case 1:return p=g.sent(),[3,4];case 2:return[4,BB(Brt,{fromTFHub:!0})];case 3:p=g.sent(),g.label=4;case 4:return m=new Frt(p,i,a,r,c,d),[2,m]}})})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xu={},Jx={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Wrt(t,e){xu[t]=e}function Co(t,e){if(!(t in xu)||e!=null){const r=Vrt(t,e);if(r!==null)xu[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=xu[t];return n==null||n.isContextLost()?(delete xu[t],Co(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),xu[t])}function zrt(t){if(!X().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Vrt(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??zrt(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete xu[t]},!1),X().getBool("SOFTWARE_WEBGL_ENABLED")&&(Jx.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Jx)||n.getContext("experimental-webgl",Jx):n.getContext("webgl2",Jx)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Qy;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Qy||(Qy={}));var qs;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(qs||(qs={}));var dr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(dr||(dr={}));function Zv(t,e){return[e,t]}function Hrt(t,e){return t*e}function Zx(t){const e=ce(t),n=Math.ceil(e/4);return nk(n)}function Xp(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Grt(t,e){const[n,r]=Xp(t,e);return n*r*4}function hR(t,e){const n=t;let r,s,i,o,a,l,c,u,d,f;return X().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function we(t,e){const n=e();return X().getBool("DEBUG")&&qrt(t),n}function qrt(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Qrt(t,e))}const Krt=596e-10,Xrt=65504;function Yrt(t){return!!(X().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Krt<Math.abs(t)&&Math.abs(t)<Xrt)}function Qrt(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function eb(t,e){return Sl(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Jrt(t,e){const n=Sl(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(we(t,()=>t.shaderSource(n,e)),we(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Zrt(t,e){const n=Sl(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(we(t,()=>t.shaderSource(n,e)),we(t,()=>t.compileShader(n)),X().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw lne(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const est=/ERROR: [0-9]+:([0-9]+):/g;function lne(t,e){const n=est.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((d,f)=>Jf((f+1).toString(),i)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Jf(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function tst(t){return Sl(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function nst(t,e){if(we(t,()=>t.linkProgram(e)),!X().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function IN(t,e){if(we(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function rst(t,e){const n=Sl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return we(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),we(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function sst(t,e){const n=Sl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return we(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),we(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function ist(t){return Sl(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function ost(t,e){const n=X().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function ast(t){return Sl(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function VB(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(we(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),we(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),we(t,()=>t.enableVertexAttribArray(a)),!0)}function lst(t,e,n){hst(t,n),we(t,()=>t.activeTexture(t.TEXTURE0+n)),we(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function cst(t,e,n){return Sl(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function ust(t,e,n){return t.getUniformLocation(e,n)}function dst(t,e,n,r){we(t,()=>lst(t,e,r)),we(t,()=>t.uniform1i(n,r))}function kN(t,e,n){we(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),we(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function HB(t,e){we(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),we(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function tb(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+fst(t,e))}function fst(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Sl(t,e,n){const r=we(t,()=>e());if(r==null)throw new Error(n);return r}function hst(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function rp(t,e=2){return ce(t.slice(0,t.length-e))}function sp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function nb(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[rp(t),...sp(t)]),e}function pst(t,e=!1){let n=X().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=X().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&X().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?E2(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Xc(t).newShape);let s=ce(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const a=rp(t);let l=2,c=2;t.length&&([l,c]=sp(t)),s=a*(l/2)*(c/2),i=nk(s).map(u=>u*2)}else i=nk(s);return i}function rb(t){return t%2===0}function l1(t,e){if(t=t.slice(-2),e=e.slice(-2),gn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||rb(n)&&rb(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&rb(t[0])&&rb(e[0])}let ON,$N;function mst(t){if(ON==null){const e=Co(t);ON=e.getParameter(e.MAX_TEXTURE_SIZE)}return ON}function gst(t){if($N==null){const e=Co(t);$N=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$N)}function yst(t){if(t===0)return 0;let e;const n=Co(t);return Ni(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Ni(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ni(t,e){return t.getExtension(e)!=null}function GB(t){try{if(Co(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function vst(t){if(t===0)return!1;const e=Co(t);if(t===1){if(!Ni(e,"OES_texture_float"))return!1}else if(!Ni(e,"EXT_color_buffer_float"))return!1;return Vk(e)}function xst(t){if(t===0)return!1;const e=Co(t);if(t===1){if(!Ni(e,"OES_texture_float")||!Ni(e,"WEBGL_color_buffer_float"))return!1}else{if(Ni(e,"EXT_color_buffer_float"))return Vk(e);const r="EXT_color_buffer_half_float";if(Ni(e,r)){const s=e.getExtension(r);return bst(e,s)}return!1}return Vk(e)}function Vk(t){const e=hR(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function bst(t,e){const n=hR(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function wst(t){return t!==2?!1:Co(t).fenceSync!=null}function ex(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&D(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oe=X();Oe.registerFlag("HAS_WEBGL",()=>Oe.getNumber("WEBGL_VERSION")>0);Oe.registerFlag("WEBGL_VERSION",()=>GB(2)?2:GB(1)?1:0);Oe.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Oe.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Oe.get("WEBGL_VERSION")===2);Oe.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Oe.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Oe.registerFlag("WEBGL_PACK",()=>Oe.getBool("HAS_WEBGL"));Oe.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_CLIP",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_REDUCE",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_LAZILY_UNPACK",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_CONV_IM2COL",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>mst(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>gst(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Oe.getNumber("WEBGL_VERSION");return t===0?0:yst(t)});Oe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Oe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!YZ());Oe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>vst(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Oe.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Oe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Oe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>xst(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_FENCE_API_ENABLED",()=>wst(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Oe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Oe.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Oe.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>YZ()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Oe.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Oe.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Oe.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Oe.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Oe.registerFlag("WEBGL_EXP_CONV",()=>!1);Oe.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Oe.getBool("IS_TEST"));Oe.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Oe.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Oe.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Oe.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kr(){let t,e,n,r,s,i,o,a,l,c;return X().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=X().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vd(t,e,n="index"){const r=yr(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function k_(t,e,n="index"){const r=yr(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function Sst(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function _st(t,e,n="index"){const r=t.map((i,o)=>o),s=Sst(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function pR(t){const e=yr(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function mR(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const cne=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:une}=snt;function Cst(t,e,n){const r=[];if(t.forEach(p=>{const m=ce(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${m>1?`[${m}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:g}=gR(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(g.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(p=>Nst(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=Kr(),l=Ist(a);let c,u,d=$st(a);return e.isPacked?(c=Est(e.logicalShape,o,n.enableShapeUniforms),u=Ost(a)):(c=Tst(e.logicalShape,o,n.enableShapeUniforms),u=kst(a)),n.packedInputs&&(d+=Dst),[d,l,u,s,c,i,n.userCode].join(`
`)}function Yp(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return qst(t,e);case 1:return Xst(t,e);case 2:return Qst(t,e);case 3:return Zst(t,e);case 4:return tit(t,e);case 5:return nit(t);case 6:return rit(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function dne(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Gst(t);case 1:return Kst(t,e);case 2:return Yst(t,e);case 3:return Jst(t,e);default:return eit(t,e)}}function Nst(t,e,n=!1,r){let s="";n?s+=dne(t,r):s+=Yp(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=sit(t,e):s+=iit(t,e)),s}function Est(t,e,n){switch(t.length){case 0:return fne();case 1:return jst(t,e,n);case 2:return Vst(t,e,n);case 3:return Lst(t,e,n);default:return Bst(t,e,n)}}function Tst(t,e,n){switch(t.length){case 0:return fne();case 1:return Mst(t,e,n);case 2:return Hst(t,e,n);case 3:return Fst(t,e,n);case 4:return Ust(t,e,n);case 5:return Wst(t,e);case 6:return zst(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Ist(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function kst(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Ost(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function $st(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Ast}
    ${Pst}
    ${Rst}
  `}const Ast=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Pst=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Rst=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Dst=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function fne(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function jst(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Mst(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Lst(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function Fst(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${k_(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Vd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Bst(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Ust(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${k_(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Vd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Wst(t,e){const n=Vd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function zst(t,e){const n=Vd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Vst(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(gn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function Hst(t,e,n){return gn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Hd(t){return`offset${t}`}function Gst(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Kr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function qst(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Hd(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Kst(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=Kr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function Xst(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Qp(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Hd(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Yst(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=Kr();if(i!=null&&gn(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function Qst(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&gn(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=i[0],p=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${p}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=Xc(n),l=o;if(l.length<n.length){const f=Jp(t,l),p=["row","col"];return`
      ${Yp(f,e)}
      float ${s}(int row, int col) {
        return ${s}(${Zp(p,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Qp(t)}
      }
    `;const c=i[0],u=i[1],d=Hd(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function Jst(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const f=n.slice(1),p=[1,2],m=Jp(t,f),g=["b","row","col"];return`
        ${dne(m,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Zp(g,p)});
        }
      `}const a=Kr();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function Zst(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=Xc(n),c=a;if(c.length<n.length){const g=Jp(t,c),y=["row","col","depth"];return`
        ${Yp(g,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Zp(y,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${Qp(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],f=u[1],p=t.shapeInfo.flatOffset;if(f===i&&p==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===o&&p==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=Hd(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function eit(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Kr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[o-1]/2);let f=d*Math.ceil(i[o-2]/2),p="int b, int row, int col",m=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<o-1;g++)p=`int b${g}, `+p,f*=i[o-g-1],m=`b${g} * ${f} + `+m;return`
    vec4 ${r}(${p}) {
      int index = ${m};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function tit(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:l,keptDims:c}=Xc(n);if(l.length<n.length){const x=Jp(t,l),b=["row","col","depth","depth2"];return`
      ${Yp(x,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Zp(b,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${Qp(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],p=d[1],m=`int stride2 = ${r}Shape[3];`,g=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(p===a&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(p===i&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const v=Hd(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${f}, ${p}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function nit(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:c}=Xc(e);if(l.length<e.length){const g=Jp(t,l),y=["row","col","depth","depth2","depth3"];return`
      ${Yp(g)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Zp(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${Qp(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],p=d[1];if(p===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Hd(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function rit(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=Xc(e);if(s.length<e.length){const y=Jp(t,s),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${Yp(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Zp(v,i)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Qp(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,p=f[0],m=f[1];if(m===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=Hd(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${g};
      vec2 uv = uvFromFlat(${p}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Qp(t){const e=t.name,n=ce(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function sit(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=une(t.shapeInfo.logicalShape,e.logicalShape),l=Mt(o),c=o-i;let u;const d=["x","y","z","w","u","v"];i===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(x=>`coords.${d[x+c]} = 0;`).join(`
`);let f="";o<2&&i>0?f="coords":f=t.shapeInfo.logicalShape.map((x,b)=>`coords.${d[b+c]}`).join(", ");let p="return outputValue;";const g=ce(t.shapeInfo.logicalShape)===1,v=ce(e.logicalShape)===1;if(i===1&&!g&&!v)p=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!v)o===1?p=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:p=`
        return vec4(outputValue.x);
      `;else if(a.length){const x=i-2,b=i-1;a.indexOf(x)>-1&&a.indexOf(b)>-1?p="return vec4(outputValue.x);":a.indexOf(x)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(b)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${f});
      ${p}
    }
  `}function iit(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&gn(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Mt(l),u=une(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let f;const p=["x","y","z","w","u","v"];a===0?f="":l<2&&u.length>=1?f="coords = 0;":f=u.map(g=>`coords.${p[g+d]} = 0;`).join(`
`);let m="";return l<2&&a>0?m="coords":m=t.shapeInfo.logicalShape.map((g,y)=>`coords.${p[y+d]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${r}(${m});
    }
  `}function Mt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function gR(t,e,n){const{newShape:r,keptDims:s}=Xc(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&i>1&&!gn(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function Jp(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Zp(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oit(t,e,n,r){const s=n.map((u,d)=>{const f={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(f.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),i=s.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=Cst(s,o,e),l=Zrt(t.gl,a),c=t.createProgram(l);return X().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},hne(t,e,c)))}function hne(t,e,n){const r=[],s=[];let i,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),X().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,u),f.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(f)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:o}}function qB(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!gn(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!gn(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function ait(t,e,n,r,s){e.program.enableShapeUniforms||(qB(e.inShapeInfos,n),qB([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),X().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:f,texShape:p}=e.variablesLocations[l];if(f){const{uniformShape:m}=gR(e.program.packedInputs,c.shape,c.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(f,new Int32Array(m));break;case 2:t.gl.uniform2iv(f,new Int32Array(m));break;case 3:t.gl.uniform3iv(f,new Int32Array(m));break;case 4:t.gl.uniform4iv(f,new Int32Array(m));break}}if(p&&t.gl.uniform2i(p,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(ce(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let m=c.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(u,m)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=yr(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=s[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function lit(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=gR(t.packedInputs,o.shape,l);let f="",p="",m="";if(u.length===1&&t.packedInputs){const _=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${_[0]>1}_${_[1]>1}`}else if(u.length===2&&!t.packedInputs)p=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const _=yr(u);m=`${_[0]===l[1]}_${_[_.length-1]===l[1]}`}const g=o.shape.length,y=u.length===2&&gn(o.shape,l),v=ce(o.shape)===1,x=t1(o.shape,n.shape),b=!t.packedInputs&&g===n.shape.length&&gn(l,n.texData.texShape),w=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${g}_${b}_${c?d:""}_${u.length}_${v}_${x}_${y}_${f}_${p}_${m}_${w}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${X().getNumber("WEBGL_VERSION")}`,i}function $r(t){return X().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cit{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Qy.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Kr();this.outputShape=e,this.enableShapeUniforms=$r(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?k_(["r","c","d"],e):Vd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uit{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Qy.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Kr();this.outputShape=e,this.enableShapeUniforms=$r(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?k_(["r","c","d"],e):Vd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dit{constructor(e){this.variableNames=["A"],this.outTexUsage=qs.DOWNLOAD;const n=Kr();this.outputShape=e,this.userCode=`
      ${cne}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fit{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=qs.DOWNLOAD;const n=Kr();this.outputShape=e,this.userCode=`
      ${cne}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hit={R:0,G:1,B:2,A:3};class KB{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Kr();this.outputShape=e,this.enableShapeUniforms=$r(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${hit[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?mR():pR(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pit{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Kr();this.outputShape=e,this.enableShapeUniforms=$r(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?mR():pR(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mit(t){const e=Kr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Jrt(t,n)}function git(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return rst(t,e)}function yit(t){const e=new Uint16Array([0,1,2,2,1,3]);return sst(t,e)}function tx(t,e,n,r,s,i){ost(e,n);const o=ist(t),a=t.TEXTURE_2D;return we(t,()=>t.bindTexture(a,o)),we(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),we(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),we(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),we(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),X().getNumber("WEBGL_VERSION")===1?we(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):we(t,()=>t.texStorage2D(a,1,r,e,n)),we(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function pne(t){return t.internalFormatFloat}function vit(t,e,n,r){const[s,i]=Zv(e,n);return tx(t,s,i,pne(r),r.textureFormatFloat,t.FLOAT)}function mne(t){return t.internalFormatHalfFloat}function xit(t,e,n,r){const[s,i]=Zv(e,n);return tx(t,s,i,mne(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function gne(t){return t.downloadTextureFormat}function bit(t,e,n,r){const[s,i]=Zv(e,n);return tx(t,s,i,gne(r),t.RGBA,t.UNSIGNED_BYTE)}function yne(t){return t.internalFormatPackedFloat}function wit(t,e,n,r){const[s,i]=Xp(e,n);return tx(t,s,i,yne(r),t.RGBA,t.FLOAT)}function vne(t){return t.internalFormatPackedHalfFloat}function Sit(t,e,n,r){const[s,i]=Xp(e,n);return tx(t,s,i,vne(r),t.RGBA,r.textureTypeHalfFloat)}function _it(t,e,n){return we(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),VB(t,e,"clipSpacePos",n,3,20,0)&&VB(t,e,"uv",n,2,20,12)}function Cit(t,e,n,r,s,i){we(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),X().getNumber("WEBGL_VERSION")===2?we(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):we(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),we(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Nit(t,e,n){we(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?X().getNumber("WEBGL_VERSION")===2?we(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):we(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):X().getNumber("WEBGL_VERSION")===2?we(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):we(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),we(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Eit(t,e,n,r){const s=t.createBuffer();we(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return we(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),we(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),we(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function Tit(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function Iit(t,e,n,r){const[s,i]=Zv(e,n),o=4,a=new Uint8Array(Hrt(e*n,o));return we(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function kit(t,e,n,r,s,i,o,a){const l=t,c=new Float32Array(Grt(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Oit(t,e,n){const r=new Float32Array(e*n*4);return we(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AN{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=X().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Wrt(n,e)):this.gl=Co(n),e=this.gl,X().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>we(i,()=>i.createVertexArray()),this.bindVertexArray=o=>we(i,()=>i.bindVertexArray(o)),this.deleteVertexArray=o=>we(i,()=>i.deleteVertexArray(o)),this.getVertexArray=()=>we(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>we(e,()=>i.createVertexArrayOES()),this.bindVertexArray=o=>we(e,()=>i.bindVertexArrayOES(o)),this.deleteVertexArray=o=>we(e,()=>i.deleteVertexArrayOES(o)),this.getVertexArray=()=>we(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),X().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=eb(this.gl,i),Ni(this.gl,o))this.textureHalfFloatExtension=eb(this.gl,o);else if(X().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ni(this.gl,s))this.colorBufferHalfFloatExtension=eb(this.gl,s);else if(X().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ni(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ni(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=git(this.gl),this.indexBuffer=yit(this.gl),this.framebuffer=ast(this.gl),this.textureConfig=hR(this.gl,this.textureHalfFloatExtension)}get debug(){return X().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;we(e,()=>e.finish()),we(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),we(e,()=>e.deleteFramebuffer(this.framebuffer)),we(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),we(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),we(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),vit(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),xit(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),bit(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Nit(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),Cit(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),Sit(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),wit(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(HB(this.gl,this.framebuffer),this.outputTexture=null),we(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Iit(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return kit(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Tit(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=Eit(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(X().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Oit(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=mit(n));const r=tst(n);we(n,()=>n.attachShader(r,this.vertexShader)),we(n,()=>n.attachShader(r,e)),nst(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&IN(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;we(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),_it(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(we(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&IN(this.gl,this.program),we(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?cst(this.gl,e,n):ust(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),we(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),dst(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=Xp(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&IN(this.gl,this.program),tb(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}we(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),we(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=eb(this.gl,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await aB(()=>this.disposed||this.isQueryAvailable(e,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=$it(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in X().platform&&(r=X().platform.setTimeoutCustom.bind(X().platform)),aB(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),kN(this.gl,e,this.framebuffer),this.debug&&tb(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(kN(this.gl,this.outputTexture,this.framebuffer),this.debug&&tb(this.gl)):HB(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;kN(s,e,this.framebuffer),this.debug&&tb(s),this.outputTexture=e,we(s,()=>s.viewport(0,0,n,r)),we(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),we(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function $it(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ait(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ps(t){return(e,n,r,s,i)=>{const o=wt(e,n),a=o.length,l=yr(o),c=ce(o),u=Pc(i,c),d=e.length,f=n.length,p=yr(e),m=yr(n),g=t1(e,o),y=t1(n,o);if(g.length+y.length===0)for(let v=0;v<u.length;++v)u[v]=t(r[v%r.length],s[v%s.length]);else for(let v=0;v<u.length;++v){const x=T2(v,a,l),b=x.slice(-d);g.forEach(E=>b[E]=0);const w=ok(b,d,p),_=x.slice(-f);y.forEach(E=>_[E]=0);const C=ok(_,f,m);u[v]=t(r[w],s[C])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pit(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=g_([0],n),[i,o]=ps((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rit=ps((t,e)=>t+e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dit(t,e,n,r,s){const i=ce(r),o=Rc(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?o[l]+=e[a]:o[l]+=1)}return o}function jit(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=yn([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<i;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mit=ps((t,e)=>t&e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _l(t){return(e,n,r)=>{const s=Zn(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lit=_l(t=>Math.ceil(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fit(t,e,n,r){const s=Zn(n,ce(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=ce(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?np(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+i;for(let d=0;d<o.shape[1];++d)s[u+d]=a[l++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bit=ps((t,e)=>t===e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uit=_l(t=>Math.exp(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wit=_l(t=>Math.expm1(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zit=_l(t=>Math.floor(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vit=ps((t,e)=>Math.floor(t/e));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hit(t,e,n,r,s,i,o,a,l){const c=yn([r,i],n);for(let u=0;u<r;u++){const d=[];let f=0;for(let p=0;p<s;p++){const m=t[u*s+p];f+=m*o[p],d.push(m)}if(f<0||f>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let p=0;p<i;p++)c.values[u*i+p]=e.get(...e.indexToLoc(f*i+p))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Git(t,e,n){const r=yn(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[s]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qit=ps((t,e)=>t>e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kit=ps((t,e)=>t>=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xit=ps((t,e)=>t<e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yit=ps((t,e)=>t<=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qit(t,e,n){const r=(e-t)/(n-1),s=Rc(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jit=_l(t=>Math.log(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zit(t,e,n,r){const s=Pc(r,ce(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eot=ps((t,e)=>Math.max(t,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tot=ps((t,e)=>Math.min(t,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xne=ps((t,e)=>t*e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function not(t,e,n){const r=Gp(-1,n);return xne([],e,r,t,n)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rot=ps((t,e)=>t!==e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sot(t,e,n,r,s){const i=e.length,o=ce(e),a=yr(e),l=yr(s),c=Pc(n,ce(s));for(let u=0;u<o;++u){const d=T2(u,i,a),f=new Array(d.length);for(let m=0;m<f.length;m++)f[m]=d[r[m]];const p=ok(f,i,l);c[p]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iot(t,e,n,r){const[s,i]=pa(t,r),o=ia(e,"int32"),a=Rc(ce(s),o),l=ce(i);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let f=0;f<l;++f)d*=n[u+f];a[c]=d}return{outVals:a,outShape:s,outDtype:o}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oot(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=T2(s,e.length,yr(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function aot(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function lot(t,e,n,r){const s=[];let i=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);aot(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let f=0;f<n.length;++f){const p=n[f],m=f+e.length-1;if(m>=0){const g=a[m],y=g[g.length-1]-p[u];for(let v=u;v<d;++v)a[m].push(p[v+1]+y)}u=p[u],d=p[d]}d!==u&&(s.push([u,d]),i+=d-u)}return{outSplits:a,valueSlices:s,numValues:i}}function cot(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Zn("int32",r);e.push(s),t[n].forEach((i,o)=>s[o]=i)}return e}function XB(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function uot(t,e,n,r,s,i){const o=XB(e,2)[1],a=XB(i,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)s[l*a+d]=t[u*o+d];++l}}function dot(t,e,n,r,s){const i=e.slice();i[0]=s;const o=Zn(n,ce(i)),a=t.length,l=a===0?0:a/e[0];return uot(t,e,r,l,o,i),[o,i]}function fot(t,e,n,r,s,i,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(oot(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:f}=lot(i,o,t,c),p=cot(u),m=dot(n,r,s,d,f);return[p,m[0],m[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YB=2147483647;function hot(t,e,n,r,s,i,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(s[0]),c||u.push(o[0]);for(let y=1;y<u.length;++y)if(u[y]!==u[y-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],f=Zn("int32",d+1);f[0]=0;for(let y=0;y<d;++y){const v=a?t[0]:t[y],x=l?r[0]:r[y],b=c?i[0]:i[y];if(b===0)throw new Error("Requires delta != 0");let w;if(b>0&&x<v||b<0&&x>v)w=0;else if(w=Math.ceil(Math.abs((x-v)/b)),w>YB)throw new Error(`Requires ((limit - start) / delta) <= ${YB}`);f[y+1]=f[y]+w}const p=f[d],m=Zn(n,p);let g=0;for(let y=0;y<d;++y){const v=f[y+1]-f[y];let x=a?t[0]:t[y];const b=c?i[0]:i[y];for(let w=0;w<v;++w)m[g++]=x,x+=b}return[f,m]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var pi=to;class c1{constructor(e,n,r,s,i,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=Cte(u),this.raggedRank=Nte(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===pi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===pi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case pi.VALUE_ROWIDS:return c1.getMaxWidthValueRowID(n);case pi.ROW_SPLITS:return c1.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${pi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return JB(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;Ete(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=_te(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let o=0;for(let a=0;a<s;++a,o+=n)i.push(o);for(let a=s;a<e;++a)i.push(-1);return D(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,o=[];for(let a=0;a<i-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=r;for(let d=0;d<l-c;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,o=[];if(i===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<i;++u){const d=e[u];if(d===l)c>=0&&(++a,a<s?c+=r:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case pi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case pi.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${pi[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case pi.FIRST_DIM_SIZE:return e[0];case pi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case pi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${pi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=JB(r,!1),o=Zn(this.valuesDType,ce(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,o,i)}return[i,o]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,o=r;let a=s.slice();a=a.slice(e+1);const l=ce(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const m=this.defaultValueShape;pt(()=>{const g=te(u,m);u=vg(g,a).dataSync()})}let d=0,f=0,p=0;for(let m=0;m<=c;++m){let g=m<c?n[m]:-1;if(g===p){++p;continue}if(f<p){const y=i.subarray(d*l),v=o.subarray(f*l),x=(p-f)*l;QB(v,y,x)}if(m>=c){const y=r.length;g=Math.floor(y/l)}if(g>p)if(this.defaultValue.length===1)o.subarray(p*l,g*l).fill(this.defaultValue[0]),p=g;else for(;g>p;){const y=o.slice(p*l);QB(y,u,l),++p}g<0?(d=m+1,f=p):(d=m,f=p,p=f+1)}}}function QB(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function JB(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function pot(t,e,n,r,s,i,o,a,l,c){return new c1(t,e,n,r,s,i,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mot(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return Rc(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Rc(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const got=_l(t=>1/Math.sqrt(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yot(t,e,n,r,s,i,o,a,l,c){const u=[r/s,s],d=t.values,f=e.values;if(r===0)return yn(n,e.dtype);const p=l instanceof ep?l:yn(u,e.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let m=0;m<i;m++){const g=[];let y=0;for(let v=0;v<o;v++){const x=d[m*o+v];g.push(x),y+=x*a[v]}if(y<0||y>=r/s)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let v=0;v<s;v++)c?p.values[y*s+v]+=f[m*s+v]:p.values[y*s+v]=e.rank===0?f[0]:f[m*s+v]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vot=_l(t=>1/(1+Math.exp(-t)));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xot(t,e,n,r,s){const i=oR(r,e,n),o=ce(n),a=yr(r);if(i){const d=aR(e,a);return s==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=s==="string"?np(t):t,c=yn(r,s,l),u=yn(n,s);for(let d=0;d<u.size;++d){const f=u.indexToLoc(d),p=f.map((m,g)=>m+e[g]);u.set(c.get(...p),...f)}return s==="string"?sne(u.values):u.values}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bot(t,e,n,r,s,i,o){const a=e[0],l=i[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(Vte(a));const y=Zn(n,0),v=Zn(s,0);return[y,[0,d],v,c,u]}let f=!0,p=0;const m=new Array(l).fill(0);for(let y=0;y<a;++y){const v=t[y*d];if(v<0)throw new Error(Hte(y,v));if(v>=l)throw new Error(Gte(y,v,l));++m[v],f=f&&v>=p,p=v}let g=!0;for(let y=0;y<l;++y){const v=m[y]===0;c[y]=v,g=g&&!v,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(g&&f){const y=t,v=r;for(let x=0;x<a;++x)u[x]=x;return[y,[a,d],v,c,u]}else{const y=m[l-1],v=Zn(n,y*d),x=Zn(s,y),b=new Array(l).fill(0);for(let w=0;w<a;++w){const _=t[w*d],C=b[_],E=(_===0?0:m[_-1])+C;b[_]++;for(let N=0;N<d;++N)v[E*d+N]=t[w*d+N];x[E]=r[w],u[w]=E}for(let w=0;w<l;++w)if(b[w]===0){const C=w===0?0:m[w-1];v[C*d+0]=w;for(let E=1;E<d;++E)v[C*d+E]=0;x[C]=o}return[v,[y,d],x,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wot(t,e,n,r,s){const i=ce(r),o=e[0],a=s.length,l=[];let c=1,u=-1;for(let y=0;y<a;++y){const v=s[y];if(v===-1){if(u!==-1)throw new Error(qte(u,y));u=y,l.push(1)}else{if(v<0)throw new Error(Kte(y,v));c*=v,l.push(v)}}if(u!==-1){if(c<=0)throw new Error(Xte());const y=Math.trunc(i/c);if(c*y!==i)throw new Error(Yte(r,l));l[u]=y}if(ce(l)!==i)throw new Error(Qte(r,l));const f=r.length,p=[];if(f>0){p[f-1]=1;for(let y=f-2;y>=0;--y)p[y]=p[y+1]*r[y+1]}const m=[];if(a>0){m[a-1]=1;for(let y=a-2;y>=0;--y)m[y]=m[y+1]*l[y+1]}const g=Zn(n,o*a);for(let y=0;y<o;++y){let v=0;for(let x=0;x<f;++x)v+=t[y*f+x]*p[x];for(let x=0;x<a;++x)g[y*a+x]=Math.trunc(v/m[x]),v%=m[x]}return[g,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sot(t,e,n,r,s,i=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?s[a-1]+1:0;if(d<0)throw new Error($k());const f=e.slice();f[0]=d;const p=f.reduce((b,w)=>b*w,1),m=Zn(n,p);if(a===0)return d>0&&m.fill(o),[m,f];if(d<=0)throw new Error($k());let g=0,y=1,v=0,x=s[g];for(;;){let b=0;if(y<a){if(b=s[y],x===b){++y;continue}if(x>=b)throw new Error(Jte())}if(x<0||x>=d)throw new Error(Zte(x,d));x>v&&m.fill(o,v*c,x*c);for(let w=g;w<y;++w){const _=r[w];if(_<0||_>=l[0])throw new Error(ene(w,r[w],l[0]));for(let C=0;C<c;C++)m[x*c+C]+=t[_*c+C]}if(i)for(let w=0;w<c;w++)m[x*c+w]/=y-g;if(g=y,++y,v=x+1,x=b,y>a)break}return v<d&&m.fill(o,v*c,d*c),[m,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ot=_l(t=>Math.sqrt(t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cot=ps((t,e)=>{const n=t-e;return n*n});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Not=_l((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eot(t,e,n,r){const s=yn(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tot{constructor(e,n,r,s,i,o){this.separator=zu(e),this.nGramWidths=n,this.leftPad=zu(r),this.rightPad=zu(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(i-(a+1))),d=o-(c+u),f=n+(c>0?0:a-l);let p=0;p+=c*this.leftPad.length;for(let x=0;x<d;++x)p+=e[f+x].length;p+=u*this.rightPad.length;const m=c+u+d-1;p+=m*this.separator.length,r[s+a]=new Uint8Array(p);const g=r[s+a];let y=0;const v=x=>x.forEach(b=>g[y++]=b);for(let x=0;x<c;++x)v(this.leftPad),v(this.separator);for(let x=0;x<d-1;++x)v(e[f+x]),v(this.separator);if(d>0){v(e[f+d-1]);for(let x=0;x<u;++x)v(this.separator),v(this.rightPad)}else{for(let x=0;x<u-1;++x)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,o=Zn("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=i;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[i]);for(let l=0;l<i;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],p=this.getNumNGrams(f,d);this.createNGrams(e,c,a,u,p,d),u+=p}),this.preserveShort&&u===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,c,a,u,1,f)}}return[a,o]}}function Iot(t,e,n,r,s,i,o,a){return new Tot(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kot(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function Oot(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let f=0;f<r;++f){const p=s.length;kot(t[f],e,n,s);const m=s.length-p;a[f]=m,i+=m,o=Math.max(o,m)}const l=Zn("int32",i*2),c=new Array(i),u=[r,o];let d=0;for(let f=0;f<r;++f)for(let p=0;p<a[f];++p)l[d*2]=f,l[d*2+1]=p,c[d]=s[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ot(t,e){const n=Zn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=lKe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aot=ps((t,e)=>t-e);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pot(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=yn(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hm=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function bne(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*u/a+d)),p=Math.min(r,Math.floor(e+(a-l)*u/a+d));bne(t,e,f,p)}const s=t[e];let i=n,o=r;for($m(t,n,e),Hm(t[r],s)>0&&$m(t,n,r);i<o;){for($m(t,i,o),i++,o--;Hm(t[i],s)<0;)i=i+1;for(;Hm(t[o],s)>0;)o=o-1}Hm(t[n],s)===0?$m(t,n,o):(o=o+1,$m(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function Rot(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],l=Pc(n,o*r),c=Pc("int32",o*r);for(let d=0;d<o;d++){const f=d*a,p=t.subarray(f,f+a);let m=new Array(p.length);p.forEach((x,b)=>m[b]={value:x,index:b}),r<m.length&&(bne(m,r),m=m.slice(0,r)),s&&m.sort(Hm);const g=d*r,y=l.subarray(g,g+r),v=c.subarray(g,g+r);for(let x=0;x<r;x++)y[x]=m[x].value,v[x]=m[x].index}const u=e.slice();return u[u.length-1]=r,[yn(u,n,l),yn(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dot(t,e,n,r){const s=tr(e,n)[0],i=[1,n[0],1];for(let m=0;m<s;m++)i[0]*=n[m];i[1]=n[s];for(let m=s+1;m<n.length;m++)i[2]*=n[m];const o=new Map,a=new Int32Array(n[s]),l=new ep(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let m=0;m<n[s];m++){let g;if(u)g=t[m].toString();else{const v=[];for(let x=0;x<i[0];x++)for(let b=0;b<i[2];b++)v.push(l.get(x,m,b));g=v.join(",")}const y=o.get(g);if(y!=null)a[m]=y;else{const v=o.size;o.set(g,v),a[m]=v,c.push(m)}}const d=i.slice();d[1]=o.size;const f=new ep(d,r);c.forEach((m,g)=>{for(let y=0;y<i[0];y++)for(let v=0;v<i[2];v++)f.set(l.get(y,m,v),y,g,v)});const p=n.slice();return p[s]=d[1],{outputValues:f.values,outputShape:p,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jot=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Rit,bincountImpl:Dit,bincountReduceImpl:jit,bitwiseAndImpl:Mit,castImpl:Pit,ceilImpl:Lit,concatImpl:Fit,equalImpl:Bit,expImpl:Uit,expm1Impl:Wit,floorDivImpl:Vit,floorImpl:zit,gatherNdImpl:Hit,gatherV2Impl:Git,greaterEqualImpl:Kit,greaterImpl:qit,lessEqualImpl:Yit,lessImpl:Xit,linSpaceImpl:Qit,logImpl:Jit,maxImpl:Zit,maximumImpl:eot,minimumImpl:tot,multiplyImpl:xne,negImpl:not,notEqualImpl:rot,prodImpl:iot,raggedGatherImpl:fot,raggedRangeImpl:hot,raggedTensorToTensorImpl:pot,rangeImpl:mot,rsqrtImpl:got,scatterImpl:yot,sigmoidImpl:vot,simpleAbsImpl:Ait,sliceImpl:xot,sparseFillEmptyRowsImpl:bot,sparseReshapeImpl:wot,sparseSegmentReductionImpl:Sot,sqrtImpl:_ot,squaredDifferenceImpl:Cot,staticRegexReplaceImpl:Not,stridedSliceImpl:Eot,stringNGramsImpl:Iot,stringSplitImpl:Oot,stringToHashBucketFastImpl:$ot,subImpl:Aot,tileImpl:Pot,topKImpl:Rot,transposeImpl:sot,uniqueImpl:Dot},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:Mot,bincountImpl:wne,bincountReduceImpl:Lot,bitwiseAndImpl:Fot,castImpl:Bot,ceilImpl:Uot,concatImpl:Wot,equalImpl:zot,expImpl:Vot,expm1Impl:Hot,floorImpl:Got,gatherNdImpl:qot,gatherV2Impl:Kot,greaterImpl:Xot,greaterEqualImpl:Yot,lessImpl:Qot,lessEqualImpl:Jot,linSpaceImpl:Zot,logImpl:eat,maxImpl:tat,maximumImpl:nat,minimumImpl:rat,multiplyImpl:sat,negImpl:iat,notEqualImpl:oat,prodImpl:aat,raggedGatherImpl:lat,raggedRangeImpl:cat,raggedTensorToTensorImpl:uat,rangeImpl:dat,rsqrtImpl:fat,scatterImpl:hat,sigmoidImpl:pat,simpleAbsImpl:Sne,sliceImpl:mat,sparseFillEmptyRowsImpl:gat,sparseReshapeImpl:yat,sparseSegmentReductionImpl:_ne,sqrtImpl:vat,staticRegexReplaceImpl:xat,stridedSliceImpl:bat,stringNGramsImpl:wat,stringSplitImpl:Sat,stringToHashBucketFastImpl:_at,subImpl:Cat,tileImpl:Nat,topKImpl:Eat,transposeImpl:yR,uniqueImpl:Tat}=jot;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cne(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function zr(t,e){return e===1?[t]:Cne(t,e)}function Iat(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kat{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=$r(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=zr("rc",this.rank),r=Mt(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nne{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=$r(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${Oat(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?mR():pR(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function Oat(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?_st(["r","c","d"],"inputShape"):Vd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $at{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=eU(n,r),i=tU(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=ZB(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return s===dr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===dr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===dr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===dr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===dr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=eU(r,s),o=tU(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=ZB(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=X().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Aat(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function ZB(t,e,n,r,s){const i=Pat(e,r);let o;if(s){const[l,c]=Xp(t[0],t[1]);o=l*c}else{const[l,c]=Zv(t[0],t[1]);o=l*c}const a=Aat(n,i);return o*a}function Pat(t,e){switch(t){case dr.PACKED_2X2_FLOAT32:return yne(e);case dr.PACKED_2X2_FLOAT16:return vne(e);case dr.UNPACKED_FLOAT32:return pne(e);case dr.UNPACKED_FLOAT16:return mne(e);case dr.PACKED_4X1_UNSIGNED_BYTE:return gne(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Rat(t){return X().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?dr.PACKED_2X2_FLOAT32:dr.UNPACKED_FLOAT32:t?dr.PACKED_2X2_FLOAT16:dr.UNPACKED_FLOAT16}function eU(t,e){if(t===qs.UPLOAD)return dr.PACKED_2X2_FLOAT32;if(t===qs.RENDER||t==null)return Rat(e);if(t===qs.DOWNLOAD||t===qs.PIXELS)return dr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function tU(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vo{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=$r(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Bi="if (isnan(x)) return x;",Dat="return x;",nU="return abs(x);",jat="return (x >= 0.0) ? x : (exp(x) - 1.0);",Mat=Bi+`
  return (x < 0.0) ? 0.0 : x;
`,Lat=Bi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,jl="return x;",Fat="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bat="return x;",Uat=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Wat=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,zat=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Vat="return 1.0 / (1.0 + exp(-1.0 * x));";class ec{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=$r(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hat{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=$r(this.outputShape.length);const n=e.length,r=zr("rc",n),s=Mt(n),i=Iat(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gat=Kee,qat=1e-7,Kat=1e-4,sb={};function Xat(t){return t in sb||(sb[t]={}),sb[t]}const Yat=X().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Qat=600;function Jat(){return X().global.screen==null?1024:X().global.screen.height*X().global.screen.width*window.devicePixelRatio*Qat/1024/1024}class O_ extends FY{nextDataId(){return O_.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!X().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof AN)n=e;else{const r=Co(X().getNumber("WEBGL_VERSION"),e);n=new AN(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Co(X().getNumber("WEBGL_VERSION"));n=new AN(r),this.binaryCache=Xat(X().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new $at(this.gpgpu),this.numMBBeforeWarning=Jat(),this.texData=new Tqe(this,kl())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const c=nb(n),u=new KB(c,!1,o),d=this.runWebGLProgram(u,[a],r,[[s,i]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((X().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||X().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:qs.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(X().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:qs.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=n;if(o!=null){let f;l?f=new ec(a,jl):f=new Vo(a,jl);const p=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:s}],s),m=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Ji());let d;if(s==="complex64"){const f=this.readSync(i.real.dataId),p=this.readSync(i.imag.dataId);d=Ok(f,p)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Ji()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(g=>m.push(g))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let m;l?m=new ec(s,jl):m=new Vo(s,jl);const g=this.runWebGLProgram(m,[{dataId:e,shape:s,dtype:o}],o),y=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(X().getBool("DEBUG")&&!X().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&X().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&X().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const m=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(m.texture.texture,...Zx(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const m=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),g=m[0],y=m[1];d=Ok(g,y)}else if(c==null)d=this.getValuesFromTexture(e);else{const m=ce(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,m)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const m=this.gpgpu.gl;we(m,()=>m.deleteBuffer(c))}const f=this.convertAndCacheOnCPU(e,d),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(m=>m(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&kl().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let p;l?p=new ec(i,jl):p=new Vo(i,jl);const m=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:a}],a),g=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),g}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=kl().makeTensorFromTensorInfo(u),f=this.texData.get(u.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Zh(s));return yn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return yn(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!Yrt(r))throw X().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=ce(n);if(X().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),p=this.texData.get(f.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...Zx(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(f),m}const o=X().getBool("WEBGL_PACK")&&s===!0,a=o?nb(n):n,l=o?new fit(a):new dit(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=md(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=md(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=Iqe(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ji(),endMs:null}}endTimer(e){return X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ji(),e)}async getQueryTime(e){if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Yat){return X().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ce(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){so("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Gat(e.shape,n)}packedUnaryOp(e,n,r){const s=new ec(e.shape,n),i=this.compileAndRun(s,[e],r);return kl().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=Sne(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,nU,e.dtype);const n=new Vo(e.shape,nU),r=this.compileAndRun(n,[e]);return kl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&p_(r[0])){const i=r.map(o=>zu(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return kl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Hat(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new kat(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[rp(e.shape),...sp(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[rp(n),...sp(n)],o=new Nne(i,r),a=!0,l=[r],c=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const f=ce(i),p=n[0]*n[1]*4;D(f<=p,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=nb(i);let l;s?l=new uit(a):l=new cit(a);const c=!0,u=[n??Zx(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Qy.DENSE){const v=o??Zx(e.outputShape);l.texShape=v.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ce(a.shape)===0)return l.values=Pc(a.dtype,0),a;const c=[],u=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(v.dataId);if(x.texture==null){if(!e.packedInputs&&ce(v.shape)<=X().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!x.isPacked!=!!e.packedInputs)v=x.isPacked?this.unpackTensor(v):this.packTensor(v),c.push(v),x=this.texData.get(v.dataId);else if(x.isPacked&&!l1(x.shape,v.shape)){const b=v,w=v.shape;v.shape=x.shape,v=this.packedReshape(v,w),c.push(v),x=this.texData.get(v.dataId),b.shape=w}return{shape:v.shape,texData:x,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=lit(e,u,d),p=this.getAndSaveBinary(f,()=>oit(this.gpgpu,e,u,d)),m=this.activeTimers!=null;let g;m&&(g=this.startTimer()),X().get("ENGINE_COMPILE_ONLY")||ait(this.gpgpu,p,u,d,s),c.forEach(v=>this.disposeIntermediateTensorInfo(v)),m&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)}));const y=X().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const v=Ji();v-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!X().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const v=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),v}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(X().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=pt(()=>{if(!X().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=X().getBool("DEBUG");X().set("DEBUG",!1);const n=this.abs(xt(1e-8)).dataSync()[0];if(X().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?qat:Kat}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Ji());let d=n.texShape;if(d==null&&(d=pst(r,l),n.texShape=d),i!=null){const f=nb(r);let p,m=d[1],g=d[0];const y=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!y)&&([m,g]=Xp(d[0],d[1])),l?p=new pit(f,y):p=new KB(f,y);const v=y?[g,m]:d,x=this.makeTensorInfo(v,s),b=this.texData.get(x.dataId);y?b.usage=qs.PIXELS:b.usage=qs.UPLOAD,b.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),m,g,i);const w=[[g,m]],C=this.runWebGLProgram(p,[x],s,w,!0),E=this.texData.get(C.dataId);n.texShape=E.texShape,n.isPacked=E.isPacked,n.usage=E.usage,X().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=E.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(x),c&&(this.uploadWaitMs+=Ji()-u)}else{const f=this.acquireTexture(d,a,s,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=Zat(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*Yw(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await qtt(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(lne(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=hne(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:o,channels:a}=e,l=kl().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,i,o,a);return kl().makeTensorFromDataId(c,n,r,l)}}O_.nextDataId=0;function Zat(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */QZ()&&IKe("webgl",()=>new O_,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vR=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Ed{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=wt(n,r),this.enableShapeUniforms=$r(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gd=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class em{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=wt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=$r(i);let o="";if(s)if(i===0||ce(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Mt(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=zr("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Os(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const elt={kernelName:$2,backendName:"webgl",kernelFunc:Os};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jc(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=Os({inputs:{x:r},backend:n}),l=Os({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const tlt={kernelName:fQ,backendName:"webgl",kernelFunc:Jc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ene="return (a < 0.) ? b * a : a;",Tne=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function nlt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",Gp(i,"float32")),a=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new em(Tne,s.shape,o.shape):new Ed(Ene,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const rlt={kernelName:tJ,backendName:"webgl",kernelFunc:nlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ine="return (a < 0.) ? b * a : a;",kne=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function slt(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new em(kne,r.shape,s.shape):new Ed(Ine,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const ilt={kernelName:PJ,backendName:"webgl",kernelFunc:slt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tm="if (isnan(x)) return x;";function bt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const d=a.texData.get(o.dataId),f=n(d.values,l);return a.makeTensorInfo(o.shape,l,f)}const c=X().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new ec(o.shape,e):u=new Vo(o.shape,t),a.runWebGLProgram(u,[o],l)}}function Sr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const m=u.texData.get(l.dataId),g=u.texData.get(c.dataId),[y,v]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(b=>{const[w,_]=b,C={dataId:w.dataId,dtype:w.dtype,shape:l.shape},E={dataId:_.dataId,dtype:_.dtype,shape:c.shape},N=new Ed(t,l.shape,c.shape);return u.runWebGLProgram(N,[C,E],ia(w.dtype,_.dtype))}),x=Jc({inputs:{real:y,imag:v},backend:u});return u.disposeIntermediateTensorInfo(y),u.disposeIntermediateTensorInfo(v),x}const d=i||ia(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const m=u.texData.get(l.dataId).values,g=u.texData.get(c.dataId).values,y=l.dtype==="string"?np(m):m,v=l.dtype==="string"?np(g):g,[x,b]=s(l.shape,c.shape,y,v,d),w=u.makeTensorInfo(b,d),_=u.texData.get(w.dataId);return _.values=x,w}const f=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let p;return f?p=new em(e,l.shape,c.shape,n):p=new Ed(t,l.shape,c.shape),u.runWebGLProgram(p,[l,c],d)}}function Jy(t,e=!1){if(t==="linear")return e?Bat:Dat;if(t==="relu")return e?Wat:Mat;if(t==="elu")return e?Uat:jat;if(t==="relu6")return e?zat:Lat;if(t==="prelu")return e?kne:Ine;if(t==="leakyrelu")return e?Tne:Ene;if(t==="sigmoid")return e?Vat:Fat;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class One{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=$r(this.outputShape.length);const u=s?e[1]:e[2],d=Math.ceil(u/2),f=s?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",m=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",v="";a&&(l?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:y=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let b="rc.x",w="rc.x";e[0]<n[0]?b=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${w};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rU={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class sU{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=wt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iU="return a * b;";function xR(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=ia(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new sU(rU.REAL,r.shape,s.shape),u=new sU(rU.IMAG,r.shape,s.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],f=n.runWebGLProgram(c,d,"float32"),p=n.runWebGLProgram(u,d,"float32"),m=Jc({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,u]=sat(r.shape,s.shape,a.values,l.values,i),d=n.makeTensorInfo(u,i),f=n.texData.get(d.dataId);return f.values=c,d}let o;return X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new em(iU,r.shape,s.shape):o=new Ed(iU,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const olt={kernelName:SJ,backendName:"webgl",kernelFunc:xR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function alt(t,e,n){const r=[rp(t.shape),...sp(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[rp(e),...sp(e)],o=new Nne(i,r),a=!0,l=[r],c=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=ce(s.shape),l=Oqe(i,a),c=ce(l);D(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(s.dataId);return u.isPacked&&!l1(s.shape,l)&&!(u.texture!==null&&l1(u.shape,l))?alt(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const llt={kernelName:WJ,backendName:"webgl",kernelFunc:ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oU{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${Qh(d)?d.toPrecision(2):d}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class clt{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ult(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=I_(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function qd(t,e,n,r){const s=ult(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:c}=s[o];let u,d;n==="mean"?u=o===0?new oU({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new oU({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new clt({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(u,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dlt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=Mt(this.rank),i=flt(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function flt(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hlt{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Mt(this.rank),i=Cne("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=i[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $_(t,e,n){const r=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hlt(t.shape,e):new dlt(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function plt(t,e,n,r){const s=e,i=t.shape.length,o=tr(s,t.shape);let a=o;const l=Li(a,i),c=l!=null;let u=t;c&&(u=$_(t,l,r),a=Fi(a.length,i)),Oo("sum",a,i);const[d,f]=pa(u.shape,a);let p=d;n&&(p=ci(d,o));const m=ce(f),y=ce(t.shape)/m,v=ye({inputs:{x:u},attrs:{shape:[y,m]},backend:r}),x=R2(t.dtype),b=qd(v,x,"sum",r),w=ye({inputs:{x:b},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(b),c&&r.disposeIntermediateTensorInfo(u),w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return plt(s,i,o,n)}const mlt={kernelName:aZ,backendName:"webgl",kernelFunc:A_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gr(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];let c;if(o.shouldExecuteOnCPU([s])){const d=o.texData.get(s.dataId).values,f=yR(d,s.shape,s.dtype,i,l);c=o.makeTensorInfo(l,s.dtype);const p=o.texData.get(c.dataId);p.values=f}else c=$_(s,i,o);return c}const glt={kernelName:Ob,backendName:"webgl",kernelFunc:Gr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ne=1e3;function u1({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],f=r?e.shape[u-1]:e.shape[u-2],p=n?t.shape[c-1]:t.shape[c-2],m=r?e.shape[u-2]:e.shape[u-1],g=t.shape.slice(0,-2),y=e.shape.slice(0,-2),v=ce(g),x=ce(y),w=wt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([p,m]);D(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const _=n?[v,d,p]:[v,p,d],C=r?[x,m,f]:[x,f,m],E=ye({inputs:{x:t},backend:s,attrs:{shape:_}}),N=ye({inputs:{x:e},backend:s,attrs:{shape:C}}),I=[E,N],$=Math.max(v,x),O=n?E.shape[1]:E.shape[2],k=i!=null,R=o!=null,M=l==="leakyrelu",B=l!=null?Jy(l,!0):null,F=k||R||M||B!=null;let L;if((p===1||m===1)&&O>$ne&&F===!1){let W=E,q=N;n&&(W=Gr({inputs:{x:E},backend:s,attrs:{perm:[0,2,1]}}),I.push(W)),r&&(q=Gr({inputs:{x:N},backend:s,attrs:{perm:[0,2,1]}}),I.push(q));const H=m!==1,Y=m===1;let se=W;H&&(se=ye({inputs:{x:W},backend:s,attrs:{shape:[$,O,1]}}),I.push(se));const Se=m===1?2:1;let De=q;Y&&(De=ye({inputs:{x:q},backend:s,attrs:{shape:[$,1,O]}}),I.push(De));const Pe=xR({inputs:{a:se,b:De},backend:s});L=A_({inputs:{x:Pe},backend:s,attrs:{axis:Se,keepDims:!0}}),I.push(Pe)}else{const W=ia(t.dtype,e.dtype),q=new One(_,C,[$,p,m],n,r,k,B,R,M),H=[E,N];if(i!=null&&H.push(i),R&&H.push(o),M){const Y=s.makeTensorInfo([],"float32",Gp(a,"float32"));H.push(Y),I.push(Y)}L=s.runWebGLProgram(q,H,W)}const P=ye({inputs:{x:L},backend:s,attrs:{shape:w}});I.push(L);for(const W of I)s.disposeIntermediateTensorInfo(W);return P}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ylt(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return u1({a:s,b:i,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const vlt={kernelName:lk,backendName:"webgl",kernelFunc:ylt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aU="return abs(x);";function xlt(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=Sne(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return X().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new ec(r.shape,aU):s=new Vo(r.shape,aU),n.runWebGLProgram(s,[r],r.dtype)}const blt={kernelName:VY,backendName:"webgl",kernelFunc:xlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wlt=Bi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Slt=bt({opSnippet:wlt}),_lt={kernelName:HY,backendName:"webgl",kernelFunc:Slt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Clt=Bi+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,Nlt=bt({opSnippet:Clt}),Elt={kernelName:GY,backendName:"webgl",kernelFunc:Nlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lU="return a + b;",Tlt=Sr({opSnippet:lU,packedOpSnippet:lU,supportsComplex:!0,cpuKernelImpl:Mot}),Ilt={kernelName:k2,backendName:"webgl",kernelFunc:Tlt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class klt{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Olt{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rb(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Os({inputs:{x:r[0]},backend:n});if(r.length>X().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=Rb({inputs:r.slice(0,l),backend:n}),u=Rb({inputs:r.slice(l),backend:n});return Rb({inputs:[c,u],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>ia(l,c)),i=r.map(l=>l.shape),a=X().getBool("WEBGL_PACK")?new Olt(r[0].shape,i):new klt(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const $lt={kernelName:qY,backendName:"webgl",kernelFunc:Rb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Alt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=tr(i,s.shape);let c=l;const u=Li(c,a);let d=s;u!=null&&(d=Gr({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Fi(c.length,a)),Oo("all",c,a);const[f,p]=pa(d.shape,c),m=ce(p),g=ye({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=qd(g,g.dtype,"all",n);let v;if(o){const x=ci(f,l);v=ye({inputs:{x:y},backend:n,attrs:{shape:x}})}else v=ye({inputs:{x:y},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(d),v}const Plt={kernelName:KY,backendName:"webgl",kernelFunc:Alt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rlt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=tr(i,s.shape);let c=l;const u=Li(c,a);let d=s;u!=null&&(d=Gr({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Fi(c.length,a)),Oo("any",c,a);const[f,p]=pa(d.shape,c),m=ce(p),g=ye({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=qd(g,g.dtype,"any",n);let v;if(o){const x=ci(f,l);v=ye({inputs:{x:y},backend:n,attrs:{shape:x}})}else v=ye({inputs:{x:y},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(d),v}const Dlt={kernelName:XY,backendName:"webgl",kernelFunc:Rlt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jlt{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mlt{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,D(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Mt(l),u=zr("coords",l);let d,f;if(o===1){f=l+1;const N=Mt(f);d=`
        ${N} sourceLocR = ${N}(${u.join()}, 0);
        ++${u[l-1]};
        ${N} sourceLocG = ${N}(${u.join()}, 0);
        ++${u[l-2]};
        ${N} sourceLocA = ${N}(${u.join()}, 0);
        --${u[l-1]};
        ${N} sourceLocB = ${N}(${u.join()}, 0);
        --${u[l-2]};`}else f=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const p=["x","y","z","w","u","v"].slice(0,f),m="."+p[f-1],g=p.map(N=>"int "+N),y=zr("sourceLocR",f-1).concat("inIdx.r"),v=zr("sourceLocG",f-1).concat("inIdx.g"),x=zr("sourceLocB",f-1).concat("inIdx.b"),b=zr("sourceLocA",f-1).concat("inIdx.a"),w=r==="max"?"greaterThan":"lessThan",_=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${b.join()})));`,C=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,E=s?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${_}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ane(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=I_(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new jlt(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=Ane(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function Pne(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=I_(i),a=new Mlt(s,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=Pne(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function Rne(t,e,n,r){const s=[n];if(Oo("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!X().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[c,u]=pa(l.shape,s),d=ce(u),f=ye({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(f);const p=Ane(t,f,r);i.push(p);const m=ye({inputs:{x:p},backend:t,attrs:{shape:c}});return i.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}return Pne(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Llt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=tr(i,s.shape);const a=Li(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Gr({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Fi(o.length,l.shape.length)),Oo("argMax",[o[0]],l.shape.length);const u=Rne(n,l,o[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Flt={kernelName:YY,backendName:"webgl",kernelFunc:Llt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Blt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=tr(i,s.shape);const a=Li(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Gr({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Fi(o.length,l.shape.length)),Oo("argMin",[o[0]],l.shape.length);const u=Rne(n,l,o[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Ult={kernelName:QY,backendName:"webgl",kernelFunc:Blt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wlt=Bi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,zlt=bt({opSnippet:Wlt}),Vlt={kernelName:JY,backendName:"webgl",kernelFunc:zlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hlt=Bi+"return log(x + sqrt(x * x + 1.0));",Glt=bt({opSnippet:Hlt}),qlt={kernelName:ZY,backendName:"webgl",kernelFunc:Glt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Klt=Bi+`
  return atan(x);
`,Xlt=bt({opSnippet:Klt}),Ylt={kernelName:eQ,backendName:"webgl",kernelFunc:Xlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qlt=vR+`
  return atan(a, b);
`,Jlt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Gd+`
  return result;
`,Zlt=Sr({opSnippet:Qlt,packedOpSnippet:Jlt}),ect={kernelName:nQ,backendName:"webgl",kernelFunc:Zlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tct=Bi+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,nct=bt({opSnippet:tct}),rct={kernelName:tQ,backendName:"webgl",kernelFunc:nct};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zy{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const g=n==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(g||(x="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${p}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?y:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");const _=Math.floor(o/4)*4,C=o%4,E=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${p}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${_}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${_};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${w});
      }
    `}}class bR{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,p=e.effectiveFilterDepth,m=e.effectiveFilterHeight,g=e.effectiveFilterWidth,y=e.padInfo.front,v=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let w="0.0";if(b||(w="-1.0 / 1e-20"),r){const $=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${y}, ${v}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${$} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const _="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const E=Math.floor(o/4)*4,N=o%4,I=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${y}, ${v}, ${x});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${I}
            }

            int xC = xCCorner + ${E};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${I}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sct(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;ex(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;D(Ps(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Bd(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&gn(u.inShape,u.outShape))return Os({inputs:{x:s},backend:n});const d=new Zy(u,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const ict={kernelName:rQ,backendName:"webgl",kernelFunc:sct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oct(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=Xv(s.shape,i,o,u,a,l,c),f=new bR(d,"avg",!1);return n.runWebGLProgram(f,[s],"float32")}const act={kernelName:sQ,backendName:"webgl",kernelFunc:oct};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lct{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class cct{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=d-1-e.padInfo.front,g=f-1-e.padInfo.top,y=p-1-e.padInfo.left,v=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uct(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=Xv(o.shape,a,l,d,c,u),p=new cct(f);return n.runWebGLProgram(p,[s],o.dtype)}const dct={kernelName:Vqe,backendName:"webgl",kernelFunc:uct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fct(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;ex([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Bd(o.shape,a,l,1,c),d=new lct(u);return n.runWebGLProgram(d,[s],o.dtype)}const hct={kernelName:zqe,backendName:"webgl",kernelFunc:fct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pct(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return u1({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const mct={kernelName:iQ,backendName:"webgl",kernelFunc:pct};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gct{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],wt(e,n),wt(e,r);let a="0.0";s!=null&&(wt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(wt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yct{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],wt(e,n),wt(e,r);let a="vec4(0.0)";s!=null&&(wt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(wt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vct=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;D(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,i];let u=null;o!=null&&(u=o.shape,c.push(o));let d=null;a!=null&&(d=a.shape,c.push(a));const f=X().getBool("WEBGL_PACK_NORMALIZATION")?new yct(r.shape,s.shape,i.shape,u,d,l):new gct(r.shape,s.shape,i.shape,u,d,l);return e.runWebGLProgram(f,c,c[0].dtype)},xct={kernelName:HQ,backendName:"webgl",kernelFunc:vct};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bct{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Mt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=wct(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${Hk[a]} = start[${a}] + coords.${Hk[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const Hk=["x","y","z","w","u","v"];function wct(t){if(t===1)return"sourceLoc";if(t<=6)return Hk.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sct{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Mt(this.rank),r=zr("coords",this.rank),s=zr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${s[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ct(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=aR(e,yr(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function nm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,l]=bte(s,i,o);if(ute(s,a,l),ce(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),f=mat(d.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,f)}const{isPacked:c}=n.texData.get(s.dataId),u=oR(s.shape,a,l);if(c||!u){const d=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Sct(l):new bct(l),f=[a];return n.runWebGLProgram(d,[s],s.dtype,f)}return n.uploadToGPU(s.dataId),_ct(s,a,l,n)}const Cct={kernelName:eZ,backendName:"webgl",kernelFunc:nm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nct=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;D(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((x,b)=>x*b),l=cR(s.shape,i,a),c=uR(l.length,i.length),u=dR(s.shape,i,a),d=Ite(o,i.length),f=kte(u,o,i.length),p=[],m=ye({inputs:{x:s},backend:n,attrs:{shape:l}}),g=Gr({inputs:{x:m},backend:n,attrs:{perm:c}}),y=ye({inputs:{x:g},backend:n,attrs:{shape:u}}),v=nm({inputs:{x:y},backend:n,attrs:{begin:d,size:f}});return p.push(m),p.push(g),p.push(y),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),v},Ect={kernelName:oQ,backendName:"webgl",kernelFunc:Nct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tct(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),c=wne(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const Ict={kernelName:aQ,backendName:"webgl",kernelFunc:Tct};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kct=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Oct=`
  return float(int(a.r) & int(b.r));
`;function $ct(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=X().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=X().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[u,d]=Fot(r.shape,s.shape,l,c,r.dtype),f=n.makeTensorInfo(d,r.dtype),p=n.texData.get(f.dataId);return p.values=u,f}let a;return i?a=new em(kct,r.shape,s.shape,!1):a=new Ed(Oct,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const Act={kernelName:lQ,backendName:"webgl",kernelFunc:$ct};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pct(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=wt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Rct={kernelName:cQ,backendName:"webgl",kernelFunc:Pct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dct="return float(a != b);",Dne=Sr({opSnippet:Dct,cpuKernelImpl:oat,dtype:"bool"}),jct={kernelName:CJ,backendName:"webgl",kernelFunc:Dne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nx(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Os({inputs:{x:s.complexTensorInfos.real},backend:n})}const Mct={kernelName:FJ,backendName:"webgl",kernelFunc:nx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lct="return float(int(x));";function Fct(t,e){const n=new Vo(t.shape,Lct),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gk(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Os({inputs:{x:s},backend:n});const o=wd(s.shape),a=Gk({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Jc({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=nx({inputs:{input:s},backend:n}),a=Gk({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!Pqe(s.dtype,i)){const o=Os({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,l,c]=Bot(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}if(i==="int32")return Fct(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",Pc("bool",1)),l=Dne({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const Bct={kernelName:O2,backendName:"webgl",kernelFunc:Gk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cU="return ceil(x);",Uct=bt({opSnippet:cU,packedOpSnippet:cU,cpuKernelImpl:Uot}),Wct={kernelName:uQ,backendName:"webgl",kernelFunc:Uct};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zct{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vct{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hct(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;X().getBool("WEBGL_PACK_CLIP")?a=new Vct(s.shape):a=new zct(s.shape);const l=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const Gct={kernelName:dQ,backendName:"webgl",kernelFunc:Hct};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qct{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uU(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function Kct(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new qct(r.shape),o=[uU(r,s.complexTensorInfos.real),uU(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const Xct={kernelName:hQ,backendName:"webgl",kernelFunc:Kct};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yct{constructor(e){this.outputShape=[],this.outputShape=Cd(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qct{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Cd(e,n);const r=this.outputShape,s=r.length,i=Mt(s),o=zr("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((g,y)=>`T${y}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let g=1;g<l.length;g++)l[g]=l[g-1]+e[g][n];const c=a[n],u=a.slice(-2),d=a.join();let f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let g=1;g<l.length;g++){const y=l[g-1];f+=`
        if (${c} < ${l[g]}  && ${c} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${ib(a,c,y)}),
            vec2(${ib(u,c,y)}));
        }`}const p=l.length,m=l[l.length-1];f+=`
        return getChannel(
          getT${p}(${ib(a,c,m)}),
          vec2(${ib(u,c,m)}));`,this.userCode=`
      float getValue(${a.map(g=>"int "+g)}) {
        ${f}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function ib(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P_(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Os({inputs:{x:s.complexTensorInfos.imag},backend:n})}const Jct={kernelName:QQ,backendName:"webgl",kernelFunc:P_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gm(t,e,n){const r=t[0].dtype;if(r==="complex64"){const p=t.map(x=>nx({inputs:{input:x},backend:n})),m=t.map(x=>P_({inputs:{input:x},backend:n})),g=Gm(p,e,n),y=Gm(m,e,n),v=Jc({inputs:{real:g,imag:y},backend:n});return p.forEach(x=>n.disposeIntermediateTensorInfo(x)),m.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const p=t.map(w=>{const C=[-1,ce(w.shape.slice(e))];return ye({inputs:{x:w},backend:n,attrs:{shape:C}})}),m=p.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),g=Cd(p.map(w=>w.shape),1),y=p[0].shape[0]===1,v=Wot(m,g,r,y),x=Cd(t.map(w=>w.shape),e),b=n.makeTensorInfo(x,r,v);return p.forEach(w=>n.disposeIntermediateTensorInfo(w)),b}const i=t.filter(p=>ce(p.shape)>0),o=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const p=o?new Vo(t[0].shape,jl):new ec(t[0].shape,jl);return n.runWebGLProgram(p,t,r)}const a=X().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const p=[];for(let g=0;g<i.length;g+=a){const y=i.slice(g,g+a);p.push(Gm(y,e,n))}const m=Gm(p,e,n);for(const g of p)n.disposeIntermediateTensorInfo(g);return m}if(o){const p=new Qct(i.map(m=>m.shape),e);return n.runWebGLProgram(p,i,r)}const{tensors2D:l,outShape:c}=Zct(i,e,n),u=new Yct(l.map(p=>p.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(p=>n.disposeIntermediateTensorInfo(p));const f=ye({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),f}function Zct(t,e,n){const r=Cd(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>ye({inputs:{x:i},attrs:{shape:[-1,ce(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jne(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=tr(s,e[0].shape)[0],o=e.map(c=>c.shape);Ste(o,i);const a=Cd(e.map(c=>c.shape),i);if(ce(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>ce(c.shape)>0);return l.length===1?Os({inputs:{x:l[0]},backend:n}):Gm(l,i,n)}const eut={kernelName:pQ,backendName:"webgl",kernelFunc:jne};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mne{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,m=Math.floor(e.inChannels/4)*4,g=e.inChannels%4,y=e.dataFormat==="channelsLast",v=y?1:2,x=y?2:3,b=y?3:1;let w="",_="";r&&(s?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:w=`
          float activation(float x) {
            ${r}
          }
        `,_="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${_}
        setOutput(result);
      }
    `}}class tut{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,p=e.filterWidth,m=Math.floor(e.inChannels/4)*4,g=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lne{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=$r(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<u;y++)f+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;f+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<u;y++)f+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(d+1)/2;y++){const v=y*2;if(f+=`
           xC = xCCorner + ${v*l};
           `,a===1){if(v<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,l===1&&v>0?f+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<u)){const x=o%2===0?E2(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:f+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):x===1?f+=`
                     xC${v+1} = xTexelC${v};
                     `:f+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<u&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<u&&(f+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<u&&(f+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<u&&(f+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let p="",m="";r&&(s?p=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?p=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:p=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${p}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${m}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nut{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=$r(this.outputShape.length);const{dataFormat:r}=n,s=Kr(),i=r==="channelsLast",o=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d1(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Fne({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,p=n.dataFormat==="channelsLast",m=!1,g=!1;let y;const v=[];if(i!=null){const w=d1(i.shape,p);w!=null&&(i=ye({inputs:{x:i},backend:r,attrs:{shape:w}}),v.push(i))}if(s!=null){const w=d1(s.shape,p);w!=null&&(s=ye({inputs:{x:s},backend:r,attrs:{shape:w}}),v.push(s))}if(!((d===1||f===1)&&u>$ne)&&c.isPacked&&p&&c.texture!=null&&l[2]%2!==0&&gn(c.shape.slice(-3),l.slice(-3))){const w=l[0]*l[1]*(l[2]+1),_={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,D(l1(c.shape,_.shape),()=>`packed reshape ${c.shape} to ${_.shape} isn't free`);const E=ye({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(E);const N=u1({a:_,b:E,backend:r,transposeA:m,transposeB:g,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),I=r.texData.get(N.dataId);D(I.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,I.shape=n.outShape,y=Os({inputs:{x:N},backend:r}),y.shape=n.outShape,v.push(N)}else{const w=n.outHeight*n.outWidth,_=ye({inputs:{x:t},backend:r,attrs:{shape:p?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),C=ye({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),E=u1({a:p?_:C,b:p?C:_,transposeA:!p,transposeB:g,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o});y=ye({inputs:{x:E},backend:r,attrs:{shape:n.outShape}}),v.push(_),v.push(C),v.push(E)}for(const w of v)r.disposeIntermediateTensorInfo(w);return y}function Bne({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:f,dataFormat:p}=n,m=p==="channelsLast",g=l*c*u,y=f*d,v=[n.batchSize,g,y],x=!0,b=!1,w=[];if(i!=null){const P=d1(i.shape,m);P!=null&&(i=ye({inputs:{x:i},backend:r,attrs:{shape:P}}),w.push(i))}if(s!=null){const P=d1(s.shape,m);P!=null&&(s=ye({inputs:{x:s},backend:r,attrs:{shape:P}}),w.push(s))}const _=ye({inputs:{x:e},backend:r,attrs:{shape:[1,g,ce(e.shape)/g]}});w.push(_);const C=new nut(v,n),E=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],N=r.runWebGLProgram(C,[t],"float32",E),I=ye({inputs:{x:N},backend:r,attrs:{shape:v}});w.push(N),w.push(I);const $=s!=null,O=i!=null,k=a==="leakyrelu",R=a?Jy(a,!0):null,M=new One(m?I.shape:_.shape,m?_.shape:I.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],x,b,$,R,O,k),B=m?[I,_]:[_,I];if(s&&B.push(s),O&&B.push(i),k){const P=r.makeTensorInfo([],"float32",Gp(o,"float32"));B.push(P),w.push(P)}const F=r.runWebGLProgram(M,B,"float32"),L=ye({inputs:{x:F},backend:r,attrs:{shape:n.outShape}});w.push(F);for(const P of w)r.disposeIntermediateTensorInfo(P);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rut(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=qp(l),f=li(s.shape,i.shape,o,c,a,u,!1,d);let p;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))p=Fne({x:s,filter:i,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&X().getBool("WEBGL_EXP_CONV")){const g=new Lne(f),y=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];p=n.runWebGLProgram(g,[s,i],"float32",y)}else if(X().getBool("WEBGL_CONV_IM2COL"))p=Bne({x:s,filter:i,convInfo:f,backend:n});else{const g=new Mne(f);p=n.runWebGLProgram(g,[s,i],"float32")}const m=ye({inputs:{x:p},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(p),m}const sut={kernelName:mQ,backendName:"webgl",kernelFunc:rut};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iut{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class out{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class aut{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class lut{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cut(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=qp(l),f=li(s.shape,u,o,1,a,c,!1,d),p=new iut(f);return n.runWebGLProgram(p,[s,i],"float32")}const uut={kernelName:gQ,backendName:"webgl",kernelFunc:cut};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dut{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=$r(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fut(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=qp(c),f=li(o,i.shape,a,1,l,u,!1,d);if(X().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const p=[[f.strideHeight,f.strideWidth]],m=new dut(f);return n.runWebGLProgram(m,[s,i],"float32",p)}else{const p=new out(f);return n.runWebGLProgram(p,[s,i],"float32")}}const hut={kernelName:yQ,backendName:"webgl",kernelFunc:fut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function put(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=Yv(s.shape,i.shape,o,l,a),u=new tut(c);return n.runWebGLProgram(u,[s,i],"float32")}const mut={kernelName:vQ,backendName:"webgl",kernelFunc:put};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gut(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,c=Yv(s.shape,l,o,1,a),u=new aut(c);return n.runWebGLProgram(u,[s,i],"float32")}const yut={kernelName:Hqe,backendName:"webgl",kernelFunc:gut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vut(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,c=Yv(l,i.shape,a,1,o),u=new lut(c);return n.runWebGLProgram(u,[s,i],"float32")}const xut={kernelName:xQ,backendName:"webgl",kernelFunc:vut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const but=tm+`
  return cos(x);
`,wut=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Gd}
  return result;
`,Sut=bt({opSnippet:but,packedOpSnippet:wut}),_ut={kernelName:bQ,backendName:"webgl",kernelFunc:Sut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cut=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,Nut=bt({opSnippet:Cut}),Eut={kernelName:wQ,backendName:"webgl",kernelFunc:Nut};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tut{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[d,f]=r;this.outputShape=[u,d,f,c];const p=s==="bilinear"?1:0,[m,g]=[`${a-1}.0`,`${l-1}.0`],[y,v,x]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[b,w,_]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${w};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${_};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iut=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new Tut(s.shape,i.shape,a,l,c);return n.runWebGLProgram(u,[s,i,o],"float32")},kut={kernelName:CQ,backendName:"webgl",kernelFunc:Iut};var ev;(function(t){t.Prod="*",t.Sum="+"})(ev||(ev={}));class dU{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===ev.Prod?"1.0":"0.0",a=r?o:`getX(${fU(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Mt(i)} coords = getOutputCoords();
        int end = ${hU(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${hU(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${fU(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function fU(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function hU(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Une(t,e,n,r,s,i){const o=e.shape.length,a=Li([r],o);let l=e;a!=null&&(l=Gr({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Fi(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=Os({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(u))-1;f++){const p=new dU(t,l.shape,!1,i),m=[[f]],g=d;d=n.runWebGLProgram(p,[d],d.dtype,m),n.disposeIntermediateTensorInfo(g)}if(s){const f=new dU(t,l.shape,s,i),p=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(p)}if(a!=null){const f=U2(a),p=Gr({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),p}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Out(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return Une(ev.Prod,s,n,i,o,a)}const $ut={kernelName:SQ,backendName:"webgl",kernelFunc:Out};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aut(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return Une(ev.Sum,s,n,i,o,a)}const Put={kernelName:_Q,backendName:"webgl",kernelFunc:Aut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rut(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=wne(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=Lot(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const Dut={kernelName:NQ,backendName:"webgl",kernelFunc:Rut};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jut{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mut(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],c=o==="NHWC"?s.shape[2]:s.shape[3],u=o==="NHWC"?s.shape[3]:s.shape[1],d=l*i,f=c*i,p=u/(i*i),m=o==="NHWC"?[a,d,f,p]:[a,p,d,f],g=new jut(m,i,o);return n.runWebGLProgram(g,[s],s.dtype)}const Lut={kernelName:EQ,backendName:"webgl",kernelFunc:Mut};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wne{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=$r(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zne{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=$r(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=d;let p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)p+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;p+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let v=0;v<d;v++)p+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(f+1)/2;v++){const x=v*2;if(p+=`
          xC = xCCorner + ${x*c};
          `,l===1){if(x<d&&(a%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,c===1&&x>0?p+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){const b=a%2===0?E2(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,c>1?p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:p+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):b===1?p+=`
                    xC${x+1} = xTexelC${x};
                    `:p+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(a%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(p+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(p+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(p+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let m="",g="";r&&(s?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fut(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),D(Ps(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=li(s.shape,i.shape,o,u,a,c,!0);let f;X().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new zne(d):f=new Wne(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[s,i],"float32",p)}const But={kernelName:TQ,backendName:"webgl",kernelFunc:Fut};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uut{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Wut{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zut(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=li(s.shape,u,o,a,l,c,!0),f=new Uut(d);return n.runWebGLProgram(f,[s,i],"float32")}const Vut={kernelName:IQ,backendName:"webgl",kernelFunc:zut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hut(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=li(u,i.shape,o,a,l,c,!0),f=new Wut(d);return n.runWebGLProgram(f,[s,i],"float32")}const Gut={kernelName:kQ,backendName:"webgl",kernelFunc:Hut};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qut{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kut(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=ce(r.shape),o=ye({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new qut(i),l=n.runWebGLProgram(a,[o],o.dtype),c=ye({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const Xut={kernelName:OQ,backendName:"webgl",kernelFunc:Kut};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yut{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:f}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qut(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=pee(s.shape,i.shape,o,a,"NHWC",l);let u;const d=new Yut(c);u=n.runWebGLProgram(d,[s,i],"float32");const f=ye({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),f}const Jut={kernelName:$Q,backendName:"webgl",kernelFunc:Qut};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zut(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=Lte(s,i.length);Bte(o.length,l,i);const{path:c,steps:u}=Ute(a,l),d=u.length;let f=null,p=o.length;const m=[];for(let g=0;g<d;++g){for(const y of u[g]){const{permutationIndices:v,expandDims:x}=Fte(p,l[y]);let b;Wte(v)?b=i[y]:(b=Gr({inputs:{x:i[y]},backend:n,attrs:{perm:v}}),m.push(b));const w=b.shape.slice();for(let _=0;_<x.length;++_)w.splice(x[_],0,1);gn(b.shape,w)||(b=ye({inputs:{x:b},backend:n,attrs:{shape:w}}),m.push(b)),f===null?f=b:(f=xR({inputs:{a:b,b:f},backend:n}),m.push(f))}g<d-1&&(c[g]>=0&&(f=A_({inputs:{x:f},backend:n,attrs:{axis:c[g]-(o.length-p),keepDims:!1}}),m.push(f)),p--)}for(const g of m)g!==f&&n.disposeIntermediateTensorInfo(g);return f}const edt={kernelName:PQ,backendName:"webgl",kernelFunc:Zut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tdt="return (x >= 0.0) ? x : (exp(x) - 1.0);",ndt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,rdt=bt({opSnippet:tdt,packedOpSnippet:ndt}),sdt={kernelName:RQ,backendName:"webgl",kernelFunc:rdt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const idt="return (b >= 0.0) ? a : a * (b + 1.0);",odt=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,adt=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new em(odt,r.shape,s.shape):new Ed(idt,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},ldt={kernelName:Gqe,backendName:"webgl",kernelFunc:adt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cdt=`
  return vec4(equal(a, b));
`,udt="return float(a == b);",ddt=Sr({opSnippet:udt,packedOpSnippet:cdt,dtype:"bool",cpuKernelImpl:zot}),fdt={kernelName:jQ,backendName:"webgl",kernelFunc:ddt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hdt=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${Ate};
  float a1 = ${Pte};
  float a2 = ${Rte};
  float a3 = ${Dte};
  float a4 = ${jte};
  float a5 = ${Mte};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,pdt=bt({opSnippet:hdt}),mdt={kernelName:DQ,backendName:"webgl",kernelFunc:pdt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gdt=tm+`
  return exp(x);
`,ydt=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Vne=bt({opSnippet:gdt,packedOpSnippet:ydt,cpuKernelImpl:Vot,dtype:"float32"}),vdt={kernelName:MQ,backendName:"webgl",kernelFunc:Vne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qk(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(D(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),ye({inputs:{x:i},backend:r,attrs:{shape:a}})}const xdt={kernelName:LQ,backendName:"webgl",kernelFunc:qk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pU="return exp(x) - 1.0;",bdt=bt({opSnippet:pU,packedOpSnippet:pU,cpuKernelImpl:Hot}),wdt={kernelName:FQ,backendName:"webgl",kernelFunc:bdt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mU{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hne(t,e,n){const r=n.texData.get(t.dataId),s=ce(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=ye({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=a.shape,c=new mU("real",l,e),u=new mU("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(c,d,"float32"),p=n.runWebGLProgram(u,d,"float32"),m=Jc({inputs:{real:f,imag:p},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p);const g=ye({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(m),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sdt(t){const{inputs:e,backend:n}=t,{input:r}=e;return Hne(r,!1,n)}const _dt={kernelName:BQ,backendName:"webgl",kernelFunc:Sdt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cdt{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rx(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||qv(s),i==="string"){const o=Zn(i,ce(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new Cdt(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const Ndt={kernelName:UQ,backendName:"webgl",kernelFunc:rx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Edt{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tdt={kernelName:WQ,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new Edt(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gU="return floor(x);",Idt=bt({opSnippet:gU,packedOpSnippet:gU,cpuKernelImpl:Got}),kdt={kernelName:zQ,backendName:"webgl",kernelFunc:Idt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Odt=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,$dt=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Adt=Sr({opSnippet:Odt,packedOpSnippet:$dt,dtype:"int32"}),Pdt={kernelName:VQ,backendName:"webgl",kernelFunc:Adt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rdt{constructor(e){this.variableNames=["A"];const n=Kr(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ddt{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Kr(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jdt={kernelName:ak,backendName:"webgl",kernelFunc:Mdt};let rf,PN=X().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Mdt(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],d=[c,l,i];if(a||o){const g=X().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(rf==null||g!==PN)&&(PN=g,rf=document.createElement("canvas").getContext("2d",{willReadFrequently:PN})),rf.canvas.width=l,rf.canvas.height=c,rf.drawImage(s,0,0,l,c),s=rf.canvas}const f=n.makeTensorInfo(u,"int32");n.texData.get(f.dataId).usage=qs.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),s);const p=X().getBool("WEBGL_PACK")?new Ddt(d):new Rdt(d),m=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ldt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:m}=r,g=qp(u),y=li(s.shape,i.shape,l,d,c,f,!1,g);let v;const x=[],b=o!=null,w=a!=null,_=p==="leakyrelu",C=()=>{const N=[s,i],I=($,O)=>{if(O==="NCHW"&&$.shape.length===1&&$.shape[0]!==1){const k=ye({inputs:{x:$},backend:n,attrs:{shape:[$.shape[0],1,1]}});return x.push(k),k}return $};if(b&&N.push(I(o,u)),w&&N.push(I(a,u)),_){const $=n.makeTensorInfo([],"float32",Gp(m,"float32"));N.push($),x.push($)}return N};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))v=Fne({x:s,filter:i,convInfo:y,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:m});else if(y.strideWidth<=2&&g==="channelsLast"&&X().getBool("WEBGL_EXP_CONV")){const N=p?Jy(p,!0):null,I=new Lne(y,b,N,w,_),$=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],O=C();v=n.runWebGLProgram(I,O,"float32",$)}else if(X().getBool("WEBGL_CONV_IM2COL"))v=Bne({x:s,filter:i,convInfo:y,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:m});else{const N=p?Jy(p,!1):null,I=new Mne(y,b,N,w,_),$=C();v=n.runWebGLProgram(I,$,"float32")}const E=ye({inputs:{x:v},backend:n,attrs:{shape:y.outShape}});return x.push(v),x.forEach(N=>n.disposeIntermediateTensorInfo(N)),E}const Fdt={kernelName:ck,backendName:"webgl",kernelFunc:Ldt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bdt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:f,leakyreluAlpha:p}=r,m=[];let g=u;g==null&&(g=[1,1]),D(Ps(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const y=li(s.shape,i.shape,l,g,c,d,!0),v=X().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,x=f?Jy(f,v):null,b=[s,i],w=o!=null,_=a!=null,C=f==="leakyrelu";if(w&&b.push(o),_&&b.push(a),C){const $=n.makeTensorInfo([],"float32",Gp(p,"float32"));b.push($),m.push($)}let E;v?E=new zne(y,w,x,_,C):E=new Wne(y,w,x,_,C);const N=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],I=n.runWebGLProgram(E,b,"float32",N);return m.forEach($=>n.disposeIntermediateTensorInfo($)),I}const Udt={kernelName:uk,backendName:"webgl",kernelFunc:Bdt};class Wdt{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=Mt(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zdt(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=ce(r.shape),[l,c,u,d]=cte(r,s),f=ye({inputs:{x:s},backend:n,attrs:{shape:[c,o]}}),p=ye({inputs:{x:r},backend:n,attrs:{shape:[ce(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const v=n.readSync(s.dataId),x=n.bufferSync(r),b=qot(v,x,r.dtype,c,o,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,b.values)}const m=new Wdt(o,d,[c,u],r.shape),g=n.runWebGLProgram(m,[p,f],p.dtype),y=ye({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}const Vdt={kernelName:qQ,backendName:"webgl",kernelFunc:zdt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hdt{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Mt(this.rank),s=Gdt(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function Gdt(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gne(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,l=tr(o,s.shape)[0];if(X().get("DEBUG")){const x=n.readSync(i.dataId),b=s.shape[l];for(let w=0;w<x.length;++w){const _=x[w];D(_<=b-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${b-1}]`)}}const c=rne(s,i,l,a),u=ce(i.shape),d=[],f=ye({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=ye({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(f),d.push(p);const m=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const x=n.bufferSync(p),b=n.bufferSync(f),w=Kot(b,x,m);return d.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.makeTensorInfo(c.outputShape,w.dtype,w.values)}const g=new Hdt(f.shape,m),y=n.runWebGLProgram(g,[f,p],f.dtype);d.push(y);const v=ye({inputs:{x:y},backend:n,attrs:{shape:c.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const qdt={kernelName:GQ,backendName:"webgl",kernelFunc:Gne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kdt="return float(a > b);",Xdt=`
  return vec4(greaterThan(a, b));
`,Ydt=Sr({opSnippet:Kdt,packedOpSnippet:Xdt,cpuKernelImpl:Xot,dtype:"bool"}),Qdt={kernelName:KQ,backendName:"webgl",kernelFunc:Ydt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jdt="return float(a >= b);",Zdt=`
  return vec4(greaterThanEqual(a, b));
`,eft=Sr({opSnippet:Jdt,packedOpSnippet:Zdt,dtype:"bool",cpuKernelImpl:Yot}),tft={kernelName:XQ,backendName:"webgl",kernelFunc:eft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nft(t){const{inputs:e,backend:n}=t,{input:r}=e;return Hne(r,!0,n)}const rft={kernelName:YQ,backendName:"webgl",kernelFunc:nft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sft="return float(!isnan(x) && !isinf(x));",ift=bt({opSnippet:sft,dtype:"bool"}),oft={kernelName:JQ,backendName:"webgl",kernelFunc:ift};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aft="return float(isinf(x));",lft=bt({opSnippet:aft,dtype:"bool"}),cft={kernelName:ZQ,backendName:"webgl",kernelFunc:lft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uft="return float(isnan(x));",dft=bt({opSnippet:uft,dtype:"bool"}),fft={kernelName:eJ,backendName:"webgl",kernelFunc:dft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hft="return float(a < b);",pft=`
  return vec4(lessThan(a, b));
`,mft=Sr({opSnippet:hft,packedOpSnippet:pft,cpuKernelImpl:Qot,dtype:"bool"}),gft={kernelName:nJ,backendName:"webgl",kernelFunc:mft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yft="return float(a <= b);",vft=`
  return vec4(lessThanEqual(a, b));
`,xft=Sr({opSnippet:yft,packedOpSnippet:vft,cpuKernelImpl:Jot,dtype:"bool"}),bft={kernelName:rJ,backendName:"webgl",kernelFunc:xft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wft(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=Zot(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const Sft={kernelName:sJ,backendName:"webgl",kernelFunc:wft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ft=tm+`
  return x < 0.0 ? 0./0. : log(x);
`,Cft=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,Nft=bt({opSnippet:_ft,packedOpSnippet:Cft,cpuKernelImpl:eat}),Eft={kernelName:iJ,backendName:"webgl",kernelFunc:Nft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tft=tm+`
  return log(1.0 + x);
`,Ift=bt({opSnippet:Tft}),kft={kernelName:oJ,backendName:"webgl",kernelFunc:Ift};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oft="return float(a >= 1.0 && b >= 1.0);",$ft=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Aft=Sr({opSnippet:Oft,packedOpSnippet:$ft,dtype:"bool"}),Pft={kernelName:aJ,backendName:"webgl",kernelFunc:Aft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rft="return float(!(x >= 1.0));",Dft=bt({opSnippet:Rft}),jft={kernelName:lJ,backendName:"webgl",kernelFunc:Dft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mft="return float(a >= 1.0 || b >= 1.0);",Lft=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Fft=Sr({opSnippet:Mft,packedOpSnippet:Lft,dtype:"bool"}),Bft={kernelName:cJ,backendName:"webgl",kernelFunc:Fft};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uft{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wft{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zft=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,c=X().getBool("WEBGL_PACK_NORMALIZATION")?new Wft(s.shape,i,o,a,l):new Uft(s.shape,i,o,a,l);return n.runWebGLProgram(c,[s],s.dtype)},Vft={kernelName:uJ,backendName:"webgl",kernelFunc:zft};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hft{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gft=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new Hft(s.shape,a,l,c,u);return n.runWebGLProgram(d,[s,i,o],s.dtype)},qft={kernelName:qqe,backendName:"webgl",kernelFunc:Gft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kft(t,e,n,r){const s=ce(e),o=ce(t.shape)/s,a=ye({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=qd(a,t.dtype,"max",r),c=ye({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qne(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,l=tr(i,s.shape);let c=l;const u=Li(c,a),d=u!=null,f=n.shouldExecuteOnCPU([s]);let p=s;if(d){if(f){const b=n.texData.get(p.dataId).values,w=new Array(a);for(let E=0;E<w.length;E++)w[E]=s.shape[u[E]];const _=yR(b,s.shape,s.dtype,u,w);p=n.makeTensorInfo(w,s.dtype);const C=n.texData.get(p.dataId);C.values=_}else p=$_(s,u,n);c=Fi(c.length,a)}Oo("max",c,a);const[m,g]=pa(p.shape,c);let y=m;o&&(y=ci(m,l));let v;if(f){const b=n.texData.get(p.dataId).values,w=tat(b,ce(g),y,s.dtype);v=n.makeTensorInfo(y,s.dtype);const _=n.texData.get(v.dataId);_.values=w}else v=Kft(p,g,y,n);return d&&n.disposeIntermediateTensorInfo(p),v}const Xft={kernelName:dJ,backendName:"webgl",kernelFunc:qne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yft=vR+`
  return max(a, b);
`,Qft=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Gd+`
  return result;
`,Jft=Sr({opSnippet:Yft,packedOpSnippet:Qft,cpuKernelImpl:nat}),Zft={kernelName:fJ,backendName:"webgl",kernelFunc:Jft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eht(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;ex(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;D(Ps(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Bd(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&gn(u.inShape,u.outShape))return Os({inputs:{x:s},backend:n});const d=new Zy(u,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const tht={kernelName:hJ,backendName:"webgl",kernelFunc:eht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nht(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=Xv(s.shape,i,o,u,a,c,l),f=new bR(d,"max",!1);return n.runWebGLProgram(f,[s],s.dtype)}const rht={kernelName:pJ,backendName:"webgl",kernelFunc:nht};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sht{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=o-1-e.padInfo.left,c=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class iht{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=c-1-e.padInfo.top,p=u-1-e.padInfo.left,m=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oht(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=Xv(o.shape,a,l,d,c,u),p=new bR(f,"max",!0),m=n.runWebGLProgram(p,[o],o.dtype),g=new iht(f),y=n.runWebGLProgram(g,[s,m],o.dtype);return n.disposeIntermediateTensorInfo(m),y}const aht={kernelName:Xqe,backendName:"webgl",kernelFunc:oht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lht(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;ex([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=Bd(a.shape,l,c,1,u,d),p=!0,m=new Zy(f,"max",p),g=n.runWebGLProgram(m,[a],a.dtype),y=new sht(f),v=n.runWebGLProgram(y,[s,g],a.dtype);return n.disposeIntermediateTensorInfo(g),v}const cht={kernelName:Kqe,backendName:"webgl",kernelFunc:lht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uht(t,e,n,r){let s=new Zy(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new Zy(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dht={kernelName:mJ,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;D(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];D(Ps(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Bd(r.shape,s,i,c,o),[d,f]=uht(r,a,u,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fht(t,e,n,r){const s=ce(e),o=ce(t.shape)/s,a=ye({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=qd(a,"float32","mean",r),c=ye({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hht={kernelName:gJ,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,l=tr(i,r.shape);let c=l;const u=Li(c,a),d=u!=null,f=o.shouldExecuteOnCPU([r]),p=[];let m=r;if(d){if(f){const w=o.texData.get(m.dataId).values,_=new Array(a);for(let N=0;N<_.length;N++)_[N]=r.shape[u[N]];const C=yR(w,r.shape,r.dtype,u,_);m=o.makeTensorInfo(_,r.dtype);const E=o.texData.get(m.dataId);E.values=C}else m=$_(r,u,o);p.push(m),c=Fi(c.length,a)}Oo("sum",c,a);const[g,y]=pa(m.shape,c);let v=g;s&&(v=ci(g,l));const x=fht(m,y,v,o);for(const b of p)o.disposeIntermediateTensorInfo(b);return x}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pht(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=tr(i,s.shape);let c=l;const u=Li(c,a);let d=s;u!=null&&(d=Gr({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Fi(c.length,s.shape.length)),Oo("min",c,a);const[f,p]=pa(d.shape,c),m=ce(p),g=ye({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=qd(g,g.dtype,"min",n);let v;if(o){const x=ci(f,l);v=ye({inputs:{x:y},backend:n,attrs:{shape:x}})}else v=ye({inputs:{x:y},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(d),v}const mht={kernelName:yJ,backendName:"webgl",kernelFunc:pht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ght=vR+`
  return min(a, b);
`,yht=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Gd+`
  return result;
`,vht=Sr({opSnippet:ght,packedOpSnippet:yht,cpuKernelImpl:rat}),xht={kernelName:vJ,backendName:"webgl",kernelFunc:vht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bht{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const s=e.length,i=Mt(s),o=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wht{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const s=e.length,i=Mt(s),o=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=zr("rc",s),c=zr("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,f=r==="reflect"?0:1;let p="";if(s===1){const m=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;p=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const m=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;p=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[s-1]} += 1;
          if(${u}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sht=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wht(r.shape,s,i):new bht(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},_ht={kernelName:xJ,backendName:"webgl",kernelFunc:Sht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cht=`if (b == 0.0) return NAN;
  return mod(a, b);`,Nht=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Gd+`
  return result;
`,Eht=Sr({opSnippet:Cht,packedOpSnippet:Nht}),Tht={kernelName:bJ,backendName:"webgl",kernelFunc:Eht};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iht{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kht=`
if (a == b) {
  return 1.0;
};
return a / b;`,Oht=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Kne=Sr({opSnippet:kht,packedOpSnippet:Oht,checkOutOfBounds:!0}),$ht={kernelName:AQ,backendName:"webgl",kernelFunc:Kne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yU="return a - b;",Xne=Sr({opSnippet:yU,packedOpSnippet:yU,supportsComplex:!0,cpuKernelImpl:Cat}),Aht={kernelName:SZ,backendName:"webgl",kernelFunc:Xne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yne(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=tr([i],s.shape),a=qne({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=ci(a.shape,o),c=ye({inputs:{x:a},backend:n,attrs:{shape:l}}),u=Xne({inputs:{a:s,b:c},backend:n}),d=Vne({inputs:{x:u},backend:n}),f=A_({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),p=ye({inputs:{x:f},backend:n,attrs:{shape:l}}),m=Kne({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}const Pht={kernelName:uZ,backendName:"webgl",kernelFunc:Yne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rht(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:Yne({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new Iht(c,u,i),f=[[o]],p=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),p}const Dht={kernelName:wJ,backendName:"webgl",kernelFunc:Rht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jht=Bi+`
  return -x;
`,Mht=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Lht(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=iat(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return X().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new ec(r.shape,Mht):s=new Vo(r.shape,jht),n.runWebGLProgram(s,[r],r.dtype)}const Fht={kernelName:_J,backendName:"webgl",kernelFunc:Lht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bht=Zee;function Uht(t){so("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),{selectedIndices:d}=Bht(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Wht={kernelName:NJ,backendName:"webgl",kernelFunc:Uht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zht=ete;function Vht(t){so("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),{selectedIndices:f,validOutputs:p}=zht(u,d,o,a,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const Hht={kernelName:EJ,backendName:"webgl",kernelFunc:Vht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ght=tte;function qht(t){so("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),f=o,p=a,m=l,g=c,{selectedIndices:y,selectedScores:v}=Ght(u,d,f,p,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const Kht={kernelName:TJ,backendName:"webgl",kernelFunc:qht};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xht{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yht=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r,c=ce(s.shape),u=new Xht(c,o,a,l),d=ye({inputs:{x:s},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(u,[d],i);n.disposeIntermediateTensorInfo(d);const p=[...s.shape,o],m=ye({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),m},Qht={kernelName:kJ,backendName:"webgl",kernelFunc:Yht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=nx({inputs:{input:r},backend:n}),i=f1({inputs:{x:s},backend:n}),o=P_({inputs:{input:r},backend:n}),a=f1({inputs:{x:o},backend:n}),l=Jc({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return rx({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const Jht={kernelName:OZ,backendName:"webgl",kernelFunc:f1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qne(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=nx({inputs:{input:r},backend:n}),i=Qne({inputs:{x:s},backend:n}),o=P_({inputs:{input:r},backend:n}),a=f1({inputs:{x:o},backend:n}),l=Jc({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return rx({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const Zht={kernelName:IJ,backendName:"webgl",kernelFunc:Qne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ept(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return qk({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{oi(i,u.shape,"All tensors passed to stack must have matching shapes"),D(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=qk({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(d),d}),c=jne({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const tpt={kernelName:OJ,backendName:"webgl",kernelFunc:ept};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class npt{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,i=Mt(s),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rpt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const s=e.length,i=Mt(s),o=n.map(g=>g[0]).join(","),a=n.map((g,y)=>g[0]+e[y]).join(","),l=zr("rc",s),c=zr("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],p=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let g=0,y=s===1?2:4;g<y;g++)m+=`
        ${f[g]}
        if (${p}) {
          result[${g}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;m+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jne=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(ce(s.shape)===0){const c=i.map((u,d)=>u[0]+s.shape[d]+u[1]);return rx({backend:n,attrs:{shape:c,value:o,dtype:s.dtype}})}const a=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rpt(s.shape,i,o):new npt(s.shape,i,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},spt={kernelName:$J,backendName:"webgl",kernelFunc:Jne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ipt=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,opt=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Gd+`
  return result;
`,apt=Sr({opSnippet:ipt,packedOpSnippet:opt}),lpt={kernelName:AJ,backendName:"webgl",kernelFunc:apt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cpt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=[],c=tr(i,s.shape);let u=c;const d=Li(u,a);let f=s;d!=null&&(f=Gr({inputs:{x:s},backend:n,attrs:{perm:d}}),u=Fi(u.length,a),l.push(f)),Oo("prod",u,a);let p;if(n.shouldExecuteOnCPU([f])){const m=n.texData.get(f.dataId).values,{outVals:g,outShape:y,outDtype:v}=aat(f.shape,f.dtype,m,u);p=n.makeTensorInfo(y,v,g)}else{const[m,g]=pa(f.shape,u),y=ce(g),v=ye({inputs:{x:f},backend:n,attrs:{shape:[-1,y]}}),x=R2(s.dtype),b=qd(v,x,"prod",n);p=ye({inputs:{x:b},backend:n,attrs:{shape:m}}),l.push(v),l.push(b)}if(o){l.push(p);const m=ci(p.shape,c);p=ye({inputs:{x:p},backend:n,attrs:{shape:m}})}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const upt={kernelName:RJ,backendName:"webgl",kernelFunc:cpt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dpt(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(v=>n.readSync(v.dataId)),c=s.map(v=>v.shape),u=n.readSync(i.dataId),d=n.readSync(o.dataId),[f,p,m]=lat(l,c,u,i.shape,i.dtype,d,o.shape,a),g=f.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(m,i.dtype,p);return g.concat([y])}const fpt={kernelName:DJ,backendName:"webgl",kernelFunc:dpt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hpt(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=cat(o,r.shape,r.dtype,a,s.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const ppt={kernelName:jJ,backendName:"webgl",kernelFunc:hpt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mpt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),d=n.readSync(o.dataId),f=a.map(y=>n.readSync(y.dataId)),p=a.map(y=>y.shape),[m,g]=uat(c,s.shape,u,i.shape,i.dtype,d,o.shape,f,p,l);return n.makeTensorInfo(m,i.dtype,g)}const gpt={kernelName:MJ,backendName:"webgl",kernelFunc:mpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zne=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=dat(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},ypt={kernelName:LJ,backendName:"webgl",kernelFunc:Zne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vpt="return 1.0 / x;",xpt=bt({opSnippet:vpt}),bpt={kernelName:BJ,backendName:"webgl",kernelFunc:xpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wpt=Bi+`
  return (x < 0.0) ? 0.0 : x;
`,Spt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_pt=bt({opSnippet:wpt,packedOpSnippet:Spt}),Cpt={kernelName:UJ,backendName:"webgl",kernelFunc:_pt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Npt=Bi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ept=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Tpt=bt({opSnippet:Npt,packedOpSnippet:Ept}),Ipt={kernelName:HJ,backendName:"webgl",kernelFunc:Tpt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kpt{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let f;i?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Opt{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let f;i?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $pt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=X().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Opt(s.shape,l,c,i,o):new kpt(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],"float32")}const Apt={kernelName:VJ,backendName:"webgl",kernelFunc:$pt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ppt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,p=1/d,m=Math.ceil(f)*2+2,g=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${p});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rpt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new Ppt(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const Dpt={kernelName:Qqe,backendName:"webgl",kernelFunc:Rpt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jpt{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],f=s?"0.5":"0.0";let p;i?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mpt{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],f=s?"0.5":"0.0";let p;i?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lpt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=X().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Mpt(s.shape,l,c,i,o):new jpt(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],s.dtype)}const Fpt={kernelName:zJ,backendName:"webgl",kernelFunc:Lpt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bpt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,p=1/d,m=Math.ceil(f)*2+2,g=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${p});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Upt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new Bpt(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const Wpt={kernelName:Yqe,backendName:"webgl",kernelFunc:Upt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zpt{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>s(l)).join(","),o=Mt(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vpt{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=zr("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Mt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${c(s.slice())};
          }
          if(${o}) {
            result.b = ${u(s.slice())};
            if(${i}) {
              result.a = ${d(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return f(m)}function c(m){return m[r-1]="("+m[r-1]+" + 1)",f(m)}function u(m){return m[r-2]="("+m[r-2]+" + 1)",f(m)}function d(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",f(m)}function f(m){const g=e.map((x,b)=>p(b,m)),y=g.join(","),v=g.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${v}))`}function p(m,g){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${g[m]} - 1`:`${g[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hpt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=tr(i,s.shape);if(o===0)return Os({inputs:{x:s},backend:n});const l=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vpt(s.shape,a):new zpt(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const Gpt={kernelName:GJ,backendName:"webgl",kernelFunc:Hpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qpt{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kpt={kernelName:AZ,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new qpt(r.shape,i),[c,u]=Tte(o,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xpt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Ypt=bt({opSnippet:Xpt}),Qpt={kernelName:qJ,backendName:"webgl",kernelFunc:Ypt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jpt="return inversesqrt(x);",Zpt=bt({opSnippet:Jpt,cpuKernelImpl:fat}),emt={kernelName:KJ,backendName:"webgl",kernelFunc:Zpt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wR{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Mt(i.length),u=Mt(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let p="";s===1?p="i":s===2&&(p="i, coords[1]");const m=`getUpdates(${p})`;let g="";l&&(g="coords[0], coords[1]");const y=`getDefaultValue(${g})`,v=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tmt{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Mt(i.length),u=Mt(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let p="";s===1?p="i":s===2&&(p="i, coords[1]");const m=`getUpdates(${p})`;let g="";l&&(g="coords[0], coords[1]");const y=`getDefaultValue(${g})`,v=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nmt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=__(i,s,o),f=[d/c,c];if(d===0)return n.makeTensorInfo(o,s.dtype);const p=ye({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),m=ye({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;X().getBool("WEBGL_PACK")?y=new tmt(l,a,p.shape.length,m.shape.length,u,f):y=new wR(l,a,p.shape.length,m.shape.length,u,f);const v=n.runWebGLProgram(y,[m,p,g],m.dtype),x=ye({inputs:{x:v},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),x}const rmt={kernelName:XJ,backendName:"webgl",kernelFunc:nmt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class smt{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=X().getNumber("WEBGL_VERSION")===2?i:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new smt(s.shape[0],s.shape[1],i.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",l)}const omt={kernelName:QJ,backendName:"webgl",kernelFunc:imt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class amt{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);s=l.join(),i=c.join()}const o=Mt(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lmt(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new amt(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],ia(s.dtype,i.dtype))}const cmt={kernelName:JJ,backendName:"webgl",kernelFunc:lmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const umt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Ote};
  float scale = ${$te};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,dmt=bt({opSnippet:umt}),fmt={kernelName:ZJ,backendName:"webgl",kernelFunc:dmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hmt=tm+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,pmt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mmt=bt({opSnippet:hmt,packedOpSnippet:pmt,cpuKernelImpl:pat}),gmt={kernelName:sZ,backendName:"webgl",kernelFunc:mmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ymt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,vmt=bt({opSnippet:ymt}),xmt={kernelName:rZ,backendName:"webgl",kernelFunc:vmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bmt=tm+`
  return sin(x);
`,wmt=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Gd}
  return result;
`,Smt=bt({opSnippet:bmt,packedOpSnippet:wmt}),_mt={kernelName:tZ,backendName:"webgl",kernelFunc:Smt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cmt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,Nmt=bt({opSnippet:Cmt}),Emt={kernelName:nZ,backendName:"webgl",kernelFunc:Nmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tmt=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Imt=bt({opSnippet:Tmt}),kmt={kernelName:iZ,backendName:"webgl",kernelFunc:Imt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Omt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;D(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((v,x)=>v*x),l=[[0,0]];l.push(...o);for(let v=1+i.length;v<s.shape.length;++v)l.push([0,0]);const c=[],u=Jne({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=cR(u.shape,i,a,!1),f=uR(d.length,i.length,!1),p=dR(u.shape,i,a,!1),m=ye({inputs:{x:u},backend:n,attrs:{shape:d}}),g=Gr({inputs:{x:m},backend:n,attrs:{perm:f}}),y=ye({inputs:{x:g},backend:n,attrs:{shape:p}});return c.push(u),c.push(m),c.push(g),c.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},$mt={kernelName:lZ,backendName:"webgl",kernelFunc:Omt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Amt(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],[d,f,p,m,g]=gat(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],s.dtype,p),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}const Pmt={kernelName:dZ,backendName:"webgl",kernelFunc:Amt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rmt(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,d]=yat(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const Dmt={kernelName:fZ,backendName:"webgl",kernelFunc:Rmt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jmt(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=_ne(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const Mmt={kernelName:hZ,backendName:"webgl",kernelFunc:jmt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lmt(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=_ne(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const Fmt={kernelName:pZ,backendName:"webgl",kernelFunc:Lmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bmt(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=__(i,s,a),p=!1;if(i.dtype==="string"){const v=n.bufferSync(s),x=n.bufferSync(i),b=Zh(n.readSync(o.dataId)[0]),w=hat(v,x,a,f,u,c,l,d,b,p);return n.makeTensorInfo(a,w.dtype,w.values)}const m=new wR(c,l,s.shape.length,i.shape.length,d,[f,1],p),g=n.runWebGLProgram(m,[i,s,o],i.dtype),y=ye({inputs:{x:g},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(g),y}const Umt={kernelName:mZ,backendName:"webgl",kernelFunc:Bmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=tr(o,s.shape)[0],l=zte(s,i,a),c=s.shape.length,u=new Array(c).fill(0),d=s.shape.slice();return l.map(f=>{const p=[...d];p[a]=f;const m=nm({inputs:{x:s},backend:n,attrs:{begin:u,size:p}});return u[a]+=f,m})}const zmt={kernelName:cZ,backendName:"webgl",kernelFunc:Wmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vU="return sqrt(x);",Vmt=bt({opSnippet:vU,packedOpSnippet:vU,cpuKernelImpl:vat}),Hmt={kernelName:oZ,backendName:"webgl",kernelFunc:Vmt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gmt="return x * x;",qmt=bt({opSnippet:Gmt}),Kmt={kernelName:Jqe,backendName:"webgl",kernelFunc:qmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xU="return (a - b) * (a - b);",Xmt=Sr({opSnippet:xU,packedOpSnippet:xU}),Ymt={kernelName:gZ,backendName:"webgl",kernelFunc:Xmt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),o=np(i),a=xat(o,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const Jmt={kernelName:yZ,backendName:"webgl",kernelFunc:Qmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zmt({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=Bi+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Vo(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const egt={kernelName:$Z,backendName:"webgl",kernelFunc:Zmt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tgt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=Mt(r.length),o=Mt(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ngt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:p,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:x,end:b,strides:w}=wte(s.shape,i,o,a,l,c,u,d,f);let _;if(g)_=ye({inputs:{x:s},backend:n,attrs:{shape:m}});else if(y||v){D(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const E=dte(x,b,w),N=nm({inputs:{x:s},backend:n,attrs:{begin:x,size:E}});_=ye({inputs:{x:N},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(N)}else if(n.shouldExecuteOnCPU([s])){const N=n.readSync(s.dataId),I=yn(s.shape,s.dtype,N),$=bat(p,I,w,x);_=n.makeTensorInfo(m,s.dtype,$.values)}else{const N=new tgt(x,w,p);_=n.runWebGLProgram(N,[s],s.dtype)}const C=ye({inputs:{x:_},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(_),C}const rgt={kernelName:vZ,backendName:"webgl",kernelFunc:ngt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sgt(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.readSync(u.dataId),p=n.readSync(d.dataId),[m,g]=wat(f,p,s,i,o,a,l,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}const igt={kernelName:xZ,backendName:"webgl",kernelFunc:sgt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ogt(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[c,u,d]=Sat(a,l,s),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const agt={kernelName:bZ,backendName:"webgl",kernelFunc:ogt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lgt(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=_at(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const cgt={kernelName:wZ,backendName:"webgl",kernelFunc:lgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ugt="return tan(x);",dgt=bt({opSnippet:ugt}),fgt={kernelName:_Z,backendName:"webgl",kernelFunc:dgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hgt=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,pgt=bt({opSnippet:hgt}),mgt={kernelName:CZ,backendName:"webgl",kernelFunc:pgt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ggt(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=__(o,i,s.shape),f=[d/c,c];if(d===0)return n.makeTensorInfo(s.shape,i.dtype);const p=ye({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),m=ye({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),g=ye({inputs:{x:s},backend:n,attrs:{shape:f}}),y=new wR(l,a,p.shape.length,m.shape.length,u,f,!1,!0),v=n.runWebGLProgram(y,[m,p,g],g.dtype),x=ye({inputs:{x:v},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),x}const ygt={kernelName:YJ,backendName:"webgl",kernelFunc:ggt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vgt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=Mt(this.rank),i=xgt(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function xgt(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ere(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(f=>Zh(f)):l,u=yn(s.shape,s.dtype,c),d=Nat(u,i);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new vgt(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const bgt={kernelName:A2,backendName:"webgl",kernelFunc:ere};class wgt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Sgt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iu(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function bU(t){let e=1;for(;e<t;)e*=2;return e}function _gt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=X().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=X().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<a||i>l){const $=n.readSync(s.dataId),[O,k]=Eat($,c,s.dtype,i,o);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(k.shape,k.dtype,k.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,rx({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),f=d!==null&&d.isPacked,p=f?n.unpackTensor(s):s,g=ce(c)/u,y=ye({inputs:{x:p},attrs:{shape:[g,u]},backend:n});f&&iu(n,p);const v=bU(i),x=bU(u);let b=null;const w=()=>b===null?[y,y]:[y,b],_=($,O,k)=>{const R=w(),M=new wgt(k),F=[[u],[b===null?1:0],[Number.NEGATIVE_INFINITY],[$],[O]],L=b;b=n.runWebGLProgram(M,R,"int32",F),iu(n,L)};for(let $=1;$<v;$*=2){const O=$*2;for(let k=$;k>=1;k/=2)_(O,k,[g,x])}for(let $=x;$>v;$/=2){const O=w(),k=new Sgt([g,$/2]),M=[[u],[b===null?1:0],[v]],B=b;b=n.runWebGLProgram(k,O,"int32",M),iu(n,B);const F=v/2,L=F*2;for(let P=F;P>=1;P/=2)_(L,P,b.shape)}let C=b;b=nm({inputs:{x:b},backend:n,attrs:{begin:0,size:[g,i]}}),iu(n,C);let E=Gne({inputs:{x:y,indices:b},backend:n,attrs:{axis:1,batchDims:1}});iu(n,y);const N=c.slice(0,-1);N.push(i),C=b,b=ye({inputs:{x:b},attrs:{shape:N},backend:n}),iu(n,C);const I=E;return E=ye({inputs:{x:E},attrs:{shape:N},backend:n}),iu(n,I),[E,b]}const Cgt={kernelName:NZ,backendName:"webgl",kernelFunc:_gt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ngt{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Egt(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,f,p]=s.shape,[m,g]=c??[d,f],y=[u,m,g,p],v=new Ngt(d,f,o,a,l,y);return n.runWebGLProgram(v,[s,i],"float32")}const Tgt={kernelName:EZ,backendName:"webgl",kernelFunc:Egt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Igt(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;ex(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:c}=Tat(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const kgt={kernelName:TZ,backendName:"webgl",kernelFunc:Igt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ogt(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],c=new Array(a-1);let u=0;for(let g=0;g<a;g++)g!==i&&(c[u++]=o.shape[g]);const d=[],f=new Array(a).fill(0),p=o.shape.slice();p[i]=1;const m=new Array(l);for(let g=0;g<m.length;g++){f[i]=g;const y=nm({inputs:{x:o},backend:n,attrs:{begin:f,size:p}}),v=ye({inputs:{x:y},backend:n,attrs:{shape:c}});m[g]=v,d.push(y)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const $gt={kernelName:IZ,backendName:"webgl",kernelFunc:Ogt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Agt{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pgt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,l=[];let c=0;const u=Li([c],a);let d=s;u!=null&&(d=Gr({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(d),c=Fi(1,a)[0]);const f=nne(d.shape,c,o),p=ce([d.shape[c]]),m=ye({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(m);const g=R2(s.dtype),y=(w,_,C,E,N)=>{const I=w.shape[0],$=w.shape[1],O=tne($,N),k={windowSize:O,inSize:$,batchSize:I,numSegments:N},R=new Agt(k,_),M=n.compileAndRun(R,[w,C],E);if(l.push(M),M.shape[1]===N)return M;const B=Zne({backend:n,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),F=ere({inputs:{x:B},backend:n,attrs:{reps:[$/O]}});return l.push(B),l.push(F),y(M,_,F,E,N)},v=y(m,"unsortedSegmentSum",i,g,o),x=ye({inputs:{x:v},backend:n,attrs:{shape:f}});let b=x;if(u!=null){l.push(x);const w=U2(u);b=Gr({inputs:{x:b},backend:n,attrs:{perm:w}})}return l.forEach(w=>n.disposeIntermediateTensorInfo(w)),b}const Rgt={kernelName:kZ,backendName:"webgl",kernelFunc:Pgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dgt=[vlt,blt,_lt,Elt,Ilt,$lt,Plt,Dlt,Flt,Ult,Vlt,qlt,Ylt,ect,rct,ict,act,dct,hct,mct,xct,Ect,Ict,Act,Rct,Bct,Wct,Gct,tlt,Xct,eut,sut,uut,hut,mut,yut,xut,_ut,Eut,kut,$ut,Put,Dut,Lut,But,Vut,Gut,Xut,Jut,edt,sdt,ldt,fdt,mdt,vdt,xdt,wdt,_dt,Ndt,Tdt,kdt,Pdt,jdt,Fdt,Udt,Vdt,qdt,Qdt,tft,elt,rft,Jct,oft,cft,fft,rlt,gft,bft,Sft,Eft,kft,Pft,jft,Bft,Vft,qft,Xft,Zft,tht,rht,aht,cht,dht,hht,mht,xht,_ht,Tht,Dht,olt,Fht,Wht,Hht,Kht,jct,Qht,Zht,tpt,spt,lpt,ilt,upt,fpt,ppt,gpt,ypt,Mct,$ht,bpt,Cpt,Ipt,llt,Apt,Dpt,Fpt,Wpt,Gpt,Kpt,Qpt,emt,rmt,omt,cmt,fmt,gmt,xmt,_mt,Emt,Cct,Pht,kmt,$mt,Pmt,Dmt,Mmt,Fmt,Umt,zmt,Hmt,Kmt,Ymt,Jmt,egt,rgt,igt,agt,cgt,Aht,mlt,fgt,mgt,ygt,bgt,Cgt,Tgt,glt,kgt,$gt,Rgt,Jht];for(const t of Dgt)tKe(t);const jgt=({examId:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState({}),[i,o]=S.useState(0),[a,l]=S.useState(0),[c,u]=S.useState("00:00:00"),[d,f]=S.useState(0),[p,m]=S.useState(0),[g,y]=S.useState(!1),[v,x]=S.useState(!0),[b,w]=S.useState(!1),[_,C]=S.useState(!1),[E,N]=S.useState(null),[I,$]=S.useState(!1),[O,k]=S.useState(!1),[R,M]=S.useState(0),[B,F]=S.useState(1),[L,P]=S.useState(!0),[W,q]=S.useState(!1),[H,Y]=S.useState(null),[se,Se]=S.useState(null),[De,Pe]=S.useState([]),[de,Ee]=S.useState(!1),J=S.useRef(null),ie=S.useRef(null),{toast:Z}=ii(),V=aa(),ge=S.useRef(null),ve=S.useRef(null),Fe=S.useRef(!1),[je,mt]=S.useState(!1);S.useEffect(()=>{(async()=>{if(t)try{const oe=await YP(t);if(oe.success){n(oe.exam);const Je={};(oe.exam.questions||[]).forEach(rr=>{Je[rr.id]=""}),s(Je),f(oe.exam.duration*60),oe.exam.sections&&oe.exam.sections.length>0&&m(oe.exam.sections[0].timeLimit*60)}}catch(oe){console.error("Error fetching exam:",oe),Z({title:"Error",description:"Failed to load exam data",variant:"destructive"}),V("/dashboard")}P(!1)})()},[t,V,Z]),S.useEffect(()=>{if(!e||v||b)return;const Q=setInterval(()=>{f(oe=>oe<=0?(clearInterval(Q),ma(),0):oe-1)},1e3);return()=>clearInterval(Q)},[e,v,b]),S.useEffect(()=>{if(!e||v||b||!e.sections)return;const Q=setInterval(()=>{m(oe=>oe<=0?(clearInterval(Q),Ui(),0):oe-1)},1e3);return()=>clearInterval(Q)},[e,a,v,b]),S.useEffect(()=>{if(d<=0){u("00:00:00");return}const Q=Math.floor(d/3600),oe=Math.floor(d%3600/60),Je=d%60;u(`${Q.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}:${Je.toString().padStart(2,"0")}`),d===300&&Z({title:"Time warning",description:"You have 5 minutes remaining.",variant:"destructive"})},[d,Z]);const Ot=()=>{if(p<=0)return"00:00:00";const Q=Math.floor(p/3600),oe=Math.floor(p%3600/60),Je=p%60;return`${Q.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}:${Je.toString().padStart(2,"0")}`},K=async Q=>{if(!J.current||!ie.current||W||v||b)return null;try{const oe=await I6e(J.current,Q);if(oe){const Je={type:Q,timestamp:new Date().toISOString(),imageUrl:oe};return Pe(vn=>[...vn,Je]),oe}return null}catch(oe){return console.error("Error capturing warning image:",oe),null}};S.useEffect(()=>{const Q=async()=>{document.fullscreenElement===null&&g&&!W&&(k(!0),M(oe=>oe+1),await K("Exited fullscreen"),document.documentElement.requestFullscreen().catch(oe=>{console.error("Error attempting to re-enable fullscreen:",oe)}),Z({title:"Warning",description:"Exiting fullscreen during the exam is not allowed!",variant:"destructive"})),y(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",Q),()=>document.removeEventListener("fullscreenchange",Q)},[g,Z,W]),S.useEffect(()=>{const Q=async()=>{document.visibilityState==="hidden"&&!v&&!b&&!W&&(M(oe=>oe+1),await K("Tab switched"),Z({title:"Warning",description:"Tab switching is not allowed during the exam!",variant:"destructive"}))};return document.addEventListener("visibilitychange",Q),()=>document.removeEventListener("visibilitychange",Q)},[v,b,Z,W]);const fe=async()=>{if(!Fe.current)try{return console.log("🔄 Loading BlazeFace model..."),Fe.current=!0,ve.current=await Urt(),console.log("✅ BlazeFace model loaded successfully"),ve.current}catch(Q){return console.error("❌ Error loading BlazeFace model:",Q),Z({title:"Face Detection Error",description:"Failed to initialize face detection. The exam will continue, but face monitoring may not work properly.",variant:"destructive"}),null}finally{Fe.current=!1}},Te=async()=>{if(console.log("Detect face"),!ve.current&&(await fe(),!ve.current))return{count:1};if(!J.current||!J.current.srcObject||J.current.readyState<2)return console.warn("Video element not ready for face detection"),{count:1};try{const Q=await ve.current.estimateFaces(J.current,!1);return console.log(`Detected faces: ${Q.length}`),{count:Q.length}}catch(Q){return console.error("BlazeFace detection error:",Q),{count:1,error:"Detection error"}}},Qe=()=>{ge.current&&clearInterval(ge.current),console.log("🚀 Starting face detection interval");const Q=window.setInterval(async()=>{var vn;if(console.log("🔁 Face detection interval running"),console.log({examComplete:W,isInstructionsOpen:v,isSectionIntroOpen:b,videoAvailable:!!J.current,streamAvailable:!!((vn=J.current)!=null&&vn.srcObject)}),W||v||b||!J.current||!J.current.srcObject){console.log("⛔️ Skipping detection due to one or more blocking conditions.");return}const Je=(await Te()).count;F(Je),console.log(`👤 Face detection check: ${Je} face(s)`),Je===0&&!W?(M(rr=>rr+1),k(!0),await K("No face detected"),Z({title:"Warning",description:"No face detected! Please ensure your face is visible.",variant:"destructive"})):Je>1&&!W&&(M(rr=>rr+1),k(!0),await K("Multiple faces detected"),Z({title:"Warning",description:"Multiple faces detected! Only you should be visible.",variant:"destructive"}))},5e3);ge.current=Q,console.log("✅ Face detection interval started"),Ee(!0)},_e=async()=>{try{if(console.log("📷 Initializing camera..."),E&&(console.log("🧹 Cleaning up existing camera stream"),E.getTracks().forEach(Je=>{console.log(`Stopping ${Je.kind} track`),Je.stop()}),N(null)),!J.current){console.error("❌ Video element reference not available - waiting for DOM update"),setTimeout(_e,100);return}J.current&&J.current.srcObject&&(console.log("🧹 Cleaning up video element"),J.current.srcObject=null);const Q={video:{width:{ideal:640},height:{ideal:480},facingMode:"user",frameRate:{ideal:10}},audio:!1};console.log("🎥 Requesting camera with constraints:",Q);const oe=await navigator.mediaDevices.getUserMedia(Q);if(console.log("✅ Camera access granted"),N(oe),!J.current){console.error("❌ Video element reference lost after stream acquisition");return}console.log("📹 Assigning stream to video element"),J.current.srcObject=oe,J.current.muted=!0,J.current.onerror=Je=>{console.error("❌ Video element error:",Je),$(!0)};try{console.log("▶️ Starting video playback"),await J.current.play(),console.log("✅ Video playback started"),mt(!0),await fe(),console.log("🔍 Setting up video readiness check"),gt()}catch(Je){console.error("❌ Error playing video:",Je),$(!0),Z({title:"Camera Error",description:"Could not start camera playback. Please reload the page and try again.",variant:"destructive"})}}catch(Q){console.error("❌ Camera access error:",Q),$(!0),Z({title:"Camera Required",description:"Camera access is required for this exam. Please allow camera access and reload the page.",variant:"destructive"})}},gt=()=>{if(!J.current){console.error("❌ Video reference lost during readiness check");return}const Q=J.current;Q&&Q.videoWidth>0&&Q.videoHeight>0&&Q.readyState>=2?console.log(`✅ Video is ready (size: ${Q.videoWidth}x${Q.videoHeight}, state: ${Q.readyState})`):(console.log(`🔄 Video not ready yet (size: ${Q.videoWidth}x${Q.videoHeight}, state: ${Q.readyState})`),setTimeout(gt,500))};S.useEffect(()=>{!v&&!b&&je&&!W&&(console.log("📸 All conditions met, starting face detection"),Qe())},[v,b,je,W]),S.useEffect(()=>()=>{console.log("🧹 Component unmounting, cleaning up resources"),E&&(console.log("Stopping camera stream tracks"),E.getTracks().forEach(Q=>{console.log(`Stopping ${Q.kind} track`),Q.stop()})),ge.current&&(console.log("Clearing face detection interval"),clearInterval(ge.current),ge.current=null)},[E]),S.useEffect(()=>{e&&R>=e.warningsThreshold&&(Z({title:"Warning Threshold Reached",description:"Auto-submitting exam due to excessive warnings",variant:"destructive"}),Yr())},[R,e]);const Ye=async()=>{Se(new Date);try{await document.documentElement.requestFullscreen(),y(!0)}catch(Q){console.error("Error attempting to enable fullscreen:",Q),Z({title:"Fullscreen required",description:"Please enable fullscreen to continue with the exam",variant:"destructive"});return}x(!1),setTimeout(()=>{_e()},100),e!=null&&e.sections&&e.sections.length>0&&w(!0)},zt=()=>{w(!1),o(0)},Ue=(Q,oe)=>{s({...r,[Q]:oe})},_t=Q=>{const Je=(e.sections?e.sections[a]:{questions:e.questions}).questions;Q==="prev"&&i>0?o(i-1):Q==="next"&&i<Je.length-1&&o(i+1)},An=Q=>{const Je=(e.sections?e.sections[a]:{questions:e.questions}).questions;Q>=0&&Q<Je.length&&o(Q)},nr=()=>{e.sections&&a<e.sections.length-1?(l(a+1),o(0),m(e.sections[a+1].timeLimit*60),w(!0)):C(!0)},Ui=()=>{Z({title:"Section time's up!",description:"Moving to the next section.",variant:"destructive"}),nr()},Xr=()=>{let Q=0;e.sections?e.sections.forEach(oe=>{oe.questions.forEach(Je=>{r[Je.id]||Q++})}):Q=Object.values(r).filter(oe=>oe==="").length,Q>0?Z({title:"Unanswered questions",description:`You have ${Q} unanswered questions. Are you sure you want to submit?`,action:h.jsx(ae,{variant:"destructive",onClick:()=>{C(!0)},children:"Submit Anyway"})}):C(!0)},Yr=async()=>{ge.current&&(clearInterval(ge.current),ge.current=null),Ee(!1);try{if(t){const Q=localStorage.getItem("examUser");if(Q){const oe=JSON.parse(Q),Je=new Date,vn=se?Math.round((Je.getTime()-se.getTime())/6e4):0,rr=await C6e(t,oe.id,r,R,De,(se==null?void 0:se.toISOString())||new Date().toISOString(),Je.toISOString(),vn);rr.success&&(Y(rr.submission),q(!0),document.fullscreenElement&&document.exitFullscreen().catch(ga=>{console.error("Error exiting fullscreen:",ga)}),E&&(E.getTracks().forEach(ga=>ga.stop()),N(null)),Z({title:"Exam submitted",description:"Your exam has been submitted successfully"}))}}}catch(Q){console.error("Error submitting exam:",Q),Z({title:"Error",description:"There was an error submitting your exam. Please try again.",variant:"destructive"})}},ma=()=>{ge.current&&(clearInterval(ge.current),ge.current=null),Ee(!1),Z({title:"Time's up!",description:"Your exam time has ended. Your answers will be automatically submitted.",variant:"destructive"}),Yr()};S.useEffect(()=>{const Q=oe=>{oe.preventDefault(),Z({title:"Action blocked",description:"Copying, cutting, and pasting are not allowed during the exam.",variant:"destructive"})};return document.addEventListener("copy",Q),document.addEventListener("cut",Q),document.addEventListener("paste",Q),()=>{document.removeEventListener("copy",Q),document.removeEventListener("cut",Q),document.removeEventListener("paste",Q)}},[]);const Wi=()=>{V("/dashboard")};if(L)return h.jsxs("div",{className:"flex justify-center items-center h-96",children:[h.jsx("div",{className:"h-8 w-8 rounded-full border-4 border-primary border-t-transparent animate-spin"}),h.jsx("p",{className:"ml-2 text-muted-foreground",children:"Loading exam..."})]});if(!e)return h.jsxs("div",{className:"text-center py-10",children:[h.jsx("p",{className:"text-muted-foreground",children:"Exam not found or access denied."}),h.jsx(ae,{variant:"outline",className:"mt-4",onClick:()=>V("/dashboard"),children:"Return to Dashboard"})]});if(W)return h.jsx("div",{className:"max-w-3xl mx-auto p-4",children:h.jsxs(Me,{children:[h.jsx(it,{className:"text-center",children:h.jsxs(ct,{className:"text-2xl",children:[e.title," - Results"]})}),h.jsxs(ot,{className:"space-y-6",children:[h.jsxs("div",{className:"bg-muted p-6 rounded-lg text-center",children:[h.jsx(zg,{className:"h-12 w-12 text-green-500 mx-auto mb-2"}),h.jsx("h3",{className:"text-xl font-semibold",children:"Exam Completed"}),h.jsx("p",{className:"text-muted-foreground",children:"Your answers have been submitted successfully"})]}),H?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs(Me,{className:"p-4",children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Score"}),h.jsxs("div",{className:"text-3xl font-bold",children:[H.score,"/",H.maxScore]})]}),h.jsxs(Me,{className:"p-4",children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Warnings"}),h.jsx("div",{className:"text-3xl font-bold text-amber-500",children:H.warningCount})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs(Me,{className:"p-4",children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Taken"}),h.jsxs("div",{className:"text-3xl font-bold",children:[H.timeTaken," min"]})]}),h.jsxs(Me,{className:"p-4",children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Percentage"}),h.jsxs("div",{className:"text-3xl font-bold",children:[H.percentage,"%"]})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium mb-1",children:"Performance"}),h.jsx(Kw,{value:H.score/H.maxScore*100,className:"h-2"}),h.jsxs("div",{className:"text-xs text-right mt-1",children:[Math.round(H.score/H.maxScore*100),"%"]})]})]}):h.jsx("div",{className:"text-center text-muted-foreground",children:"Results will be available soon."}),h.jsxs(of,{children:[h.jsx(hC,{className:"h-4 w-4"}),h.jsx(af,{children:"Feedback"}),h.jsx(lf,{children:"Your exam has been submitted. You can view your detailed results later from your dashboard."})]})]}),h.jsx(Ys,{children:h.jsx(ae,{className:"w-full",onClick:Wi,children:"Return to Dashboard"})})]})});if(v)return h.jsx("div",{className:"max-w-3xl mx-auto p-4",children:h.jsxs(Me,{children:[h.jsx(it,{className:"text-center",children:h.jsx(ct,{className:"text-2xl",children:e.title})}),h.jsxs(ot,{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Exam Instructions"}),h.jsx("ul",{className:"list-disc pl-6 space-y-2",children:e.instructions?e.instructions.map((Q,oe)=>h.jsx("li",{children:Q},oe)):h.jsxs(h.Fragment,{children:[h.jsxs("li",{children:["This exam contains ",e.sections?e.sections.reduce((Q,oe)=>Q+oe.questions.length,0):e.totalQuestions," questions and has a time limit of ",e.duration," minutes."]}),h.jsx("li",{children:"You must complete the exam in one session - do not close the browser or refresh the page."}),h.jsx("li",{children:"The exam will be in fullscreen mode. Attempts to exit fullscreen will be recorded."}),h.jsx("li",{children:"Your webcam will be active during the exam for proctoring purposes."}),h.jsx("li",{children:"Do not switch tabs or open other applications during the exam."}),h.jsx("li",{children:"Ensure you have a stable internet connection and a charged device."}),h.jsx("li",{children:"Use the navigation buttons to move between questions."}),h.jsx("li",{children:"Use the question panel to quickly jump to specific questions."}),h.jsx("li",{children:"You can submit your exam before the time expires."})]})})]}),h.jsxs(of,{children:[h.jsx(hC,{className:"h-4 w-4"}),h.jsx(af,{children:"Important"}),h.jsx(lf,{children:"By starting this exam, you consent to webcam monitoring and agree to follow the exam rules. Violations may result in disqualification."})]}),h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("p",{children:"Are you ready to begin the exam?"}),h.jsxs("div",{className:"flex justify-center space-x-2",children:[h.jsx(ae,{variant:"outline",onClick:()=>V("/dashboard"),children:"Cancel"}),h.jsx(ae,{onClick:Ye,children:"Start Exam"})]})]})]})]})});if(b){const Q=e.sections[a];return h.jsx("div",{className:"max-w-3xl mx-auto p-4",children:h.jsxs(Me,{children:[h.jsx(it,{className:"text-center",children:h.jsxs(ct,{children:["Section ",a+1,": ",Q.name]})}),h.jsxs(ot,{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Time Limit:"})," ",Q.timeLimit," minutes"]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Questions:"})," ",Q.questions.length]}),h.jsxs(of,{children:[h.jsx(hC,{className:"h-4 w-4"}),h.jsx(af,{children:"Section Information"}),h.jsx(lf,{children:"You must complete this section within the allocated time. Once you move to the next section, you cannot return to this section."})]})]}),h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("p",{children:"Are you ready to begin this section?"}),h.jsx("div",{className:"flex justify-center space-x-2",children:h.jsx(ae,{onClick:zt,children:"Start Section"})})]})]})]})})}const dn=e.sections?e.sections[a]:{questions:e.questions},nn=dn.questions[i],Ge=()=>dn?dn.questions.filter(oe=>r[oe.id]&&r[oe.id]!=="").length/dn.questions.length*100:0;return h.jsxs("div",{className:"fullscreen-exam flex flex-col h-screen",children:[h.jsxs("div",{className:"bg-card p-3 border-b flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"font-bold",children:e.title}),h.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[h.jsxs("span",{children:["Section ",a+1,"/",e.sections?e.sections.length:1,":"," ",dn.name||"Questions"]}),h.jsx("span",{className:"mx-2",children:"•"}),h.jsxs("span",{children:["Question ",i+1,"/",dn.questions.length]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[O&&h.jsxs(of,{className:"p-2 max-w-xs",children:[h.jsx(Lu,{className:"h-4 w-4 text-amber-500"}),h.jsx(af,{className:"text-amber-500",children:"Warning"}),h.jsxs(lf,{className:"text-sm",children:["Irregular behavior detected. Warnings: ",R]})]}),h.jsxs("div",{className:"flex flex-col items-end",children:[h.jsxs("div",{className:"flex items-center gap-1 text-lg font-semibold",children:[h.jsx(d$,{className:"h-5 w-5 text-primary"}),h.jsx("span",{children:c})]}),e.sections&&h.jsxs("div",{className:"text-xs text-muted-foreground",children:["Section: ",Ot()]})]})]})]}),h.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-4 gap-4 p-4 overflow-auto",children:[h.jsx("div",{className:"order-2 lg:order-1 lg:col-span-1",children:h.jsxs(Me,{className:"sticky top-4",children:[h.jsx(it,{className:"pb-2",children:h.jsxs(ct,{className:"text-base flex justify-between items-center",children:[h.jsx("span",{children:"Questions"}),e.sections&&h.jsxs(gr,{variant:"outline",children:["Section ",a+1,": ",dn.name||"Questions"]})]})}),h.jsxs(ot,{className:"space-y-2",children:[h.jsx("div",{className:"flex flex-wrap gap-2",children:dn.questions.map((Q,oe)=>h.jsx(ae,{variant:"outline",size:"sm",className:`w-10 h-10 p-0 ${oe===i?"bg-primary text-white":r[Q.id]?"bg-muted":""}`,onClick:()=>An(oe),children:oe+1},Q.id))}),h.jsxs("div",{className:"space-y-1 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),h.jsx("span",{children:"Current Question"})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"w-3 h-3 rounded-full bg-muted"}),h.jsx("span",{children:"Answered"})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"w-3 h-3 rounded-full border"}),h.jsx("span",{children:"Unanswered"})]})]}),h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"text-sm mb-1",children:"Section Progress"}),h.jsx(Kw,{value:Ge(),className:"h-2"}),h.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[dn.questions.filter(Q=>r[Q.id]&&r[Q.id]!=="").length," ","of"," ",dn.questions.length," answered"]})]}),h.jsxs("div",{className:"camera-container mt-4",children:[h.jsxs("div",{className:"mb-2 text-sm font-semibold flex items-center justify-between",children:[h.jsx("span",{children:"Camera Feed"}),h.jsx("div",{className:`h-2 w-2 rounded-full ${B===1?"bg-green-500 animate-pulse":"bg-red-500 animate-pulse"}`})]}),I?h.jsx("div",{className:"flex items-center justify-center h-32 bg-muted rounded-lg",children:h.jsxs("div",{className:"text-center",children:[h.jsx(hue,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Camera access required"})]})}):h.jsxs("div",{className:"relative",children:[h.jsx("video",{ref:J,autoPlay:!0,muted:!0,width:"640",height:"480",className:"w-full h-40 object-cover rounded-lg bg-gray-100"}),B!==1&&!v&&!b&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-lg",children:h.jsxs("div",{className:"text-white text-center",children:[h.jsx(Lu,{className:"h-8 w-8 mx-auto mb-1 text-amber-500"}),h.jsx("p",{className:"text-sm",children:B===0?"No face detected":"Multiple faces detected"})]})})]}),h.jsx("canvas",{ref:ie,className:"hidden",width:"640",height:"480"})]})]})]})}),h.jsx("div",{className:"order-1 lg:order-2 lg:col-span-3",children:h.jsxs(Me,{className:"h-full",children:[h.jsx(it,{children:h.jsxs(ct,{children:["Question ",i+1]})}),h.jsxs(ot,{className:"space-y-6",children:[h.jsx("div",{className:"text-lg font-medium",children:nn.text}),nn.type==="multiple-choice"&&h.jsx(Ww,{value:r[nn.id],onValueChange:Q=>Ue(nn.id,Q),className:"space-y-3",children:nn.options.map((Q,oe)=>h.jsxs("div",{className:"flex items-center space-x-2 border p-3 rounded-md",children:[h.jsx(yg,{value:String(oe),id:`option-${nn.id}-${oe}`}),h.jsx(xe,{htmlFor:`option-${nn.id}-${oe}`,className:"flex-grow cursor-pointer",children:Q})]},oe))}),nn.type==="true-false"&&h.jsxs(Ww,{value:r[nn.id],onValueChange:Q=>Ue(nn.id,Q),className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center space-x-2 border p-3 rounded-md",children:[h.jsx(yg,{value:"0",id:`true-${nn.id}`}),h.jsx(xe,{htmlFor:`true-${nn.id}`,className:"flex-grow cursor-pointer",children:"True"})]}),h.jsxs("div",{className:"flex items-center space-x-2 border p-3 rounded-md",children:[h.jsx(yg,{value:"1",id:`false-${nn.id}`}),h.jsx(xe,{htmlFor:`false-${nn.id}`,className:"flex-grow cursor-pointer",children:"False"})]})]}),nn.type==="short-answer"&&h.jsxs("div",{className:"space-y-2",children:[h.jsx(xe,{htmlFor:`answer-${nn.id}`,children:"Your Answer"}),h.jsx(Le,{id:`answer-${nn.id}`,value:r[nn.id],onChange:Q=>Ue(nn.id,Q.target.value),placeholder:"Type your answer here..."})]})]}),h.jsxs(Ys,{className:"flex justify-between border-t pt-4",children:[h.jsx("div",{children:h.jsx(ae,{variant:"outline",onClick:()=>_t("prev"),disabled:i===0,children:"Previous"})}),h.jsx("div",{children:i===dn.questions.length-1?e.sections&&a<e.sections.length-1?h.jsx(ae,{onClick:nr,children:"Next Section"}):h.jsx(ae,{onClick:Xr,children:"Submit Exam"}):h.jsx(ae,{onClick:()=>_t("next"),children:"Next"})})]})]})})]}),h.jsx(kr,{open:_,onOpenChange:C,children:h.jsxs(hr,{children:[h.jsxs(pr,{children:[h.jsx(mr,{children:"Submit Exam"}),h.jsx(rl,{children:"Are you sure you want to submit your exam? This action cannot be undone."})]}),h.jsxs("div",{className:"py-4",children:[h.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary",children:[h.jsx(zg,{className:"h-6 w-6"}),h.jsxs("span",{className:"text-lg font-medium",children:[Object.values(r).filter(Q=>Q!=="").length," of ",e.sections?e.sections.reduce((Q,oe)=>Q+oe.questions.length,0):e.questions?e.questions.length:e.totalQuestions," questions answered"]})]}),Object.values(r).some(Q=>Q==="")&&h.jsxs(of,{className:"mt-4",children:[h.jsx(Lu,{className:"h-4 w-4"}),h.jsx(af,{children:"Warning"}),h.jsxs(lf,{children:["You have ",Object.values(r).filter(Q=>Q==="").length," unanswered questions. Unanswered questions will be marked as incorrect."]})]})]}),h.jsxs(Qs,{children:[h.jsx(ae,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),h.jsx(ae,{onClick:Yr,children:"Submit Exam"})]})]})})]})},RN=({action:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(!0),{action:i,id:o}=qV(),a=aa(),l=t||i;if(S.useEffect(()=>{(async()=>{const d=await Rd();if(!d){a("/");return}n(d),s(!1)})()},[a]),S.useEffect(()=>{if(r)return;(()=>{if(l==="create"&&e!=="teacher"&&e!=="admin"){a("/dashboard");return}if(l==="monitor"&&e!=="teacher"&&e!=="admin"){a("/dashboard");return}if(l==="take"&&e!=="student"){a("/dashboard");return}})()},[l,e,r,a]),r)return h.jsxs("div",{className:"flex justify-center items-center h-screen",children:[h.jsx("div",{className:"h-8 w-8 rounded-full border-4 border-primary border-t-transparent animate-spin"}),h.jsx("p",{className:"ml-2 text-muted-foreground",children:"Loading..."})]});const c=()=>{switch(l){case"monitor":return h.jsx(_qe,{examId:o});case"take":return h.jsx(jgt,{examId:o});default:return a("/dashboard"),null}};return console.log("Exam component - action:",l,"id:",o),c()},Mgt=()=>{const t=hp();return S.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),h.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),h.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Lgt=new ace,Fgt=()=>h.jsx(cce,{client:Lgt,children:h.jsxs(OV,{children:[h.jsx(doe,{}),h.jsx(Vz,{}),h.jsx(sue,{children:h.jsxs(Qce,{children:[h.jsx(Ao,{path:"/",element:h.jsx(Mxe,{})}),h.jsx(Ao,{path:"/dashboard",element:h.jsx(bN,{})}),h.jsx(Ao,{path:"/dashboard/:section",element:h.jsx(bN,{})}),h.jsx(Ao,{path:"/dashboard/myexams",element:h.jsx(bN,{})}),h.jsx(Ao,{path:"/departments",element:h.jsx(Sqe,{})}),h.jsx(Ao,{path:"/exam/create",element:h.jsx(RN,{action:"create"})}),h.jsx(Ao,{path:"/exam/monitor/:id",element:h.jsx(RN,{action:"monitor"})}),h.jsx(Ao,{path:"/exam/take/:id",element:h.jsx(RN,{action:"take"})}),h.jsx(Ao,{path:"*",element:h.jsx(Mgt,{})})]})})]})});zz(document.getElementById("root")).render(h.jsx(Fgt,{}));
